var RT=Object.defineProperty;var Hx=e=>{throw TypeError(e)};var OT=(e,t,r)=>t in e?RT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Yc=(e,t,r)=>OT(e,typeof t!="symbol"?t+"":t,r),rf=(e,t,r)=>t.has(e)||Hx("Cannot "+r);var ee=(e,t,r)=>(rf(e,t,"read from private field"),r?r.call(e):t.get(e)),Xe=(e,t,r)=>t.has(e)?Hx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Te=(e,t,r,n)=>(rf(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),gr=(e,t,r)=>(rf(e,t,"access private method"),r);var Kc=(e,t,r,n)=>({set _(a){Te(e,t,a,r)},get _(){return ee(e,t,n)}});function Cb(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function Eb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function DT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var kb={exports:{}},Hu={},Tb={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jc=Symbol.for("react.element"),AT=Symbol.for("react.portal"),IT=Symbol.for("react.fragment"),MT=Symbol.for("react.strict_mode"),$T=Symbol.for("react.profiler"),LT=Symbol.for("react.provider"),FT=Symbol.for("react.context"),UT=Symbol.for("react.forward_ref"),BT=Symbol.for("react.suspense"),zT=Symbol.for("react.memo"),VT=Symbol.for("react.lazy"),qx=Symbol.iterator;function WT(e){return e===null||typeof e!="object"?null:(e=qx&&e[qx]||e["@@iterator"],typeof e=="function"?e:null)}var Pb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rb=Object.assign,Ob={};function Fi(e,t,r){this.props=e,this.context=t,this.refs=Ob,this.updater=r||Pb}Fi.prototype.isReactComponent={};Fi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Db(){}Db.prototype=Fi.prototype;function yg(e,t,r){this.props=e,this.context=t,this.refs=Ob,this.updater=r||Pb}var wg=yg.prototype=new Db;wg.constructor=yg;Rb(wg,Fi.prototype);wg.isPureReactComponent=!0;var Gx=Array.isArray,Ab=Object.prototype.hasOwnProperty,bg={current:null},Ib={key:!0,ref:!0,__self:!0,__source:!0};function Mb(e,t,r){var n,a={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Ab.call(t,n)&&!Ib.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:jc,type:e,key:o,ref:i,props:a,_owner:bg.current}}function HT(e,t){return{$$typeof:jc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jg(e){return typeof e=="object"&&e!==null&&e.$$typeof===jc}function qT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Yx=/\/+/g;function nf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qT(""+e.key):t.toString(36)}function Dd(e,t,r,n,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case jc:case AT:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+nf(i,0):n,Gx(a)?(r="",e!=null&&(r=e.replace(Yx,"$&/")+"/"),Dd(a,t,r,"",function(d){return d})):a!=null&&(jg(a)&&(a=HT(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Yx,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",Gx(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+nf(o,l);i+=Dd(o,t,r,c,a)}else if(c=WT(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+nf(o,l++),i+=Dd(o,t,r,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Qc(e,t,r){if(e==null)return e;var n=[],a=0;return Dd(e,n,"","",function(o){return t.call(r,o,a++)}),n}function GT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $r={current:null},Ad={transition:null},YT={ReactCurrentDispatcher:$r,ReactCurrentBatchConfig:Ad,ReactCurrentOwner:bg};function $b(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Qc,forEach:function(e,t,r){Qc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Qc(e,function(){t++}),t},toArray:function(e){return Qc(e,function(t){return t})||[]},only:function(e){if(!jg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ge.Component=Fi;Ge.Fragment=IT;Ge.Profiler=$T;Ge.PureComponent=yg;Ge.StrictMode=MT;Ge.Suspense=BT;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YT;Ge.act=$b;Ge.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Rb({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=bg.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Ab.call(t,c)&&!Ib.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:jc,type:e.type,key:a,ref:o,props:n,_owner:i}};Ge.createContext=function(e){return e={$$typeof:FT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:LT,_context:e},e.Consumer=e};Ge.createElement=Mb;Ge.createFactory=function(e){var t=Mb.bind(null,e);return t.type=e,t};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(e){return{$$typeof:UT,render:e}};Ge.isValidElement=jg;Ge.lazy=function(e){return{$$typeof:VT,_payload:{_status:-1,_result:e},_init:GT}};Ge.memo=function(e,t){return{$$typeof:zT,type:e,compare:t===void 0?null:t}};Ge.startTransition=function(e){var t=Ad.transition;Ad.transition={};try{e()}finally{Ad.transition=t}};Ge.unstable_act=$b;Ge.useCallback=function(e,t){return $r.current.useCallback(e,t)};Ge.useContext=function(e){return $r.current.useContext(e)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(e){return $r.current.useDeferredValue(e)};Ge.useEffect=function(e,t){return $r.current.useEffect(e,t)};Ge.useId=function(){return $r.current.useId()};Ge.useImperativeHandle=function(e,t,r){return $r.current.useImperativeHandle(e,t,r)};Ge.useInsertionEffect=function(e,t){return $r.current.useInsertionEffect(e,t)};Ge.useLayoutEffect=function(e,t){return $r.current.useLayoutEffect(e,t)};Ge.useMemo=function(e,t){return $r.current.useMemo(e,t)};Ge.useReducer=function(e,t,r){return $r.current.useReducer(e,t,r)};Ge.useRef=function(e){return $r.current.useRef(e)};Ge.useState=function(e){return $r.current.useState(e)};Ge.useSyncExternalStore=function(e,t,r){return $r.current.useSyncExternalStore(e,t,r)};Ge.useTransition=function(){return $r.current.useTransition()};Ge.version="18.3.1";Tb.exports=Ge;var h=Tb.exports;const oe=Eb(h),qu=Cb({__proto__:null,default:oe},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT=h,QT=Symbol.for("react.element"),JT=Symbol.for("react.fragment"),XT=Object.prototype.hasOwnProperty,ZT=KT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eP={key:!0,ref:!0,__self:!0,__source:!0};function Lb(e,t,r){var n,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)XT.call(t,n)&&!eP.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:QT,type:e,key:o,ref:i,props:a,_owner:ZT.current}}Hu.Fragment=JT;Hu.jsx=Lb;Hu.jsxs=Lb;kb.exports=Hu;var s=kb.exports,Fb={exports:{}},mn={},Ub={exports:{}},Bb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,A){var G=P.length;P.push(A);e:for(;0<G;){var _=G-1>>>1,C=P[_];if(0<a(C,A))P[_]=A,P[G]=C,G=_;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var A=P[0],G=P.pop();if(G!==A){P[0]=G;e:for(var _=0,C=P.length,L=C>>>1;_<L;){var W=2*(_+1)-1,Y=P[W],J=W+1,Q=P[J];if(0>a(Y,G))J<C&&0>a(Q,Y)?(P[_]=Q,P[J]=G,_=J):(P[_]=Y,P[W]=G,_=W);else if(J<C&&0>a(Q,G))P[_]=Q,P[J]=G,_=J;else break e}}return A}function a(P,A){var G=P.sortIndex-A.sortIndex;return G!==0?G:P.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,m=null,p=3,f=!1,y=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var A=r(d);A!==null;){if(A.callback===null)n(d);else if(A.startTime<=P)n(d),A.sortIndex=A.expirationTime,t(c,A);else break;A=r(d)}}function j(P){if(g=!1,b(P),!y)if(r(c)!==null)y=!0,$(k);else{var A=r(d);A!==null&&D(j,A.startTime-P)}}function k(P,A){y=!1,g&&(g=!1,w(E),E=-1),f=!0;var G=p;try{for(b(A),m=r(c);m!==null&&(!(m.expirationTime>A)||P&&!O());){var _=m.callback;if(typeof _=="function"){m.callback=null,p=m.priorityLevel;var C=_(m.expirationTime<=A);A=e.unstable_now(),typeof C=="function"?m.callback=C:m===r(c)&&n(c),b(A)}else n(c);m=r(c)}if(m!==null)var L=!0;else{var W=r(d);W!==null&&D(j,W.startTime-A),L=!1}return L}finally{m=null,p=G,f=!1}}var S=!1,N=null,E=-1,T=5,R=-1;function O(){return!(e.unstable_now()-R<T)}function F(){if(N!==null){var P=e.unstable_now();R=P;var A=!0;try{A=N(!0,P)}finally{A?M():(S=!1,N=null)}}else S=!1}var M;if(typeof v=="function")M=function(){v(F)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,B=I.port2;I.port1.onmessage=F,M=function(){B.postMessage(null)}}else M=function(){x(F,0)};function $(P){N=P,S||(S=!0,M())}function D(P,A){E=x(function(){P(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){y||f||(y=!0,$(k))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(P){switch(p){case 1:case 2:case 3:var A=3;break;default:A=p}var G=p;p=A;try{return P()}finally{p=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,A){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var G=p;p=P;try{return A()}finally{p=G}},e.unstable_scheduleCallback=function(P,A,G){var _=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?_+G:_):G=_,P){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=G+C,P={id:u++,callback:A,priorityLevel:P,startTime:G,expirationTime:C,sortIndex:-1},G>_?(P.sortIndex=G,t(d,P),r(c)===null&&P===r(d)&&(g?(w(E),E=-1):g=!0,D(j,G-_))):(P.sortIndex=C,t(c,P),y||f||(y=!0,$(k))),P},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(P){var A=p;return function(){var G=p;p=A;try{return P.apply(this,arguments)}finally{p=G}}}})(Bb);Ub.exports=Bb;var tP=Ub.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rP=h,hn=tP;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zb=new Set,Ul={};function po(e,t){ji(e,t),ji(e+"Capture",t)}function ji(e,t){for(Ul[e]=t,e=0;e<t.length;e++)zb.add(t[e])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cm=Object.prototype.hasOwnProperty,nP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kx={},Qx={};function sP(e){return Cm.call(Qx,e)?!0:Cm.call(Kx,e)?!1:nP.test(e)?Qx[e]=!0:(Kx[e]=!0,!1)}function aP(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oP(e,t,r,n){if(t===null||typeof t>"u"||aP(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lr(e,t,r,n,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mr[e]=new Lr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mr[t]=new Lr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mr[e]=new Lr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mr[e]=new Lr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mr[e]=new Lr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mr[e]=new Lr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mr[e]=new Lr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mr[e]=new Lr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mr[e]=new Lr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ng=/[\-:]([a-z])/g;function _g(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ng,_g);mr[t]=new Lr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ng,_g);mr[t]=new Lr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ng,_g);mr[t]=new Lr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mr[e]=new Lr(e,1,!1,e.toLowerCase(),null,!1,!1)});mr.xlinkHref=new Lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mr[e]=new Lr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sg(e,t,r,n){var a=mr.hasOwnProperty(t)?mr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(oP(t,r,a,n)&&(r=null),n||a===null?sP(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Us=rP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jc=Symbol.for("react.element"),Vo=Symbol.for("react.portal"),Wo=Symbol.for("react.fragment"),Cg=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),Vb=Symbol.for("react.provider"),Wb=Symbol.for("react.context"),Eg=Symbol.for("react.forward_ref"),km=Symbol.for("react.suspense"),Tm=Symbol.for("react.suspense_list"),kg=Symbol.for("react.memo"),Ks=Symbol.for("react.lazy"),Hb=Symbol.for("react.offscreen"),Jx=Symbol.iterator;function ol(e){return e===null||typeof e!="object"?null:(e=Jx&&e[Jx]||e["@@iterator"],typeof e=="function"?e:null)}var Pt=Object.assign,sf;function wl(e){if(sf===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);sf=t&&t[1]||""}return`
`+sf+e}var af=!1;function of(e,t){if(!e||af)return"";af=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),o=n.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{af=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?wl(e):""}function iP(e){switch(e.tag){case 5:return wl(e.type);case 16:return wl("Lazy");case 13:return wl("Suspense");case 19:return wl("SuspenseList");case 0:case 2:case 15:return e=of(e.type,!1),e;case 11:return e=of(e.type.render,!1),e;case 1:return e=of(e.type,!0),e;default:return""}}function Pm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wo:return"Fragment";case Vo:return"Portal";case Em:return"Profiler";case Cg:return"StrictMode";case km:return"Suspense";case Tm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Wb:return(e.displayName||"Context")+".Consumer";case Vb:return(e._context.displayName||"Context")+".Provider";case Eg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kg:return t=e.displayName||null,t!==null?t:Pm(e.type)||"Memo";case Ks:t=e._payload,e=e._init;try{return Pm(e(t))}catch{}}return null}function lP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pm(t);case 8:return t===Cg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cP(e){var t=qb(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xc(e){e._valueTracker||(e._valueTracker=cP(e))}function Gb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=qb(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Jd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rm(e,t){var r=t.checked;return Pt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Xx(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=xa(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yb(e,t){t=t.checked,t!=null&&Sg(e,"checked",t,!1)}function Om(e,t){Yb(e,t);var r=xa(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dm(e,t.type,r):t.hasOwnProperty("defaultValue")&&Dm(e,t.type,xa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Dm(e,t,r){(t!=="number"||Jd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bl=Array.isArray;function ni(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+xa(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Am(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Pt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function e0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ne(92));if(bl(r)){if(1<r.length)throw Error(ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:xa(r)}}function Kb(e,t){var r=xa(t.value),n=xa(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function t0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Im(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zc,Jb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zc=Zc||document.createElement("div"),Zc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var El={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dP=["Webkit","ms","Moz","O"];Object.keys(El).forEach(function(e){dP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),El[t]=El[e]})});function Xb(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||El.hasOwnProperty(e)&&El[e]?(""+t).trim():t+"px"}function Zb(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Xb(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var uP=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mm(e,t){if(t){if(uP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function $m(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lm=null;function Tg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fm=null,si=null,ai=null;function r0(e){if(e=Sc(e)){if(typeof Fm!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=Ju(t),Fm(e.stateNode,e.type,t))}}function ej(e){si?ai?ai.push(e):ai=[e]:si=e}function tj(){if(si){var e=si,t=ai;if(ai=si=null,r0(e),t)for(e=0;e<t.length;e++)r0(t[e])}}function rj(e,t){return e(t)}function nj(){}var lf=!1;function sj(e,t,r){if(lf)return e(t,r);lf=!0;try{return rj(e,t,r)}finally{lf=!1,(si!==null||ai!==null)&&(nj(),tj())}}function zl(e,t){var r=e.stateNode;if(r===null)return null;var n=Ju(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ne(231,t,typeof r));return r}var Um=!1;if(As)try{var il={};Object.defineProperty(il,"passive",{get:function(){Um=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{Um=!1}function hP(e,t,r,n,a,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var kl=!1,Xd=null,Zd=!1,Bm=null,fP={onError:function(e){kl=!0,Xd=e}};function mP(e,t,r,n,a,o,i,l,c){kl=!1,Xd=null,hP.apply(fP,arguments)}function pP(e,t,r,n,a,o,i,l,c){if(mP.apply(this,arguments),kl){if(kl){var d=Xd;kl=!1,Xd=null}else throw Error(ne(198));Zd||(Zd=!0,Bm=d)}}function go(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function aj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function n0(e){if(go(e)!==e)throw Error(ne(188))}function gP(e){var t=e.alternate;if(!t){if(t=go(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return n0(a),e;if(o===n)return n0(a),t;o=o.sibling}throw Error(ne(188))}if(r.return!==n.return)r=a,n=o;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=o;break}if(l===n){i=!0,n=a,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=a;break}if(l===n){i=!0,n=o,r=a;break}l=l.sibling}if(!i)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?e:t}function oj(e){return e=gP(e),e!==null?ij(e):null}function ij(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ij(e);if(t!==null)return t;e=e.sibling}return null}var lj=hn.unstable_scheduleCallback,s0=hn.unstable_cancelCallback,vP=hn.unstable_shouldYield,xP=hn.unstable_requestPaint,It=hn.unstable_now,yP=hn.unstable_getCurrentPriorityLevel,Pg=hn.unstable_ImmediatePriority,cj=hn.unstable_UserBlockingPriority,eu=hn.unstable_NormalPriority,wP=hn.unstable_LowPriority,dj=hn.unstable_IdlePriority,Gu=null,fs=null;function bP(e){if(fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(Gu,e,void 0,(e.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:_P,jP=Math.log,NP=Math.LN2;function _P(e){return e>>>=0,e===0?32:31-(jP(e)/NP|0)|0}var ed=64,td=4194304;function jl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?n=jl(l):(o&=i,o!==0&&(n=jl(o)))}else i=r&~a,i!==0?n=jl(i):o!==0&&(n=jl(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Wn(t),a=1<<r,n|=e[r],t&=~a;return n}function SP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CP(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Wn(o),l=1<<i,c=a[i];c===-1?(!(l&r)||l&n)&&(a[i]=SP(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function zm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uj(){var e=ed;return ed<<=1,!(ed&4194240)&&(ed=64),e}function cf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Nc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wn(t),e[t]=r}function EP(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Wn(r),o=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~o}}function Rg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Wn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ot=0;function hj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fj,Og,mj,pj,gj,Vm=!1,rd=[],da=null,ua=null,ha=null,Vl=new Map,Wl=new Map,Js=[],kP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a0(e,t){switch(e){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ua=null;break;case"mouseover":case"mouseout":ha=null;break;case"pointerover":case"pointerout":Vl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(t.pointerId)}}function ll(e,t,r,n,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Sc(t),t!==null&&Og(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function TP(e,t,r,n,a){switch(t){case"focusin":return da=ll(da,e,t,r,n,a),!0;case"dragenter":return ua=ll(ua,e,t,r,n,a),!0;case"mouseover":return ha=ll(ha,e,t,r,n,a),!0;case"pointerover":var o=a.pointerId;return Vl.set(o,ll(Vl.get(o)||null,e,t,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,Wl.set(o,ll(Wl.get(o)||null,e,t,r,n,a)),!0}return!1}function vj(e){var t=Wa(e.target);if(t!==null){var r=go(t);if(r!==null){if(t=r.tag,t===13){if(t=aj(r),t!==null){e.blockedOn=t,gj(e.priority,function(){mj(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Id(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Lm=n,r.target.dispatchEvent(n),Lm=null}else return t=Sc(r),t!==null&&Og(t),e.blockedOn=r,!1;t.shift()}return!0}function o0(e,t,r){Id(e)&&r.delete(t)}function PP(){Vm=!1,da!==null&&Id(da)&&(da=null),ua!==null&&Id(ua)&&(ua=null),ha!==null&&Id(ha)&&(ha=null),Vl.forEach(o0),Wl.forEach(o0)}function cl(e,t){e.blockedOn===t&&(e.blockedOn=null,Vm||(Vm=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,PP)))}function Hl(e){function t(a){return cl(a,e)}if(0<rd.length){cl(rd[0],e);for(var r=1;r<rd.length;r++){var n=rd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(da!==null&&cl(da,e),ua!==null&&cl(ua,e),ha!==null&&cl(ha,e),Vl.forEach(t),Wl.forEach(t),r=0;r<Js.length;r++)n=Js[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Js.length&&(r=Js[0],r.blockedOn===null);)vj(r),r.blockedOn===null&&Js.shift()}var oi=Us.ReactCurrentBatchConfig,ru=!0;function RP(e,t,r,n){var a=ot,o=oi.transition;oi.transition=null;try{ot=1,Dg(e,t,r,n)}finally{ot=a,oi.transition=o}}function OP(e,t,r,n){var a=ot,o=oi.transition;oi.transition=null;try{ot=4,Dg(e,t,r,n)}finally{ot=a,oi.transition=o}}function Dg(e,t,r,n){if(ru){var a=Wm(e,t,r,n);if(a===null)yf(e,t,n,nu,r),a0(e,n);else if(TP(a,e,t,r,n))n.stopPropagation();else if(a0(e,n),t&4&&-1<kP.indexOf(e)){for(;a!==null;){var o=Sc(a);if(o!==null&&fj(o),o=Wm(e,t,r,n),o===null&&yf(e,t,n,nu,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else yf(e,t,n,null,r)}}var nu=null;function Wm(e,t,r,n){if(nu=null,e=Tg(n),e=Wa(e),e!==null)if(t=go(e),t===null)e=null;else if(r=t.tag,r===13){if(e=aj(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nu=e,null}function xj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yP()){case Pg:return 1;case cj:return 4;case eu:case wP:return 16;case dj:return 536870912;default:return 16}default:return 16}}var ia=null,Ag=null,Md=null;function yj(){if(Md)return Md;var e,t=Ag,r=t.length,n,a="value"in ia?ia.value:ia.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[o-n];n++);return Md=a.slice(e,1<n?1-n:void 0)}function $d(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nd(){return!0}function i0(){return!1}function pn(e){function t(r,n,a,o,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?nd:i0,this.isPropagationStopped=i0,this}return Pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=nd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=nd)},persist:function(){},isPersistent:nd}),t}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ig=pn(Ui),_c=Pt({},Ui,{view:0,detail:0}),DP=pn(_c),df,uf,dl,Yu=Pt({},_c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dl&&(dl&&e.type==="mousemove"?(df=e.screenX-dl.screenX,uf=e.screenY-dl.screenY):uf=df=0,dl=e),df)},movementY:function(e){return"movementY"in e?e.movementY:uf}}),l0=pn(Yu),AP=Pt({},Yu,{dataTransfer:0}),IP=pn(AP),MP=Pt({},_c,{relatedTarget:0}),hf=pn(MP),$P=Pt({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),LP=pn($P),FP=Pt({},Ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),UP=pn(FP),BP=Pt({},Ui,{data:0}),c0=pn(BP),zP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=WP[e])?!!t[e]:!1}function Mg(){return HP}var qP=Pt({},_c,{key:function(e){if(e.key){var t=zP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$d(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?VP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mg,charCode:function(e){return e.type==="keypress"?$d(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$d(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),GP=pn(qP),YP=Pt({},Yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d0=pn(YP),KP=Pt({},_c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mg}),QP=pn(KP),JP=Pt({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),XP=pn(JP),ZP=Pt({},Yu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eR=pn(ZP),tR=[9,13,27,32],$g=As&&"CompositionEvent"in window,Tl=null;As&&"documentMode"in document&&(Tl=document.documentMode);var rR=As&&"TextEvent"in window&&!Tl,wj=As&&(!$g||Tl&&8<Tl&&11>=Tl),u0=" ",h0=!1;function bj(e,t){switch(e){case"keyup":return tR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ho=!1;function nR(e,t){switch(e){case"compositionend":return jj(t);case"keypress":return t.which!==32?null:(h0=!0,u0);case"textInput":return e=t.data,e===u0&&h0?null:e;default:return null}}function sR(e,t){if(Ho)return e==="compositionend"||!$g&&bj(e,t)?(e=yj(),Md=Ag=ia=null,Ho=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wj&&t.locale!=="ko"?null:t.data;default:return null}}var aR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aR[e.type]:t==="textarea"}function Nj(e,t,r,n){ej(n),t=su(t,"onChange"),0<t.length&&(r=new Ig("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Pl=null,ql=null;function oR(e){Aj(e,0)}function Ku(e){var t=Yo(e);if(Gb(t))return e}function iR(e,t){if(e==="change")return t}var _j=!1;if(As){var ff;if(As){var mf="oninput"in document;if(!mf){var m0=document.createElement("div");m0.setAttribute("oninput","return;"),mf=typeof m0.oninput=="function"}ff=mf}else ff=!1;_j=ff&&(!document.documentMode||9<document.documentMode)}function p0(){Pl&&(Pl.detachEvent("onpropertychange",Sj),ql=Pl=null)}function Sj(e){if(e.propertyName==="value"&&Ku(ql)){var t=[];Nj(t,ql,e,Tg(e)),sj(oR,t)}}function lR(e,t,r){e==="focusin"?(p0(),Pl=t,ql=r,Pl.attachEvent("onpropertychange",Sj)):e==="focusout"&&p0()}function cR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ku(ql)}function dR(e,t){if(e==="click")return Ku(t)}function uR(e,t){if(e==="input"||e==="change")return Ku(t)}function hR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yn=typeof Object.is=="function"?Object.is:hR;function Gl(e,t){if(Yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Cm.call(t,a)||!Yn(e[a],t[a]))return!1}return!0}function g0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function v0(e,t){var r=g0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=g0(r)}}function Cj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ej(){for(var e=window,t=Jd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Jd(e.document)}return t}function Lg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fR(e){var t=Ej(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Cj(r.ownerDocument.documentElement,r)){if(n!==null&&Lg(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!e.extend&&o>n&&(a=n,n=o,o=a),a=v0(r,o);var i=v0(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mR=As&&"documentMode"in document&&11>=document.documentMode,qo=null,Hm=null,Rl=null,qm=!1;function x0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qm||qo==null||qo!==Jd(n)||(n=qo,"selectionStart"in n&&Lg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Rl&&Gl(Rl,n)||(Rl=n,n=su(Hm,"onSelect"),0<n.length&&(t=new Ig("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=qo)))}function sd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Go={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},pf={},kj={};As&&(kj=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Qu(e){if(pf[e])return pf[e];if(!Go[e])return e;var t=Go[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in kj)return pf[e]=t[r];return e}var Tj=Qu("animationend"),Pj=Qu("animationiteration"),Rj=Qu("animationstart"),Oj=Qu("transitionend"),Dj=new Map,y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Na(e,t){Dj.set(e,t),po(t,[e])}for(var gf=0;gf<y0.length;gf++){var vf=y0[gf],pR=vf.toLowerCase(),gR=vf[0].toUpperCase()+vf.slice(1);Na(pR,"on"+gR)}Na(Tj,"onAnimationEnd");Na(Pj,"onAnimationIteration");Na(Rj,"onAnimationStart");Na("dblclick","onDoubleClick");Na("focusin","onFocus");Na("focusout","onBlur");Na(Oj,"onTransitionEnd");ji("onMouseEnter",["mouseout","mouseover"]);ji("onMouseLeave",["mouseout","mouseover"]);ji("onPointerEnter",["pointerout","pointerover"]);ji("onPointerLeave",["pointerout","pointerover"]);po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));po("onBeforeInput",["compositionend","keypress","textInput","paste"]);po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nl));function w0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,pP(n,t,void 0,e),e.currentTarget=null}function Aj(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;w0(a,l,d),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;w0(a,l,d),o=c}}}if(Zd)throw e=Bm,Zd=!1,Bm=null,e}function bt(e,t){var r=t[Jm];r===void 0&&(r=t[Jm]=new Set);var n=e+"__bubble";r.has(n)||(Ij(t,e,2,!1),r.add(n))}function xf(e,t,r){var n=0;t&&(n|=4),Ij(r,e,n,t)}var ad="_reactListening"+Math.random().toString(36).slice(2);function Yl(e){if(!e[ad]){e[ad]=!0,zb.forEach(function(r){r!=="selectionchange"&&(vR.has(r)||xf(r,!1,e),xf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ad]||(t[ad]=!0,xf("selectionchange",!1,t))}}function Ij(e,t,r,n){switch(xj(t)){case 1:var a=RP;break;case 4:a=OP;break;default:a=Dg}r=a.bind(null,t,r,e),a=void 0,!Um||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function yf(e,t,r,n,a){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Wa(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}sj(function(){var d=o,u=Tg(r),m=[];e:{var p=Dj.get(e);if(p!==void 0){var f=Ig,y=e;switch(e){case"keypress":if($d(r)===0)break e;case"keydown":case"keyup":f=GP;break;case"focusin":y="focus",f=hf;break;case"focusout":y="blur",f=hf;break;case"beforeblur":case"afterblur":f=hf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=l0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=IP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=QP;break;case Tj:case Pj:case Rj:f=LP;break;case Oj:f=XP;break;case"scroll":f=DP;break;case"wheel":f=eR;break;case"copy":case"cut":case"paste":f=UP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=d0}var g=(t&4)!==0,x=!g&&e==="scroll",w=g?p!==null?p+"Capture":null:p;g=[];for(var v=d,b;v!==null;){b=v;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,w!==null&&(j=zl(v,w),j!=null&&g.push(Kl(v,j,b)))),x)break;v=v.return}0<g.length&&(p=new f(p,y,null,r,u),m.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&r!==Lm&&(y=r.relatedTarget||r.fromElement)&&(Wa(y)||y[Is]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(y=r.relatedTarget||r.toElement,f=d,y=y?Wa(y):null,y!==null&&(x=go(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=d),f!==y)){if(g=l0,j="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=d0,j="onPointerLeave",w="onPointerEnter",v="pointer"),x=f==null?p:Yo(f),b=y==null?p:Yo(y),p=new g(j,v+"leave",f,r,u),p.target=x,p.relatedTarget=b,j=null,Wa(u)===d&&(g=new g(w,v+"enter",y,r,u),g.target=b,g.relatedTarget=x,j=g),x=j,f&&y)t:{for(g=f,w=y,v=0,b=g;b;b=jo(b))v++;for(b=0,j=w;j;j=jo(j))b++;for(;0<v-b;)g=jo(g),v--;for(;0<b-v;)w=jo(w),b--;for(;v--;){if(g===w||w!==null&&g===w.alternate)break t;g=jo(g),w=jo(w)}g=null}else g=null;f!==null&&b0(m,p,f,g,!1),y!==null&&x!==null&&b0(m,x,y,g,!0)}}e:{if(p=d?Yo(d):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var k=iR;else if(f0(p))if(_j)k=uR;else{k=cR;var S=lR}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=dR);if(k&&(k=k(e,d))){Nj(m,k,r,u);break e}S&&S(e,p,d),e==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&Dm(p,"number",p.value)}switch(S=d?Yo(d):window,e){case"focusin":(f0(S)||S.contentEditable==="true")&&(qo=S,Hm=d,Rl=null);break;case"focusout":Rl=Hm=qo=null;break;case"mousedown":qm=!0;break;case"contextmenu":case"mouseup":case"dragend":qm=!1,x0(m,r,u);break;case"selectionchange":if(mR)break;case"keydown":case"keyup":x0(m,r,u)}var N;if($g)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ho?bj(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(wj&&r.locale!=="ko"&&(Ho||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ho&&(N=yj()):(ia=u,Ag="value"in ia?ia.value:ia.textContent,Ho=!0)),S=su(d,E),0<S.length&&(E=new c0(E,e,null,r,u),m.push({event:E,listeners:S}),N?E.data=N:(N=jj(r),N!==null&&(E.data=N)))),(N=rR?nR(e,r):sR(e,r))&&(d=su(d,"onBeforeInput"),0<d.length&&(u=new c0("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=N))}Aj(m,t)})}function Kl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function su(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=zl(e,r),o!=null&&n.unshift(Kl(e,o,a)),o=zl(e,t),o!=null&&n.push(Kl(e,o,a))),e=e.return}return n}function jo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function b0(e,t,r,n,a){for(var o=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=zl(r,o),c!=null&&i.unshift(Kl(r,c,l))):a||(c=zl(r,o),c!=null&&i.push(Kl(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var xR=/\r\n?/g,yR=/\u0000|\uFFFD/g;function j0(e){return(typeof e=="string"?e:""+e).replace(xR,`
`).replace(yR,"")}function od(e,t,r){if(t=j0(t),j0(e)!==t&&r)throw Error(ne(425))}function au(){}var Gm=null,Ym=null;function Km(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qm=typeof setTimeout=="function"?setTimeout:void 0,wR=typeof clearTimeout=="function"?clearTimeout:void 0,N0=typeof Promise=="function"?Promise:void 0,bR=typeof queueMicrotask=="function"?queueMicrotask:typeof N0<"u"?function(e){return N0.resolve(null).then(e).catch(jR)}:Qm;function jR(e){setTimeout(function(){throw e})}function wf(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Hl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Hl(t)}function fa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Bi=Math.random().toString(36).slice(2),cs="__reactFiber$"+Bi,Ql="__reactProps$"+Bi,Is="__reactContainer$"+Bi,Jm="__reactEvents$"+Bi,NR="__reactListeners$"+Bi,_R="__reactHandles$"+Bi;function Wa(e){var t=e[cs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Is]||r[cs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=_0(e);e!==null;){if(r=e[cs])return r;e=_0(e)}return t}e=r,r=e.parentNode}return null}function Sc(e){return e=e[cs]||e[Is],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function Ju(e){return e[Ql]||null}var Xm=[],Ko=-1;function _a(e){return{current:e}}function jt(e){0>Ko||(e.current=Xm[Ko],Xm[Ko]=null,Ko--)}function pt(e,t){Ko++,Xm[Ko]=e.current,e.current=t}var ya={},Nr=_a(ya),Gr=_a(!1),no=ya;function Ni(e,t){var r=e.type.contextTypes;if(!r)return ya;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Yr(e){return e=e.childContextTypes,e!=null}function ou(){jt(Gr),jt(Nr)}function S0(e,t,r){if(Nr.current!==ya)throw Error(ne(168));pt(Nr,t),pt(Gr,r)}function Mj(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ne(108,lP(e)||"Unknown",a));return Pt({},r,n)}function iu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ya,no=Nr.current,pt(Nr,e),pt(Gr,Gr.current),!0}function C0(e,t,r){var n=e.stateNode;if(!n)throw Error(ne(169));r?(e=Mj(e,t,no),n.__reactInternalMemoizedMergedChildContext=e,jt(Gr),jt(Nr),pt(Nr,e)):jt(Gr),pt(Gr,r)}var ks=null,Xu=!1,bf=!1;function $j(e){ks===null?ks=[e]:ks.push(e)}function SR(e){Xu=!0,$j(e)}function Sa(){if(!bf&&ks!==null){bf=!0;var e=0,t=ot;try{var r=ks;for(ot=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ks=null,Xu=!1}catch(a){throw ks!==null&&(ks=ks.slice(e+1)),lj(Pg,Sa),a}finally{ot=t,bf=!1}}return null}var Qo=[],Jo=0,lu=null,cu=0,bn=[],jn=0,so=null,Ps=1,Rs="";function Ma(e,t){Qo[Jo++]=cu,Qo[Jo++]=lu,lu=e,cu=t}function Lj(e,t,r){bn[jn++]=Ps,bn[jn++]=Rs,bn[jn++]=so,so=e;var n=Ps;e=Rs;var a=32-Wn(n)-1;n&=~(1<<a),r+=1;var o=32-Wn(t)+a;if(30<o){var i=a-a%5;o=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Ps=1<<32-Wn(t)+a|r<<a|n,Rs=o+e}else Ps=1<<o|r<<a|n,Rs=e}function Fg(e){e.return!==null&&(Ma(e,1),Lj(e,1,0))}function Ug(e){for(;e===lu;)lu=Qo[--Jo],Qo[Jo]=null,cu=Qo[--Jo],Qo[Jo]=null;for(;e===so;)so=bn[--jn],bn[jn]=null,Rs=bn[--jn],bn[jn]=null,Ps=bn[--jn],bn[jn]=null}var ln=null,on=null,St=!1,Vn=null;function Fj(e,t){var r=_n(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function E0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ln=e,on=fa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ln=e,on=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=so!==null?{id:Ps,overflow:Rs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=_n(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ln=e,on=null,!0):!1;default:return!1}}function Zm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ep(e){if(St){var t=on;if(t){var r=t;if(!E0(e,t)){if(Zm(e))throw Error(ne(418));t=fa(r.nextSibling);var n=ln;t&&E0(e,t)?Fj(n,r):(e.flags=e.flags&-4097|2,St=!1,ln=e)}}else{if(Zm(e))throw Error(ne(418));e.flags=e.flags&-4097|2,St=!1,ln=e}}}function k0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ln=e}function id(e){if(e!==ln)return!1;if(!St)return k0(e),St=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Km(e.type,e.memoizedProps)),t&&(t=on)){if(Zm(e))throw Uj(),Error(ne(418));for(;t;)Fj(e,t),t=fa(t.nextSibling)}if(k0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){on=fa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}on=null}}else on=ln?fa(e.stateNode.nextSibling):null;return!0}function Uj(){for(var e=on;e;)e=fa(e.nextSibling)}function _i(){on=ln=null,St=!1}function Bg(e){Vn===null?Vn=[e]:Vn.push(e)}var CR=Us.ReactCurrentBatchConfig;function ul(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,e));var a=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,e))}return e}function ld(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function T0(e){var t=e._init;return t(e._payload)}function Bj(e){function t(w,v){if(e){var b=w.deletions;b===null?(w.deletions=[v],w.flags|=16):b.push(v)}}function r(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function n(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function a(w,v){return w=va(w,v),w.index=0,w.sibling=null,w}function o(w,v,b){return w.index=b,e?(b=w.alternate,b!==null?(b=b.index,b<v?(w.flags|=2,v):b):(w.flags|=2,v)):(w.flags|=1048576,v)}function i(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,v,b,j){return v===null||v.tag!==6?(v=kf(b,w.mode,j),v.return=w,v):(v=a(v,b),v.return=w,v)}function c(w,v,b,j){var k=b.type;return k===Wo?u(w,v,b.props.children,j,b.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ks&&T0(k)===v.type)?(j=a(v,b.props),j.ref=ul(w,v,b),j.return=w,j):(j=Wd(b.type,b.key,b.props,null,w.mode,j),j.ref=ul(w,v,b),j.return=w,j)}function d(w,v,b,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Tf(b,w.mode,j),v.return=w,v):(v=a(v,b.children||[]),v.return=w,v)}function u(w,v,b,j,k){return v===null||v.tag!==7?(v=to(b,w.mode,j,k),v.return=w,v):(v=a(v,b),v.return=w,v)}function m(w,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=kf(""+v,w.mode,b),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jc:return b=Wd(v.type,v.key,v.props,null,w.mode,b),b.ref=ul(w,null,v),b.return=w,b;case Vo:return v=Tf(v,w.mode,b),v.return=w,v;case Ks:var j=v._init;return m(w,j(v._payload),b)}if(bl(v)||ol(v))return v=to(v,w.mode,b,null),v.return=w,v;ld(w,v)}return null}function p(w,v,b,j){var k=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:l(w,v,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jc:return b.key===k?c(w,v,b,j):null;case Vo:return b.key===k?d(w,v,b,j):null;case Ks:return k=b._init,p(w,v,k(b._payload),j)}if(bl(b)||ol(b))return k!==null?null:u(w,v,b,j,null);ld(w,b)}return null}function f(w,v,b,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(b)||null,l(v,w,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Jc:return w=w.get(j.key===null?b:j.key)||null,c(v,w,j,k);case Vo:return w=w.get(j.key===null?b:j.key)||null,d(v,w,j,k);case Ks:var S=j._init;return f(w,v,b,S(j._payload),k)}if(bl(j)||ol(j))return w=w.get(b)||null,u(v,w,j,k,null);ld(v,j)}return null}function y(w,v,b,j){for(var k=null,S=null,N=v,E=v=0,T=null;N!==null&&E<b.length;E++){N.index>E?(T=N,N=null):T=N.sibling;var R=p(w,N,b[E],j);if(R===null){N===null&&(N=T);break}e&&N&&R.alternate===null&&t(w,N),v=o(R,v,E),S===null?k=R:S.sibling=R,S=R,N=T}if(E===b.length)return r(w,N),St&&Ma(w,E),k;if(N===null){for(;E<b.length;E++)N=m(w,b[E],j),N!==null&&(v=o(N,v,E),S===null?k=N:S.sibling=N,S=N);return St&&Ma(w,E),k}for(N=n(w,N);E<b.length;E++)T=f(N,w,E,b[E],j),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?E:T.key),v=o(T,v,E),S===null?k=T:S.sibling=T,S=T);return e&&N.forEach(function(O){return t(w,O)}),St&&Ma(w,E),k}function g(w,v,b,j){var k=ol(b);if(typeof k!="function")throw Error(ne(150));if(b=k.call(b),b==null)throw Error(ne(151));for(var S=k=null,N=v,E=v=0,T=null,R=b.next();N!==null&&!R.done;E++,R=b.next()){N.index>E?(T=N,N=null):T=N.sibling;var O=p(w,N,R.value,j);if(O===null){N===null&&(N=T);break}e&&N&&O.alternate===null&&t(w,N),v=o(O,v,E),S===null?k=O:S.sibling=O,S=O,N=T}if(R.done)return r(w,N),St&&Ma(w,E),k;if(N===null){for(;!R.done;E++,R=b.next())R=m(w,R.value,j),R!==null&&(v=o(R,v,E),S===null?k=R:S.sibling=R,S=R);return St&&Ma(w,E),k}for(N=n(w,N);!R.done;E++,R=b.next())R=f(N,w,E,R.value,j),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?E:R.key),v=o(R,v,E),S===null?k=R:S.sibling=R,S=R);return e&&N.forEach(function(F){return t(w,F)}),St&&Ma(w,E),k}function x(w,v,b,j){if(typeof b=="object"&&b!==null&&b.type===Wo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Jc:e:{for(var k=b.key,S=v;S!==null;){if(S.key===k){if(k=b.type,k===Wo){if(S.tag===7){r(w,S.sibling),v=a(S,b.props.children),v.return=w,w=v;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ks&&T0(k)===S.type){r(w,S.sibling),v=a(S,b.props),v.ref=ul(w,S,b),v.return=w,w=v;break e}r(w,S);break}else t(w,S);S=S.sibling}b.type===Wo?(v=to(b.props.children,w.mode,j,b.key),v.return=w,w=v):(j=Wd(b.type,b.key,b.props,null,w.mode,j),j.ref=ul(w,v,b),j.return=w,w=j)}return i(w);case Vo:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(w,v.sibling),v=a(v,b.children||[]),v.return=w,w=v;break e}else{r(w,v);break}else t(w,v);v=v.sibling}v=Tf(b,w.mode,j),v.return=w,w=v}return i(w);case Ks:return S=b._init,x(w,v,S(b._payload),j)}if(bl(b))return y(w,v,b,j);if(ol(b))return g(w,v,b,j);ld(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(w,v.sibling),v=a(v,b),v.return=w,w=v):(r(w,v),v=kf(b,w.mode,j),v.return=w,w=v),i(w)):r(w,v)}return x}var Si=Bj(!0),zj=Bj(!1),du=_a(null),uu=null,Xo=null,zg=null;function Vg(){zg=Xo=uu=null}function Wg(e){var t=du.current;jt(du),e._currentValue=t}function tp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ii(e,t){uu=e,zg=Xo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Hr=!0),e.firstContext=null)}function Tn(e){var t=e._currentValue;if(zg!==e)if(e={context:e,memoizedValue:t,next:null},Xo===null){if(uu===null)throw Error(ne(308));Xo=e,uu.dependencies={lanes:0,firstContext:e}}else Xo=Xo.next=e;return t}var Ha=null;function Hg(e){Ha===null?Ha=[e]:Ha.push(e)}function Vj(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Hg(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ms(e,n)}function Ms(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Qs=!1;function qg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ma(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ze&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ms(e,r)}return a=n.interleaved,a===null?(t.next=t,Hg(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ms(e,r)}function Ld(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Rg(e,r)}}function P0(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function hu(e,t,r,n){var a=e.updateQueue;Qs=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=a.baseState;i=0,u=d=c=null,l=o;do{var p=l.lane,f=l.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,g=l;switch(p=t,f=r,g.tag){case 1:if(y=g.payload,typeof y=="function"){m=y.call(f,m,p);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(f,m,p):y,p==null)break e;m=Pt({},m,p);break e;case 2:Qs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=f,c=m):u=u.next=f,i|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);oo|=i,e.lanes=i,e.memoizedState=m}}function R0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ne(191,a));a.call(n)}}}var Cc={},ms=_a(Cc),Jl=_a(Cc),Xl=_a(Cc);function qa(e){if(e===Cc)throw Error(ne(174));return e}function Gg(e,t){switch(pt(Xl,t),pt(Jl,e),pt(ms,Cc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Im(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Im(t,e)}jt(ms),pt(ms,t)}function Ci(){jt(ms),jt(Jl),jt(Xl)}function Hj(e){qa(Xl.current);var t=qa(ms.current),r=Im(t,e.type);t!==r&&(pt(Jl,e),pt(ms,r))}function Yg(e){Jl.current===e&&(jt(ms),jt(Jl))}var kt=_a(0);function fu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jf=[];function Kg(){for(var e=0;e<jf.length;e++)jf[e]._workInProgressVersionPrimary=null;jf.length=0}var Fd=Us.ReactCurrentDispatcher,Nf=Us.ReactCurrentBatchConfig,ao=0,Tt=null,Gt=null,er=null,mu=!1,Ol=!1,Zl=0,ER=0;function vr(){throw Error(ne(321))}function Qg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Yn(e[r],t[r]))return!1;return!0}function Jg(e,t,r,n,a,o){if(ao=o,Tt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fd.current=e===null||e.memoizedState===null?RR:OR,e=r(n,a),Ol){o=0;do{if(Ol=!1,Zl=0,25<=o)throw Error(ne(301));o+=1,er=Gt=null,t.updateQueue=null,Fd.current=DR,e=r(n,a)}while(Ol)}if(Fd.current=pu,t=Gt!==null&&Gt.next!==null,ao=0,er=Gt=Tt=null,mu=!1,t)throw Error(ne(300));return e}function Xg(){var e=Zl!==0;return Zl=0,e}function ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?Tt.memoizedState=er=e:er=er.next=e,er}function Pn(){if(Gt===null){var e=Tt.alternate;e=e!==null?e.memoizedState:null}else e=Gt.next;var t=er===null?Tt.memoizedState:er.next;if(t!==null)er=t,Gt=e;else{if(e===null)throw Error(ne(310));Gt=e,e={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},er===null?Tt.memoizedState=er=e:er=er.next=e}return er}function ec(e,t){return typeof t=="function"?t(e):t}function _f(e){var t=Pn(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=Gt,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((ao&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,i=n):c=c.next=m,Tt.lanes|=u,oo|=u}d=d.next}while(d!==null&&d!==o);c===null?i=n:c.next=l,Yn(n,t.memoizedState)||(Hr=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do o=a.lane,Tt.lanes|=o,oo|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Sf(e){var t=Pn(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);Yn(o,t.memoizedState)||(Hr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function qj(){}function Gj(e,t){var r=Tt,n=Pn(),a=t(),o=!Yn(n.memoizedState,a);if(o&&(n.memoizedState=a,Hr=!0),n=n.queue,Zg(Qj.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||er!==null&&er.memoizedState.tag&1){if(r.flags|=2048,tc(9,Kj.bind(null,r,n,a,t),void 0,null),tr===null)throw Error(ne(349));ao&30||Yj(r,t,a)}return a}function Yj(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Tt.updateQueue,t===null?(t={lastEffect:null,stores:null},Tt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Kj(e,t,r,n){t.value=r,t.getSnapshot=n,Jj(t)&&Xj(e)}function Qj(e,t,r){return r(function(){Jj(t)&&Xj(e)})}function Jj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Yn(e,r)}catch{return!0}}function Xj(e){var t=Ms(e,1);t!==null&&Hn(t,e,1,-1)}function O0(e){var t=ss();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:e},t.queue=e,e=e.dispatch=PR.bind(null,Tt,e),[t.memoizedState,e]}function tc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Tt.updateQueue,t===null?(t={lastEffect:null,stores:null},Tt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Zj(){return Pn().memoizedState}function Ud(e,t,r,n){var a=ss();Tt.flags|=e,a.memoizedState=tc(1|t,r,void 0,n===void 0?null:n)}function Zu(e,t,r,n){var a=Pn();n=n===void 0?null:n;var o=void 0;if(Gt!==null){var i=Gt.memoizedState;if(o=i.destroy,n!==null&&Qg(n,i.deps)){a.memoizedState=tc(t,r,o,n);return}}Tt.flags|=e,a.memoizedState=tc(1|t,r,o,n)}function D0(e,t){return Ud(8390656,8,e,t)}function Zg(e,t){return Zu(2048,8,e,t)}function eN(e,t){return Zu(4,2,e,t)}function tN(e,t){return Zu(4,4,e,t)}function rN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nN(e,t,r){return r=r!=null?r.concat([e]):null,Zu(4,4,rN.bind(null,t,e),r)}function ev(){}function sN(e,t){var r=Pn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Qg(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function aN(e,t){var r=Pn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Qg(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function oN(e,t,r){return ao&21?(Yn(r,t)||(r=uj(),Tt.lanes|=r,oo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Hr=!0),e.memoizedState=r)}function kR(e,t){var r=ot;ot=r!==0&&4>r?r:4,e(!0);var n=Nf.transition;Nf.transition={};try{e(!1),t()}finally{ot=r,Nf.transition=n}}function iN(){return Pn().memoizedState}function TR(e,t,r){var n=ga(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},lN(e))cN(t,r);else if(r=Vj(e,t,r,n),r!==null){var a=Ar();Hn(r,e,n,a),dN(r,t,n)}}function PR(e,t,r){var n=ga(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(lN(e))cN(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,r);if(a.hasEagerState=!0,a.eagerState=l,Yn(l,i)){var c=t.interleaved;c===null?(a.next=a,Hg(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Vj(e,t,a,n),r!==null&&(a=Ar(),Hn(r,e,n,a),dN(r,t,n))}}function lN(e){var t=e.alternate;return e===Tt||t!==null&&t===Tt}function cN(e,t){Ol=mu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function dN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Rg(e,r)}}var pu={readContext:Tn,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},RR={readContext:Tn,useCallback:function(e,t){return ss().memoizedState=[e,t===void 0?null:t],e},useContext:Tn,useEffect:D0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ud(4194308,4,rN.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ud(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ud(4,2,e,t)},useMemo:function(e,t){var r=ss();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ss();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=TR.bind(null,Tt,e),[n.memoizedState,e]},useRef:function(e){var t=ss();return e={current:e},t.memoizedState=e},useState:O0,useDebugValue:ev,useDeferredValue:function(e){return ss().memoizedState=e},useTransition:function(){var e=O0(!1),t=e[0];return e=kR.bind(null,e[1]),ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Tt,a=ss();if(St){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=t(),tr===null)throw Error(ne(349));ao&30||Yj(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,D0(Qj.bind(null,n,o,e),[e]),n.flags|=2048,tc(9,Kj.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=ss(),t=tr.identifierPrefix;if(St){var r=Rs,n=Ps;r=(n&~(1<<32-Wn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ER++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},OR={readContext:Tn,useCallback:sN,useContext:Tn,useEffect:Zg,useImperativeHandle:nN,useInsertionEffect:eN,useLayoutEffect:tN,useMemo:aN,useReducer:_f,useRef:Zj,useState:function(){return _f(ec)},useDebugValue:ev,useDeferredValue:function(e){var t=Pn();return oN(t,Gt.memoizedState,e)},useTransition:function(){var e=_f(ec)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:qj,useSyncExternalStore:Gj,useId:iN,unstable_isNewReconciler:!1},DR={readContext:Tn,useCallback:sN,useContext:Tn,useEffect:Zg,useImperativeHandle:nN,useInsertionEffect:eN,useLayoutEffect:tN,useMemo:aN,useReducer:Sf,useRef:Zj,useState:function(){return Sf(ec)},useDebugValue:ev,useDeferredValue:function(e){var t=Pn();return Gt===null?t.memoizedState=e:oN(t,Gt.memoizedState,e)},useTransition:function(){var e=Sf(ec)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:qj,useSyncExternalStore:Gj,useId:iN,unstable_isNewReconciler:!1};function $n(e,t){if(e&&e.defaultProps){t=Pt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function rp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Pt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var eh={isMounted:function(e){return(e=e._reactInternals)?go(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ar(),a=ga(e),o=Ds(n,a);o.payload=t,r!=null&&(o.callback=r),t=ma(e,o,a),t!==null&&(Hn(t,e,a,n),Ld(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ar(),a=ga(e),o=Ds(n,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=ma(e,o,a),t!==null&&(Hn(t,e,a,n),Ld(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ar(),n=ga(e),a=Ds(r,n);a.tag=2,t!=null&&(a.callback=t),t=ma(e,a,n),t!==null&&(Hn(t,e,n,r),Ld(t,e,n))}};function A0(e,t,r,n,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!Gl(r,n)||!Gl(a,o):!0}function uN(e,t,r){var n=!1,a=ya,o=t.contextType;return typeof o=="object"&&o!==null?o=Tn(o):(a=Yr(t)?no:Nr.current,n=t.contextTypes,o=(n=n!=null)?Ni(e,a):ya),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function I0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&eh.enqueueReplaceState(t,t.state,null)}function np(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},qg(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Tn(o):(o=Yr(t)?no:Nr.current,a.context=Ni(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(rp(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&eh.enqueueReplaceState(a,a.state,null),hu(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ei(e,t){try{var r="",n=t;do r+=iP(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Cf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function sp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var AR=typeof WeakMap=="function"?WeakMap:Map;function hN(e,t,r){r=Ds(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){vu||(vu=!0,mp=n),sp(e,t)},r}function fN(e,t,r){r=Ds(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){sp(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){sp(e,t),typeof n!="function"&&(pa===null?pa=new Set([this]):pa.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function M0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new AR;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=YR.bind(null,e,t,r),t.then(e,e))}function $0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function L0(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ds(-1,1),t.tag=2,ma(r,t,1))),r.lanes|=1),e)}var IR=Us.ReactCurrentOwner,Hr=!1;function Tr(e,t,r,n){t.child=e===null?zj(t,null,r,n):Si(t,e.child,r,n)}function F0(e,t,r,n,a){r=r.render;var o=t.ref;return ii(t,a),n=Jg(e,t,r,n,o,a),r=Xg(),e!==null&&!Hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$s(e,t,a)):(St&&r&&Fg(t),t.flags|=1,Tr(e,t,n,a),t.child)}function U0(e,t,r,n,a){if(e===null){var o=r.type;return typeof o=="function"&&!lv(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,mN(e,t,o,n,a)):(e=Wd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Gl,r(i,n)&&e.ref===t.ref)return $s(e,t,a)}return t.flags|=1,e=va(o,n),e.ref=t.ref,e.return=t,t.child=e}function mN(e,t,r,n,a){if(e!==null){var o=e.memoizedProps;if(Gl(o,n)&&e.ref===t.ref)if(Hr=!1,t.pendingProps=n=o,(e.lanes&a)!==0)e.flags&131072&&(Hr=!0);else return t.lanes=e.lanes,$s(e,t,a)}return ap(e,t,r,n,a)}function pN(e,t,r){var n=t.pendingProps,a=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(ei,tn),tn|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pt(ei,tn),tn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,pt(ei,tn),tn|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,pt(ei,tn),tn|=n;return Tr(e,t,a,r),t.child}function gN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ap(e,t,r,n,a){var o=Yr(r)?no:Nr.current;return o=Ni(t,o),ii(t,a),r=Jg(e,t,r,n,o,a),n=Xg(),e!==null&&!Hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$s(e,t,a)):(St&&n&&Fg(t),t.flags|=1,Tr(e,t,r,a),t.child)}function B0(e,t,r,n,a){if(Yr(r)){var o=!0;iu(t)}else o=!1;if(ii(t,a),t.stateNode===null)Bd(e,t),uN(t,r,n),np(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Tn(d):(d=Yr(r)?no:Nr.current,d=Ni(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&I0(t,i,n,d),Qs=!1;var p=t.memoizedState;i.state=p,hu(t,n,i,a),c=t.memoizedState,l!==n||p!==c||Gr.current||Qs?(typeof u=="function"&&(rp(t,r,u,n),c=t.memoizedState),(l=Qs||A0(t,r,l,n,p,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Wj(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:$n(t.type,l),i.props=d,m=t.pendingProps,p=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Tn(c):(c=Yr(r)?no:Nr.current,c=Ni(t,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||p!==c)&&I0(t,i,n,c),Qs=!1,p=t.memoizedState,i.state=p,hu(t,n,i,a);var y=t.memoizedState;l!==m||p!==y||Gr.current||Qs?(typeof f=="function"&&(rp(t,r,f,n),y=t.memoizedState),(d=Qs||A0(t,r,d,n,p,y,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),i.props=n,i.state=y,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return op(e,t,r,n,o,a)}function op(e,t,r,n,a,o){gN(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&C0(t,r,!1),$s(e,t,o);n=t.stateNode,IR.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Si(t,e.child,null,o),t.child=Si(t,null,l,o)):Tr(e,t,l,o),t.memoizedState=n.state,a&&C0(t,r,!0),t.child}function vN(e){var t=e.stateNode;t.pendingContext?S0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&S0(e,t.context,!1),Gg(e,t.containerInfo)}function z0(e,t,r,n,a){return _i(),Bg(a),t.flags|=256,Tr(e,t,r,n),t.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function lp(e){return{baseLanes:e,cachePool:null,transitions:null}}function xN(e,t,r){var n=t.pendingProps,a=kt.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),pt(kt,a&1),e===null)return ep(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=nh(i,n,0,null),e=to(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=lp(r),t.memoizedState=ip,e):tv(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return MR(e,t,i,n,l,a,r);if(o){o=n.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=va(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=va(l,o):(o=to(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?lp(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=ip,n}return o=e.child,e=o.sibling,n=va(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function tv(e,t){return t=nh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cd(e,t,r,n){return n!==null&&Bg(n),Si(t,e.child,null,r),e=tv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function MR(e,t,r,n,a,o,i){if(r)return t.flags&256?(t.flags&=-257,n=Cf(Error(ne(422))),cd(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=nh({mode:"visible",children:n.children},a,0,null),o=to(o,a,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Si(t,e.child,null,i),t.child.memoizedState=lp(i),t.memoizedState=ip,o);if(!(t.mode&1))return cd(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(ne(419)),n=Cf(o,n,void 0),cd(e,t,i,n)}if(l=(i&e.childLanes)!==0,Hr||l){if(n=tr,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Ms(e,a),Hn(n,e,a,-1))}return iv(),n=Cf(Error(ne(421))),cd(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=KR.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,on=fa(a.nextSibling),ln=t,St=!0,Vn=null,e!==null&&(bn[jn++]=Ps,bn[jn++]=Rs,bn[jn++]=so,Ps=e.id,Rs=e.overflow,so=t),t=tv(t,n.children),t.flags|=4096,t)}function V0(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),tp(e.return,t,r)}function Ef(e,t,r,n,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function yN(e,t,r){var n=t.pendingProps,a=n.revealOrder,o=n.tail;if(Tr(e,t,n.children,r),n=kt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&V0(e,r,t);else if(e.tag===19)V0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(pt(kt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&fu(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ef(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&fu(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ef(t,!0,r,null,o);break;case"together":Ef(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $s(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),oo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,r=va(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=va(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function $R(e,t,r){switch(t.tag){case 3:vN(t),_i();break;case 5:Hj(t);break;case 1:Yr(t.type)&&iu(t);break;case 4:Gg(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;pt(du,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(pt(kt,kt.current&1),t.flags|=128,null):r&t.child.childLanes?xN(e,t,r):(pt(kt,kt.current&1),e=$s(e,t,r),e!==null?e.sibling:null);pt(kt,kt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return yN(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),pt(kt,kt.current),n)break;return null;case 22:case 23:return t.lanes=0,pN(e,t,r)}return $s(e,t,r)}var wN,cp,bN,jN;wN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cp=function(){};bN=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,qa(ms.current);var o=null;switch(r){case"input":a=Rm(e,a),n=Rm(e,n),o=[];break;case"select":a=Pt({},a,{value:void 0}),n=Pt({},n,{value:void 0}),o=[];break;case"textarea":a=Am(e,a),n=Am(e,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=au)}Mm(r,n);var i;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ul.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ul.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&bt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};jN=function(e,t,r,n){r!==n&&(t.flags|=4)};function hl(e,t){if(!St)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function xr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function LR(e,t,r){var n=t.pendingProps;switch(Ug(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(t),null;case 1:return Yr(t.type)&&ou(),xr(t),null;case 3:return n=t.stateNode,Ci(),jt(Gr),jt(Nr),Kg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(id(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vn!==null&&(vp(Vn),Vn=null))),cp(e,t),xr(t),null;case 5:Yg(t);var a=qa(Xl.current);if(r=t.type,e!==null&&t.stateNode!=null)bN(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ne(166));return xr(t),null}if(e=qa(ms.current),id(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[cs]=t,n[Ql]=o,e=(t.mode&1)!==0,r){case"dialog":bt("cancel",n),bt("close",n);break;case"iframe":case"object":case"embed":bt("load",n);break;case"video":case"audio":for(a=0;a<Nl.length;a++)bt(Nl[a],n);break;case"source":bt("error",n);break;case"img":case"image":case"link":bt("error",n),bt("load",n);break;case"details":bt("toggle",n);break;case"input":Xx(n,o),bt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},bt("invalid",n);break;case"textarea":e0(n,o),bt("invalid",n)}Mm(r,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&od(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&od(n.textContent,l,e),a=["children",""+l]):Ul.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&bt("scroll",n)}switch(r){case"input":Xc(n),Zx(n,o,!0);break;case"textarea":Xc(n),t0(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=au)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qb(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[cs]=t,e[Ql]=n,wN(e,t,!1,!1),t.stateNode=e;e:{switch(i=$m(r,n),r){case"dialog":bt("cancel",e),bt("close",e),a=n;break;case"iframe":case"object":case"embed":bt("load",e),a=n;break;case"video":case"audio":for(a=0;a<Nl.length;a++)bt(Nl[a],e);a=n;break;case"source":bt("error",e),a=n;break;case"img":case"image":case"link":bt("error",e),bt("load",e),a=n;break;case"details":bt("toggle",e),a=n;break;case"input":Xx(e,n),a=Rm(e,n),bt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Pt({},n,{value:void 0}),bt("invalid",e);break;case"textarea":e0(e,n),a=Am(e,n),bt("invalid",e);break;default:a=n}Mm(r,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Zb(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Jb(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Bl(e,c):typeof c=="number"&&Bl(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ul.hasOwnProperty(o)?c!=null&&o==="onScroll"&&bt("scroll",e):c!=null&&Sg(e,o,c,i))}switch(r){case"input":Xc(e),Zx(e,n,!1);break;case"textarea":Xc(e),t0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+xa(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?ni(e,!!n.multiple,o,!1):n.defaultValue!=null&&ni(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=au)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xr(t),null;case 6:if(e&&t.stateNode!=null)jN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ne(166));if(r=qa(Xl.current),qa(ms.current),id(t)){if(n=t.stateNode,r=t.memoizedProps,n[cs]=t,(o=n.nodeValue!==r)&&(e=ln,e!==null))switch(e.tag){case 3:od(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&od(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[cs]=t,t.stateNode=n}return xr(t),null;case 13:if(jt(kt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(St&&on!==null&&t.mode&1&&!(t.flags&128))Uj(),_i(),t.flags|=98560,o=!1;else if(o=id(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(ne(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[cs]=t}else _i(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xr(t),o=!1}else Vn!==null&&(vp(Vn),Vn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||kt.current&1?Yt===0&&(Yt=3):iv())),t.updateQueue!==null&&(t.flags|=4),xr(t),null);case 4:return Ci(),cp(e,t),e===null&&Yl(t.stateNode.containerInfo),xr(t),null;case 10:return Wg(t.type._context),xr(t),null;case 17:return Yr(t.type)&&ou(),xr(t),null;case 19:if(jt(kt),o=t.memoizedState,o===null)return xr(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)hl(o,!1);else{if(Yt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=fu(e),i!==null){for(t.flags|=128,hl(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return pt(kt,kt.current&1|2),t.child}e=e.sibling}o.tail!==null&&It()>ki&&(t.flags|=128,n=!0,hl(o,!1),t.lanes=4194304)}else{if(!n)if(e=fu(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!St)return xr(t),null}else 2*It()-o.renderingStartTime>ki&&r!==1073741824&&(t.flags|=128,n=!0,hl(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=It(),t.sibling=null,r=kt.current,pt(kt,n?r&1|2:r&1),t):(xr(t),null);case 22:case 23:return ov(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?tn&1073741824&&(xr(t),t.subtreeFlags&6&&(t.flags|=8192)):xr(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function FR(e,t){switch(Ug(t),t.tag){case 1:return Yr(t.type)&&ou(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ci(),jt(Gr),jt(Nr),Kg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yg(t),null;case 13:if(jt(kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));_i()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return jt(kt),null;case 4:return Ci(),null;case 10:return Wg(t.type._context),null;case 22:case 23:return ov(),null;case 24:return null;default:return null}}var dd=!1,yr=!1,UR=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Zo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ot(e,t,n)}else r.current=null}function dp(e,t,r){try{r()}catch(n){Ot(e,t,n)}}var W0=!1;function BR(e,t){if(Gm=ru,e=Ej(),Lg(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,m=e,p=null;t:for(;;){for(var f;m!==r||a!==0&&m.nodeType!==3||(l=i+a),m!==o||n!==0&&m.nodeType!==3||(c=i+n),m.nodeType===3&&(i+=m.nodeValue.length),(f=m.firstChild)!==null;)p=m,m=f;for(;;){if(m===e)break t;if(p===r&&++d===a&&(l=i),p===o&&++u===n&&(c=i),(f=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ym={focusedElem:e,selectionRange:r},ru=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,x=y.memoizedState,w=t.stateNode,v=w.getSnapshotBeforeUpdate(t.elementType===t.type?g:$n(t.type,g),x);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(j){Ot(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return y=W0,W0=!1,y}function Dl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&dp(t,r,o)}a=a.next}while(a!==n)}}function th(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function up(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function NN(e){var t=e.alternate;t!==null&&(e.alternate=null,NN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cs],delete t[Ql],delete t[Jm],delete t[NR],delete t[_R])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _N(e){return e.tag===5||e.tag===3||e.tag===4}function H0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_N(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=au));else if(n!==4&&(e=e.child,e!==null))for(hp(e,t,r),e=e.sibling;e!==null;)hp(e,t,r),e=e.sibling}function fp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(fp(e,t,r),e=e.sibling;e!==null;)fp(e,t,r),e=e.sibling}var cr=null,zn=!1;function zs(e,t,r){for(r=r.child;r!==null;)SN(e,t,r),r=r.sibling}function SN(e,t,r){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(Gu,r)}catch{}switch(r.tag){case 5:yr||Zo(r,t);case 6:var n=cr,a=zn;cr=null,zs(e,t,r),cr=n,zn=a,cr!==null&&(zn?(e=cr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):cr.removeChild(r.stateNode));break;case 18:cr!==null&&(zn?(e=cr,r=r.stateNode,e.nodeType===8?wf(e.parentNode,r):e.nodeType===1&&wf(e,r),Hl(e)):wf(cr,r.stateNode));break;case 4:n=cr,a=zn,cr=r.stateNode.containerInfo,zn=!0,zs(e,t,r),cr=n,zn=a;break;case 0:case 11:case 14:case 15:if(!yr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&dp(r,t,i),a=a.next}while(a!==n)}zs(e,t,r);break;case 1:if(!yr&&(Zo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ot(r,t,l)}zs(e,t,r);break;case 21:zs(e,t,r);break;case 22:r.mode&1?(yr=(n=yr)||r.memoizedState!==null,zs(e,t,r),yr=n):zs(e,t,r);break;default:zs(e,t,r)}}function q0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new UR),t.forEach(function(n){var a=QR.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Dn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:cr=l.stateNode,zn=!1;break e;case 3:cr=l.stateNode.containerInfo,zn=!0;break e;case 4:cr=l.stateNode.containerInfo,zn=!0;break e}l=l.return}if(cr===null)throw Error(ne(160));SN(o,i,a),cr=null,zn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ot(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)CN(t,e),t=t.sibling}function CN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dn(t,e),ns(e),n&4){try{Dl(3,e,e.return),th(3,e)}catch(g){Ot(e,e.return,g)}try{Dl(5,e,e.return)}catch(g){Ot(e,e.return,g)}}break;case 1:Dn(t,e),ns(e),n&512&&r!==null&&Zo(r,r.return);break;case 5:if(Dn(t,e),ns(e),n&512&&r!==null&&Zo(r,r.return),e.flags&32){var a=e.stateNode;try{Bl(a,"")}catch(g){Ot(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Yb(a,o),$m(l,i);var d=$m(l,o);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];u==="style"?Zb(a,m):u==="dangerouslySetInnerHTML"?Jb(a,m):u==="children"?Bl(a,m):Sg(a,u,m,d)}switch(l){case"input":Om(a,o);break;case"textarea":Kb(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?ni(a,!!o.multiple,f,!1):p!==!!o.multiple&&(o.defaultValue!=null?ni(a,!!o.multiple,o.defaultValue,!0):ni(a,!!o.multiple,o.multiple?[]:"",!1))}a[Ql]=o}catch(g){Ot(e,e.return,g)}}break;case 6:if(Dn(t,e),ns(e),n&4){if(e.stateNode===null)throw Error(ne(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(g){Ot(e,e.return,g)}}break;case 3:if(Dn(t,e),ns(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hl(t.containerInfo)}catch(g){Ot(e,e.return,g)}break;case 4:Dn(t,e),ns(e);break;case 13:Dn(t,e),ns(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(sv=It())),n&4&&q0(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(yr=(d=yr)||u,Dn(t,e),yr=d):Dn(t,e),ns(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(pe=e,u=e.child;u!==null;){for(m=pe=u;pe!==null;){switch(p=pe,f=p.child,p.tag){case 0:case 11:case 14:case 15:Dl(4,p,p.return);break;case 1:Zo(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){Ot(n,r,g)}}break;case 5:Zo(p,p.return);break;case 22:if(p.memoizedState!==null){Y0(m);continue}}f!==null?(f.return=p,pe=f):Y0(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Xb("display",i))}catch(g){Ot(e,e.return,g)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(g){Ot(e,e.return,g)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Dn(t,e),ns(e),n&4&&q0(e);break;case 21:break;default:Dn(t,e),ns(e)}}function ns(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(_N(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Bl(a,""),n.flags&=-33);var o=H0(e);fp(e,o,a);break;case 3:case 4:var i=n.stateNode.containerInfo,l=H0(e);hp(e,l,i);break;default:throw Error(ne(161))}}catch(c){Ot(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zR(e,t,r){pe=e,EN(e)}function EN(e,t,r){for(var n=(e.mode&1)!==0;pe!==null;){var a=pe,o=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||dd;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||yr;l=dd;var d=yr;if(dd=i,(yr=c)&&!d)for(pe=a;pe!==null;)i=pe,c=i.child,i.tag===22&&i.memoizedState!==null?K0(a):c!==null?(c.return=i,pe=c):K0(a);for(;o!==null;)pe=o,EN(o),o=o.sibling;pe=a,dd=l,yr=d}G0(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,pe=o):G0(e)}}function G0(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yr||th(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!yr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:$n(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&R0(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}R0(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Hl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}yr||t.flags&512&&up(t)}catch(p){Ot(t,t.return,p)}}if(t===e){pe=null;break}if(r=t.sibling,r!==null){r.return=t.return,pe=r;break}pe=t.return}}function Y0(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,pe=r;break}pe=t.return}}function K0(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{th(4,t)}catch(c){Ot(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ot(t,a,c)}}var o=t.return;try{up(t)}catch(c){Ot(t,o,c)}break;case 5:var i=t.return;try{up(t)}catch(c){Ot(t,i,c)}}}catch(c){Ot(t,t.return,c)}if(t===e){pe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pe=l;break}pe=t.return}}var VR=Math.ceil,gu=Us.ReactCurrentDispatcher,rv=Us.ReactCurrentOwner,Cn=Us.ReactCurrentBatchConfig,Ze=0,tr=null,zt=null,ur=0,tn=0,ei=_a(0),Yt=0,rc=null,oo=0,rh=0,nv=0,Al=null,Vr=null,sv=0,ki=1/0,Cs=null,vu=!1,mp=null,pa=null,ud=!1,la=null,xu=0,Il=0,pp=null,zd=-1,Vd=0;function Ar(){return Ze&6?It():zd!==-1?zd:zd=It()}function ga(e){return e.mode&1?Ze&2&&ur!==0?ur&-ur:CR.transition!==null?(Vd===0&&(Vd=uj()),Vd):(e=ot,e!==0||(e=window.event,e=e===void 0?16:xj(e.type)),e):1}function Hn(e,t,r,n){if(50<Il)throw Il=0,pp=null,Error(ne(185));Nc(e,r,n),(!(Ze&2)||e!==tr)&&(e===tr&&(!(Ze&2)&&(rh|=r),Yt===4&&Xs(e,ur)),Kr(e,n),r===1&&Ze===0&&!(t.mode&1)&&(ki=It()+500,Xu&&Sa()))}function Kr(e,t){var r=e.callbackNode;CP(e,t);var n=tu(e,e===tr?ur:0);if(n===0)r!==null&&s0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&s0(r),t===1)e.tag===0?SR(Q0.bind(null,e)):$j(Q0.bind(null,e)),bR(function(){!(Ze&6)&&Sa()}),r=null;else{switch(hj(n)){case 1:r=Pg;break;case 4:r=cj;break;case 16:r=eu;break;case 536870912:r=dj;break;default:r=eu}r=IN(r,kN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kN(e,t){if(zd=-1,Vd=0,Ze&6)throw Error(ne(327));var r=e.callbackNode;if(li()&&e.callbackNode!==r)return null;var n=tu(e,e===tr?ur:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=yu(e,n);else{t=n;var a=Ze;Ze|=2;var o=PN();(tr!==e||ur!==t)&&(Cs=null,ki=It()+500,eo(e,t));do try{qR();break}catch(l){TN(e,l)}while(!0);Vg(),gu.current=o,Ze=a,zt!==null?t=0:(tr=null,ur=0,t=Yt)}if(t!==0){if(t===2&&(a=zm(e),a!==0&&(n=a,t=gp(e,a))),t===1)throw r=rc,eo(e,0),Xs(e,n),Kr(e,It()),r;if(t===6)Xs(e,n);else{if(a=e.current.alternate,!(n&30)&&!WR(a)&&(t=yu(e,n),t===2&&(o=zm(e),o!==0&&(n=o,t=gp(e,o))),t===1))throw r=rc,eo(e,0),Xs(e,n),Kr(e,It()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ne(345));case 2:$a(e,Vr,Cs);break;case 3:if(Xs(e,n),(n&130023424)===n&&(t=sv+500-It(),10<t)){if(tu(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ar(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qm($a.bind(null,e,Vr,Cs),t);break}$a(e,Vr,Cs);break;case 4:if(Xs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-Wn(n);o=1<<i,i=t[i],i>a&&(a=i),n&=~o}if(n=a,n=It()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*VR(n/1960))-n,10<n){e.timeoutHandle=Qm($a.bind(null,e,Vr,Cs),n);break}$a(e,Vr,Cs);break;case 5:$a(e,Vr,Cs);break;default:throw Error(ne(329))}}}return Kr(e,It()),e.callbackNode===r?kN.bind(null,e):null}function gp(e,t){var r=Al;return e.current.memoizedState.isDehydrated&&(eo(e,t).flags|=256),e=yu(e,t),e!==2&&(t=Vr,Vr=r,t!==null&&vp(t)),e}function vp(e){Vr===null?Vr=e:Vr.push.apply(Vr,e)}function WR(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!Yn(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xs(e,t){for(t&=~nv,t&=~rh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Wn(t),n=1<<r;e[r]=-1,t&=~n}}function Q0(e){if(Ze&6)throw Error(ne(327));li();var t=tu(e,0);if(!(t&1))return Kr(e,It()),null;var r=yu(e,t);if(e.tag!==0&&r===2){var n=zm(e);n!==0&&(t=n,r=gp(e,n))}if(r===1)throw r=rc,eo(e,0),Xs(e,t),Kr(e,It()),r;if(r===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$a(e,Vr,Cs),Kr(e,It()),null}function av(e,t){var r=Ze;Ze|=1;try{return e(t)}finally{Ze=r,Ze===0&&(ki=It()+500,Xu&&Sa())}}function io(e){la!==null&&la.tag===0&&!(Ze&6)&&li();var t=Ze;Ze|=1;var r=Cn.transition,n=ot;try{if(Cn.transition=null,ot=1,e)return e()}finally{ot=n,Cn.transition=r,Ze=t,!(Ze&6)&&Sa()}}function ov(){tn=ei.current,jt(ei)}function eo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,wR(r)),zt!==null)for(r=zt.return;r!==null;){var n=r;switch(Ug(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ou();break;case 3:Ci(),jt(Gr),jt(Nr),Kg();break;case 5:Yg(n);break;case 4:Ci();break;case 13:jt(kt);break;case 19:jt(kt);break;case 10:Wg(n.type._context);break;case 22:case 23:ov()}r=r.return}if(tr=e,zt=e=va(e.current,null),ur=tn=t,Yt=0,rc=null,nv=rh=oo=0,Vr=Al=null,Ha!==null){for(t=0;t<Ha.length;t++)if(r=Ha[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=a,n.next=i}r.pending=n}Ha=null}return e}function TN(e,t){do{var r=zt;try{if(Vg(),Fd.current=pu,mu){for(var n=Tt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}mu=!1}if(ao=0,er=Gt=Tt=null,Ol=!1,Zl=0,rv.current=null,r===null||r.return===null){Yt=1,rc=t,zt=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=ur,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=$0(i);if(f!==null){f.flags&=-257,L0(f,i,l,o,t),f.mode&1&&M0(o,d,t),t=f,c=d;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){M0(o,d,t),iv();break e}c=Error(ne(426))}}else if(St&&l.mode&1){var x=$0(i);if(x!==null){!(x.flags&65536)&&(x.flags|=256),L0(x,i,l,o,t),Bg(Ei(c,l));break e}}o=c=Ei(c,l),Yt!==4&&(Yt=2),Al===null?Al=[o]:Al.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var w=hN(o,c,t);P0(o,w);break e;case 1:l=c;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(pa===null||!pa.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=fN(o,l,t);P0(o,j);break e}}o=o.return}while(o!==null)}ON(r)}catch(k){t=k,zt===r&&r!==null&&(zt=r=r.return);continue}break}while(!0)}function PN(){var e=gu.current;return gu.current=pu,e===null?pu:e}function iv(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),tr===null||!(oo&268435455)&&!(rh&268435455)||Xs(tr,ur)}function yu(e,t){var r=Ze;Ze|=2;var n=PN();(tr!==e||ur!==t)&&(Cs=null,eo(e,t));do try{HR();break}catch(a){TN(e,a)}while(!0);if(Vg(),Ze=r,gu.current=n,zt!==null)throw Error(ne(261));return tr=null,ur=0,Yt}function HR(){for(;zt!==null;)RN(zt)}function qR(){for(;zt!==null&&!vP();)RN(zt)}function RN(e){var t=AN(e.alternate,e,tn);e.memoizedProps=e.pendingProps,t===null?ON(e):zt=t,rv.current=null}function ON(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=FR(r,t),r!==null){r.flags&=32767,zt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Yt=6,zt=null;return}}else if(r=LR(r,t,tn),r!==null){zt=r;return}if(t=t.sibling,t!==null){zt=t;return}zt=t=e}while(t!==null);Yt===0&&(Yt=5)}function $a(e,t,r){var n=ot,a=Cn.transition;try{Cn.transition=null,ot=1,GR(e,t,r,n)}finally{Cn.transition=a,ot=n}return null}function GR(e,t,r,n){do li();while(la!==null);if(Ze&6)throw Error(ne(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(EP(e,o),e===tr&&(zt=tr=null,ur=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ud||(ud=!0,IN(eu,function(){return li(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Cn.transition,Cn.transition=null;var i=ot;ot=1;var l=Ze;Ze|=4,rv.current=null,BR(e,r),CN(r,e),fR(Ym),ru=!!Gm,Ym=Gm=null,e.current=r,zR(r),xP(),Ze=l,ot=i,Cn.transition=o}else e.current=r;if(ud&&(ud=!1,la=e,xu=a),o=e.pendingLanes,o===0&&(pa=null),bP(r.stateNode),Kr(e,It()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(vu)throw vu=!1,e=mp,mp=null,e;return xu&1&&e.tag!==0&&li(),o=e.pendingLanes,o&1?e===pp?Il++:(Il=0,pp=e):Il=0,Sa(),null}function li(){if(la!==null){var e=hj(xu),t=Cn.transition,r=ot;try{if(Cn.transition=null,ot=16>e?16:e,la===null)var n=!1;else{if(e=la,la=null,xu=0,Ze&6)throw Error(ne(331));var a=Ze;for(Ze|=4,pe=e.current;pe!==null;){var o=pe,i=o.child;if(pe.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(pe=d;pe!==null;){var u=pe;switch(u.tag){case 0:case 11:case 15:Dl(8,u,o)}var m=u.child;if(m!==null)m.return=u,pe=m;else for(;pe!==null;){u=pe;var p=u.sibling,f=u.return;if(NN(u),u===d){pe=null;break}if(p!==null){p.return=f,pe=p;break}pe=f}}}var y=o.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}pe=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,pe=i;else e:for(;pe!==null;){if(o=pe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Dl(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,pe=w;break e}pe=o.return}}var v=e.current;for(pe=v;pe!==null;){i=pe;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,pe=b;else e:for(i=v;pe!==null;){if(l=pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:th(9,l)}}catch(k){Ot(l,l.return,k)}if(l===i){pe=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,pe=j;break e}pe=l.return}}if(Ze=a,Sa(),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(Gu,e)}catch{}n=!0}return n}finally{ot=r,Cn.transition=t}}return!1}function J0(e,t,r){t=Ei(r,t),t=hN(e,t,1),e=ma(e,t,1),t=Ar(),e!==null&&(Nc(e,1,t),Kr(e,t))}function Ot(e,t,r){if(e.tag===3)J0(e,e,r);else for(;t!==null;){if(t.tag===3){J0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(pa===null||!pa.has(n))){e=Ei(r,e),e=fN(t,e,1),t=ma(t,e,1),e=Ar(),t!==null&&(Nc(t,1,e),Kr(t,e));break}}t=t.return}}function YR(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ar(),e.pingedLanes|=e.suspendedLanes&r,tr===e&&(ur&r)===r&&(Yt===4||Yt===3&&(ur&130023424)===ur&&500>It()-sv?eo(e,0):nv|=r),Kr(e,t)}function DN(e,t){t===0&&(e.mode&1?(t=td,td<<=1,!(td&130023424)&&(td=4194304)):t=1);var r=Ar();e=Ms(e,t),e!==null&&(Nc(e,t,r),Kr(e,r))}function KR(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),DN(e,r)}function QR(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(t),DN(e,r)}var AN;AN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gr.current)Hr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Hr=!1,$R(e,t,r);Hr=!!(e.flags&131072)}else Hr=!1,St&&t.flags&1048576&&Lj(t,cu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Bd(e,t),e=t.pendingProps;var a=Ni(t,Nr.current);ii(t,r),a=Jg(null,t,n,e,a,r);var o=Xg();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yr(n)?(o=!0,iu(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,qg(t),a.updater=eh,t.stateNode=a,a._reactInternals=t,np(t,n,e,r),t=op(null,t,n,!0,o,r)):(t.tag=0,St&&o&&Fg(t),Tr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Bd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=XR(n),e=$n(n,e),a){case 0:t=ap(null,t,n,e,r);break e;case 1:t=B0(null,t,n,e,r);break e;case 11:t=F0(null,t,n,e,r);break e;case 14:t=U0(null,t,n,$n(n.type,e),r);break e}throw Error(ne(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$n(n,a),ap(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$n(n,a),B0(e,t,n,a,r);case 3:e:{if(vN(t),e===null)throw Error(ne(387));n=t.pendingProps,o=t.memoizedState,a=o.element,Wj(e,t),hu(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Ei(Error(ne(423)),t),t=z0(e,t,n,r,a);break e}else if(n!==a){a=Ei(Error(ne(424)),t),t=z0(e,t,n,r,a);break e}else for(on=fa(t.stateNode.containerInfo.firstChild),ln=t,St=!0,Vn=null,r=zj(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_i(),n===a){t=$s(e,t,r);break e}Tr(e,t,n,r)}t=t.child}return t;case 5:return Hj(t),e===null&&ep(t),n=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,Km(n,a)?i=null:o!==null&&Km(n,o)&&(t.flags|=32),gN(e,t),Tr(e,t,i,r),t.child;case 6:return e===null&&ep(t),null;case 13:return xN(e,t,r);case 4:return Gg(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Si(t,null,n,r):Tr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$n(n,a),F0(e,t,n,a,r);case 7:return Tr(e,t,t.pendingProps,r),t.child;case 8:return Tr(e,t,t.pendingProps.children,r),t.child;case 12:return Tr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,pt(du,n._currentValue),n._currentValue=i,o!==null)if(Yn(o.value,i)){if(o.children===a.children&&!Gr.current){t=$s(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Ds(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),tp(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(ne(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),tp(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Tr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ii(t,r),a=Tn(a),n=n(a),t.flags|=1,Tr(e,t,n,r),t.child;case 14:return n=t.type,a=$n(n,t.pendingProps),a=$n(n.type,a),U0(e,t,n,a,r);case 15:return mN(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$n(n,a),Bd(e,t),t.tag=1,Yr(n)?(e=!0,iu(t)):e=!1,ii(t,r),uN(t,n,a),np(t,n,a,r),op(null,t,n,!0,e,r);case 19:return yN(e,t,r);case 22:return pN(e,t,r)}throw Error(ne(156,t.tag))};function IN(e,t){return lj(e,t)}function JR(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(e,t,r,n){return new JR(e,t,r,n)}function lv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function XR(e){if(typeof e=="function")return lv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Eg)return 11;if(e===kg)return 14}return 2}function va(e,t){var r=e.alternate;return r===null?(r=_n(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Wd(e,t,r,n,a,o){var i=2;if(n=e,typeof e=="function")lv(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Wo:return to(r.children,a,o,t);case Cg:i=8,a|=8;break;case Em:return e=_n(12,r,t,a|2),e.elementType=Em,e.lanes=o,e;case km:return e=_n(13,r,t,a),e.elementType=km,e.lanes=o,e;case Tm:return e=_n(19,r,t,a),e.elementType=Tm,e.lanes=o,e;case Hb:return nh(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vb:i=10;break e;case Wb:i=9;break e;case Eg:i=11;break e;case kg:i=14;break e;case Ks:i=16,n=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=_n(i,r,t,a),t.elementType=e,t.type=n,t.lanes=o,t}function to(e,t,r,n){return e=_n(7,e,n,t),e.lanes=r,e}function nh(e,t,r,n){return e=_n(22,e,n,t),e.elementType=Hb,e.lanes=r,e.stateNode={isHidden:!1},e}function kf(e,t,r){return e=_n(6,e,null,t),e.lanes=r,e}function Tf(e,t,r){return t=_n(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZR(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cf(0),this.expirationTimes=cf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cf(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function cv(e,t,r,n,a,o,i,l,c){return e=new ZR(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=_n(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qg(o),e}function e4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function MN(e){if(!e)return ya;e=e._reactInternals;e:{if(go(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var r=e.type;if(Yr(r))return Mj(e,r,t)}return t}function $N(e,t,r,n,a,o,i,l,c){return e=cv(r,n,!0,e,a,o,i,l,c),e.context=MN(null),r=e.current,n=Ar(),a=ga(r),o=Ds(n,a),o.callback=t??null,ma(r,o,a),e.current.lanes=a,Nc(e,a,n),Kr(e,n),e}function sh(e,t,r,n){var a=t.current,o=Ar(),i=ga(a);return r=MN(r),t.context===null?t.context=r:t.pendingContext=r,t=Ds(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ma(a,t,i),e!==null&&(Hn(e,a,i,o),Ld(e,a,i)),i}function wu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function X0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function dv(e,t){X0(e,t),(e=e.alternate)&&X0(e,t)}function t4(){return null}var LN=typeof reportError=="function"?reportError:function(e){console.error(e)};function uv(e){this._internalRoot=e}ah.prototype.render=uv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));sh(e,t,null,null)};ah.prototype.unmount=uv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;io(function(){sh(null,e,null,null)}),t[Is]=null}};function ah(e){this._internalRoot=e}ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=pj();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Js.length&&t!==0&&t<Js[r].priority;r++);Js.splice(r,0,e),r===0&&vj(e)}};function hv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Z0(){}function r4(e,t,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var d=wu(i);o.call(d)}}var i=$N(t,n,e,0,null,!1,!1,"",Z0);return e._reactRootContainer=i,e[Is]=i.current,Yl(e.nodeType===8?e.parentNode:e),io(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=wu(c);l.call(d)}}var c=cv(e,0,!1,null,null,!1,!1,"",Z0);return e._reactRootContainer=c,e[Is]=c.current,Yl(e.nodeType===8?e.parentNode:e),io(function(){sh(t,c,r,n)}),c}function ih(e,t,r,n,a){var o=r._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=wu(i);l.call(c)}}sh(t,i,e,a)}else i=r4(r,t,e,a,n);return wu(i)}fj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=jl(t.pendingLanes);r!==0&&(Rg(t,r|1),Kr(t,It()),!(Ze&6)&&(ki=It()+500,Sa()))}break;case 13:io(function(){var n=Ms(e,1);if(n!==null){var a=Ar();Hn(n,e,1,a)}}),dv(e,1)}};Og=function(e){if(e.tag===13){var t=Ms(e,134217728);if(t!==null){var r=Ar();Hn(t,e,134217728,r)}dv(e,134217728)}};mj=function(e){if(e.tag===13){var t=ga(e),r=Ms(e,t);if(r!==null){var n=Ar();Hn(r,e,t,n)}dv(e,t)}};pj=function(){return ot};gj=function(e,t){var r=ot;try{return ot=e,t()}finally{ot=r}};Fm=function(e,t,r){switch(t){case"input":if(Om(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ju(n);if(!a)throw Error(ne(90));Gb(n),Om(n,a)}}}break;case"textarea":Kb(e,r);break;case"select":t=r.value,t!=null&&ni(e,!!r.multiple,t,!1)}};rj=av;nj=io;var n4={usingClientEntryPoint:!1,Events:[Sc,Yo,Ju,ej,tj,av]},fl={findFiberByHostInstance:Wa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s4={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Us.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=oj(e),e===null?null:e.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||t4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{Gu=hd.inject(s4),fs=hd}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n4;mn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hv(t))throw Error(ne(200));return e4(e,t,null,r)};mn.createRoot=function(e,t){if(!hv(e))throw Error(ne(299));var r=!1,n="",a=LN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=cv(e,1,!1,null,null,r,!1,n,a),e[Is]=t.current,Yl(e.nodeType===8?e.parentNode:e),new uv(t)};mn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=oj(t),e=e===null?null:e.stateNode,e};mn.flushSync=function(e){return io(e)};mn.hydrate=function(e,t,r){if(!oh(t))throw Error(ne(200));return ih(null,e,t,!0,r)};mn.hydrateRoot=function(e,t,r){if(!hv(e))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",i=LN;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=$N(t,null,e,1,r??null,a,!1,o,i),e[Is]=t.current,Yl(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new ah(t)};mn.render=function(e,t,r){if(!oh(t))throw Error(ne(200));return ih(null,e,t,!1,r)};mn.unmountComponentAtNode=function(e){if(!oh(e))throw Error(ne(40));return e._reactRootContainer?(io(function(){ih(null,null,e,!1,function(){e._reactRootContainer=null,e[Is]=null})}),!0):!1};mn.unstable_batchedUpdates=av;mn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!oh(r))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return ih(e,t,r,!1,n)};mn.version="18.3.1-next-f1338f8080-20240426";function FN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FN)}catch(e){console.error(e)}}FN(),Fb.exports=mn;var vo=Fb.exports;const UN=Eb(vo);var BN,ey=vo;BN=ey.createRoot,ey.hydrateRoot;const a4=1,o4=5e3,i4=5e3,l4=()=>typeof window>"u"?!1:window.innerWidth<768,c4=()=>l4()?3500:i4;let Pf=0;function d4(){return Pf=(Pf+1)%Number.MAX_SAFE_INTEGER,Pf.toString()}const Rf=new Map,ty=e=>{if(Rf.has(e))return;const t=setTimeout(()=>{Rf.delete(e),Ml({type:"REMOVE_TOAST",toastId:e})},o4);Rf.set(e,t)},u4=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,a4)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?ty(r):e.toasts.forEach(n=>{ty(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Hd=[];let qd={toasts:[]};function Ml(e){qd=u4(qd,e),Hd.forEach(t=>{t(qd)})}function De({...e}){const t=d4(),r=a=>Ml({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Ml({type:"DISMISS_TOAST",toastId:t});Ml({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}});try{setTimeout(()=>{n()},c4())}catch{}return{id:t,dismiss:n,update:r}}function Qt(){const[e,t]=h.useState(qd);return h.useEffect(()=>(Hd.push(t),()=>{const r=Hd.indexOf(t);r>-1&&Hd.splice(r,1)}),[e]),{...e,toast:De,dismiss:r=>Ml({type:"DISMISS_TOAST",toastId:r})}}function ae(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function ry(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ir(...e){return t=>{let r=!1;const n=e.map(a=>{const o=ry(a,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():ry(e[a],null)}}}}function We(...e){return h.useCallback(Ir(...e),e)}function h4(e,t){const r=h.createContext(t),n=o=>{const{children:i,...l}=o,c=h.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:i})};n.displayName=e+"Provider";function a(o){const i=h.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,a]}function Fr(e,t=[]){let r=[];function n(o,i){const l=h.createContext(i),c=r.length;r=[...r,i];const d=m=>{var w;const{scope:p,children:f,...y}=m,g=((w=p==null?void 0:p[e])==null?void 0:w[c])||l,x=h.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:x,children:f})};d.displayName=o+"Provider";function u(m,p){var g;const f=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,y=h.useContext(f);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=r.map(i=>h.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,f4(a,...t)]}function f4(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function ny(e){const t=m4(e),r=h.forwardRef((n,a)=>{const{children:o,...i}=n,l=h.Children.toArray(o),c=l.find(g4);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return s.jsx(t,{...i,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function m4(e){const t=h.forwardRef((r,n)=>{const{children:a,...o}=r;if(h.isValidElement(a)){const i=x4(a),l=v4(o,a.props);return a.type!==h.Fragment&&(l.ref=n?Ir(n,i):i),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var p4=Symbol("radix.slottable");function g4(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===p4}function v4(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function x4(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function lh(e){const t=e+"CollectionProvider",[r,n]=Fr(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:x,children:w}=g,v=oe.useRef(null),b=oe.useRef(new Map).current;return s.jsx(a,{scope:x,itemMap:b,collectionRef:v,children:w})};i.displayName=t;const l=e+"CollectionSlot",c=ny(l),d=oe.forwardRef((g,x)=>{const{scope:w,children:v}=g,b=o(l,w),j=We(x,b.collectionRef);return s.jsx(c,{ref:j,children:v})});d.displayName=l;const u=e+"CollectionItemSlot",m="data-radix-collection-item",p=ny(u),f=oe.forwardRef((g,x)=>{const{scope:w,children:v,...b}=g,j=oe.useRef(null),k=We(x,j),S=o(u,w);return oe.useEffect(()=>(S.itemMap.set(j,{ref:j,...b}),()=>void S.itemMap.delete(j))),s.jsx(p,{[m]:"",ref:k,children:v})});f.displayName=u;function y(g){const x=o(e+"CollectionConsumer",g);return oe.useCallback(()=>{const v=x.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(x.itemMap.values()).sort((S,N)=>b.indexOf(S.ref.current)-b.indexOf(N.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:i,Slot:d,ItemSlot:f},y,n]}function y4(e){const t=w4(e),r=h.forwardRef((n,a)=>{const{children:o,...i}=n,l=h.Children.toArray(o),c=l.find(j4);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return s.jsx(t,{...i,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function w4(e){const t=h.forwardRef((r,n)=>{const{children:a,...o}=r;if(h.isValidElement(a)){const i=_4(a),l=N4(o,a.props);return a.type!==h.Fragment&&(l.ref=n?Ir(n,i):i),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var b4=Symbol("radix.slottable");function j4(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===b4}function N4(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function _4(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var S4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ve=S4.reduce((e,t)=>{const r=y4(`Primitive.${t}`),n=h.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function fv(e,t){e&&vo.flushSync(()=>e.dispatchEvent(t))}function Mr(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function C4(e,t=globalThis==null?void 0:globalThis.document){const r=Mr(e);h.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var E4="DismissableLayer",xp="dismissableLayer.update",k4="dismissableLayer.pointerDownOutside",T4="dismissableLayer.focusOutside",sy,zN=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xo=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=h.useContext(zN),[u,m]=h.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=h.useState({}),y=We(t,N=>m(N)),g=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(x),v=u?g.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=v>=w,k=R4(N=>{const E=N.target,T=[...d.branches].some(R=>R.contains(E));!j||T||(a==null||a(N),i==null||i(N),N.defaultPrevented||l==null||l())},p),S=O4(N=>{const E=N.target;[...d.branches].some(R=>R.contains(E))||(o==null||o(N),i==null||i(N),N.defaultPrevented||l==null||l())},p);return C4(N=>{v===d.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),h.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(sy=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),ay(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=sy)}},[u,p,r,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),ay())},[u,d]),h.useEffect(()=>{const N=()=>f({});return document.addEventListener(xp,N),()=>document.removeEventListener(xp,N)},[]),s.jsx(ve.div,{...c,ref:y,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:ae(e.onFocusCapture,S.onFocusCapture),onBlurCapture:ae(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:ae(e.onPointerDownCapture,k.onPointerDownCapture)})});xo.displayName=E4;var P4="DismissableLayerBranch",VN=h.forwardRef((e,t)=>{const r=h.useContext(zN),n=h.useRef(null),a=We(t,n);return h.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),s.jsx(ve.div,{...e,ref:a})});VN.displayName=P4;function R4(e,t=globalThis==null?void 0:globalThis.document){const r=Mr(e),n=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){WN(k4,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function O4(e,t=globalThis==null?void 0:globalThis.document){const r=Mr(e),n=h.useRef(!1);return h.useEffect(()=>{const a=o=>{o.target&&!n.current&&WN(T4,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ay(){const e=new CustomEvent(xp);document.dispatchEvent(e)}function WN(e,t,r,{discrete:n}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?fv(a,o):a.dispatchEvent(o)}var D4=xo,A4=VN,Vt=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},I4="Portal",zi=h.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,o]=h.useState(!1);Vt(()=>o(!0),[]);const i=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?UN.createPortal(s.jsx(ve.div,{...n,ref:t}),i):null});zi.displayName=I4;function M4(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var Jr=e=>{const{present:t,children:r}=e,n=$4(t),a=typeof r=="function"?r({present:n.isPresent}):h.Children.only(r),o=We(n.ref,L4(a));return typeof r=="function"||n.isPresent?h.cloneElement(a,{ref:o}):null};Jr.displayName="Presence";function $4(e){const[t,r]=h.useState(),n=h.useRef(null),a=h.useRef(e),o=h.useRef("none"),i=e?"mounted":"unmounted",[l,c]=M4(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=fd(n.current);o.current=l==="mounted"?d:"none"},[l]),Vt(()=>{const d=n.current,u=a.current;if(u!==e){const p=o.current,f=fd(d);e?c("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&p!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Vt(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=f=>{const g=fd(n.current).includes(CSS.escape(f.animationName));if(f.target===t&&g&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},p=f=>{f.target===t&&(o.current=fd(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function fd(e){return(e==null?void 0:e.animationName)||"none"}function L4(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var F4=qu[" useInsertionEffect ".trim().toString()]||Vt;function Kn({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,o,i]=U4({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const u=h.useRef(e!==void 0);h.useEffect(()=>{const m=u.current;m!==l&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=h.useCallback(u=>{var m;if(l){const p=B4(u)?u(e):u;p!==e&&((m=i.current)==null||m.call(i,p))}else o(u)},[l,e,o,i]);return[c,d]}function U4({defaultProp:e,onChange:t}){const[r,n]=h.useState(e),a=h.useRef(r),o=h.useRef(t);return F4(()=>{o.current=t},[t]),h.useEffect(()=>{var i;a.current!==r&&((i=o.current)==null||i.call(o,r),a.current=r)},[r,a]),[r,n,o]}function B4(e){return typeof e=="function"}var HN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),z4="VisuallyHidden",ch=h.forwardRef((e,t)=>s.jsx(ve.span,{...e,ref:t,style:{...HN,...e.style}}));ch.displayName=z4;var V4=ch,mv="ToastProvider",[pv,W4,H4]=lh("Toast"),[qN]=Fr("Toast",[H4]),[q4,dh]=qN(mv),GN=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=e,[l,c]=h.useState(null),[d,u]=h.useState(0),m=h.useRef(!1),p=h.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${mv}\`. Expected non-empty \`string\`.`),s.jsx(pv.Provider,{scope:t,children:s.jsx(q4,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>u(f=>f+1),[]),onToastRemove:h.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:p,children:i})})};GN.displayName=mv;var YN="ToastViewport",G4=["F8"],yp="toast.viewportPause",wp="toast.viewportResume",KN=h.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=G4,label:a="Notifications ({hotkey})",...o}=e,i=dh(YN,r),l=W4(r),c=h.useRef(null),d=h.useRef(null),u=h.useRef(null),m=h.useRef(null),p=We(t,m,i.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;h.useEffect(()=>{const x=w=>{var b;n.length!==0&&n.every(j=>w[j]||w.code===j)&&((b=m.current)==null||b.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),h.useEffect(()=>{const x=c.current,w=m.current;if(y&&x&&w){const v=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(yp);w.dispatchEvent(S),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(wp);w.dispatchEvent(S),i.isClosePausedRef.current=!1}},j=S=>{!x.contains(S.relatedTarget)&&b()},k=()=>{x.contains(document.activeElement)||b()};return x.addEventListener("focusin",v),x.addEventListener("focusout",j),x.addEventListener("pointermove",v),x.addEventListener("pointerleave",k),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{x.removeEventListener("focusin",v),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",v),x.removeEventListener("pointerleave",k),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[y,i.isClosePausedRef]);const g=h.useCallback(({tabbingDirection:x})=>{const v=l().map(b=>{const j=b.ref.current,k=[j,...oO(j)];return x==="forwards"?k:k.reverse()});return(x==="forwards"?v.reverse():v).flat()},[l]);return h.useEffect(()=>{const x=m.current;if(x){const w=v=>{var k,S,N;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const E=document.activeElement,T=v.shiftKey;if(v.target===x&&T){(k=d.current)==null||k.focus();return}const F=g({tabbingDirection:T?"backwards":"forwards"}),M=F.findIndex(I=>I===E);Of(F.slice(M+1))?v.preventDefault():T?(S=d.current)==null||S.focus():(N=u.current)==null||N.focus()}};return x.addEventListener("keydown",w),()=>x.removeEventListener("keydown",w)}},[l,g]),s.jsxs(A4,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(bp,{ref:d,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});Of(x)}}),s.jsx(pv.Slot,{scope:r,children:s.jsx(ve.ol,{tabIndex:-1,...o,ref:p})}),y&&s.jsx(bp,{ref:u,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});Of(x)}})]})});KN.displayName=YN;var QN="ToastFocusProxy",bp=h.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,o=dh(QN,r);return s.jsx(ch,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&n()}})});bp.displayName=QN;var Ec="Toast",Y4="toast.swipeStart",K4="toast.swipeMove",Q4="toast.swipeCancel",J4="toast.swipeEnd",JN=h.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:o,...i}=e,[l,c]=Kn({prop:n,defaultProp:a??!0,onChange:o,caller:Ec});return s.jsx(Jr,{present:r||l,children:s.jsx(eO,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Mr(e.onPause),onResume:Mr(e.onResume),onSwipeStart:ae(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ae(e.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:ae(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ae(e.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});JN.displayName=Ec;var[X4,Z4]=qN(Ec,{onClose(){}}),eO=h.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:p,onSwipeEnd:f,...y}=e,g=dh(Ec,r),[x,w]=h.useState(null),v=We(t,I=>w(I)),b=h.useRef(null),j=h.useRef(null),k=a||g.duration,S=h.useRef(0),N=h.useRef(k),E=h.useRef(0),{onToastAdd:T,onToastRemove:R}=g,O=Mr(()=>{var B;(x==null?void 0:x.contains(document.activeElement))&&((B=g.viewport)==null||B.focus()),i()}),F=h.useCallback(I=>{!I||I===1/0||(window.clearTimeout(E.current),S.current=new Date().getTime(),E.current=window.setTimeout(O,I))},[O]);h.useEffect(()=>{const I=g.viewport;if(I){const B=()=>{F(N.current),d==null||d()},$=()=>{const D=new Date().getTime()-S.current;N.current=N.current-D,window.clearTimeout(E.current),c==null||c()};return I.addEventListener(yp,$),I.addEventListener(wp,B),()=>{I.removeEventListener(yp,$),I.removeEventListener(wp,B)}}},[g.viewport,k,c,d,F]),h.useEffect(()=>{o&&!g.isClosePausedRef.current&&F(k)},[o,k,g.isClosePausedRef,F]),h.useEffect(()=>(T(),()=>R()),[T,R]);const M=h.useMemo(()=>x?s_(x):null,[x]);return g.viewport?s.jsxs(s.Fragment,{children:[M&&s.jsx(tO,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:M}),s.jsx(X4,{scope:r,onClose:O,children:vo.createPortal(s.jsx(pv.ItemSlot,{scope:r,children:s.jsx(D4,{asChild:!0,onEscapeKeyDown:ae(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(ve.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ae(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:ae(e.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:ae(e.onPointerMove,I=>{if(!b.current)return;const B=I.clientX-b.current.x,$=I.clientY-b.current.y,D=!!j.current,P=["left","right"].includes(g.swipeDirection),A=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,G=P?A(0,B):0,_=P?0:A(0,$),C=I.pointerType==="touch"?10:2,L={x:G,y:_},W={originalEvent:I,delta:L};D?(j.current=L,md(K4,m,W,{discrete:!1})):oy(L,g.swipeDirection,C)?(j.current=L,md(Y4,u,W,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(B)>C||Math.abs($)>C)&&(b.current=null)}),onPointerUp:ae(e.onPointerUp,I=>{const B=j.current,$=I.target;if($.hasPointerCapture(I.pointerId)&&$.releasePointerCapture(I.pointerId),j.current=null,b.current=null,B){const D=I.currentTarget,P={originalEvent:I,delta:B};oy(B,g.swipeDirection,g.swipeThreshold)?md(J4,f,P,{discrete:!0}):md(Q4,p,P,{discrete:!0}),D.addEventListener("click",A=>A.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),tO=e=>{const{__scopeToast:t,children:r,...n}=e,a=dh(Ec,t),[o,i]=h.useState(!1),[l,c]=h.useState(!1);return sO(()=>i(!0)),h.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(zi,{asChild:!0,children:s.jsx(ch,{...n,children:o&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},rO="ToastTitle",XN=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(ve.div,{...n,ref:t})});XN.displayName=rO;var nO="ToastDescription",ZN=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(ve.div,{...n,ref:t})});ZN.displayName=nO;var e_="ToastAction",t_=h.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(n_,{altText:r,asChild:!0,children:s.jsx(gv,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${e_}\`. Expected non-empty \`string\`.`),null)});t_.displayName=e_;var r_="ToastClose",gv=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=Z4(r_,r);return s.jsx(n_,{asChild:!0,children:s.jsx(ve.button,{type:"button",...n,ref:t,onClick:ae(e.onClick,a.onClose)})})});gv.displayName=r_;var n_=h.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function s_(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),aO(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...s_(n))}}),t}function md(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?fv(a,o):a.dispatchEvent(o)}var oy=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),o=n>a;return t==="left"||t==="right"?o&&n>r:!o&&a>r};function sO(e=()=>{}){const t=Mr(e);Vt(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function aO(e){return e.nodeType===e.ELEMENT_NODE}function oO(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Of(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var iO=GN,a_=KN,o_=JN,i_=XN,l_=ZN,c_=t_,d_=gv;function u_(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=u_(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function h_(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=u_(e))&&(n&&(n+=" "),n+=t);return n}const iy=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ly=h_,Vi=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return ly(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],m=o==null?void 0:o[d];if(u===null)return null;const p=iy(u)||iy(m);return a[d][p]}),l=r&&Object.entries(r).reduce((d,u)=>{let[m,p]=u;return p===void 0||(d[m]=p),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:p,...f}=u;return Object.entries(f).every(y=>{let[g,x]=y;return Array.isArray(x)?x.includes({...o,...l}[g]):{...o,...l}[g]===x})?[...d,m,p]:d},[]);return ly(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),f_=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:i,...l},c)=>h.createElement("svg",{ref:c,...cO,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:f_("lucide",a),...l},[...i.map(([d,u])=>h.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const r=h.forwardRef(({className:n,...a},o)=>h.createElement(dO,{ref:o,iconNode:t,className:f_(`lucide-${lO(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=me("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=me("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=me("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=me("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=me("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=me("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=me("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=me("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=me("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=me("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=me("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=me("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=me("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=me("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=me("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=me("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=me("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=me("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=me("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=me("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=me("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=me("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=me("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=me("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=me("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=me("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=me("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=me("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=me("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=me("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=me("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=me("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=me("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=me("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=me("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=me("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),wv="-",TO=e=>{const t=RO(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const l=i.split(wv);return l[0]===""&&l.length!==1&&l.shift(),w_(l,t)||PO(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},w_=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?w_(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(wv);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},xy=/^\[(.+)\]$/,PO=e=>{if(xy.test(e)){const t=xy.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},RO=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return DO(Object.entries(e.classGroups),r).forEach(([o,i])=>{kp(i,n,o,t)}),n},kp=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:yy(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(OO(a)){kp(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,i])=>{kp(i,yy(t,o),r,n)})})},yy=(e,t)=>{let r=e;return t.split(wv).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},OO=e=>e.isThemeGetter,DO=(e,t)=>t?e.map(([r,n])=>{const a=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[r,a]}):e,AO=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(o,i)=>{r.set(o,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return a(o,i),i},set(o,i){r.has(o)?r.set(o,i):a(o,i)}}},b_="!",IO=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],o=t.length,i=l=>{const c=[];let d=0,u=0,m;for(let x=0;x<l.length;x++){let w=l[x];if(d===0){if(w===a&&(n||l.slice(x,x+o)===t)){c.push(l.slice(u,x)),u=x+o;continue}if(w==="/"){m=x;continue}}w==="["?d++:w==="]"&&d--}const p=c.length===0?l:l.substring(u),f=p.startsWith(b_),y=f?p.substring(1):p,g=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},MO=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},$O=e=>({cache:AO(e.cacheSize),parseClassName:IO(e),...TO(e)}),LO=/\s+/,FO=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(LO);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:f}=r(d);let y=!!f,g=n(y?p.substring(0,f):p);if(!g){if(!y){l=d+(l.length>0?" "+l:l);continue}if(g=n(p),!g){l=d+(l.length>0?" "+l:l);continue}y=!1}const x=MO(u).join(":"),w=m?x+b_:x,v=w+g;if(o.includes(v))continue;o.push(v);const b=a(g,y);for(let j=0;j<b.length;++j){const k=b[j];o.push(w+k)}l=d+(l.length>0?" "+l:l)}return l};function UO(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=j_(t))&&(n&&(n+=" "),n+=r);return n}const j_=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=j_(e[n]))&&(r&&(r+=" "),r+=t);return r};function BO(e,...t){let r,n,a,o=i;function i(c){const d=t.reduce((u,m)=>m(u),e());return r=$O(d),n=r.cache.get,a=r.cache.set,o=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=FO(c,r);return a(c,u),u}return function(){return o(UO.apply(null,arguments))}}const wt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},N_=/^\[(?:([a-z-]+):)?(.+)\]$/i,zO=/^\d+\/\d+$/,VO=new Set(["px","full","screen"]),WO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,HO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,GO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,YO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ns=e=>ci(e)||VO.has(e)||zO.test(e),Vs=e=>Wi(e,"length",rD),ci=e=>!!e&&!Number.isNaN(Number(e)),If=e=>Wi(e,"number",ci),ml=e=>!!e&&Number.isInteger(Number(e)),KO=e=>e.endsWith("%")&&ci(e.slice(0,-1)),Le=e=>N_.test(e),Ws=e=>WO.test(e),QO=new Set(["length","size","percentage"]),JO=e=>Wi(e,QO,__),XO=e=>Wi(e,"position",__),ZO=new Set(["image","url"]),eD=e=>Wi(e,ZO,sD),tD=e=>Wi(e,"",nD),pl=()=>!0,Wi=(e,t,r)=>{const n=N_.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},rD=e=>HO.test(e)&&!qO.test(e),__=()=>!1,nD=e=>GO.test(e),sD=e=>YO.test(e),aD=()=>{const e=wt("colors"),t=wt("spacing"),r=wt("blur"),n=wt("brightness"),a=wt("borderColor"),o=wt("borderRadius"),i=wt("borderSpacing"),l=wt("borderWidth"),c=wt("contrast"),d=wt("grayscale"),u=wt("hueRotate"),m=wt("invert"),p=wt("gap"),f=wt("gradientColorStops"),y=wt("gradientColorStopPositions"),g=wt("inset"),x=wt("margin"),w=wt("opacity"),v=wt("padding"),b=wt("saturate"),j=wt("scale"),k=wt("sepia"),S=wt("skew"),N=wt("space"),E=wt("translate"),T=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Le,t],F=()=>[Le,t],M=()=>["",Ns,Vs],I=()=>["auto",ci,Le],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],A=()=>["","0",Le],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>[ci,Le];return{cacheSize:500,separator:":",theme:{colors:[pl],spacing:[Ns,Vs],blur:["none","",Ws,Le],brightness:_(),borderColor:[e],borderRadius:["none","","full",Ws,Le],borderSpacing:F(),borderWidth:M(),contrast:_(),grayscale:A(),hueRotate:_(),invert:A(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[KO,Vs],inset:O(),margin:O(),opacity:_(),padding:F(),saturate:_(),scale:_(),sepia:A(),skew:_(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Le]}],container:["container"],columns:[{columns:[Ws]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Le]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ml,Le]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Le]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",ml,Le]}],"grid-cols":[{"grid-cols":[pl]}],"col-start-end":[{col:["auto",{span:["full",ml,Le]},Le]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[pl]}],"row-start-end":[{row:["auto",{span:[ml,Le]},Le]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Le]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Le,t]}],"min-w":[{"min-w":[Le,t,"min","max","fit"]}],"max-w":[{"max-w":[Le,t,"none","full","min","max","fit","prose",{screen:[Ws]},Ws]}],h:[{h:[Le,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Le,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Le,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Le,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ws,Vs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",If]}],"font-family":[{font:[pl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Le]}],"line-clamp":[{"line-clamp":["none",ci,If]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ns,Le]}],"list-image":[{"list-image":["none",Le]}],"list-style-type":[{list:["none","disc","decimal",Le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ns,Vs]}],"underline-offset":[{"underline-offset":["auto",Ns,Le]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),XO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",JO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eD]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:$()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Ns,Le]}],"outline-w":[{outline:[Ns,Vs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Ns,Vs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ws,tD]}],"shadow-color":[{shadow:[pl]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ws,Le]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Le]}],duration:[{duration:_()}],ease:[{ease:["linear","in","out","in-out",Le]}],delay:[{delay:_()}],animate:[{animate:["none","spin","ping","pulse","bounce",Le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ml,Le]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Le]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ns,Vs,If]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oD=BO(aD);function re(...e){return oD(h_(e))}const iD=iO,S_=h.forwardRef(({className:e,...t},r)=>s.jsx(a_,{ref:r,className:re("fixed bottom-0 z-[100] flex max-h-screen w-full flex-col p-4 sm:right-0 md:max-w-[420px]",e),...t}));S_.displayName=a_.displayName;const lD=Vi("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-xl border-2 p-6 pr-8 shadow-xl transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-bottom-full",{variants:{variant:{default:"border-gold-400/20 bg-navy-800/95 backdrop-blur-xl text-gold-50",destructive:"destructive border-red-500/30 bg-red-950/90 backdrop-blur-xl text-red-200 [&>svg]:text-red-400"}},defaultVariants:{variant:"default"}}),C_=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(o_,{ref:n,className:re(lD({variant:t}),e),...r}));C_.displayName=o_.displayName;const cD=h.forwardRef(({className:e,...t},r)=>s.jsx(c_,{ref:r,className:re("inline-flex h-8 shrink-0 items-center justify-center rounded-lg border-2 border-gold-400/30 bg-white/10 px-3 text-sm font-medium ring-offset-navy-800 transition-colors hover:bg-white/15 focus:outline-none focus:ring-2 focus:ring-gold-400/50 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-red-300 group-[.destructive]:hover:border-red-400 group-[.destructive]:hover:bg-red-50 group-[.destructive]:focus:ring-red-400 text-white/70",e),...t}));cD.displayName=c_.displayName;const E_=h.forwardRef(({className:e,...t},r)=>s.jsx(d_,{ref:r,className:re("absolute right-2 top-2 rounded-md p-1 text-white/60 opacity-70 ring-offset-navy-800 transition-opacity hover:opacity-100 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-gold-400/50 focus:ring-offset-2 disabled:pointer-events-none group-[.destructive]:text-red-600 group-[.destructive]:hover:text-red-700 group-[.destructive]:focus:ring-red-400",e),"toast-close":"",...t,children:s.jsx(Ri,{className:"h-4 w-4"})}));E_.displayName=d_.displayName;const k_=h.forwardRef(({className:e,...t},r)=>s.jsx(i_,{ref:r,className:re("text-sm font-semibold text-gold-50",e),...t}));k_.displayName=i_.displayName;const T_=h.forwardRef(({className:e,...t},r)=>s.jsx(l_,{ref:r,className:re("text-sm opacity-90 text-white/60",e),...t}));T_.displayName=l_.displayName;function dD(){const{toasts:e}=Qt(),[t,r]=h.useState(!1);h.useEffect(()=>{const a=()=>{r(window.innerWidth<768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const n=t?3500:5e3;return s.jsxs(iD,{duration:n,children:[e.map(function({id:a,title:o,description:i,action:l,...c}){return s.jsxs(C_,{...c,duration:n,children:[s.jsxs("div",{className:"grid gap-1",children:[o&&s.jsx(k_,{className:"text-gold-50",children:o}),i&&s.jsx(T_,{className:"text-white/60",children:i})]}),l,s.jsx(E_,{})]},a)}),s.jsx(S_,{})]})}var wy=["light","dark"],uD="(prefers-color-scheme: dark)",hD=h.createContext(void 0),fD={setTheme:e=>{},themes:[]},mD=()=>{var e;return(e=h.useContext(hD))!=null?e:fD};h.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let d=o==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,m=a?wy.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(y,g=!1,x=!0)=>{let w=i?i[y]:y,v=g?y+"|| ''":`'${w}'`,b="";return a&&x&&!g&&wy.includes(y)&&(b+=`d.style.colorScheme = '${y}';`),r==="class"?g||w?b+=`c.add(${v})`:b+="null":w&&(b+=`d[s](n,${v})`),b},f=e?`!function(){${u}${p(e)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${uD}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${p(i?"x[e]":"e",!0)}}${d?"":"else{"+p(o,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${p(i?"x[e]":"e",!0)}}else{${p(o,!1,!1)};}${m}}catch(t){}}();`;return h.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var pD=e=>{switch(e){case"success":return xD;case"info":return wD;case"warning":return yD;case"error":return bD;default:return null}},gD=Array(12).fill(0),vD=({visible:e,className:t})=>oe.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},oe.createElement("div",{className:"sonner-spinner"},gD.map((r,n)=>oe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),xD=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),yD=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wD=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),bD=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jD=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},oe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),oe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ND=()=>{let[e,t]=oe.useState(document.hidden);return oe.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Tp=1,_D=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Tp++,o=this.toasts.find(l=>l.id===a),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:i,title:r}):l):this.addToast({title:r,...n,dismissible:i,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,o,i=n.then(async c=>{if(o=["resolve",c],oe.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(CD(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:u})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:u})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Tp++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},zr=new _D,SD=(e,t)=>{let r=(t==null?void 0:t.id)||Tp++;return zr.addToast({title:e,...t,id:r}),r},CD=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",ED=SD,kD=()=>zr.toasts,TD=()=>zr.getActiveToasts();Object.assign(ED,{success:zr.success,info:zr.info,warning:zr.warning,error:zr.error,custom:zr.custom,message:zr.message,promise:zr.promise,dismiss:zr.dismiss,loading:zr.loading},{getHistory:kD,getToasts:TD});function PD(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}PD(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function pd(e){return e.label!==void 0}var RD=3,OD="32px",DD="16px",by=4e3,AD=356,ID=14,MD=20,$D=200;function An(...e){return e.filter(Boolean).join(" ")}function LD(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var FD=e=>{var t,r,n,a,o,i,l,c,d,u,m;let{invert:p,toast:f,unstyled:y,interacting:g,setHeights:x,visibleToasts:w,heights:v,index:b,toasts:j,expanded:k,removeToast:S,defaultRichColors:N,closeButton:E,style:T,cancelButtonStyle:R,actionButtonStyle:O,className:F="",descriptionClassName:M="",duration:I,position:B,gap:$,loadingIcon:D,expandByDefault:P,classNames:A,icons:G,closeButtonAriaLabel:_="Close toast",pauseWhenPageIsHidden:C}=e,[L,W]=oe.useState(null),[Y,J]=oe.useState(null),[Q,he]=oe.useState(!1),[fe,_e]=oe.useState(!1),[z,Ne]=oe.useState(!1),[rt,it]=oe.useState(!1),[_r,Ut]=oe.useState(!1),[He,or]=oe.useState(0),[Wt,gn]=oe.useState(0),ir=oe.useRef(f.duration||I||by),Rn=oe.useRef(null),Br=oe.useRef(null),ts=b===0,Z=b+1<=w,ce=f.type,Re=f.dismissible!==!1,Fe=f.className||"",Me=f.descriptionClassName||"",Dt=oe.useMemo(()=>v.findIndex(le=>le.toastId===f.id)||0,[v,f.id]),Je=oe.useMemo(()=>{var le;return(le=f.closeButton)!=null?le:E},[f.closeButton,E]),Nt=oe.useMemo(()=>f.duration||I||by,[f.duration,I]),be=oe.useRef(0),lt=oe.useRef(0),vt=oe.useRef(0),U=oe.useRef(null),[X,se]=B.split("-"),de=oe.useMemo(()=>v.reduce((le,Ce,Ie)=>Ie>=Dt?le:le+Ce.height,0),[v,Dt]),$e=ND(),ct=f.invert||p,Ye=ce==="loading";lt.current=oe.useMemo(()=>Dt*$+de,[Dt,de]),oe.useEffect(()=>{ir.current=Nt},[Nt]),oe.useEffect(()=>{he(!0)},[]),oe.useEffect(()=>{let le=Br.current;if(le){let Ce=le.getBoundingClientRect().height;return gn(Ce),x(Ie=>[{toastId:f.id,height:Ce,position:f.position},...Ie]),()=>x(Ie=>Ie.filter(Oe=>Oe.toastId!==f.id))}},[x,f.id]),oe.useLayoutEffect(()=>{if(!Q)return;let le=Br.current,Ce=le.style.height;le.style.height="auto";let Ie=le.getBoundingClientRect().height;le.style.height=Ce,gn(Ie),x(Oe=>Oe.find(ft=>ft.toastId===f.id)?Oe.map(ft=>ft.toastId===f.id?{...ft,height:Ie}:ft):[{toastId:f.id,height:Ie,position:f.position},...Oe])},[Q,f.title,f.description,x,f.id]);let dt=oe.useCallback(()=>{_e(!0),or(lt.current),x(le=>le.filter(Ce=>Ce.toastId!==f.id)),setTimeout(()=>{S(f)},$D)},[f,S,x,lt]);oe.useEffect(()=>{if(f.promise&&ce==="loading"||f.duration===1/0||f.type==="loading")return;let le;return k||g||C&&$e?(()=>{if(vt.current<be.current){let Ce=new Date().getTime()-be.current;ir.current=ir.current-Ce}vt.current=new Date().getTime()})():ir.current!==1/0&&(be.current=new Date().getTime(),le=setTimeout(()=>{var Ce;(Ce=f.onAutoClose)==null||Ce.call(f,f),dt()},ir.current)),()=>clearTimeout(le)},[k,g,f,ce,C,$e,dt]),oe.useEffect(()=>{f.delete&&dt()},[dt,f.delete]);function Ct(){var le,Ce,Ie;return G!=null&&G.loading?oe.createElement("div",{className:An(A==null?void 0:A.loader,(le=f==null?void 0:f.classNames)==null?void 0:le.loader,"sonner-loader"),"data-visible":ce==="loading"},G.loading):D?oe.createElement("div",{className:An(A==null?void 0:A.loader,(Ce=f==null?void 0:f.classNames)==null?void 0:Ce.loader,"sonner-loader"),"data-visible":ce==="loading"},D):oe.createElement(vD,{className:An(A==null?void 0:A.loader,(Ie=f==null?void 0:f.classNames)==null?void 0:Ie.loader),visible:ce==="loading"})}return oe.createElement("li",{tabIndex:0,ref:Br,className:An(F,Fe,A==null?void 0:A.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,A==null?void 0:A.default,A==null?void 0:A[ce],(r=f==null?void 0:f.classNames)==null?void 0:r[ce]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:N,"data-styled":!(f.jsx||f.unstyled||y),"data-mounted":Q,"data-promise":!!f.promise,"data-swiped":_r,"data-removed":fe,"data-visible":Z,"data-y-position":X,"data-x-position":se,"data-index":b,"data-front":ts,"data-swiping":z,"data-dismissible":Re,"data-type":ce,"data-invert":ct,"data-swipe-out":rt,"data-swipe-direction":Y,"data-expanded":!!(k||P&&Q),style:{"--index":b,"--toasts-before":b,"--z-index":j.length-b,"--offset":`${fe?He:lt.current}px`,"--initial-height":P?"auto":`${Wt}px`,...T,...f.style},onDragEnd:()=>{Ne(!1),W(null),U.current=null},onPointerDown:le=>{Ye||!Re||(Rn.current=new Date,or(lt.current),le.target.setPointerCapture(le.pointerId),le.target.tagName!=="BUTTON"&&(Ne(!0),U.current={x:le.clientX,y:le.clientY}))},onPointerUp:()=>{var le,Ce,Ie,Oe;if(rt||!Re)return;U.current=null;let ft=Number(((le=Br.current)==null?void 0:le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),tt=Number(((Ce=Br.current)==null?void 0:Ce.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ut=new Date().getTime()-((Ie=Rn.current)==null?void 0:Ie.getTime()),ht=L==="x"?ft:tt,xt=Math.abs(ht)/ut;if(Math.abs(ht)>=MD||xt>.11){or(lt.current),(Oe=f.onDismiss)==null||Oe.call(f,f),J(L==="x"?ft>0?"right":"left":tt>0?"down":"up"),dt(),it(!0),Ut(!1);return}Ne(!1),W(null)},onPointerMove:le=>{var Ce,Ie,Oe,ft;if(!U.current||!Re||((Ce=window.getSelection())==null?void 0:Ce.toString().length)>0)return;let tt=le.clientY-U.current.y,ut=le.clientX-U.current.x,ht=(Ie=e.swipeDirections)!=null?Ie:LD(B);!L&&(Math.abs(ut)>1||Math.abs(tt)>1)&&W(Math.abs(ut)>Math.abs(tt)?"x":"y");let xt={x:0,y:0};L==="y"?(ht.includes("top")||ht.includes("bottom"))&&(ht.includes("top")&&tt<0||ht.includes("bottom")&&tt>0)&&(xt.y=tt):L==="x"&&(ht.includes("left")||ht.includes("right"))&&(ht.includes("left")&&ut<0||ht.includes("right")&&ut>0)&&(xt.x=ut),(Math.abs(xt.x)>0||Math.abs(xt.y)>0)&&Ut(!0),(Oe=Br.current)==null||Oe.style.setProperty("--swipe-amount-x",`${xt.x}px`),(ft=Br.current)==null||ft.style.setProperty("--swipe-amount-y",`${xt.y}px`)}},Je&&!f.jsx?oe.createElement("button",{"aria-label":_,"data-disabled":Ye,"data-close-button":!0,onClick:Ye||!Re?()=>{}:()=>{var le;dt(),(le=f.onDismiss)==null||le.call(f,f)},className:An(A==null?void 0:A.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},(o=G==null?void 0:G.close)!=null?o:jD):null,f.jsx||h.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:oe.createElement(oe.Fragment,null,ce||f.icon||f.promise?oe.createElement("div",{"data-icon":"",className:An(A==null?void 0:A.icon,(i=f==null?void 0:f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Ct():null,f.type!=="loading"?f.icon||(G==null?void 0:G[ce])||pD(ce):null):null,oe.createElement("div",{"data-content":"",className:An(A==null?void 0:A.content,(l=f==null?void 0:f.classNames)==null?void 0:l.content)},oe.createElement("div",{"data-title":"",className:An(A==null?void 0:A.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?oe.createElement("div",{"data-description":"",className:An(M,Me,A==null?void 0:A.description,(d=f==null?void 0:f.classNames)==null?void 0:d.description)},typeof f.description=="function"?f.description():f.description):null),h.isValidElement(f.cancel)?f.cancel:f.cancel&&pd(f.cancel)?oe.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||R,onClick:le=>{var Ce,Ie;pd(f.cancel)&&Re&&((Ie=(Ce=f.cancel).onClick)==null||Ie.call(Ce,le),dt())},className:An(A==null?void 0:A.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,h.isValidElement(f.action)?f.action:f.action&&pd(f.action)?oe.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||O,onClick:le=>{var Ce,Ie;pd(f.action)&&((Ie=(Ce=f.action).onClick)==null||Ie.call(Ce,le),!le.defaultPrevented&&dt())},className:An(A==null?void 0:A.actionButton,(m=f==null?void 0:f.classNames)==null?void 0:m.actionButton)},f.action.label):null))};function jy(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function UD(e,t){let r={};return[e,t].forEach((n,a)=>{let o=a===1,i=o?"--mobile-offset":"--offset",l=o?DD:OD;function c(d){["top","right","bottom","left"].forEach(u=>{r[`${i}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${i}-${d}`]=l:r[`${i}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var BD=h.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:m,duration:p,style:f,visibleToasts:y=RD,toastOptions:g,dir:x=jy(),gap:w=ID,loadingIcon:v,icons:b,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:k}=e,[S,N]=oe.useState([]),E=oe.useMemo(()=>Array.from(new Set([n].concat(S.filter(C=>C.position).map(C=>C.position)))),[S,n]),[T,R]=oe.useState([]),[O,F]=oe.useState(!1),[M,I]=oe.useState(!1),[B,$]=oe.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=oe.useRef(null),P=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=oe.useRef(null),G=oe.useRef(!1),_=oe.useCallback(C=>{N(L=>{var W;return(W=L.find(Y=>Y.id===C.id))!=null&&W.delete||zr.dismiss(C.id),L.filter(({id:Y})=>Y!==C.id)})},[]);return oe.useEffect(()=>zr.subscribe(C=>{if(C.dismiss){N(L=>L.map(W=>W.id===C.id?{...W,delete:!0}:W));return}setTimeout(()=>{UN.flushSync(()=>{N(L=>{let W=L.findIndex(Y=>Y.id===C.id);return W!==-1?[...L.slice(0,W),{...L[W],...C},...L.slice(W+1)]:[C,...L]})})})}),[]),oe.useEffect(()=>{if(u!=="system"){$(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let C=window.matchMedia("(prefers-color-scheme: dark)");try{C.addEventListener("change",({matches:L})=>{$(L?"dark":"light")})}catch{C.addListener(({matches:W})=>{try{$(W?"dark":"light")}catch(Y){console.error(Y)}})}},[u]),oe.useEffect(()=>{S.length<=1&&F(!1)},[S]),oe.useEffect(()=>{let C=L=>{var W,Y;a.every(J=>L[J]||L.code===J)&&(F(!0),(W=D.current)==null||W.focus()),L.code==="Escape"&&(document.activeElement===D.current||(Y=D.current)!=null&&Y.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[a]),oe.useEffect(()=>{if(D.current)return()=>{A.current&&(A.current.focus({preventScroll:!0}),A.current=null,G.current=!1)}},[D.current]),oe.createElement("section",{ref:t,"aria-label":`${j} ${P}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((C,L)=>{var W;let[Y,J]=C.split("-");return S.length?oe.createElement("ol",{key:C,dir:x==="auto"?jy():x,tabIndex:-1,ref:D,className:l,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":Y,"data-lifted":O&&S.length>1&&!o,"data-x-position":J,style:{"--front-toast-height":`${((W=T[0])==null?void 0:W.height)||0}px`,"--width":`${AD}px`,"--gap":`${w}px`,...f,...UD(c,d)},onBlur:Q=>{G.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(G.current=!1,A.current&&(A.current.focus({preventScroll:!0}),A.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||G.current||(G.current=!0,A.current=Q.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{M||F(!1)},onDragEnd:()=>F(!1),onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},S.filter(Q=>!Q.position&&L===0||Q.position===C).map((Q,he)=>{var fe,_e;return oe.createElement(FD,{key:Q.id,icons:b,index:he,toast:Q,defaultRichColors:m,duration:(fe=g==null?void 0:g.duration)!=null?fe:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:y,closeButton:(_e=g==null?void 0:g.closeButton)!=null?_e:i,interacting:M,position:C,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:_,toasts:S.filter(z=>z.position==Q.position),heights:T.filter(z=>z.position==Q.position),setHeights:R,expandByDefault:o,gap:w,loadingIcon:v,expanded:O,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const zD=({...e})=>{const{theme:t="system"}=mD();return s.jsx(BD,{theme:t,className:"toaster group",position:typeof window<"u"&&window.innerWidth<768?"bottom-center":"top-right",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-navy-800/95 group-[.toaster]:backdrop-blur-xl group-[.toaster]:text-gold-50 group-[.toaster]:border-gold-400/20 group-[.toaster]:shadow-xl group-[.toaster]:shadow-black/30",description:"group-[.toast]:text-white/60",actionButton:"group-[.toast]:bg-gold-400 group-[.toast]:text-navy-900",cancelButton:"group-[.toast]:bg-white/10 group-[.toast]:text-white/70"}},...e})};var VD=qu[" useId ".trim().toString()]||(()=>{}),WD=0;function hr(e){const[t,r]=h.useState(VD());return Vt(()=>{r(n=>n??String(WD++))},[e]),t?`radix-${t}`:""}const HD=["top","right","bottom","left"],wa=Math.min,rn=Math.max,Eu=Math.round,gd=Math.floor,gs=e=>({x:e,y:e}),qD={left:"right",right:"left",bottom:"top",top:"bottom"},GD={start:"end",end:"start"};function Pp(e,t,r){return rn(e,wa(t,r))}function Ls(e,t){return typeof e=="function"?e(t):e}function Fs(e){return e.split("-")[0]}function Hi(e){return e.split("-")[1]}function bv(e){return e==="x"?"y":"x"}function jv(e){return e==="y"?"height":"width"}const YD=new Set(["top","bottom"]);function ds(e){return YD.has(Fs(e))?"y":"x"}function Nv(e){return bv(ds(e))}function KD(e,t,r){r===void 0&&(r=!1);const n=Hi(e),a=Nv(e),o=jv(a);let i=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=ku(i)),[i,ku(i)]}function QD(e){const t=ku(e);return[Rp(e),t,Rp(t)]}function Rp(e){return e.replace(/start|end/g,t=>GD[t])}const Ny=["left","right"],_y=["right","left"],JD=["top","bottom"],XD=["bottom","top"];function ZD(e,t,r){switch(e){case"top":case"bottom":return r?t?_y:Ny:t?Ny:_y;case"left":case"right":return t?JD:XD;default:return[]}}function eA(e,t,r,n){const a=Hi(e);let o=ZD(Fs(e),r==="start",n);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(Rp)))),o}function ku(e){return e.replace(/left|right|bottom|top/g,t=>qD[t])}function tA(e){return{top:0,right:0,bottom:0,left:0,...e}}function P_(e){return typeof e!="number"?tA(e):{top:e,right:e,bottom:e,left:e}}function Tu(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function Sy(e,t,r){let{reference:n,floating:a}=e;const o=ds(t),i=Nv(t),l=jv(i),c=Fs(t),d=o==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,p=n[l]/2-a[l]/2;let f;switch(c){case"top":f={x:u,y:n.y-a.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:m};break;case"left":f={x:n.x-a.width,y:m};break;default:f={x:n.x,y:n.y}}switch(Hi(t)){case"start":f[i]-=p*(r&&d?-1:1);break;case"end":f[i]+=p*(r&&d?-1:1);break}return f}const rA=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=Sy(d,n,c),p=n,f={},y=0;for(let g=0;g<l.length;g++){const{name:x,fn:w}=l[g],{x:v,y:b,data:j,reset:k}=await w({x:u,y:m,initialPlacement:n,placement:p,strategy:a,middlewareData:f,rects:d,platform:i,elements:{reference:e,floating:t}});u=v??u,m=b??m,f={...f,[x]:{...f[x],...j}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(d=k.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:u,y:m}=Sy(d,p,c)),g=-1)}return{x:u,y:m,placement:p,strategy:a,middlewareData:f}};async function ac(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:p=!1,padding:f=0}=Ls(t,e),y=P_(f),x=l[p?m==="floating"?"reference":"floating":m],w=Tu(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(x)))==null||r?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=m==="floating"?{x:n,y:a,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),j=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},k=Tu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(w.top-k.top+y.top)/j.y,bottom:(k.bottom-w.bottom+y.bottom)/j.y,left:(w.left-k.left+y.left)/j.x,right:(k.right-w.right+y.right)/j.x}}const nA=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Ls(e,t)||{};if(d==null)return{};const m=P_(u),p={x:r,y:n},f=Nv(a),y=jv(f),g=await i.getDimensions(d),x=f==="y",w=x?"top":"left",v=x?"bottom":"right",b=x?"clientHeight":"clientWidth",j=o.reference[y]+o.reference[f]-p[f]-o.floating[y],k=p[f]-o.reference[f],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let N=S?S[b]:0;(!N||!await(i.isElement==null?void 0:i.isElement(S)))&&(N=l.floating[b]||o.floating[y]);const E=j/2-k/2,T=N/2-g[y]/2-1,R=wa(m[w],T),O=wa(m[v],T),F=R,M=N-g[y]-O,I=N/2-g[y]/2+E,B=Pp(F,I,M),$=!c.arrow&&Hi(a)!=null&&I!==B&&o.reference[y]/2-(I<F?R:O)-g[y]/2<0,D=$?I<F?I-F:I-M:0;return{[f]:p[f]+D,data:{[f]:B,centerOffset:I-B-D,...$&&{alignmentOffset:D}},reset:$}}}),sA=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...x}=Ls(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const w=Fs(a),v=ds(l),b=Fs(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),k=p||(b||!g?[ku(l)]:QD(l)),S=y!=="none";!p&&S&&k.push(...eA(l,g,y,j));const N=[l,...k],E=await ac(t,x),T=[];let R=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&T.push(E[w]),m){const I=KD(a,i,j);T.push(E[I[0]],E[I[1]])}if(R=[...R,{placement:a,overflows:T}],!T.every(I=>I<=0)){var O,F;const I=(((O=o.flip)==null?void 0:O.index)||0)+1,B=N[I];if(B&&(!(m==="alignment"?v!==ds(B):!1)||R.every(P=>ds(P.placement)===v?P.overflows[0]>0:!0)))return{data:{index:I,overflows:R},reset:{placement:B}};let $=(F=R.filter(D=>D.overflows[0]<=0).sort((D,P)=>D.overflows[1]-P.overflows[1])[0])==null?void 0:F.placement;if(!$)switch(f){case"bestFit":{var M;const D=(M=R.filter(P=>{if(S){const A=ds(P.placement);return A===v||A==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(A=>A>0).reduce((A,G)=>A+G,0)]).sort((P,A)=>P[1]-A[1])[0])==null?void 0:M[0];D&&($=D);break}case"initialPlacement":$=l;break}if(a!==$)return{reset:{placement:$}}}return{}}}};function Cy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ey(e){return HD.some(t=>e[t]>=0)}const aA=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=Ls(e,t);switch(n){case"referenceHidden":{const o=await ac(t,{...a,elementContext:"reference"}),i=Cy(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ey(i)}}}case"escaped":{const o=await ac(t,{...a,altBoundary:!0}),i=Cy(o,r.floating);return{data:{escapedOffsets:i,escaped:Ey(i)}}}default:return{}}}}},R_=new Set(["left","top"]);async function oA(e,t){const{placement:r,platform:n,elements:a}=e,o=await(n.isRTL==null?void 0:n.isRTL(a.floating)),i=Fs(r),l=Hi(r),c=ds(r)==="y",d=R_.has(i)?-1:1,u=o&&c?-1:1,m=Ls(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:y}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof y=="number"&&(f=l==="end"?y*-1:y),c?{x:f*u,y:p*d}:{x:p*d,y:f*u}}const iA=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await oA(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},lA=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:x=>{let{x:w,y:v}=x;return{x:w,y:v}}},...c}=Ls(e,t),d={x:r,y:n},u=await ac(t,c),m=ds(Fs(a)),p=bv(m);let f=d[p],y=d[m];if(o){const x=p==="y"?"top":"left",w=p==="y"?"bottom":"right",v=f+u[x],b=f-u[w];f=Pp(v,f,b)}if(i){const x=m==="y"?"top":"left",w=m==="y"?"bottom":"right",v=y+u[x],b=y-u[w];y=Pp(v,y,b)}const g=l.fn({...t,[p]:f,[m]:y});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[p]:o,[m]:i}}}}}},cA=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Ls(e,t),u={x:r,y:n},m=ds(a),p=bv(m);let f=u[p],y=u[m];const g=Ls(l,t),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=p==="y"?"height":"width",j=o.reference[p]-o.floating[b]+x.mainAxis,k=o.reference[p]+o.reference[b]-x.mainAxis;f<j?f=j:f>k&&(f=k)}if(d){var w,v;const b=p==="y"?"width":"height",j=R_.has(Fs(a)),k=o.reference[m]-o.floating[b]+(j&&((w=i.offset)==null?void 0:w[m])||0)+(j?0:x.crossAxis),S=o.reference[m]+o.reference[b]+(j?0:((v=i.offset)==null?void 0:v[m])||0)-(j?x.crossAxis:0);y<k?y=k:y>S&&(y=S)}return{[p]:f,[m]:y}}}},dA=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=Ls(e,t),u=await ac(t,d),m=Fs(a),p=Hi(a),f=ds(a)==="y",{width:y,height:g}=o.floating;let x,w;m==="top"||m==="bottom"?(x=m,w=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(w=m,x=p==="end"?"top":"bottom");const v=g-u.top-u.bottom,b=y-u.left-u.right,j=wa(g-u[x],v),k=wa(y-u[w],b),S=!t.middlewareData.shift;let N=j,E=k;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=v),S&&!p){const R=rn(u.left,0),O=rn(u.right,0),F=rn(u.top,0),M=rn(u.bottom,0);f?E=y-2*(R!==0||O!==0?R+O:rn(u.left,u.right)):N=g-2*(F!==0||M!==0?F+M:rn(u.top,u.bottom))}await c({...t,availableWidth:E,availableHeight:N});const T=await i.getDimensions(l.floating);return y!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function uh(){return typeof window<"u"}function qi(e){return O_(e)?(e.nodeName||"").toLowerCase():"#document"}function cn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function bs(e){var t;return(t=(O_(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function O_(e){return uh()?e instanceof Node||e instanceof cn(e).Node:!1}function Qn(e){return uh()?e instanceof Element||e instanceof cn(e).Element:!1}function ys(e){return uh()?e instanceof HTMLElement||e instanceof cn(e).HTMLElement:!1}function ky(e){return!uh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof cn(e).ShadowRoot}const uA=new Set(["inline","contents"]);function Tc(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Jn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!uA.has(a)}const hA=new Set(["table","td","th"]);function fA(e){return hA.has(qi(e))}const mA=[":popover-open",":modal"];function hh(e){return mA.some(t=>{try{return e.matches(t)}catch{return!1}})}const pA=["transform","translate","scale","rotate","perspective"],gA=["transform","translate","scale","rotate","perspective","filter"],vA=["paint","layout","strict","content"];function _v(e){const t=Sv(),r=Qn(e)?Jn(e):e;return pA.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||gA.some(n=>(r.willChange||"").includes(n))||vA.some(n=>(r.contain||"").includes(n))}function xA(e){let t=ba(e);for(;ys(t)&&!Oi(t);){if(_v(t))return t;if(hh(t))return null;t=ba(t)}return null}function Sv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const yA=new Set(["html","body","#document"]);function Oi(e){return yA.has(qi(e))}function Jn(e){return cn(e).getComputedStyle(e)}function fh(e){return Qn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ba(e){if(qi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ky(e)&&e.host||bs(e);return ky(t)?t.host:t}function D_(e){const t=ba(e);return Oi(t)?e.ownerDocument?e.ownerDocument.body:e.body:ys(t)&&Tc(t)?t:D_(t)}function oc(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=D_(e),o=a===((n=e.ownerDocument)==null?void 0:n.body),i=cn(a);if(o){const l=Op(i);return t.concat(i,i.visualViewport||[],Tc(a)?a:[],l&&r?oc(l):[])}return t.concat(a,oc(a,[],r))}function Op(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function A_(e){const t=Jn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=ys(e),o=a?e.offsetWidth:r,i=a?e.offsetHeight:n,l=Eu(r)!==o||Eu(n)!==i;return l&&(r=o,n=i),{width:r,height:n,$:l}}function Cv(e){return Qn(e)?e:e.contextElement}function di(e){const t=Cv(e);if(!ys(t))return gs(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:o}=A_(t);let i=(o?Eu(r.width):r.width)/n,l=(o?Eu(r.height):r.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const wA=gs(0);function I_(e){const t=cn(e);return!Sv()||!t.visualViewport?wA:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bA(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==cn(e)?!1:t}function lo(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),o=Cv(e);let i=gs(1);t&&(n?Qn(n)&&(i=di(n)):i=di(e));const l=bA(o,r,n)?I_(o):gs(0);let c=(a.left+l.x)/i.x,d=(a.top+l.y)/i.y,u=a.width/i.x,m=a.height/i.y;if(o){const p=cn(o),f=n&&Qn(n)?cn(n):n;let y=p,g=Op(y);for(;g&&n&&f!==y;){const x=di(g),w=g.getBoundingClientRect(),v=Jn(g),b=w.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,j=w.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;c*=x.x,d*=x.y,u*=x.x,m*=x.y,c+=b,d+=j,y=cn(g),g=Op(y)}}return Tu({width:u,height:m,x:c,y:d})}function mh(e,t){const r=fh(e).scrollLeft;return t?t.left+r:lo(bs(e)).left+r}function M_(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-mh(e,r),a=r.top+t.scrollTop;return{x:n,y:a}}function jA(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const o=a==="fixed",i=bs(n),l=t?hh(t.floating):!1;if(n===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},d=gs(1);const u=gs(0),m=ys(n);if((m||!m&&!o)&&((qi(n)!=="body"||Tc(i))&&(c=fh(n)),ys(n))){const f=lo(n);d=di(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const p=i&&!m&&!o?M_(i,c):gs(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+p.x,y:r.y*d.y-c.scrollTop*d.y+u.y+p.y}}function NA(e){return Array.from(e.getClientRects())}function _A(e){const t=bs(e),r=fh(e),n=e.ownerDocument.body,a=rn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=rn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+mh(e);const l=-r.scrollTop;return Jn(n).direction==="rtl"&&(i+=rn(t.clientWidth,n.clientWidth)-a),{width:a,height:o,x:i,y:l}}const Ty=25;function SA(e,t){const r=cn(e),n=bs(e),a=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const u=Sv();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const d=mh(n);if(d<=0){const u=n.ownerDocument,m=u.body,p=getComputedStyle(m),f=u.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,y=Math.abs(n.clientWidth-m.clientWidth-f);y<=Ty&&(o-=y)}else d<=Ty&&(o+=d);return{width:o,height:i,x:l,y:c}}const CA=new Set(["absolute","fixed"]);function EA(e,t){const r=lo(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,o=ys(e)?di(e):gs(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,d=n*o.y;return{width:i,height:l,x:c,y:d}}function Py(e,t,r){let n;if(t==="viewport")n=SA(e,r);else if(t==="document")n=_A(bs(e));else if(Qn(t))n=EA(t,r);else{const a=I_(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Tu(n)}function $_(e,t){const r=ba(e);return r===t||!Qn(r)||Oi(r)?!1:Jn(r).position==="fixed"||$_(r,t)}function kA(e,t){const r=t.get(e);if(r)return r;let n=oc(e,[],!1).filter(l=>Qn(l)&&qi(l)!=="body"),a=null;const o=Jn(e).position==="fixed";let i=o?ba(e):e;for(;Qn(i)&&!Oi(i);){const l=Jn(i),c=_v(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&CA.has(a.position)||Tc(i)&&!c&&$_(e,i))?n=n.filter(u=>u!==i):a=l,i=ba(i)}return t.set(e,n),n}function TA(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const i=[...r==="clippingAncestors"?hh(t)?[]:kA(t,this._c):[].concat(r),n],l=i[0],c=i.reduce((d,u)=>{const m=Py(t,u,a);return d.top=rn(m.top,d.top),d.right=wa(m.right,d.right),d.bottom=wa(m.bottom,d.bottom),d.left=rn(m.left,d.left),d},Py(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function PA(e){const{width:t,height:r}=A_(e);return{width:t,height:r}}function RA(e,t,r){const n=ys(t),a=bs(t),o=r==="fixed",i=lo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=gs(0);function d(){c.x=mh(a)}if(n||!n&&!o)if((qi(t)!=="body"||Tc(a))&&(l=fh(t)),n){const f=lo(t,!0,o,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&d();o&&!n&&a&&d();const u=a&&!n&&!o?M_(a,l):gs(0),m=i.left+l.scrollLeft-c.x-u.x,p=i.top+l.scrollTop-c.y-u.y;return{x:m,y:p,width:i.width,height:i.height}}function Mf(e){return Jn(e).position==="static"}function Ry(e,t){if(!ys(e)||Jn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return bs(e)===r&&(r=r.ownerDocument.body),r}function L_(e,t){const r=cn(e);if(hh(e))return r;if(!ys(e)){let a=ba(e);for(;a&&!Oi(a);){if(Qn(a)&&!Mf(a))return a;a=ba(a)}return r}let n=Ry(e,t);for(;n&&fA(n)&&Mf(n);)n=Ry(n,t);return n&&Oi(n)&&Mf(n)&&!_v(n)?r:n||xA(e)||r}const OA=async function(e){const t=this.getOffsetParent||L_,r=this.getDimensions,n=await r(e.floating);return{reference:RA(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function DA(e){return Jn(e).direction==="rtl"}const AA={convertOffsetParentRelativeRectToViewportRelativeRect:jA,getDocumentElement:bs,getClippingRect:TA,getOffsetParent:L_,getElementRects:OA,getClientRects:NA,getDimensions:PA,getScale:di,isElement:Qn,isRTL:DA};function F_(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function IA(e,t){let r=null,n;const a=bs(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=e.getBoundingClientRect(),{left:u,top:m,width:p,height:f}=d;if(l||t(),!p||!f)return;const y=gd(m),g=gd(a.clientWidth-(u+p)),x=gd(a.clientHeight-(m+f)),w=gd(u),b={rootMargin:-y+"px "+-g+"px "+-x+"px "+-w+"px",threshold:rn(0,wa(1,c))||1};let j=!0;function k(S){const N=S[0].intersectionRatio;if(N!==c){if(!j)return i();N?i(!1,N):n=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!F_(d,e.getBoundingClientRect())&&i(),j=!1}try{r=new IntersectionObserver(k,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(k,b)}r.observe(e)}return i(!0),o}function MA(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Cv(e),u=a||o?[...d?oc(d):[],...oc(t)]:[];u.forEach(w=>{a&&w.addEventListener("scroll",r,{passive:!0}),o&&w.addEventListener("resize",r)});const m=d&&l?IA(d,r):null;let p=-1,f=null;i&&(f=new ResizeObserver(w=>{let[v]=w;v&&v.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(t)})),r()}),d&&!c&&f.observe(d),f.observe(t));let y,g=c?lo(e):null;c&&x();function x(){const w=lo(e);g&&!F_(g,w)&&r(),g=w,y=requestAnimationFrame(x)}return r(),()=>{var w;u.forEach(v=>{a&&v.removeEventListener("scroll",r),o&&v.removeEventListener("resize",r)}),m==null||m(),(w=f)==null||w.disconnect(),f=null,c&&cancelAnimationFrame(y)}}const $A=iA,LA=lA,FA=sA,UA=dA,BA=aA,Oy=nA,zA=cA,VA=(e,t,r)=>{const n=new Map,a={platform:AA,...r},o={...a.platform,_c:n};return rA(e,t,{...a,platform:o})};var WA=typeof document<"u",HA=function(){},Gd=WA?h.useLayoutEffect:HA;function Pu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Pu(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const o=a[n];if(!(o==="_owner"&&e.$$typeof)&&!Pu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function U_(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Dy(e,t){const r=U_(e);return Math.round(t*r)/r}function $f(e){const t=h.useRef(e);return Gd(()=>{t.current=e}),t}function qA(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,m]=h.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=h.useState(n);Pu(p,n)||f(n);const[y,g]=h.useState(null),[x,w]=h.useState(null),v=h.useCallback(P=>{P!==S.current&&(S.current=P,g(P))},[]),b=h.useCallback(P=>{P!==N.current&&(N.current=P,w(P))},[]),j=o||y,k=i||x,S=h.useRef(null),N=h.useRef(null),E=h.useRef(u),T=c!=null,R=$f(c),O=$f(a),F=$f(d),M=h.useCallback(()=>{if(!S.current||!N.current)return;const P={placement:t,strategy:r,middleware:p};O.current&&(P.platform=O.current),VA(S.current,N.current,P).then(A=>{const G={...A,isPositioned:F.current!==!1};I.current&&!Pu(E.current,G)&&(E.current=G,vo.flushSync(()=>{m(G)}))})},[p,t,r,O,F]);Gd(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,m(P=>({...P,isPositioned:!1})))},[d]);const I=h.useRef(!1);Gd(()=>(I.current=!0,()=>{I.current=!1}),[]),Gd(()=>{if(j&&(S.current=j),k&&(N.current=k),j&&k){if(R.current)return R.current(j,k,M);M()}},[j,k,M,R,T]);const B=h.useMemo(()=>({reference:S,floating:N,setReference:v,setFloating:b}),[v,b]),$=h.useMemo(()=>({reference:j,floating:k}),[j,k]),D=h.useMemo(()=>{const P={position:r,left:0,top:0};if(!$.floating)return P;const A=Dy($.floating,u.x),G=Dy($.floating,u.y);return l?{...P,transform:"translate("+A+"px, "+G+"px)",...U_($.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:A,top:G}},[r,l,$.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:M,refs:B,elements:$,floatingStyles:D}),[u,M,B,$,D])}const GA=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Oy({element:n.current,padding:a}).fn(r):{}:n?Oy({element:n,padding:a}).fn(r):{}}}},YA=(e,t)=>({...$A(e),options:[e,t]}),KA=(e,t)=>({...LA(e),options:[e,t]}),QA=(e,t)=>({...zA(e),options:[e,t]}),JA=(e,t)=>({...FA(e),options:[e,t]}),XA=(e,t)=>({...UA(e),options:[e,t]}),ZA=(e,t)=>({...BA(e),options:[e,t]}),eI=(e,t)=>({...GA(e),options:[e,t]});var tI="Arrow",B_=h.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...o}=e;return s.jsx(ve.svg,{...o,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});B_.displayName=tI;var rI=B_;function Ev(e){const[t,r]=h.useState(void 0);return Vt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var kv="Popper",[z_,Ca]=Fr(kv),[nI,V_]=z_(kv),W_=e=>{const{__scopePopper:t,children:r}=e,[n,a]=h.useState(null);return s.jsx(nI,{scope:t,anchor:n,onAnchorChange:a,children:r})};W_.displayName=kv;var H_="PopperAnchor",q_=h.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,o=V_(H_,r),i=h.useRef(null),l=We(t,i),c=h.useRef(null);return h.useEffect(()=>{const d=c.current;c.current=(n==null?void 0:n.current)||i.current,d!==c.current&&o.onAnchorChange(c.current)}),n?null:s.jsx(ve.div,{...a,ref:l})});q_.displayName=H_;var Tv="PopperContent",[sI,aI]=z_(Tv),G_=h.forwardRef((e,t)=>{var Q,he,fe,_e,z,Ne;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:y,...g}=e,x=V_(Tv,r),[w,v]=h.useState(null),b=We(t,rt=>v(rt)),[j,k]=h.useState(null),S=Ev(j),N=(S==null?void 0:S.width)??0,E=(S==null?void 0:S.height)??0,T=n+(o!=="center"?"-"+o:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(d)?d:[d],F=O.length>0,M={padding:R,boundary:O.filter(iI),altBoundary:F},{refs:I,floatingStyles:B,placement:$,isPositioned:D,middlewareData:P}=qA({strategy:"fixed",placement:T,whileElementsMounted:(...rt)=>MA(...rt,{animationFrame:f==="always"}),elements:{reference:x.anchor},middleware:[YA({mainAxis:a+E,alignmentAxis:i}),c&&KA({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?QA():void 0,...M}),c&&JA({...M}),XA({...M,apply:({elements:rt,rects:it,availableWidth:_r,availableHeight:Ut})=>{const{width:He,height:or}=it.reference,Wt=rt.floating.style;Wt.setProperty("--radix-popper-available-width",`${_r}px`),Wt.setProperty("--radix-popper-available-height",`${Ut}px`),Wt.setProperty("--radix-popper-anchor-width",`${He}px`),Wt.setProperty("--radix-popper-anchor-height",`${or}px`)}}),j&&eI({element:j,padding:l}),lI({arrowWidth:N,arrowHeight:E}),p&&ZA({strategy:"referenceHidden",...M})]}),[A,G]=Q_($),_=Mr(y);Vt(()=>{D&&(_==null||_())},[D,_]);const C=(Q=P.arrow)==null?void 0:Q.x,L=(he=P.arrow)==null?void 0:he.y,W=((fe=P.arrow)==null?void 0:fe.centerOffset)!==0,[Y,J]=h.useState();return Vt(()=>{w&&J(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:D?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(_e=P.transformOrigin)==null?void 0:_e.x,(z=P.transformOrigin)==null?void 0:z.y].join(" "),...((Ne=P.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(sI,{scope:r,placedSide:A,onArrowChange:k,arrowX:C,arrowY:L,shouldHideArrow:W,children:s.jsx(ve.div,{"data-side":A,"data-align":G,...g,ref:b,style:{...g.style,animation:D?void 0:"none"}})})})});G_.displayName=Tv;var Y_="PopperArrow",oI={top:"bottom",right:"left",bottom:"top",left:"right"},K_=h.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,o=aI(Y_,n),i=oI[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(rI,{...a,ref:r,style:{...a.style,display:"block"}})})});K_.displayName=Y_;function iI(e){return e!==null}var lI=e=>({name:"transformOrigin",options:e,fn(t){var x,w,v;const{placement:r,rects:n,middlewareData:a}=t,i=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,u]=Q_(r),m={start:"0%",center:"50%",end:"100%"}[u],p=(((w=a.arrow)==null?void 0:w.x)??0)+l/2,f=(((v=a.arrow)==null?void 0:v.y)??0)+c/2;let y="",g="";return d==="bottom"?(y=i?m:`${p}px`,g=`${-c}px`):d==="top"?(y=i?m:`${p}px`,g=`${n.floating.height+c}px`):d==="right"?(y=`${-c}px`,g=i?m:`${f}px`):d==="left"&&(y=`${n.floating.width+c}px`,g=i?m:`${f}px`),{data:{x:y,y:g}}}});function Q_(e){const[t,r="center"]=e.split("-");return[t,r]}var Pv=W_,Pc=q_,ph=G_,gh=K_,cI=Symbol("radix.slottable");function dI(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=cI,t}var[vh]=Fr("Tooltip",[Ca]),Rv=Ca(),J_="TooltipProvider",uI=700,Ay="tooltip.open",[hI,X_]=vh(J_),Z_=e=>{const{__scopeTooltip:t,delayDuration:r=uI,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=e,i=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(hI,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:o})};Z_.displayName=J_;var e1="Tooltip",[$9,xh]=vh(e1),Dp="TooltipTrigger",fI=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=xh(Dp,r),o=X_(Dp,r),i=Rv(r),l=h.useRef(null),c=We(t,l,a.onTriggerChange),d=h.useRef(!1),u=h.useRef(!1),m=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),s.jsx(Pc,{asChild:!0,...i,children:s.jsx(ve.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:ae(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ae(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ae(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:ae(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:ae(e.onBlur,a.onClose),onClick:ae(e.onClick,a.onClose)})})});fI.displayName=Dp;var mI="TooltipPortal",[L9,pI]=vh(mI,{forceMount:void 0}),Di="TooltipContent",t1=h.forwardRef((e,t)=>{const r=pI(Di,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=e,i=xh(Di,e.__scopeTooltip);return s.jsx(Jr,{present:n||i.open,children:i.disableHoverableContent?s.jsx(r1,{side:a,...o,ref:t}):s.jsx(gI,{side:a,...o,ref:t})})}),gI=h.forwardRef((e,t)=>{const r=xh(Di,e.__scopeTooltip),n=X_(Di,e.__scopeTooltip),a=h.useRef(null),o=We(t,a),[i,l]=h.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:m}=n,p=h.useCallback(()=>{l(null),m(!1)},[m]),f=h.useCallback((y,g)=>{const x=y.currentTarget,w={x:y.clientX,y:y.clientY},v=bI(w,x.getBoundingClientRect()),b=jI(w,v),j=NI(g.getBoundingClientRect()),k=SI([...b,...j]);l(k),m(!0)},[m]);return h.useEffect(()=>()=>p(),[p]),h.useEffect(()=>{if(c&&u){const y=x=>f(x,u),g=x=>f(x,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",g)}}},[c,u,f,p]),h.useEffect(()=>{if(i){const y=g=>{const x=g.target,w={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(x))||(u==null?void 0:u.contains(x)),b=!_I(w,i);v?p():b&&(p(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,i,d,p]),s.jsx(r1,{...e,ref:o})}),[vI,xI]=vh(e1,{isInside:!1}),yI=dI("TooltipContent"),r1=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=xh(Di,r),d=Rv(r),{onClose:u}=c;return h.useEffect(()=>(document.addEventListener(Ay,u),()=>document.removeEventListener(Ay,u)),[u]),h.useEffect(()=>{if(c.trigger){const m=p=>{const f=p.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),s.jsx(xo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:s.jsxs(ph,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(yI,{children:n}),s.jsx(vI,{scope:r,isInside:!0,children:s.jsx(V4,{id:c.contentId,role:"tooltip",children:a||n})})]})})});t1.displayName=Di;var n1="TooltipArrow",wI=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Rv(r);return xI(n1,r).isInside?null:s.jsx(gh,{...a,...n,ref:t})});wI.displayName=n1;function bI(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function jI(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function NI(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function _I(e,t){const{x:r,y:n}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,u=l.y,m=c.x,p=c.y;u>n!=p>n&&r<(m-d)*(n-u)/(p-u)+d&&(a=!a)}return a}function SI(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),CI(t)}function CI(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var EI=Z_,s1=t1;const kI=EI,TI=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(s1,{ref:n,sideOffset:t,className:re("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));TI.displayName=s1.displayName;var yh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},PI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ta,xg,vb,RI=(vb=class{constructor(){Xe(this,ta,PI);Xe(this,xg,!1)}setTimeoutProvider(e){Te(this,ta,e)}setTimeout(e,t){return ee(this,ta).setTimeout(e,t)}clearTimeout(e){ee(this,ta).clearTimeout(e)}setInterval(e,t){return ee(this,ta).setInterval(e,t)}clearInterval(e){ee(this,ta).clearInterval(e)}},ta=new WeakMap,xg=new WeakMap,vb),Ap=new RI;function OI(e){setTimeout(e,0)}var wh=typeof window>"u"||"Deno"in globalThis;function Ln(){}function DI(e,t){return typeof e=="function"?e(t):e}function AI(e){return typeof e=="number"&&e>=0&&e!==1/0}function II(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ip(e,t){return typeof e=="function"?e(t):e}function MI(e,t){return typeof e=="function"?e(t):e}function Iy(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(n){if(t.queryHash!==Ov(i,t.options))return!1}else if(!lc(t.queryKey,i))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function My(e,t){const{exact:r,status:n,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(ic(t.options.mutationKey)!==ic(o))return!1}else if(!lc(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Ov(e,t){return((t==null?void 0:t.queryKeyHashFn)||ic)(e)}function ic(e){return JSON.stringify(e,(t,r)=>Mp(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function lc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>lc(e[r],t[r])):!1}var $I=Object.prototype.hasOwnProperty;function a1(e,t){if(e===t)return e;const r=$y(e)&&$y(t);if(!r&&!(Mp(e)&&Mp(t)))return t;const a=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),i=o.length,l=r?new Array(i):{};let c=0;for(let d=0;d<i;d++){const u=r?d:o[d],m=e[u],p=t[u];if(m===p){l[u]=m,(r?d<a:$I.call(e,u))&&c++;continue}if(m===null||p===null||typeof m!="object"||typeof p!="object"){l[u]=p;continue}const f=a1(m,p);l[u]=f,f===m&&c++}return a===i&&c===a?e:l}function $y(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Mp(e){if(!Ly(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Ly(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ly(e){return Object.prototype.toString.call(e)==="[object Object]"}function LI(e){return new Promise(t=>{Ap.setTimeout(t,e)})}function FI(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?a1(e,t):t}function UI(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function BI(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Dv=Symbol();function o1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Dv?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ya,ra,mi,xb,zI=(xb=class extends yh{constructor(){super();Xe(this,Ya);Xe(this,ra);Xe(this,mi);Te(this,mi,t=>{if(!wh&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ee(this,ra)||this.setEventListener(ee(this,mi))}onUnsubscribe(){var t;this.hasListeners()||((t=ee(this,ra))==null||t.call(this),Te(this,ra,void 0))}setEventListener(t){var r;Te(this,mi,t),(r=ee(this,ra))==null||r.call(this),Te(this,ra,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){ee(this,Ya)!==t&&(Te(this,Ya,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof ee(this,Ya)=="boolean"?ee(this,Ya):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ya=new WeakMap,ra=new WeakMap,mi=new WeakMap,xb),i1=new zI;function VI(){let e,t;const r=new Promise((a,o)=>{e=a,t=o});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var WI=OI;function HI(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=WI;const o=l=>{t?e.push(l):a(()=>{r(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Rr=HI(),pi,na,gi,yb,qI=(yb=class extends yh{constructor(){super();Xe(this,pi,!0);Xe(this,na);Xe(this,gi);Te(this,gi,t=>{if(!wh&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ee(this,na)||this.setEventListener(ee(this,gi))}onUnsubscribe(){var t;this.hasListeners()||((t=ee(this,na))==null||t.call(this),Te(this,na,void 0))}setEventListener(t){var r;Te(this,gi,t),(r=ee(this,na))==null||r.call(this),Te(this,na,t(this.setOnline.bind(this)))}setOnline(t){ee(this,pi)!==t&&(Te(this,pi,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return ee(this,pi)}},pi=new WeakMap,na=new WeakMap,gi=new WeakMap,yb),Ru=new qI;function GI(e){return Math.min(1e3*2**e,3e4)}function l1(e){return(e??"online")==="online"?Ru.isOnline():!0}var $p=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function c1(e){let t=!1,r=0,n;const a=VI(),o=()=>a.status!=="pending",i=g=>{var x;if(!o()){const w=new $p(g);p(w),(x=e.onCancel)==null||x.call(e,w)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>i1.isFocused()&&(e.networkMode==="always"||Ru.isOnline())&&e.canRun(),u=()=>l1(e.networkMode)&&e.canRun(),m=g=>{o()||(n==null||n(),a.resolve(g))},p=g=>{o()||(n==null||n(),a.reject(g))},f=()=>new Promise(g=>{var x;n=w=>{(o()||d())&&g(w)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;n=void 0,o()||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(o())return;let g;const x=r===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(m).catch(w=>{var S;if(o())return;const v=e.retry??(wh?0:3),b=e.retryDelay??GI,j=typeof b=="function"?b(r,w):b,k=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,w);if(t||!k){p(w);return}r++,(S=e.onFail)==null||S.call(e,r,w),LI(j).then(()=>d()?void 0:f()).then(()=>{t?p(w):y()})})};return{promise:a,status:()=>a.status,cancel:i,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():f().then(y),a)}}var Ka,wb,d1=(wb=class{constructor(){Xe(this,Ka)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),AI(this.gcTime)&&Te(this,Ka,Ap.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(wh?1/0:5*60*1e3))}clearGcTimeout(){ee(this,Ka)&&(Ap.clearTimeout(ee(this,Ka)),Te(this,Ka,void 0))}},Ka=new WeakMap,wb),Qa,vi,yn,Ja,Zt,yc,Xa,Un,Ss,bb,YI=(bb=class extends d1{constructor(t){super();Xe(this,Un);Xe(this,Qa);Xe(this,vi);Xe(this,yn);Xe(this,Ja);Xe(this,Zt);Xe(this,yc);Xe(this,Xa);Te(this,Xa,!1),Te(this,yc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Te(this,Ja,t.client),Te(this,yn,ee(this,Ja).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Te(this,Qa,Uy(this.options)),this.state=t.state??ee(this,Qa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ee(this,Zt))==null?void 0:t.promise}setOptions(t){if(this.options={...ee(this,yc),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Uy(this.options);r.data!==void 0&&(this.setState(Fy(r.data,r.dataUpdatedAt)),Te(this,Qa,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ee(this,yn).remove(this)}setData(t,r){const n=FI(this.state.data,t,this.options);return gr(this,Un,Ss).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){gr(this,Un,Ss).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=ee(this,Zt))==null?void 0:n.promise;return(a=ee(this,Zt))==null||a.cancel(t),r?r.then(Ln).catch(Ln):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,Qa))}isActive(){return this.observers.some(t=>MI(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ip(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!II(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ee(this,Zt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ee(this,Zt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ee(this,yn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ee(this,Zt)&&(ee(this,Xa)?ee(this,Zt).cancel({revert:!0}):ee(this,Zt).cancelRetry()),this.scheduleGc()),ee(this,yn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||gr(this,Un,Ss).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,m,p,f,y,g,x,w,v,b;if(this.state.fetchStatus!=="idle"&&((c=ee(this,Zt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ee(this,Zt))return ee(this,Zt).continueRetry(),ee(this,Zt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(k=>k.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,a=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(Te(this,Xa,!0),n.signal)})},o=()=>{const j=o1(this.options,r),S=(()=>{const N={client:ee(this,Ja),queryKey:this.queryKey,meta:this.meta};return a(N),N})();return Te(this,Xa,!1),this.options.persister?this.options.persister(j,S,this):j(S)},l=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ee(this,Ja),state:this.state,fetchFn:o};return a(j),j})();(d=this.options.behavior)==null||d.onFetch(l,this),Te(this,vi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&gr(this,Un,Ss).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),Te(this,Zt,c1({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:j=>{j instanceof $p&&j.revert&&this.setState({...ee(this,vi),fetchStatus:"idle"}),n.abort()},onFail:(j,k)=>{gr(this,Un,Ss).call(this,{type:"failed",failureCount:j,error:k})},onPause:()=>{gr(this,Un,Ss).call(this,{type:"pause"})},onContinue:()=>{gr(this,Un,Ss).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const j=await ee(this,Zt).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(f=(p=ee(this,yn).config).onSuccess)==null||f.call(p,j,this),(g=(y=ee(this,yn).config).onSettled)==null||g.call(y,j,this.state.error,this),j}catch(j){if(j instanceof $p){if(j.silent)return ee(this,Zt).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw gr(this,Un,Ss).call(this,{type:"error",error:j}),(w=(x=ee(this,yn).config).onError)==null||w.call(x,j,this),(b=(v=ee(this,yn).config).onSettled)==null||b.call(v,this.state.data,j,this),j}finally{this.scheduleGc()}}},Qa=new WeakMap,vi=new WeakMap,yn=new WeakMap,Ja=new WeakMap,Zt=new WeakMap,yc=new WeakMap,Xa=new WeakMap,Un=new WeakSet,Ss=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...KI(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...Fy(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Te(this,vi,t.manual?a:void 0),a;case"error":const o=t.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Rr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ee(this,yn).notify({query:this,type:"updated",action:t})})},bb);function KI(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:l1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Fy(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Uy(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function By(e){return{onFetch:(t,r)=>{var u,m,p,f,y;const n=t.options,a=(p=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:p.direction,o=((f=t.state.data)==null?void 0:f.pages)||[],i=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},w=o1(t.options,t.fetchOptions),v=async(b,j,k)=>{if(g)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};return x(O),O})(),E=await w(N),{maxPages:T}=t.options,R=k?BI:UI;return{pages:R(b.pages,E,T),pageParams:R(b.pageParams,j,T)}};if(a&&o.length){const b=a==="backward",j=b?QI:zy,k={pages:o,pageParams:i},S=j(n,k);l=await v(k,S,b)}else{const b=e??o.length;do{const j=c===0?i[0]??n.initialPageParam:zy(n,l);if(c>0&&j==null)break;l=await v(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function zy(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function QI(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var wc,as,kr,Za,os,Gs,jb,JI=(jb=class extends d1{constructor(t){super();Xe(this,os);Xe(this,wc);Xe(this,as);Xe(this,kr);Xe(this,Za);Te(this,wc,t.client),this.mutationId=t.mutationId,Te(this,kr,t.mutationCache),Te(this,as,[]),this.state=t.state||XI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ee(this,as).includes(t)||(ee(this,as).push(t),this.clearGcTimeout(),ee(this,kr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Te(this,as,ee(this,as).filter(r=>r!==t)),this.scheduleGc(),ee(this,kr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ee(this,as).length||(this.state.status==="pending"?this.scheduleGc():ee(this,kr).remove(this))}continue(){var t;return((t=ee(this,Za))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,c,d,u,m,p,f,y,g,x,w,v,b,j,k,S,N,E,T;const r=()=>{gr(this,os,Gs).call(this,{type:"continue"})},n={client:ee(this,wc),meta:this.options.meta,mutationKey:this.options.mutationKey};Te(this,Za,c1({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(R,O)=>{gr(this,os,Gs).call(this,{type:"failed",failureCount:R,error:O})},onPause:()=>{gr(this,os,Gs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,kr).canRun(this)}));const a=this.state.status==="pending",o=!ee(this,Za).canStart();try{if(a)r();else{gr(this,os,Gs).call(this,{type:"pending",variables:t,isPaused:o}),await((l=(i=ee(this,kr).config).onMutate)==null?void 0:l.call(i,t,this,n));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));O!==this.state.context&&gr(this,os,Gs).call(this,{type:"pending",context:O,variables:t,isPaused:o})}const R=await ee(this,Za).start();return await((m=(u=ee(this,kr).config).onSuccess)==null?void 0:m.call(u,R,t,this.state.context,this,n)),await((f=(p=this.options).onSuccess)==null?void 0:f.call(p,R,t,this.state.context,n)),await((g=(y=ee(this,kr).config).onSettled)==null?void 0:g.call(y,R,null,this.state.variables,this.state.context,this,n)),await((w=(x=this.options).onSettled)==null?void 0:w.call(x,R,null,t,this.state.context,n)),gr(this,os,Gs).call(this,{type:"success",data:R}),R}catch(R){try{throw await((b=(v=ee(this,kr).config).onError)==null?void 0:b.call(v,R,t,this.state.context,this,n)),await((k=(j=this.options).onError)==null?void 0:k.call(j,R,t,this.state.context,n)),await((N=(S=ee(this,kr).config).onSettled)==null?void 0:N.call(S,void 0,R,this.state.variables,this.state.context,this,n)),await((T=(E=this.options).onSettled)==null?void 0:T.call(E,void 0,R,t,this.state.context,n)),R}finally{gr(this,os,Gs).call(this,{type:"error",error:R})}}finally{ee(this,kr).runNext(this)}}},wc=new WeakMap,as=new WeakMap,kr=new WeakMap,Za=new WeakMap,os=new WeakSet,Gs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Rr.batch(()=>{ee(this,as).forEach(n=>{n.onMutationUpdate(t)}),ee(this,kr).notify({mutation:this,type:"updated",action:t})})},jb);function XI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ts,Bn,bc,Nb,ZI=(Nb=class extends yh{constructor(t={}){super();Xe(this,Ts);Xe(this,Bn);Xe(this,bc);this.config=t,Te(this,Ts,new Set),Te(this,Bn,new Map),Te(this,bc,0)}build(t,r,n){const a=new JI({client:t,mutationCache:this,mutationId:++Kc(this,bc)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){ee(this,Ts).add(t);const r=vd(t);if(typeof r=="string"){const n=ee(this,Bn).get(r);n?n.push(t):ee(this,Bn).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ee(this,Ts).delete(t)){const r=vd(t);if(typeof r=="string"){const n=ee(this,Bn).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&ee(this,Bn).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=vd(t);if(typeof r=="string"){const n=ee(this,Bn).get(r),a=n==null?void 0:n.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=vd(t);if(typeof r=="string"){const a=(n=ee(this,Bn).get(r))==null?void 0:n.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Rr.batch(()=>{ee(this,Ts).forEach(t=>{this.notify({type:"removed",mutation:t})}),ee(this,Ts).clear(),ee(this,Bn).clear()})}getAll(){return Array.from(ee(this,Ts))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>My(r,n))}findAll(t={}){return this.getAll().filter(r=>My(t,r))}notify(t){Rr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Rr.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ln))))}},Ts=new WeakMap,Bn=new WeakMap,bc=new WeakMap,Nb);function vd(e){var t;return(t=e.options.scope)==null?void 0:t.id}var is,_b,e5=(_b=class extends yh{constructor(t={}){super();Xe(this,is);this.config=t,Te(this,is,new Map)}build(t,r,n){const a=r.queryKey,o=r.queryHash??Ov(a,r);let i=this.get(o);return i||(i=new YI({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){ee(this,is).has(t.queryHash)||(ee(this,is).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=ee(this,is).get(t.queryHash);r&&(t.destroy(),r===t&&ee(this,is).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Rr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ee(this,is).get(t)}getAll(){return[...ee(this,is).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Iy(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Iy(t,n)):r}notify(t){Rr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Rr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Rr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},is=new WeakMap,_b),Rt,sa,aa,xi,yi,oa,wi,bi,Sb,t5=(Sb=class{constructor(e={}){Xe(this,Rt);Xe(this,sa);Xe(this,aa);Xe(this,xi);Xe(this,yi);Xe(this,oa);Xe(this,wi);Xe(this,bi);Te(this,Rt,e.queryCache||new e5),Te(this,sa,e.mutationCache||new ZI),Te(this,aa,e.defaultOptions||{}),Te(this,xi,new Map),Te(this,yi,new Map),Te(this,oa,0)}mount(){Kc(this,oa)._++,ee(this,oa)===1&&(Te(this,wi,i1.subscribe(async e=>{e&&(await this.resumePausedMutations(),ee(this,Rt).onFocus())})),Te(this,bi,Ru.subscribe(async e=>{e&&(await this.resumePausedMutations(),ee(this,Rt).onOnline())})))}unmount(){var e,t;Kc(this,oa)._--,ee(this,oa)===0&&((e=ee(this,wi))==null||e.call(this),Te(this,wi,void 0),(t=ee(this,bi))==null||t.call(this),Te(this,bi,void 0))}isFetching(e){return ee(this,Rt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ee(this,sa).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ee(this,Rt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=ee(this,Rt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ip(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return ee(this,Rt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=ee(this,Rt).get(n.queryHash),o=a==null?void 0:a.state.data,i=DI(t,o);if(i!==void 0)return ee(this,Rt).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return Rr.batch(()=>ee(this,Rt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ee(this,Rt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=ee(this,Rt);Rr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=ee(this,Rt);return Rr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Rr.batch(()=>ee(this,Rt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Ln).catch(Ln)}invalidateQueries(e,t={}){return Rr.batch(()=>(ee(this,Rt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Rr.batch(()=>ee(this,Rt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(Ln)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Ln)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=ee(this,Rt).build(this,t);return r.isStaleByTime(Ip(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ln).catch(Ln)}fetchInfiniteQuery(e){return e.behavior=By(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ln).catch(Ln)}ensureInfiniteQueryData(e){return e.behavior=By(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ru.isOnline()?ee(this,sa).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,Rt)}getMutationCache(){return ee(this,sa)}getDefaultOptions(){return ee(this,aa)}setDefaultOptions(e){Te(this,aa,e)}setQueryDefaults(e,t){ee(this,xi).set(ic(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ee(this,xi).values()],r={};return t.forEach(n=>{lc(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){ee(this,yi).set(ic(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ee(this,yi).values()],r={};return t.forEach(n=>{lc(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ee(this,aa).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ov(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Dv&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ee(this,aa).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ee(this,Rt).clear(),ee(this,sa).clear()}},Rt=new WeakMap,sa=new WeakMap,aa=new WeakMap,xi=new WeakMap,yi=new WeakMap,oa=new WeakMap,wi=new WeakMap,bi=new WeakMap,Sb),r5=h.createContext(void 0),n5=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(r5.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cc(){return cc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cc.apply(this,arguments)}var ca;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ca||(ca={}));const Vy="popstate";function s5(e){e===void 0&&(e={});function t(n,a){let{pathname:o,search:i,hash:l}=n.location;return Lp("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:u1(a)}return o5(t,r,null,e)}function Kt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Av(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function a5(){return Math.random().toString(36).substr(2,8)}function Wy(e,t){return{usr:e.state,key:e.key,idx:t}}function Lp(e,t,r,n){return r===void 0&&(r=null),cc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Gi(t):t,{state:r,key:t&&t.key||n||a5()})}function u1(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Gi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function o5(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:o=!1}=n,i=a.history,l=ca.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(cc({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function m(){l=ca.Pop;let x=u(),w=x==null?null:x-d;d=x,c&&c({action:l,location:g.location,delta:w})}function p(x,w){l=ca.Push;let v=Lp(g.location,x,w);d=u()+1;let b=Wy(v,d),j=g.createHref(v);try{i.pushState(b,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(j)}o&&c&&c({action:l,location:g.location,delta:1})}function f(x,w){l=ca.Replace;let v=Lp(g.location,x,w);d=u();let b=Wy(v,d),j=g.createHref(v);i.replaceState(b,"",j),o&&c&&c({action:l,location:g.location,delta:0})}function y(x){let w=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof x=="string"?x:u1(x);return v=v.replace(/ $/,"%20"),Kt(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let g={get action(){return l},get location(){return e(a,i)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Vy,m),c=x,()=>{a.removeEventListener(Vy,m),c=null}},createHref(x){return t(a,x)},createURL:y,encodeLocation(x){let w=y(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:f,go(x){return i.go(x)}};return g}var Hy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Hy||(Hy={}));function i5(e,t,r){return r===void 0&&(r="/"),l5(e,t,r)}function l5(e,t,r,n){let a=typeof t=="string"?Gi(t):t,o=m1(a.pathname||"/",r);if(o==null)return null;let i=h1(e);c5(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=b5(o);l=x5(i[c],d)}return l}function h1(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(Kt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=ro([n,c.relativePath]),u=r.concat(c);o.children&&o.children.length>0&&(Kt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),h1(o.children,t,u,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:g5(d,o.index),routesMeta:u})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of f1(o.path))a(o,i,c)}),t}function f1(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let i=f1(n.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function c5(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:v5(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const d5=/^:[\w-]+$/,u5=3,h5=2,f5=1,m5=10,p5=-2,qy=e=>e==="*";function g5(e,t){let r=e.split("/"),n=r.length;return r.some(qy)&&(n+=p5),t&&(n+=h5),r.filter(a=>!qy(a)).reduce((a,o)=>a+(d5.test(o)?u5:o===""?f5:m5),n)}function v5(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function x5(e,t,r){let{routesMeta:n}=e,a={},o="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=o==="/"?t:t.slice(o.length)||"/",m=y5({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:ro([o,m.pathname]),pathnameBase:k5(ro([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=ro([o,m.pathnameBase]))}return i}function y5(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=w5(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:p,isOptional:f}=u;if(p==="*"){let g=l[m]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const y=l[m];return f&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function w5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Av(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function b5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Av(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function m1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const j5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,N5=e=>j5.test(e);function _5(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Gi(e):e,o;if(r)if(N5(r))o=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Av(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?o=Gy(r.substring(1),"/"):o=Gy(r,t)}else o=t;return{pathname:o,search:T5(n),hash:P5(a)}}function Gy(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Lf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function S5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function C5(e,t){let r=S5(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function E5(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Gi(e):(a=cc({},e),Kt(!a.pathname||!a.pathname.includes("?"),Lf("?","pathname","search",a)),Kt(!a.pathname||!a.pathname.includes("#"),Lf("#","pathname","hash",a)),Kt(!a.search||!a.search.includes("#"),Lf("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=r;else{let m=t.length-1;if(!n&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),m-=1;a.pathname=p.join("/")}l=m>=0?t[m]:"/"}let c=_5(a,l),d=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const ro=e=>e.join("/").replace(/\/\/+/g,"/"),k5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),T5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,P5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function R5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const p1=["post","put","patch","delete"];new Set(p1);const O5=["get",...p1];new Set(O5);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dc(){return dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dc.apply(this,arguments)}const Iv=h.createContext(null),D5=h.createContext(null),bh=h.createContext(null),jh=h.createContext(null),yo=h.createContext({outlet:null,matches:[],isDataRoute:!1}),g1=h.createContext(null);function Nh(){return h.useContext(jh)!=null}function Yi(){return Nh()||Kt(!1),h.useContext(jh).location}function v1(e){h.useContext(bh).static||h.useLayoutEffect(e)}function Xr(){let{isDataRoute:e}=h.useContext(yo);return e?q5():A5()}function A5(){Nh()||Kt(!1);let e=h.useContext(Iv),{basename:t,future:r,navigator:n}=h.useContext(bh),{matches:a}=h.useContext(yo),{pathname:o}=Yi(),i=JSON.stringify(C5(a,r.v7_relativeSplatPath)),l=h.useRef(!1);return v1(()=>{l.current=!0}),h.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=E5(d,JSON.parse(i),o,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ro([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,i,o,e])}function Mv(){let{matches:e}=h.useContext(yo),t=e[e.length-1];return t?t.params:{}}function I5(e,t){return M5(e,t)}function M5(e,t,r,n){Nh()||Kt(!1);let{navigator:a}=h.useContext(bh),{matches:o}=h.useContext(yo),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Yi(),u;if(t){var m;let x=typeof t=="string"?Gi(t):t;c==="/"||(m=x.pathname)!=null&&m.startsWith(c)||Kt(!1),u=x}else u=d;let p=u.pathname||"/",f=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=i5(e,{pathname:f}),g=B5(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:ro([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:ro([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,r,n);return t&&g?h.createElement(jh.Provider,{value:{location:dc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ca.Pop}},g):g}function $5(){let e=H5(),t=R5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),r?h.createElement("pre",{style:a},r):null,null)}const L5=h.createElement($5,null);class F5 extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?h.createElement(yo.Provider,{value:this.props.routeContext},h.createElement(g1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function U5(e){let{routeContext:t,match:r,children:n}=e,a=h.useContext(Iv);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(yo.Provider,{value:t},n)}function B5(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||Kt(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<i.length;u++){let m=i[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:p,errors:f}=r,y=m.route.loader&&p[m.route.id]===void 0&&(!f||f[m.route.id]===void 0);if(m.route.lazy||y){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,m,p)=>{let f,y=!1,g=null,x=null;r&&(f=l&&m.route.id?l[m.route.id]:void 0,g=m.route.errorElement||L5,c&&(d<0&&p===0?(G5("route-fallback"),y=!0,x=null):d===p&&(y=!0,x=m.route.hydrateFallbackElement||null)));let w=t.concat(i.slice(0,p+1)),v=()=>{let b;return f?b=g:y?b=x:m.route.Component?b=h.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=u,h.createElement(U5,{match:m,routeContext:{outlet:u,matches:w,isDataRoute:r!=null},children:b})};return r&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?h.createElement(F5,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var x1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(x1||{}),y1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(y1||{});function z5(e){let t=h.useContext(Iv);return t||Kt(!1),t}function V5(e){let t=h.useContext(D5);return t||Kt(!1),t}function W5(e){let t=h.useContext(yo);return t||Kt(!1),t}function w1(e){let t=W5(),r=t.matches[t.matches.length-1];return r.route.id||Kt(!1),r.route.id}function H5(){var e;let t=h.useContext(g1),r=V5(),n=w1();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function q5(){let{router:e}=z5(x1.UseNavigateStable),t=w1(y1.UseNavigateStable),r=h.useRef(!1);return v1(()=>{r.current=!0}),h.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,dc({fromRouteId:t},o)))},[e,t])}const Yy={};function G5(e,t,r){Yy[e]||(Yy[e]=!0)}function Y5(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Er(e){Kt(!1)}function K5(e){let{basename:t="/",children:r=null,location:n,navigationType:a=ca.Pop,navigator:o,static:i=!1,future:l}=e;Nh()&&Kt(!1);let c=t.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:o,static:i,future:dc({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof n=="string"&&(n=Gi(n));let{pathname:u="/",search:m="",hash:p="",state:f=null,key:y="default"}=n,g=h.useMemo(()=>{let x=m1(u,c);return x==null?null:{location:{pathname:x,search:m,hash:p,state:f,key:y},navigationType:a}},[c,u,m,p,f,y,a]);return g==null?null:h.createElement(bh.Provider,{value:d},h.createElement(jh.Provider,{children:r,value:g}))}function Q5(e){let{children:t,location:r}=e;return I5(Fp(t),r)}new Promise(()=>{});function Fp(e,t){t===void 0&&(t=[]);let r=[];return h.Children.forEach(e,(n,a)=>{if(!h.isValidElement(n))return;let o=[...t,a];if(n.type===h.Fragment){r.push.apply(r,Fp(n.props.children,o));return}n.type!==Er&&Kt(!1),!n.props.index||!n.props.children||Kt(!1);let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Fp(n.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Up(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function J5(e,t){let r=Up(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(o=>{r.append(a,o)})}),r}const X5="6";try{window.__reactRouterVersion=X5}catch{}const Z5="startTransition",Ky=qu[Z5];function eM(e){let{basename:t,children:r,future:n,window:a}=e,o=h.useRef();o.current==null&&(o.current=s5({window:a,v5Compat:!0}));let i=o.current,[l,c]=h.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},u=h.useCallback(m=>{d&&Ky?Ky(()=>c(m)):c(m)},[c,d]);return h.useLayoutEffect(()=>i.listen(u),[i,u]),h.useEffect(()=>Y5(n),[n]),h.createElement(K5,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}var Qy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qy||(Qy={}));var Jy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Jy||(Jy={}));function b1(e){let t=h.useRef(Up(e)),r=h.useRef(!1),n=Yi(),a=h.useMemo(()=>J5(n.search,r.current?null:t.current),[n.search]),o=Xr(),i=h.useCallback((l,c)=>{const d=Up(typeof l=="function"?l(a):l);r.current=!0,o("?"+d,c)},[o,a]);return[a,i]}var tM=Symbol.for("react.lazy"),Ou=qu[" use ".trim().toString()];function rM(e){return typeof e=="object"&&e!==null&&"then"in e}function j1(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===tM&&"_payload"in e&&rM(e._payload)}function _h(e){const t=sM(e),r=h.forwardRef((n,a)=>{let{children:o,...i}=n;j1(o)&&typeof Ou=="function"&&(o=Ou(o._payload));const l=h.Children.toArray(o),c=l.find(oM);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return s.jsx(t,{...i,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}var nM=_h("Slot");function sM(e){const t=h.forwardRef((r,n)=>{let{children:a,...o}=r;if(j1(a)&&typeof Ou=="function"&&(a=Ou(a._payload)),h.isValidElement(a)){const i=lM(a),l=iM(o,a.props);return a.type!==h.Fragment&&(l.ref=n?Ir(n,i):i),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var aM=Symbol("radix.slottable");function oM(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===aM}function iM(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function lM(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const uc=Vi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 shadow-sm hover:shadow-md active:scale-[0.97]",{variants:{variant:{default:"bg-umma-500 text-white hover:bg-umma-600 shadow-lg",destructive:"bg-red-500 text-white hover:bg-red-600 shadow-lg",outline:"border-2 border-umma-500 bg-white text-umma-700 hover:bg-umma-50 hover:border-umma-600",secondary:"bg-umma-100 text-umma-800 hover:bg-umma-200 shadow-sm",ghost:"text-umma-700 hover:bg-umma-100 shadow-none",link:"text-umma-600 underline-offset-4 hover:underline hover:text-umma-700 shadow-none"},size:{default:"h-11 px-6 py-3",sm:"h-9 px-4 py-2 text-xs",lg:"h-12 px-8 py-4 text-base",icon:"h-10 w-10",cta:"w-full h-12 px-8 py-4 text-base font-bold shadow-lg hover:shadow-xl"}},defaultVariants:{variant:"default",size:"default"}}),H=h.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},o)=>{const i=n?nM:"button";return s.jsx(i,{className:re(uc({variant:t,size:r,className:e})),ref:o,...a})});H.displayName="Button";const Pe=h.forwardRef(({className:e,interactive:t=!1,...r},n)=>s.jsx("div",{ref:n,className:re("rounded-3xl border border-stone-200 bg-white/80 backdrop-blur-md text-card-foreground shadow-sm transition-all duration-300",t?"cursor-pointer hover:shadow-md hover:-translate-y-0.5 active:scale-[0.98] active:shadow-sm":"hover:shadow-md",e),...r}));Pe.displayName="Card";const $t=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:re("flex flex-col space-y-2 p-8",e),...t}));$t.displayName="CardHeader";const Lt=h.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:re("text-2xl font-bold leading-none tracking-tight text-umma-800",e),...t}));Lt.displayName="CardTitle";const Wr=h.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:re("text-base text-umma-600 leading-relaxed",e),...t}));Wr.displayName="CardDescription";const Ae=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:re("p-8 pt-0",e),...t}));Ae.displayName="CardContent";const cM=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:re("flex items-center p-8 pt-0",e),...t}));cM.displayName="CardFooter";const dM=Vi("inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 shadow-sm",{variants:{variant:{default:"border-transparent bg-umma-500 text-white shadow-md",secondary:"border-umma-200 bg-umma-50 text-umma-800 hover:bg-umma-100",destructive:"border-transparent bg-gradient-to-r from-red-400 to-red-500 text-white shadow-md",outline:"text-umma-700 border-umma-500 bg-white"}},defaultVariants:{variant:"default"}});function ye({className:e,variant:t,...r}){return s.jsx("div",{className:re(dM({variant:t}),e),...r})}var Bp=function(e,t){return Bp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Bp(e,t)};function N1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Bp(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Nn=function(){return Nn=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Nn.apply(this,arguments)};function Ea(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function _1(e,t,r,n){var a=arguments.length,o=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}function S1(e,t){return function(r,n){t(r,n,e)}}function C1(e,t,r,n,a,o){function i(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),m,p=!1,f=r.length-1;f>=0;f--){var y={};for(var g in n)y[g]=g==="access"?{}:n[g];for(var g in n.access)y.access[g]=n.access[g];y.addInitializer=function(w){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(w||null))};var x=(0,r[f])(l==="accessor"?{get:u.get,set:u.set}:u[c],y);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(m=i(x.get))&&(u.get=m),(m=i(x.set))&&(u.set=m),(m=i(x.init))&&a.unshift(m)}else(m=i(x))&&(l==="field"?a.unshift(m):u[c]=m)}d&&Object.defineProperty(d,n.name,u),p=!0}function E1(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function k1(e){return typeof e=="symbol"?e:"".concat(e)}function T1(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function P1(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function we(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(m){i(m)}}function c(u){try{d(n.throw(u))}catch(m){i(m)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})}function R1(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],a=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Sh=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function O1(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Sh(t,e,r)}function Du(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $v(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,o=[],i;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function D1(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($v(arguments[t]));return e}function A1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var o=arguments[t],i=0,l=o.length;i<l;i++,a++)n[a]=o[i];return n}function Lv(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Ai(e){return this instanceof Ai?(this.v=e,this):new Ai(e)}function I1(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),a[Symbol.asyncIterator]=function(){return this},a;function i(f){return function(y){return Promise.resolve(y).then(f,m)}}function l(f,y){n[f]&&(a[f]=function(g){return new Promise(function(x,w){o.push([f,g,x,w])>1||c(f,g)})},y&&(a[f]=y(a[f])))}function c(f,y){try{d(n[f](y))}catch(g){p(o[0][3],g)}}function d(f){f.value instanceof Ai?Promise.resolve(f.value.v).then(u,m):p(o[0][2],f)}function u(f){c("next",f)}function m(f){c("throw",f)}function p(f,y){f(y),o.shift(),o.length&&c(o[0][0],o[0][1])}}function M1(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,o){t[a]=e[a]?function(i){return(r=!r)?{value:Ai(e[a](i)),done:!1}:o?o(i):i}:o}}function $1(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Du=="function"?Du(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(i){return new Promise(function(l,c){i=e[o](i),a(l,c,i.done,i.value)})}}function a(o,i,l,c){Promise.resolve(c).then(function(d){o({value:d,done:l})},i)}}function L1(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var uM=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},zp=function(e){return zp=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},zp(e)};function F1(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=zp(e),n=0;n<r.length;n++)r[n]!=="default"&&Sh(t,e,r[n]);return uM(t,e),t}function U1(e){return e&&e.__esModule?e:{default:e}}function B1(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function z1(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function V1(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function W1(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var hM=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function H1(e){function t(o){e.error=e.hasError?new hM(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(a,function(i){return t(i),a()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function q1(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,o,i){return n?t?".jsx":".js":a&&(!o||!i)?r:a+o+"."+i.toLowerCase()+"js"}):e}const fM={__extends:N1,__assign:Nn,__rest:Ea,__decorate:_1,__param:S1,__esDecorate:C1,__runInitializers:E1,__propKey:k1,__setFunctionName:T1,__metadata:P1,__awaiter:we,__generator:R1,__createBinding:Sh,__exportStar:O1,__values:Du,__read:$v,__spread:D1,__spreadArrays:A1,__spreadArray:Lv,__await:Ai,__asyncGenerator:I1,__asyncDelegator:M1,__asyncValues:$1,__makeTemplateObject:L1,__importStar:F1,__importDefault:U1,__classPrivateFieldGet:B1,__classPrivateFieldSet:z1,__classPrivateFieldIn:V1,__addDisposableResource:W1,__disposeResources:H1,__rewriteRelativeImportExtension:q1},mM=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:W1,get __assign(){return Nn},__asyncDelegator:M1,__asyncGenerator:I1,__asyncValues:$1,__await:Ai,__awaiter:we,__classPrivateFieldGet:B1,__classPrivateFieldIn:V1,__classPrivateFieldSet:z1,__createBinding:Sh,__decorate:_1,__disposeResources:H1,__esDecorate:C1,__exportStar:O1,__extends:N1,__generator:R1,__importDefault:U1,__importStar:F1,__makeTemplateObject:L1,__metadata:P1,__param:S1,__propKey:k1,__read:$v,__rest:Ea,__rewriteRelativeImportExtension:q1,__runInitializers:E1,__setFunctionName:T1,__spread:D1,__spreadArray:Lv,__spreadArrays:A1,__values:Du,default:fM},Symbol.toStringTag,{value:"Module"})),pM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Fv extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class gM extends Fv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Xy extends Fv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Zy extends Fv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Vp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Vp||(Vp={}));class vM{constructor(t,{headers:r={},customFetch:n,region:a=Vp.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=pM(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return we(this,arguments,void 0,function*(r,n={}){var a;let o,i;try{const{headers:l,method:c,body:d,signal:u,timeout:m}=n;let p={},{region:f}=n;f||(f=this.region);const y=new URL(`${this.url}/${r}`);f&&f!=="any"&&(p["x-region"]=f,y.searchParams.set("forceFunctionRegion",f));let g;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",g=d):typeof d=="string"?(p["Content-Type"]="text/plain",g=d):typeof FormData<"u"&&d instanceof FormData?g=d:(p["Content-Type"]="application/json",g=JSON.stringify(d)):g=d;let x=u;m&&(i=new AbortController,o=setTimeout(()=>i.abort(),m),u?(x=i.signal,u.addEventListener("abort",()=>i.abort())):x=i.signal);const w=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:g,signal:x}).catch(k=>{throw new gM(k)}),v=w.headers.get("x-relay-error");if(v&&v==="true")throw new Xy(w);if(!w.ok)throw new Zy(w);let b=((a=w.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return b==="application/json"?j=yield w.json():b==="application/octet-stream"||b==="application/pdf"?j=yield w.blob():b==="text/event-stream"?j=w:b==="multipart/form-data"?j=yield w.formData():j=yield w.text(),{data:j,error:null,response:w}}catch(l){return{data:null,error:l,response:l instanceof Zy||l instanceof Xy?l.context:void 0}}finally{o&&clearTimeout(o)}})}}var Or={};const Ki=DT(mM);var xd={},yd={},wd={},bd={},jd={},Nd={},ew;function G1(){if(ew)return Nd;ew=1,Object.defineProperty(Nd,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Nd.default=e,Nd}var tw;function Y1(){if(tw)return jd;tw=1,Object.defineProperty(jd,"__esModule",{value:!0});const t=Ki.__importDefault(G1());class r{constructor(a){var o,i;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(i=a.isMaybeSingle)!==null&&i!==void 0?i:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let l=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,u,m,p;let f=null,y=null,g=null,x=c.status,w=c.statusText;if(c.ok){if(this.method!=="HEAD"){const k=await c.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?y=k:y=JSON.parse(k))}const b=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),j=(m=c.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");b&&j&&j.length>1&&(g=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(f={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,g=null,x=406,w="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const b=await c.text();try{f=JSON.parse(b),Array.isArray(f)&&c.status===404&&(y=[],f=null,x=200,w="OK")}catch{c.status===404&&b===""?(x=204,w="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((p=f==null?void 0:f.details)===null||p===void 0)&&p.includes("0 rows"))&&(f=null,x=200,w="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:y,count:g,status:x,statusText:w}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,u,m,p,f,y;let g="";const x=c==null?void 0:c.cause;if(x){const w=(d=x==null?void 0:x.message)!==null&&d!==void 0?d:"",v=(u=x==null?void 0:x.code)!==null&&u!==void 0?u:"";g=`${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"FetchError"}: ${c==null?void 0:c.message}`,g+=`

Caused by: ${(p=x==null?void 0:x.name)!==null&&p!==void 0?p:"Error"}: ${w}`,v&&(g+=` (${v})`),x!=null&&x.stack&&(g+=`
${x.stack}`)}else g=(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:"";return{error:{message:`${(y=c==null?void 0:c.name)!==null&&y!==void 0?y:"FetchError"}: ${c==null?void 0:c.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(a,o)}returns(){return this}overrideTypes(){return this}}return jd.default=r,jd}var rw;function K1(){if(rw)return bd;rw=1,Object.defineProperty(bd,"__esModule",{value:!0});const t=Ki.__importDefault(Y1());class r extends t.default{select(a){let o=!1;const i=(a??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${a}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:i=o}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,o,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(d,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const m=[a?"analyze":null,o?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${p}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return bd.default=r,bd}var nw;function Uv(){if(nw)return wd;nw=1,Object.defineProperty(wd,"__esModule",{value:!0});const t=Ki.__importDefault(K1()),r=new RegExp("[,()]");class n extends t.default{eq(o,i){return this.url.searchParams.append(o,`eq.${i}`),this}neq(o,i){return this.url.searchParams.append(o,`neq.${i}`),this}gt(o,i){return this.url.searchParams.append(o,`gt.${i}`),this}gte(o,i){return this.url.searchParams.append(o,`gte.${i}`),this}lt(o,i){return this.url.searchParams.append(o,`lt.${i}`),this}lte(o,i){return this.url.searchParams.append(o,`lte.${i}`),this}like(o,i){return this.url.searchParams.append(o,`like.${i}`),this}likeAllOf(o,i){return this.url.searchParams.append(o,`like(all).{${i.join(",")}}`),this}likeAnyOf(o,i){return this.url.searchParams.append(o,`like(any).{${i.join(",")}}`),this}ilike(o,i){return this.url.searchParams.append(o,`ilike.${i}`),this}ilikeAllOf(o,i){return this.url.searchParams.append(o,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(o,i){return this.url.searchParams.append(o,`ilike(any).{${i.join(",")}}`),this}is(o,i){return this.url.searchParams.append(o,`is.${i}`),this}in(o,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}contains(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cs.{${i.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(i)}`),this}containedBy(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cd.{${i.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(i)}`),this}rangeGt(o,i){return this.url.searchParams.append(o,`sr.${i}`),this}rangeGte(o,i){return this.url.searchParams.append(o,`nxl.${i}`),this}rangeLt(o,i){return this.url.searchParams.append(o,`sl.${i}`),this}rangeLte(o,i){return this.url.searchParams.append(o,`nxr.${i}`),this}rangeAdjacent(o,i){return this.url.searchParams.append(o,`adj.${i}`),this}overlaps(o,i){return typeof i=="string"?this.url.searchParams.append(o,`ov.${i}`):this.url.searchParams.append(o,`ov.{${i.join(",")}}`),this}textSearch(o,i,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const u=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${d}fts${u}.${i}`),this}match(o){return Object.entries(o).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(o,i,l){return this.url.searchParams.append(o,`not.${i}.${l}`),this}or(o,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,i,l){return this.url.searchParams.append(o,`${i}.${l}`),this}}return wd.default=n,wd}var sw;function Q1(){if(sw)return yd;sw=1,Object.defineProperty(yd,"__esModule",{value:!0});const t=Ki.__importDefault(Uv());class r{constructor(a,{headers:o={},schema:i,fetch:l}){this.url=a,this.headers=new Headers(o),this.schema=i,this.fetch=l}select(a,o){const{head:i=!1,count:l}=o??{},c=i?"HEAD":"GET";let d=!1;const u=(a??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",u),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:i=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const d=a.reduce((u,m)=>u.concat(Object.keys(m)),[]);if(d.length>0){const u=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var d;const u="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((p,f)=>p.concat(Object.keys(f)),[]);if(m.length>0){const p=[...new Set(m)].map(f=>`"${f}"`);this.url.searchParams.set("columns",p.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(a,{count:o}={}){var i;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:a}={}){var o;const i="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return yd.default=r,yd}var aw;function xM(){if(aw)return xd;aw=1,Object.defineProperty(xd,"__esModule",{value:!0});const e=Ki,t=e.__importDefault(Q1()),r=e.__importDefault(Uv());class n{constructor(o,{headers:i={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(o){const i=new URL(`${this.url}/${o}`);return new t.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,i={},{head:l=!1,get:c=!1,count:d}={}){var u;let m;const p=new URL(`${this.url}/rpc/${o}`);let f;l||c?(m=l?"HEAD":"GET",Object.entries(i).filter(([g,x])=>x!==void 0).map(([g,x])=>[g,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([g,x])=>{p.searchParams.append(g,x)})):(m="POST",f=i);const y=new Headers(this.headers);return d&&y.set("Prefer",`count=${d}`),new r.default({method:m,url:p,headers:y,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return xd.default=n,xd}Object.defineProperty(Or,"__esModule",{value:!0});var J1=Or.PostgrestError=iS=Or.PostgrestBuilder=aS=Or.PostgrestTransformBuilder=nS=Or.PostgrestFilterBuilder=tS=Or.PostgrestQueryBuilder=Z1=Or.PostgrestClient=void 0;const Qi=Ki,X1=Qi.__importDefault(xM());var Z1=Or.PostgrestClient=X1.default;const eS=Qi.__importDefault(Q1());var tS=Or.PostgrestQueryBuilder=eS.default;const rS=Qi.__importDefault(Uv());var nS=Or.PostgrestFilterBuilder=rS.default;const sS=Qi.__importDefault(K1());var aS=Or.PostgrestTransformBuilder=sS.default;const oS=Qi.__importDefault(Y1());var iS=Or.PostgrestBuilder=oS.default;const lS=Qi.__importDefault(G1());J1=Or.PostgrestError=lS.default;var cS=Or.default={PostgrestClient:X1.default,PostgrestQueryBuilder:eS.default,PostgrestFilterBuilder:rS.default,PostgrestTransformBuilder:sS.default,PostgrestBuilder:oS.default,PostgrestError:lS.default};const yM=Cb({__proto__:null,get PostgrestBuilder(){return iS},get PostgrestClient(){return Z1},get PostgrestError(){return J1},get PostgrestFilterBuilder(){return nS},get PostgrestQueryBuilder(){return tS},get PostgrestTransformBuilder(){return aS},default:cS},[Or]),{PostgrestClient:wM,PostgrestQueryBuilder:F9,PostgrestFilterBuilder:U9,PostgrestTransformBuilder:B9,PostgrestBuilder:z9,PostgrestError:V9}=cS||yM;class bM{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const jM="2.83.0",NM=`realtime-js/${jM}`,dS="1.0.0",_M="2.0.0",ow=dS,Wp=1e4,SM=1e3,CM=100;var Ba;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ba||(Ba={}));var qt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(qt||(qt={}));var wn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(wn||(wn={}));var Hp;(function(e){e.websocket="websocket"})(Hp||(Hp={}));var za;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(za||(za={}));class EM{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){var r,n;const{event:a,topic:o,payload:i}=t,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",d=this.META_LENGTH+c.length+l.length+o.length+a.length,u=new ArrayBuffer(this.HEADER_LENGTH+d);let m=new DataView(u),p=0;m.setUint8(p++,this.KINDS.push),m.setUint8(p++,c.length),m.setUint8(p++,l.length),m.setUint8(p++,o.length),m.setUint8(p++,a.length),Array.from(c,y=>m.setUint8(p++,y.charCodeAt(0))),Array.from(l,y=>m.setUint8(p++,y.charCodeAt(0))),Array.from(o,y=>m.setUint8(p++,y.charCodeAt(0))),Array.from(a,y=>m.setUint8(p++,y.charCodeAt(0)));var f=new Uint8Array(u.byteLength+i.byteLength);return f.set(new Uint8Array(u),0),f.set(new Uint8Array(i),u.byteLength),f.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,a,o;const i=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",d=t.payload.event,u=(o=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&o!==void 0?o:new ArrayBuffer(0),m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+m);let f=new DataView(p),y=0;f.setUint8(y++,this.KINDS.userBroadcastPush),f.setUint8(y++,c.length),f.setUint8(y++,l.length),f.setUint8(y++,i.length),f.setUint8(y++,d.length),f.setUint8(y++,this.BINARY_ENCODING),Array.from(c,x=>f.setUint8(y++,x.charCodeAt(0))),Array.from(l,x=>f.setUint8(y++,x.charCodeAt(0))),Array.from(i,x=>f.setUint8(y++,x.charCodeAt(0))),Array.from(d,x=>f.setUint8(y++,x.charCodeAt(0)));var g=new Uint8Array(p.byteLength+u.byteLength);return g.set(new Uint8Array(p),0),g.set(new Uint8Array(u),p.byteLength),g.buffer}_encodeJsonUserBroadcastPush(t){var r,n,a,o;const i=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",d=t.payload.event,u=(o=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&o!==void 0?o:{},p=new TextEncoder().encode(JSON.stringify(u)).buffer,f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+d.length,y=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(y),x=0;g.setUint8(x++,this.KINDS.userBroadcastPush),g.setUint8(x++,c.length),g.setUint8(x++,l.length),g.setUint8(x++,i.length),g.setUint8(x++,d.length),g.setUint8(x++,this.JSON_ENCODING),Array.from(c,v=>g.setUint8(x++,v.charCodeAt(0))),Array.from(l,v=>g.setUint8(x++,v.charCodeAt(0))),Array.from(i,v=>g.setUint8(x++,v.charCodeAt(0))),Array.from(d,v=>g.setUint8(x++,v.charCodeAt(0)));var w=new Uint8Array(y.byteLength+p.byteLength);return w.set(new Uint8Array(y),0),w.set(new Uint8Array(p),y.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,o,i,l,c]=n;return r({join_ref:a,ref:o,topic:i,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,a);case this.KINDS.reply:return this._decodeReply(t,r,a);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodePush(t,r,n){const a=r.getUint8(1),o=r.getUint8(2),i=r.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(l,l+a));l=l+a;const d=n.decode(t.slice(l,l+o));l=l+o;const u=n.decode(t.slice(l,l+i));l=l+i;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{join_ref:c,ref:null,topic:d,event:u,payload:m}}_decodeReply(t,r,n){const a=r.getUint8(1),o=r.getUint8(2),i=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const d=n.decode(t.slice(c,c+a));c=c+a;const u=n.decode(t.slice(c,c+o));c=c+o;const m=n.decode(t.slice(c,c+i));c=c+i;const p=n.decode(t.slice(c,c+l));c=c+l;const f=JSON.parse(n.decode(t.slice(c,t.byteLength))),y={status:p,response:f};return{join_ref:d,ref:u,topic:m,event:wn.reply,payload:y}}_decodeBroadcast(t,r,n){const a=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+a));i=i+a;const c=n.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:d}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),o=r.getUint8(2),i=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=n.decode(t.slice(c,c+a));c=c+a;const u=n.decode(t.slice(c,c+o));c=c+o;const m=n.decode(t.slice(c,c+i));c=c+i;const p=t.slice(c,t.byteLength),f=l===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,y={type:this.BROADCAST,event:u,payload:f};return i>0&&(y.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class uS{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(mt||(mt={}));const iw=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((o,i)=>(o[i]=kM(i,e,t,a),o),{}):{}},kM=(e,t,r,n)=>{const a=t.find(l=>l.name===e),o=a==null?void 0:a.type,i=r[e];return o&&!n.includes(o)?hS(o,i):qp(i)},hS=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return OM(t,r)}switch(e){case mt.bool:return TM(t);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return PM(t);case mt.json:case mt.jsonb:return RM(t);case mt.timestamp:return DM(t);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return qp(t);default:return qp(t)}},qp=e=>e,TM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},PM=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},RM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},OM=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>hS(t,l))}return e},DM=e=>typeof e=="string"?e.replace(" ","T"):e,fS=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ff{constructor(t,r,n={},a=Wp){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var lw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(lw||(lw={}));class $l{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$l.syncState(this.state,a,o,i),this.pendingDiffs.forEach(c=>{this.state=$l.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=$l.syncDiff(this.state,a,o,i),l())}),this.onJoin((a,o,i)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:i})}),this.onLeave((a,o,i)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const o=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(o,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const m=o[d];if(m){const p=u.map(x=>x.presence_ref),f=m.map(x=>x.presence_ref),y=u.filter(x=>f.indexOf(x.presence_ref)<0),g=m.filter(x=>p.indexOf(x.presence_ref)<0);y.length>0&&(l[d]=y),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(o,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(o,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const m=t[l].map(f=>f.presence_ref),p=u.filter(f=>m.indexOf(f.presence_ref)<0);t[l].unshift(...p)}n(l,u,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(cw||(cw={}));var Ll;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ll||(Ll={}));var Es;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Es||(Es={}));class Bv{constructor(t,r={config:{}},n){var a,o;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ff(this,wn.join,this.params,this.timeout),this.rejoinTimer=new uS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wn.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new $l(this),this.broadcastEndpointURL=fS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==qt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Ll.PRESENCE]&&this.bindings[Ll.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},p={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Es.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Es.CLOSED)),this.updateJoinPayload(Object.assign({config:p},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var y;if(this.socket.setAuth(),f===void 0){t==null||t(Es.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,w=[];for(let v=0;v<x;v++){const b=g[v],{filter:{event:j,schema:k,table:S,filter:N}}=b,E=f&&f[v];if(E&&E.event===j&&E.schema===k&&E.table===S&&E.filter===N)w.push(Object.assign(Object.assign({},b),{id:E.id}));else{this.unsubscribe(),this.state=qt.errored,t==null||t(Es.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(Es.SUBSCRIBED);return}}).receive("error",f=>{this.state=qt.errored,t==null||t(Es.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Es.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===qt.joined&&t===Ll.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=qt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Ff(this,wn.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,o=setTimeout(()=>a.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Ff(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>CM){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=wn;if(n&&[l,c,d,u].indexOf(i)>=0&&n!==this._joinRef())return;let p=this._onMessage(i,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var y,g,x;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((x=(g=f.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===i}).map(f=>f.callback(p,n)):(o=this.bindings[i])===null||o===void 0||o.filter(f=>{var y,g,x,w,v,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){const j=f.id,k=(y=f.filter)===null||y===void 0?void 0:y.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(v=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:g,table:x,commit_timestamp:w,type:v,errors:b}=y;p=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:w,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(y))}f.callback(p,n)})}_isClosed(){return this.state===qt.closed}_isJoined(){return this.state===qt.joined}_isJoining(){return this.state===qt.joining}_isLeaving(){return this.state===qt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),o={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Bv.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(wn.close,{},t)}_onError(t){this._on(wn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=iw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=iw(t.columns,t.old_record)),r}}const Uf=()=>{},_d={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AM=[1e3,2e3,5e3,1e4],IM=1e4,MM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $M{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wp,this.transport=null,this.heartbeatIntervalMs=_d.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uf,this.ref=0,this.reconnectTimer=null,this.vsn=ow,this.logger=Uf,this.conn=null,this.sendBuffer=[],this.serializer=new EM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Hp.websocket}`,this.httpEndpoint=fS(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bM.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ba.connecting:return za.Connecting;case Ba.open:return za.Open;case Ba.closing:return za.Closing;default:return za.Closed}}isConnected(){return this.connectionState()===za.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===n);if(a)return a;{const o=new Bv(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:a,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,a),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(SM,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},_d.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:o,ref:i}=r,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ba.open||this.conn.readyState===Ba.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(wn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([MM],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:NM};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(wn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new uS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_d.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,o,i,l,c,d,u,m,p,f;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Wp,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:_d.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Uf,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:ow,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:y=>AM[y-1]||IM,this.vsn){case dS:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(y,g)=>g(JSON.stringify(y)),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:(y,g)=>g(JSON.parse(y));break;case _M:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class zv extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Et(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class LM extends zv{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Gp extends zv{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Vv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),FM=()=>Response,Yp=e=>{if(Array.isArray(e))return e.map(r=>Yp(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=Yp(n)}),t},UM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Bf=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},BM=(e,t,r)=>we(void 0,void 0,void 0,function*(){const n=yield FM();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const o=e.status||500,i=(a==null?void 0:a.statusCode)||o+"";t(new LM(Bf(a),o,i))}).catch(a=>{t(new Gp(Bf(a),a))}):t(new Gp(Bf(e),e))}),zM=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(UM(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Rc(e,t,r,n,a,o){return we(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,zM(t,n,a,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>BM(c,l,n))})})}function hc(e,t,r,n){return we(this,void 0,void 0,function*(){return Rc(e,"GET",t,r,n)})}function Fn(e,t,r,n,a){return we(this,void 0,void 0,function*(){return Rc(e,"POST",t,n,a,r)})}function Kp(e,t,r,n,a){return we(this,void 0,void 0,function*(){return Rc(e,"PUT",t,n,a,r)})}function VM(e,t,r,n){return we(this,void 0,void 0,function*(){return Rc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Wv(e,t,r,n,a){return we(this,void 0,void 0,function*(){return Rc(e,"DELETE",t,n,a,r)})}class WM{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return we(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}}var mS;class HM{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[mS]="BlobDownloadBuilder",this.promise=null}asStream(){return new WM(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return we(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}}mS=Symbol.toStringTag;const qM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class GM{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Vv(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return we(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},dw),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",i.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!i.duplex&&(i.duplex="half")),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),m=yield(t=="PUT"?Kp:Fn)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Et(o))return{data:null,error:o};throw o}})}upload(t,r,n){return we(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return we(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:dw.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield Kp(this.fetch,l.toString(),c,{headers:u});return{data:{path:o,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Et(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return we(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield Fn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new zv("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Et(n))return{data:null,error:n};throw n}})}update(t,r,n){return we(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return we(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Et(a))return{data:null,error:a};throw a}})}copy(t,r,n){return we(this,void 0,void 0,function*(){try{return{data:{path:(yield Fn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Et(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return we(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),o=yield Fn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Et(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return we(this,void 0,void 0,function*(){try{const a=yield Fn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Et(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"",l=this._getFinalPath(t),c=()=>hc(this.fetch,`${this.url}/${a}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new HM(c,this.shouldThrowOnError)}info(t){return we(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield hc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Yp(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Et(n))return{data:null,error:n};throw n}})}exists(t){return we(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield VM(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Et(n)&&n instanceof Gp){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return we(this,void 0,void 0,function*(){try{return{data:yield Wv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Et(r))return{data:null,error:r};throw r}})}list(t,r,n){return we(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},qM),r),{prefix:t||""});return{data:yield Fn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Et(a))return{data:null,error:a};throw a}})}listV2(t,r){return we(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Fn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Et(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const pS="2.83.0",gS={"X-Client-Info":`storage-js/${pS}`};class YM{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const o=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gS),r),this.fetch=Vv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return we(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield hc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Et(r))return{data:null,error:r};throw r}})}getBucket(t){return we(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Et(r))return{data:null,error:r};throw r}})}createBucket(t){return we(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Fn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Et(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return we(this,void 0,void 0,function*(){try{return{data:yield Kp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Et(n))return{data:null,error:n};throw n}})}emptyBucket(t){return we(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Et(r))return{data:null,error:r};throw r}})}deleteBucket(t){return we(this,void 0,void 0,function*(){try{return{data:yield Wv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Et(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class KM{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gS),r),this.fetch=Vv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return we(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Et(r))return{data:null,error:r};throw r}})}listBuckets(t){return we(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield hc(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Et(r))return{data:null,error:r};throw r}})}deleteBucket(t){return we(this,void 0,void 0,function*(){try{return{data:yield Wv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Et(r))return{data:null,error:r};throw r}})}}const Hv={"X-Client-Info":`storage-js/${pS}`,"Content-Type":"application/json"};class vS extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function sn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class zf extends vS{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class QM extends vS{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var uw;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(uw||(uw={}));const qv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),JM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},hw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XM=(e,t,r)=>we(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,o=e;if(typeof o.json=="function")o.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||a+"";t(new zf(hw(i),a,l))}).catch(()=>{const i=a+"",l=o.statusText||`HTTP ${a} error`;t(new zf(l,a,i))});else{const i=a+"",l=o.statusText||`HTTP ${a} error`;t(new zf(l,a,i))}}else t(new QM(hw(e),e))}),ZM=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(JM(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function e3(e,t,r,n,a,o){return we(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,ZM(t,n,a,o)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>XM(c,l,n))})})}function an(e,t,r,n,a){return we(this,void 0,void 0,function*(){return e3(e,"POST",t,n,a,r)})}class t3{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hv),r),this.fetch=qv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return we(this,void 0,void 0,function*(){try{return{data:(yield an(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}getIndex(t,r){return we(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sn(n))return{data:null,error:n};throw n}})}listIndexes(t){return we(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return we(this,void 0,void 0,function*(){try{return{data:(yield an(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sn(n))return{data:null,error:n};throw n}})}}class r3{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hv),r),this.fetch=qv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return we(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield an(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}getVectors(t){return we(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}listVectors(t){return we(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield an(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}queryVectors(t){return we(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}deleteVectors(t){return we(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield an(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}}class n3{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hv),r),this.fetch=qv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return we(this,void 0,void 0,function*(){try{return{data:(yield an(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}getBucket(t){return we(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}listBuckets(){return we(this,arguments,void 0,function*(t={}){try{return{data:yield an(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return we(this,void 0,void 0,function*(){try{return{data:(yield an(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}}class s3 extends n3{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new a3(this.url,this.headers,t,this.fetch)}}class a3 extends t3{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return we(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return we(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return we(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return we(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new o3(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class o3 extends r3{constructor(t,r,n,a,o){super(t,r,o),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return we(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return we(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return we(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return we(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return we(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class i3 extends YM{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new GM(this.url,this.headers,t,this.fetch)}get vectors(){return new s3(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new KM(this.url+"/iceberg",this.headers,this.fetch)}}const l3="2.83.0";let _l="";typeof Deno<"u"?_l="deno":typeof document<"u"?_l="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_l="react-native":_l="node";const c3={"X-Client-Info":`supabase-js-${_l}/${l3}`},d3={headers:c3},u3={schema:"public"},h3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},f3={},m3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),p3=()=>Headers,g3=(e,t,r)=>{const n=m3(r),a=p3();return async(o,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new a(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:d}))}};function v3(e){return e.endsWith("/")?e:e+"/"}function x3(e,t){var r,n;const{db:a,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:u,global:m}=t,p={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function y3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(v3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const xS="2.83.0",Ao=30*1e3,Qp=3,Vf=Qp*Ao,w3="http://localhost:9999",b3="supabase.auth.token",j3={"X-Client-Info":`gotrue-js/${xS}`},Jp="X-Supabase-Api-Version",yS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},N3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_3=10*60*1e3;class fc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function je(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class S3 extends fc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function C3(e){return je(e)&&e.name==="AuthApiError"}class Va extends fc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ka extends fc{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class en extends ka{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function E3(e){return je(e)&&e.name==="AuthSessionMissingError"}class No extends ka{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sd extends ka{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Cd extends ka{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function k3(e){return je(e)&&e.name==="AuthImplicitGrantRedirectError"}class fw extends ka{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xp extends ka{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Wf(e){return je(e)&&e.name==="AuthRetryableFetchError"}class mw extends ka{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Zp extends ka{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pw=` 	
\r=`.split(""),T3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<pw.length;t+=1)e[pw[t].charCodeAt(0)]=-2;for(let t=0;t<Au.length;t+=1)e[Au[t].charCodeAt(0)]=t;return e})();function gw(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Au[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Au[n]),t.queuedBits-=6}}function wS(e,t,r){const n=T3[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function vw(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=i=>{O3(i,n,r)};for(let i=0;i<e.length;i+=1)wS(e.charCodeAt(i),a,o);return t.join("")}function P3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function R3(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}P3(n,t)}}function O3(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ui(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)wS(e.charCodeAt(a),r,n);return new Uint8Array(t)}function D3(e){const t=[];return R3(e,r=>t.push(r)),new Uint8Array(t)}function Ga(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>gw(a,r,n)),gw(null,r,n),t.join("")}function A3(e){return Math.round(Date.now()/1e3)+e}function I3(){return Symbol("auth-callback")}const lr=()=>typeof window<"u"&&typeof document<"u",Aa={tested:!1,writable:!1},bS=()=>{if(!lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Aa.tested)return Aa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Aa.tested=!0,Aa.writable=!0}catch{Aa.tested=!0,Aa.writable=!1}return Aa.writable};function M3(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const jS=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Io=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ia=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Hs=async(e,t)=>{await e.removeItem(t)};class Ch{constructor(){this.promise=new Ch.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ch.promiseConstructor=Promise;function Hf(e){const t=e.split(".");if(t.length!==3)throw new Zp("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!N3.test(t[n]))throw new Zp("JWT not in base64url format");return{header:JSON.parse(vw(t[0])),payload:JSON.parse(vw(t[1])),signature:ui(t[2]),raw:{header:t[0],payload:t[1]}}}async function L3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function F3(e,t){return new Promise((n,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){a(i);return}}})()})}function U3(e){return("0"+e.toString(16)).substr(-2)}function B3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,U3).join("")}async function z3(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function V3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await z3(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _o(e,t,r=!1){const n=B3();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Io(e,`${t}-code-verifier`,a);const o=await V3(n);return[o,n===o?"plain":"s256"]}const W3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function H3(e){const t=e.headers.get(Jp);if(!t||!t.match(W3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function q3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function G3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Y3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function So(e){if(!Y3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qf(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function K3(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function xw(e){return JSON.parse(JSON.stringify(e))}const La=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Q3=[502,503,504];async function yw(e){var t;if(!$3(e))throw new Xp(La(e),0);if(Q3.includes(e.status))throw new Xp(La(e),e.status);let r;try{r=await e.json()}catch(o){throw new Va(La(o),o)}let n;const a=H3(e);if(a&&a.getTime()>=yS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new mw(La(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new en}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new mw(La(r),e.status,r.weak_password.reasons);throw new S3(La(r),e.status||500,n)}const J3=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Se(e,t,r,n){var a;const o=Object.assign({},n==null?void 0:n.headers);o[Jp]||(o[Jp]=yS["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await X3(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function X3(e,t,r,n,a,o){const i=J3(t,n,a,o);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new Xp(La(c),0)}if(l.ok||await yw(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await yw(c)}}function In(e){var t;let r=null;t$(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=A3(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function ww(e){const t=In(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Z3(e){return{data:e,error:null}}function e$(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o}=e,i=Ea(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function bw(e){return e}function t$(e){return e.access_token&&e.refresh_token&&e.expires_in}const Gf=["global","local","others"];class r${constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=jS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Gf[0]){if(Gf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gf.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Zs})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Ea(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:e$,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(je(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zs})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:bw});if(u.error)throw u.error;const m=await u.json(),p=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);d[`${x}Page`]=g}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(je(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){So(t);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zs})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){So(t);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Zs})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){So(t);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Zs})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){So(t.userId);try{const{data:r,error:n}=await Se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _deleteFactor(t){So(t.userId),So(t.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:bw});if(u.error)throw u.error;const m=await u.json(),p=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);d[`${x}Page`]=g}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(je(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(je(r))return{data:null,error:r};throw r}}}function jw(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Co={debug:!!(globalThis&&bS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class NS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class n$ extends NS{}async function s$(e,t,r){Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Co.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new n$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Co.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function a$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _S(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function o$(e){return parseInt(e,16)}function i$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function l$(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:o=new Date,nonce:i,notBefore:l,requestId:c,resources:d,scheme:u,uri:m,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=_S(e.address),y=u?`${u}://${n}`:n,g=e.statement?`${e.statement}
`:"",x=`${y} wants you to sign in with your Ethereum account:
${f}

${g}`;let w=`URI: ${m}
Version: ${p}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(a&&(w+=`
Expiration Time: ${a.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),c&&(w+=`
Request ID: ${c}`),d){let v=`
Resources:`;for(const b of d){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);v+=`
- ${b}`}w+=v}return`${x}
${w}`}class Bt extends Error{constructor({message:t,code:r,cause:n,name:a}){var o;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=a??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Iu extends Bt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function c$({error:e,options:t}){var r,n,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Bt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(SS(i)){if(o.rp.id!==i)return new Bt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function d$({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Bt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(SS(n)){if(r.rpId!==n)return new Bt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class u${createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const h$=new u$;function f$(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Ea(e,["challenge","user","excludeCredentials"]),o=ui(t).buffer,i=Object.assign(Object.assign({},r),{id:ui(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:o,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:ui(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function m$(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Ea(e,["challenge","allowCredentials"]),a=ui(t).buffer,o=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];o.allowCredentials[i]=Object.assign(Object.assign({},l),{id:ui(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function p$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ga(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ga(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function g$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ga(new Uint8Array(a.authenticatorData)),clientDataJSON:Ga(new Uint8Array(a.clientDataJSON)),signature:Ga(new Uint8Array(a.signature)),userHandle:a.userHandle?Ga(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function SS(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Nw(){var e,t;return!!(lr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function v$(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Iu("Browser returned unexpected credential type",t)}:{data:null,error:new Iu("Empty credential response",t)}}catch(t){return{data:null,error:c$({error:t,options:e})}}}async function x$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Iu("Browser returned unexpected credential type",t)}:{data:null,error:new Iu("Empty credential response",t)}}catch(t){return{data:null,error:d$({error:t,options:e})}}}const y$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},w$={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Mu(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const o in a){const i=a[o];if(i!==void 0)if(Array.isArray(i))n[o]=i;else if(r(i))n[o]=i;else if(t(i)){const l=n[o];t(l)?n[o]=Mu(l,i):n[o]=Mu(i)}else n[o]=i}return n}function b$(e,t){return Mu(y$,e,t||{})}function j$(e,t){return Mu(w$,e,t||{})}class N${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},o){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!i)return{data:null,error:l};const c=a??h$.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:d}=i.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(i.webauthn.type){case"create":{const d=b$(i.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:u,error:m}=await v$({publicKey:d,signal:c});return u?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:u}},error:null}:{data:null,error:m}}case"request":{const d=j$(i.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:u,error:m}=await x$(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:u}},error:null}:{data:null,error:m}}}}catch(i){return je(i)?{data:null,error:i}:{data:null,error:new Va("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!r)return{data:null,error:new fc("rpId is required for WebAuthn authentication")};try{if(!Nw())return{data:null,error:new Va("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:o});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return je(i)?{data:null,error:i}:{data:null,error:new Va("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!r)return{data:null,error:new fc("rpId is required for WebAuthn registration")};try{if(!Nw())return{data:null,error:new Va("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(u=>{var m;return(m=u.data)===null||m===void 0?void 0:m.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:o});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(i){return je(i)?{data:null,error:i}:{data:null,error:new Va("Unexpected error in register",i)}}}}a$();const _$={url:w3,storageKey:b3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:j3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function _w(e,t,r){return await r()}const Eo={};class mc{get jwks(){var t,r;return(r=(t=Eo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Eo[this.storageKey]=Object.assign(Object.assign({},Eo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Eo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Eo[this.storageKey]=Object.assign(Object.assign({},Eo[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},_$),t);if(this.storageKey=o.storageKey,this.instanceID=(r=mc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,mc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&lr()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new r$({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=jS(o.fetch),this.lock=o.lock||_w,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:lr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=s$:this.lock=_w,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new N$(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:bS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jw(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=jw(this.memoryStorage)),lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${xS}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(lr()&&(r=M3(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),lr()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),k3(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return je(r)?this._returnResult({error:r}):this._returnResult({error:new Va("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:In}),{data:i,error:l}=o;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(o){if(je(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var r,n,a;try{let o;if("email"in t){const{email:u,password:m,options:p}=t;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await _o(this.storage,this.storageKey)),o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:m,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:y},xform:In})}else if("phone"in t){const{phone:u,password:m,options:p}=t;o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(a=p==null?void 0:p.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:In})}else throw new Sd("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(o){if(je(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:l}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ww})}else if("phone"in t){const{phone:o,password:i,options:l}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ww})}else throw new Sd("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const o=new No;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,o,i,l,c,d,u,m,p;let f,y;if("message"in t)f=t.message,y=t.signature;else{const{chain:g,wallet:x,statement:w,options:v}=t;let b;if(lr())if(typeof x=="object")b=x;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")b=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const j=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),k=await b.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=_S(k[0]);let N=(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const T=await b.request({method:"eth_chainId"});N=o$(T)}const E={domain:j.host,address:S,statement:w,uri:j.href,version:"1",chainId:N,nonce:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(i=(o=v==null?void 0:v.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=l$(E),y=await b.request({method:"personal_sign",params:[i$(f),S]})}try{const{data:g,error:x}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:y},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:In});if(x)throw x;if(!g||!g.session||!g.user){const w=new No;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:x})}catch(g){if(je(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,a,o,i,l,c,d,u,m,p,f;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:x,wallet:w,statement:v,options:b}=t;let j;if(lr())if(typeof w=="object")j=w;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=w}const k=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),v?{statement:v}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)y=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((m=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:x,error:w}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Ga(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:In});if(w)throw w;if(!x||!x.session||!x.user){const v=new No;return this._returnResult({data:{user:null,session:null},error:v})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(je(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await Ia(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:o,error:i}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:In});if(await Hs(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!o||!o.session||!o.user){const l=new No;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:i})}catch(o){if(je(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:o,nonce:i}=t,l=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:In}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const u=new No;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await _o(this.storage,this.storageKey));const{error:m}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u})}throw new Sd("You must provide either an email or phone number.")}catch(l){if(je(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,o;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:In});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,o,i;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await _o(this.storage,this.storageKey));const d=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Z3});return!((o=d.data)===null||o===void 0)&&o.url&&lr()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(je(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new en;const{error:a}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(je(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:o}=t,{error:i}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:n,type:a,options:o}=t,{data:i,error:l}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l})}throw new Sd("You must provide either an email or phone number and a type")}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ia(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Vf:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await Ia(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=qf()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=K3(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zs}):await this._useSession(async r=>{var n,a,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Zs})})}catch(r){if(je(r))return E3(r)&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:o}=n;if(o)throw o;if(!a.session)throw new en;const i=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await _o(this.storage,this.storageKey));const{data:d,error:u}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Zs});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(je(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new en;const r=Date.now()/1e3;let n=r,a=!0,o=null;const{payload:i}=Hf(t.access_token);if(i.exp&&(n=i.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(je(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new en;const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!lr())throw new Cd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Cd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new fw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new fw("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new Cd("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let p=u+m;c&&(p=parseInt(c));const f=p-u;f*1e3<=Ao&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${m}s`);const y=p-m;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,u);const{data:g,error:x}=await this._getUser(o);if(x)throw x;const w={provider_token:n,provider_refresh_token:a,access_token:o,expires_in:m,expires_at:p,refresh_token:i,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:t.type},error:null})}catch(n){if(je(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ia(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return this._returnResult({error:o});const i=(n=a.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(C3(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=I3(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await _o(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(je(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async o=>{var i,l,c,d,u;const{data:m,error:p}=o;if(p)throw p;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return lr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(je(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:o}}=r;if(a)throw a;const{options:i,provider:l,token:c,access_token:d,nonce:u}=t,m=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:In}),{data:p,error:f}=m;return f?this._returnResult({data:{user:null,session:null},error:f}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new No}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:f}))}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:o,error:i}=r;if(i)throw i;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await F3(async a=>(a>0&&await L3(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:In})),(a,o)=>{const i=200*Math.pow(2,a);return o&&Wf(o)&&Date.now()+i-n<Ao})}catch(n){if(this._debug(r,"error",n),je(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),lr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Ia(this.storage,this.storageKey);if(a&&this.userStorage){let i=await Ia(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:a.user},await Io(this.userStorage,this.storageKey+"-user",i)),a.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:qf()}else if(a&&!a.user&&!a.user){const i=await Ia(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(a.user=i.user,await Hs(this.storage,this.storageKey+"-user"),await Io(this.storage,this.storageKey,a)):a.user=qf()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Vf;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Vf}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),Wf(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(a.access_token);!l&&(i!=null&&i.user)?(a.user=i.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ch;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new en;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(a,"error",o),je(o)){const i={data:null,error:o};return Wf(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Io(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=xw(a);await Io(this.storage,this.storageKey,o)}else{const a=xw(r);await Io(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Hs(this.storage,this.storageKey),await Hs(this.storage,this.storageKey+"-code-verifier"),await Hs(this.storage,this.storageKey+"-user"),this.userStorage&&await Hs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&lr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ao);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Ao);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ao}ms, refresh threshold is ${Qp} ticks`),a<=Qp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof NS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await _o(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);a.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;return o?this._returnResult({data:null,error:o}):await Se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:o,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?p$(t.webauthn.credential_response):g$(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f$(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m$(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Hf(n.access_token);let i=null;o.aal&&(i=o.aal);let l=i;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new en})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new en});const i=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&lr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new en});const i=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&lr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new en})})}catch(t){if(je(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new en})})}catch(r){if(je(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+_3>a)return n;const{data:o,error:i}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,n=o.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:f,error:y}=await this.getSession();if(y||!f.session)return this._returnResult({data:null,error:y});n=f.session.access_token}const{header:a,payload:o,signature:i,raw:{header:l,payload:c}}=Hf(n);r!=null&&r.allowExpired||q3(o.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:o,header:a,signature:i},error:null}}const u=G3(a.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,i,D3(`${l}.${c}`)))throw new Zp("Invalid JWT signature");return{data:{claims:o,header:a,signature:i},error:null}}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}}}mc.nextInstanceID={};const S$=mc;class C$ extends S${constructor(t){super(t)}}class E${constructor(t,r,n){var a,o,i;this.supabaseUrl=t,this.supabaseKey=r;const l=y3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:u3,realtime:f3,auth:Object.assign(Object.assign({},h3),{storageKey:c}),global:d3},u=x3(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=g3(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new wM(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new i3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new vM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,storageKey:i,flowType:l,lock:c,debug:d,throwOnError:u},m,p){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new C$({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),m),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,flowType:l,lock:c,debug:d,throwOnError:u,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new $M(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const k$=(e,t,r)=>new E$(e,t,r);function T$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}T$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const P$="https://hnfmormzizymhkqrihhm.supabase.co",R$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhuZm1vcm16aXp5bWhrcXJpaGhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1ODUzMTQsImV4cCI6MjA3OTE2MTMxNH0.H_sIAj3hIkzE6Q-752f-FvvgZ8nAHXUZuihH4XxnBps",K=k$(P$,R$,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}},db:{schema:"public"}});function et(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function fn(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Pr(e,t){const r=et(e);return isNaN(t)?fn(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Xn(e,t){const r=et(e);if(isNaN(t))return fn(e,NaN);if(!t)return r;const n=r.getDate(),a=fn(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const o=a.getDate();return n>=o?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const Gv=6048e5,O$=864e5,CS=6e4,ES=36e5;let D$={};function Ji(){return D$}function ws(e,t){var l,c,d,u;const r=Ji(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=et(e),o=a.getDay(),i=(o<n?7:0)+o-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function co(e){return ws(e,{weekStartsOn:1})}function kS(e){const t=et(e),r=t.getFullYear(),n=fn(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=co(n),o=fn(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=co(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function Ii(e){const t=et(e);return t.setHours(0,0,0,0),t}function $u(e){const t=et(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function us(e,t){const r=Ii(e),n=Ii(t),a=+r-$u(r),o=+n-$u(n);return Math.round((a-o)/O$)}function A$(e){const t=kS(e),r=fn(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),co(r)}function eg(e,t){const r=t*7;return Pr(e,r)}function I$(e,t){return Xn(e,t*12)}function M$(e){let t;return e.forEach(function(r){const n=et(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function $$(e){let t;return e.forEach(r=>{const n=et(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function qr(e,t){const r=Ii(e),n=Ii(t);return+r==+n}function Yv(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function L$(e){if(!Yv(e)&&typeof e!="number")return!1;const t=et(e);return!isNaN(Number(t))}function pc(e,t){const r=et(e),n=et(t),a=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return a*12+o}function F$(e,t,r){const n=ws(e,r),a=ws(t,r),o=+n-$u(n),i=+a-$u(a);return Math.round((o-i)/Gv)}function Kv(e){const t=et(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Qr(e){const t=et(e);return t.setDate(1),t.setHours(0,0,0,0),t}function TS(e){const t=et(e),r=fn(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Qv(e,t){var l,c,d,u;const r=Ji(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=et(e),o=a.getDay(),i=(o<n?-7:0)+6-(o-n);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function PS(e){return Qv(e,{weekStartsOn:1})}const U$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},B$=(e,t,r)=>{let n;const a=U$[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Yf(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const z$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},V$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},W$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},H$={date:Yf({formats:z$,defaultWidth:"full"}),time:Yf({formats:V$,defaultWidth:"full"}),dateTime:Yf({formats:W$,defaultWidth:"full"})},q$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},G$=(e,t,r,n)=>q$[e];function gl(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const Y$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},K$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Q$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},J$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},X$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Z$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eL=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},tL={ordinalNumber:eL,era:gl({values:Y$,defaultWidth:"wide"}),quarter:gl({values:K$,defaultWidth:"wide",argumentCallback:e=>e-1}),month:gl({values:Q$,defaultWidth:"wide"}),day:gl({values:J$,defaultWidth:"wide"}),dayPeriod:gl({values:X$,defaultWidth:"wide",formattingValues:Z$,defaultFormattingWidth:"wide"})};function vl(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?nL(l,m=>m.test(i)):rL(l,m=>m.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}function rL(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function nL(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function sL(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const l=t.slice(a.length);return{value:i,rest:l}}}const aL=/^(\d+)(th|st|nd|rd)?/i,oL=/\d+/i,iL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lL={any:[/^b/i,/^(a|c)/i]},cL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dL={any:[/1/i,/2/i,/3/i,/4/i]},uL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vL={ordinalNumber:sL({matchPattern:aL,parsePattern:oL,valueCallback:e=>parseInt(e,10)}),era:vl({matchPatterns:iL,defaultMatchWidth:"wide",parsePatterns:lL,defaultParseWidth:"any"}),quarter:vl({matchPatterns:cL,defaultMatchWidth:"wide",parsePatterns:dL,defaultParseWidth:"any",valueCallback:e=>e+1}),month:vl({matchPatterns:uL,defaultMatchWidth:"wide",parsePatterns:hL,defaultParseWidth:"any"}),day:vl({matchPatterns:fL,defaultMatchWidth:"wide",parsePatterns:mL,defaultParseWidth:"any"}),dayPeriod:vl({matchPatterns:pL,defaultMatchWidth:"any",parsePatterns:gL,defaultParseWidth:"any"})},RS={code:"en-US",formatDistance:B$,formatLong:H$,formatRelative:G$,localize:tL,match:vL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xL(e){const t=et(e);return us(t,TS(t))+1}function OS(e){const t=et(e),r=+co(t)-+A$(t);return Math.round(r/Gv)+1}function DS(e,t){var u,m,p,f;const r=et(e),n=r.getFullYear(),a=Ji(),o=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(p=a.locale)==null?void 0:p.options)==null?void 0:f.firstWeekContainsDate)??1,i=fn(e,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const l=ws(i,t),c=fn(e,0);c.setFullYear(n,0,o),c.setHours(0,0,0,0);const d=ws(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function yL(e,t){var l,c,d,u;const r=Ji(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=DS(e,t),o=fn(e,0);return o.setFullYear(a,0,n),o.setHours(0,0,0,0),ws(o,t)}function AS(e,t){const r=et(e),n=+ws(r,t)-+yL(r,t);return Math.round(n/Gv)+1}function st(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const qs={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return st(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):st(r+1,2)},d(e,t){return st(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return st(e.getHours()%12||12,t.length)},H(e,t){return st(e.getHours(),t.length)},m(e,t){return st(e.getMinutes(),t.length)},s(e,t){return st(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return st(a,t.length)}},ko={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Sw={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return qs.y(e,t)},Y:function(e,t,r,n){const a=DS(e,n),o=a>0?a:1-a;if(t==="YY"){const i=o%100;return st(i,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):st(o,t.length)},R:function(e,t){const r=kS(e);return st(r,t.length)},u:function(e,t){const r=e.getFullYear();return st(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return st(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return st(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return qs.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return st(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=AS(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):st(a,t.length)},I:function(e,t,r){const n=OS(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):st(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):qs.d(e,t)},D:function(e,t,r){const n=xL(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):st(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return st(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return st(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return st(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=ko.noon:n===0?a=ko.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=ko.evening:n>=12?a=ko.afternoon:n>=4?a=ko.morning:a=ko.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return qs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):qs.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):st(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):st(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):qs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):qs.s(e,t)},S:function(e,t){return qs.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Ew(n);case"XXXX":case"XX":return Fa(n);case"XXXXX":case"XXX":default:return Fa(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Ew(n);case"xxxx":case"xx":return Fa(n);case"xxxxx":case"xxx":default:return Fa(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Cw(n,":");case"OOOO":default:return"GMT"+Fa(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Cw(n,":");case"zzzz":default:return"GMT"+Fa(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return st(n,t.length)},T:function(e,t,r){const n=e.getTime();return st(n,t.length)}};function Cw(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),o=n%60;return o===0?r+String(a):r+String(a)+t+st(o,2)}function Ew(e,t){return e%60===0?(e>0?"-":"+")+st(Math.abs(e)/60,2):Fa(e,t)}function Fa(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=st(Math.trunc(n/60),2),o=st(n%60,2);return r+a+t+o}const kw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},IS=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},wL=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return kw(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",kw(n,t)).replace("{{time}}",IS(a,t))},bL={p:IS,P:wL},jL=/^D+$/,NL=/^Y+$/,_L=["D","DD","YY","YYYY"];function SL(e){return jL.test(e)}function CL(e){return NL.test(e)}function EL(e,t,r){const n=kL(e,t,r);if(console.warn(n),_L.includes(e))throw new RangeError(n)}function kL(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const TL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RL=/^'([^]*?)'?$/,OL=/''/g,DL=/[a-zA-Z]/;function Ta(e,t,r){var u,m,p,f,y,g,x,w;const n=Ji(),a=(r==null?void 0:r.locale)??n.locale??RS,o=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(p=n.locale)==null?void 0:p.options)==null?void 0:f.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((g=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((w=(x=n.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??0,l=et(e);if(!L$(l))throw new RangeError("Invalid time value");let c=t.match(PL).map(v=>{const b=v[0];if(b==="p"||b==="P"){const j=bL[b];return j(v,a.formatLong)}return v}).join("").match(TL).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:AL(v)};if(Sw[b])return{isToken:!0,value:v};if(b.match(DL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return c.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&CL(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&SL(b))&&EL(b,t,String(e));const j=Sw[b[0]];return j(l,b,a.localize,d)}).join("")}function AL(e){const t=e.match(RL);return t?t[1].replace(OL,"'"):e}function IL(e){const t=et(e),r=t.getFullYear(),n=t.getMonth(),a=fn(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function ML(){return Object.assign({},Ji())}function $L(e){return Math.trunc(+et(e)/1e3)}function LL(e){const t=et(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function FL(e,t){return F$(LL(e),Qr(e),t)+1}function tg(e,t){const r=et(e),n=et(t);return r.getTime()>n.getTime()}function MS(e,t){const r=et(e),n=et(t);return+r<+n}function Jv(e,t){const r=et(e),n=et(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function UL(e,t){const r=et(e),n=et(t);return r.getFullYear()===n.getFullYear()}function Kf(e,t){return Pr(e,-t)}function $S(e,t){const n=WL(e);let a;if(n.date){const c=HL(n.date,2);a=qL(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const o=a.getTime();let i=0,l;if(n.time&&(i=GL(n.time),isNaN(i)))return new Date(NaN);if(n.timezone){if(l=YL(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(o+i),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(o+i+l)}const Ed={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},BL=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,zL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,VL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function WL(e){const t={},r=e.split(Ed.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Ed.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Ed.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=Ed.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function HL(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?a:o*100,restDateString:e.slice((n[1]||n[2]).length)}}function qL(e,t){if(t===null)return new Date(NaN);const r=e.match(BL);if(!r)return new Date(NaN);const n=!!r[4],a=xl(r[1]),o=xl(r[2])-1,i=xl(r[3]),l=xl(r[4]),c=xl(r[5])-1;if(n)return ZL(t,l,c)?KL(t,l,c):new Date(NaN);{const d=new Date(0);return!JL(t,o,i)||!XL(t,a)?new Date(NaN):(d.setUTCFullYear(t,o,Math.max(a,i)),d)}}function xl(e){return e?parseInt(e):1}function GL(e){const t=e.match(zL);if(!t)return NaN;const r=Qf(t[1]),n=Qf(t[2]),a=Qf(t[3]);return eF(r,n,a)?r*ES+n*CS+a*1e3:NaN}function Qf(e){return e&&parseFloat(e.replace(",","."))||0}function YL(e){if(e==="Z")return 0;const t=e.match(VL);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return tF(n,a)?r*(n*ES+a*CS):NaN}function KL(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,o=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+o),n}const QL=[31,null,31,30,31,30,31,31,30,31,30,31];function LS(e){return e%400===0||e%4===0&&e%100!==0}function JL(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(QL[t]||(LS(e)?29:28))}function XL(e,t){return t>=1&&t<=(LS(e)?366:365)}function ZL(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function eF(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function tF(e,t){return t>=0&&t<=59}function Jf(e,t){const r=et(e),n=r.getFullYear(),a=r.getDate(),o=fn(e,0);o.setFullYear(n,t,15),o.setHours(0,0,0,0);const i=IL(o);return r.setMonth(t,Math.min(a,i)),r}function Tw(e,t){const r=et(e);return isNaN(+r)?fn(e,NaN):(r.setFullYear(t),r)}function Pw(e,t,r){const n=ML(),a=sF(e,r.timeZone,r.locale??n.locale);return"formatToParts"in a?rF(a,t):nF(a,t)}function rF(e,t){const r=e.formatToParts(t);for(let n=r.length-1;n>=0;--n)if(r[n].type==="timeZoneName")return r[n].value}function nF(e,t){const r=e.format(t).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(r);return n?n[0].substr(1):""}function sF(e,t,r){return new Intl.DateTimeFormat(r?[r.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}function aF(e,t){const r=dF(t);return"formatToParts"in r?iF(r,e):lF(r,e)}const oF={year:0,month:1,day:2,hour:3,minute:4,second:5};function iF(e,t){try{const r=e.formatToParts(t),n=[];for(let a=0;a<r.length;a++){const o=oF[r[a].type];o!==void 0&&(n[o]=parseInt(r[a].value,10))}return n}catch(r){if(r instanceof RangeError)return[NaN];throw r}}function lF(e,t){const r=e.format(t),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}const Xf={},Rw=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),cF=Rw==="06/25/2014, 00:00:00"||Rw==="06/25/2014 00:00:00";function dF(e){return Xf[e]||(Xf[e]=cF?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),Xf[e]}function FS(e,t,r,n,a,o,i){const l=new Date(0);return l.setUTCFullYear(e,t,r),l.setUTCHours(n,a,o,i),l}const Ow=36e5,uF=6e4,Zf={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Xv(e,t,r){if(!e)return 0;let n=Zf.timezoneZ.exec(e);if(n)return 0;let a,o;if(n=Zf.timezoneHH.exec(e),n)return a=parseInt(n[1],10),Dw(a)?-(a*Ow):NaN;if(n=Zf.timezoneHHMM.exec(e),n){a=parseInt(n[2],10);const i=parseInt(n[3],10);return Dw(a,i)?(o=Math.abs(a)*Ow+i*uF,n[1]==="+"?-o:o):NaN}if(mF(e)){t=new Date(t||Date.now());const i=r?t:hF(t),l=rg(i,e);return-(r?l:fF(t,l,e))}return NaN}function hF(e){return FS(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function rg(e,t){const r=aF(e,t),n=FS(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime();let a=e.getTime();const o=a%1e3;return a-=o>=0?o:1e3+o,n-a}function fF(e,t,r){let a=e.getTime()-t;const o=rg(new Date(a),r);if(t===o)return t;a-=o-t;const i=rg(new Date(a),r);return o===i?o:Math.max(o,i)}function Dw(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const Aw={};function mF(e){if(Aw[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Aw[e]=!0,!0}catch{return!1}}const pF=60*1e3,gF={X:function(e,t,r){const n=em(r.timeZone,e);if(n===0)return"Z";switch(t){case"X":return Iw(n);case"XXXX":case"XX":return Mo(n);case"XXXXX":case"XXX":default:return Mo(n,":")}},x:function(e,t,r){const n=em(r.timeZone,e);switch(t){case"x":return Iw(n);case"xxxx":case"xx":return Mo(n);case"xxxxx":case"xxx":default:return Mo(n,":")}},O:function(e,t,r){const n=em(r.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+vF(n,":");case"OOOO":default:return"GMT"+Mo(n,":")}},z:function(e,t,r){switch(t){case"z":case"zz":case"zzz":return Pw("short",e,r);case"zzzz":default:return Pw("long",e,r)}}};function em(e,t){const r=e?Xv(e,t,!0)/pF:(t==null?void 0:t.getTimezoneOffset())??0;if(Number.isNaN(r))throw new RangeError("Invalid time zone specified: "+e);return r}function Lu(e,t){const r=e<0?"-":"";let n=Math.abs(e).toString();for(;n.length<t;)n="0"+n;return r+n}function Mo(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Lu(Math.floor(n/60),2),o=Lu(Math.floor(n%60),2);return r+a+t+o}function Iw(e,t){return e%60===0?(e>0?"-":"+")+Lu(Math.abs(e)/60,2):Mo(e,t)}function vF(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),o=n%60;return o===0?r+String(a):r+String(a)+t+Lu(o,2)}function Mw(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const xF=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,tm=36e5,$w=6e4,yF=2,Dr={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:xF};function US(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const r=t.additionalDigits==null?yF:Number(t.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const n=wF(e),{year:a,restDateString:o}=bF(n.date,r),i=jF(o,a);if(i===null||isNaN(i.getTime()))return new Date(NaN);if(i){const l=i.getTime();let c=0,d;if(n.time&&(c=NF(n.time),c===null||isNaN(c)))return new Date(NaN);if(n.timeZone||t.timeZone){if(d=Xv(n.timeZone||t.timeZone,new Date(l+c)),isNaN(d))return new Date(NaN)}else d=Mw(new Date(l+c)),d=Mw(new Date(l+c+d));return new Date(l+c+d)}else return new Date(NaN)}function wF(e){const t={};let r=Dr.dateTimePattern.exec(e),n;if(r?(t.date=r[1],n=r[3]):(r=Dr.datePattern.exec(e),r?(t.date=r[1],n=r[2]):(t.date=null,n=e)),n){const a=Dr.timeZone.exec(n);a?(t.time=n.replace(a[1],""),t.timeZone=a[1].trim()):t.time=n}return t}function bF(e,t){if(e){const r=Dr.YYY[t],n=Dr.YYYYY[t];let a=Dr.YYYY.exec(e)||n.exec(e);if(a){const o=a[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(a=Dr.YY.exec(e)||r.exec(e),a){const o=a[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}}return{year:null}}function jF(e,t){if(t===null)return null;let r,n,a;if(!e||!e.length)return r=new Date(0),r.setUTCFullYear(t),r;let o=Dr.MM.exec(e);if(o)return r=new Date(0),n=parseInt(o[1],10)-1,Fw(t,n)?(r.setUTCFullYear(t,n),r):new Date(NaN);if(o=Dr.DDD.exec(e),o){r=new Date(0);const i=parseInt(o[1],10);return CF(t,i)?(r.setUTCFullYear(t,0,i),r):new Date(NaN)}if(o=Dr.MMDD.exec(e),o){r=new Date(0),n=parseInt(o[1],10)-1;const i=parseInt(o[2],10);return Fw(t,n,i)?(r.setUTCFullYear(t,n,i),r):new Date(NaN)}if(o=Dr.Www.exec(e),o)return a=parseInt(o[1],10)-1,Uw(a)?Lw(t,a):new Date(NaN);if(o=Dr.WwwD.exec(e),o){a=parseInt(o[1],10)-1;const i=parseInt(o[2],10)-1;return Uw(a,i)?Lw(t,a,i):new Date(NaN)}return null}function NF(e){let t,r,n=Dr.HH.exec(e);if(n)return t=parseFloat(n[1].replace(",",".")),rm(t)?t%24*tm:NaN;if(n=Dr.HHMM.exec(e),n)return t=parseInt(n[1],10),r=parseFloat(n[2].replace(",",".")),rm(t,r)?t%24*tm+r*$w:NaN;if(n=Dr.HHMMSS.exec(e),n){t=parseInt(n[1],10),r=parseInt(n[2],10);const a=parseFloat(n[3].replace(",","."));return rm(t,r,a)?t%24*tm+r*$w+a*1e3:NaN}return null}function Lw(e,t,r){t=t||0,r=r||0;const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,o=t*7+r+1-a;return n.setUTCDate(n.getUTCDate()+o),n}const _F=[31,28,31,30,31,30,31,31,30,31,30,31],SF=[31,29,31,30,31,30,31,31,30,31,30,31];function BS(e){return e%400===0||e%4===0&&e%100!==0}function Fw(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;const n=BS(e);if(n&&r>SF[t]||!n&&r>_F[t])return!1}return!0}function CF(e,t){if(t<1)return!1;const r=BS(e);return!(r&&t>366||!r&&t>365)}function Uw(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function rm(e,t,r){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}const EF=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function kF(e,t,r={}){t=String(t);const n=t.match(EF);if(n){const a=US(r.originalDate||e,r);t=n.reduce(function(o,i){if(i[0]==="'")return o;const l=o.indexOf(i),c=o[l-1]==="'",d=o.replace(i,"'"+gF[i[0]](a,i,r)+"'");return c?d.substring(0,l-1)+d.substring(l+1):d},t)}return Ta(e,t,r)}function TF(e,t,r){e=US(e,r);const n=Xv(t,e,!0),a=new Date(e.getTime()-n),o=new Date(0);return o.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),o.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),o}const Sn="America/Detroit",Os=e=>{const t=typeof e=="string"?$S(e):e;return TF(t,Sn)},nm=(e,t)=>new Date(`${e}T${t}:00`).toISOString(),zS=(e,t="yyyy-MM-dd HH:mm:ss zzz")=>{const r=typeof e=="string"?$S(e):e;return kF(r,t,{timeZone:Sn})},VS=e=>zS(e,"h:mm a"),ng=e=>zS(e,"MMMM d, yyyy"),gc=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Sn}),at=e=>{if(!e||e==="--:--")return e;const[t,r]=e.split(":"),n=parseInt(t,10),a=parseInt(r,10);if(isNaN(n)||isNaN(a))return e;const o=new Date;return o.setHours(n,a),o.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},WS=e=>{const t=Os(e.start_datetime),r=Os(new Date),n=new Date(r);return n.setHours(0,0,0,0),t>=n},HS=(e,t)=>{const r=e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),n=t.slice(-4);return`${r}-${n}`},PF=({onEventSelect:e})=>{const t=Xr(),[r,n]=h.useState([]),[a,o]=h.useState(!0);h.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:p,error:f}=await K.from("events").select(`
          *,
          volunteer_roles(*)
        `).eq("status","published").eq("is_public",!0).is("deleted_at",null).order("start_datetime",{ascending:!0});if(f){console.error("Error loading events:",f);return}const y=(p==null?void 0:p.filter(x=>WS(x)))||[];console.log("All events:",p),console.log("Upcoming events:",y);const g=await Promise.all(y.map(async x=>{var k;const{data:w,error:v}=await K.from("volunteers").select("id, role_id").eq("event_id",x.id).eq("status","confirmed");if(v)return console.error(`Error loading volunteers for ${x.title}:`,v),x;const b=(w==null?void 0:w.reduce((S,N)=>{const E=N.role_id;return S[E]||(S[E]=[]),S[E].push(N),S},{}))||{},j={...x,volunteer_roles:(k=x.volunteer_roles)==null?void 0:k.map(S=>({...S,volunteers:b[S.id]||[]}))};return console.log(`Event: ${x.title}`),console.log("Total volunteers found:",(w==null?void 0:w.length)||0),console.log("Volunteers by role:",b),j}));n(g)}catch(p){console.error("Error:",p)}finally{o(!1)}},l=p=>{const f=HS(p.title,p.id);t(`/${f}`),e&&e(p)},c=p=>{var f;return((f=p.volunteer_roles)==null?void 0:f.reduce((y,g)=>y+(g.slots_brother||0)+(g.slots_sister||0)+(g.slots_flexible||0),0))||0},d=p=>{var y;const f=((y=p.volunteer_roles)==null?void 0:y.reduce((g,x)=>{var v;const w=((v=x.volunteers)==null?void 0:v.length)||0;return console.log(`Role ${x.role_label}: ${w} volunteers`),g+w},0))||0;return console.log(`Total volunteers for ${p.title}: ${f}`),f},u=p=>{const f=Os(p.start_datetime),y=Os(new Date);return f.toDateString()===y.toDateString()},m=p=>{const f=Os(p.start_datetime),y=new Date,g=new Date(y.getTime()+5*60*60*1e3),x=Os(new Date),w=new Date(x);w.setDate(w.getDate()+1);const v=f<=g&&f>y;return f.toDateString()===x.toDateString()?{label:"Today",variant:"default",className:v?"bg-white text-[#5c5b47] border-[#5c5b47] font-semibold":"bg-white text-[#5c5b47] border-[#5c5b47]",isUrgent:v}:f.toDateString()===w.toDateString()?{label:"Tomorrow",variant:"secondary",className:v?"bg-white text-[#5c5b47] border-[#5c5b47] font-semibold":"bg-blue-100 text-blue-800 border-blue-200",isUrgent:v}:{label:"Upcoming",variant:"outline",className:v?"bg-white text-[#5c5b47] border-[#5c5b47] font-semibold":"bg-gray-100 text-gray-800 border-gray-200",isUrgent:v}};return a?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5c5b47] mx-auto"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Loading upcoming events..."})]})}):r.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Mt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Upcoming Events"}),s.jsx("p",{className:"text-gray-600",children:"There are no volunteer events scheduled at this time."})]}):s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"text-center mb-4 sm:mb-6 px-2",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Upcoming Volunteer Events"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"We are excited to have you as part of our volunteer network. Our stewards play a vital role in serving the community with trust, hospitality, and dedication."})]}),s.jsx("div",{className:"grid gap-3 sm:gap-4",children:r.map(p=>{const f=c(p),y=d(p),g=f-y,x=m(p),w=u(p),v=x.isUrgent;return s.jsxs(Pe,{onClick:()=>l(p),className:`hover:shadow-lg transition-all duration-200 cursor-pointer border-2 mx-2 sm:mx-0 ${v?"border-[#5c5b47] bg-[#5c5b47] text-white hover:border-[#4b4a39] shadow-[#5c5b47]/30 shadow-lg":w?"border-[#5c5b47] hover:border-[#4b4a39] bg-[#5c5b47] text-white":"border-[#5c5b47]/20 hover:border-[#5c5b47]/40"}`,children:[s.jsx($t,{className:"pb-3 px-4 sm:px-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Lt,{className:`text-lg sm:text-xl ${v||w?"text-white font-bold":"text-gray-900"} break-words`,children:p.title}),v&&s.jsx(mO,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white fill-current animate-pulse flex-shrink-0"})]}),s.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center text-xs sm:text-sm space-y-1 sm:space-y-0 sm:space-x-4 ${v||w?"text-white/80":"text-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Mt,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:ng(p.start_datetime)})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(dr,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:VS(p.start_datetime)})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(ps,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0 mt-0.5"}),s.jsx("span",{className:"text-xs leading-tight break-words",children:p.location})]})]})]}),s.jsx(ye,{className:`${x.className} ${v?"ring-2 ring-white/40":""} self-start sm:self-auto`,children:x.label})]})}),s.jsxs(Ae,{className:"pt-0 px-4 sm:px-6",children:[p.description&&s.jsx(Wr,{className:`${v||w?"text-white/85":"text-gray-600"} mb-3 sm:mb-4 text-sm sm:text-base`,children:p.description}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsxs("div",{className:`flex items-center text-xs sm:text-sm ${v||w?"text-white/85":"text-gray-600"}`,children:[s.jsx(Ft,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 flex-shrink-0"}),s.jsxs("span",{className:`${v||w?"text-white/90":""} break-words`,children:[y," of ",f," volunteers signed up",g>0&&s.jsx("span",{className:`font-medium ${v||w?"text-white":"text-[#5c5b47]"}`,children:v?` (${g} spots remaining - Starting Soon!)`:` (${g} spots remaining)`})]})]}),s.jsxs(H,{onClick:b=>{b.stopPropagation(),l(p)},className:`w-full sm:w-auto ${v?"bg-white hover:bg-white/90 text-[#5c5b47] border border-white font-semibold shadow-lg":w?"bg-white hover:bg-white/90 text-[#5c5b47] border border-white font-semibold":"bg-[#5c5b47] hover:bg-[#7c7b55] text-white"}`,children:[s.jsx("span",{className:"text-sm sm:text-base",children:v?"Starting Soon - Volunteer!":w?"Volunteer Today":"Volunteer Now"}),s.jsx(m_,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-2"})]})]})]})]},p.id)})})]})},RF=()=>{const e=Xr(),[t,r]=h.useState(null),[n,a]=h.useState(!0);h.useEffect(()=>{if(typeof window<"u"&&window.location.hash.includes("access_token=")){const l=window.location.hash;window.location.replace(`/auth/callback${l}`)}i()},[]);const o=async()=>{try{const l=new Date,c=new Date(l.getTime()+5*60*60*1e3),{data:d,error:u}=await K.from("events").select("*").eq("status","published").eq("is_public",!1);if(u||!d||d.length===0)return;const m=d.filter(p=>{const f=new Date(p.start_datetime);return f<=c&&f>l});if(m.length===0)return;for(const p of m)await K.from("events").update({is_public:!0,updated_at:new Date().toISOString()}).eq("id",p.id)}catch(l){console.error("Error in autoMakeEventsPublic:",l)}},i=async()=>{try{await o();const{data:l,error:c}=await K.from("events").select("*").eq("status","published").eq("is_public",!0).is("deleted_at",null);if(c){r(!1);return}const d=(l==null?void 0:l.filter(u=>WS(u)))||[];r(d.length>0)}catch{r(!1)}finally{a(!1)}};return s.jsxs("div",{className:"min-h-screen bg-background relative",children:[s.jsx("header",{className:"border-b border-gold-400/10 bg-navy-800/60 backdrop-blur-xl absolute top-0 left-0 right-0 z-20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer",children:[s.jsx("div",{className:"crescent-moon mr-1"}),s.jsx("span",{className:"text-lg font-semibold text-gold-300 tracking-wide",children:"UMMA Stewards"})]})}),s.jsx(H,{onClick:()=>e("/login"),className:"bg-gold-400 hover:bg-gold-300 text-navy-900 font-medium rounded-lg shadow-lg button-glow transition-all duration-200",children:"Sign In"})]})})}),s.jsx("section",{className:`w-full ${t?"min-h-[calc(100vh-4rem)] px-4 sm:px-6 lg:px-8 py-8 pt-24":"min-h-screen"}`,children:n?s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"crescent-moon-lg mx-auto mb-4 animate-pulse-soft"}),s.jsx("p",{className:"text-white/50",children:"Loading..."})]})}):t?s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx(PF,{})}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"relative z-10 min-h-screen flex items-center justify-center text-center",children:[s.jsx("div",{className:"absolute inset-0 geometric-accent opacity-30"}),s.jsx("div",{className:"max-w-4xl mx-auto relative z-10 px-4",children:s.jsxs("div",{className:"mt-20 sm:mt-32 md:mt-40 lg:mt-48",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[s.jsx("div",{className:"h-px w-16 bg-gradient-to-r from-transparent to-gold-400/40"}),s.jsx("div",{className:"crescent-moon-lg animate-float"}),s.jsx("div",{className:"h-px w-16 bg-gradient-to-l from-transparent to-gold-400/40"})]}),s.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold gradient-text mb-6",children:"Ramadan Mubarak"}),s.jsx("p",{className:"text-lg sm:text-xl text-white/70 mb-8 sm:mb-12 max-w-3xl mx-auto leading-relaxed",children:"We are excited to have you as part of our volunteer network. Our stewards play a vital role in serving the community with trust, hospitality, and dedication."}),s.jsx("div",{className:"ramadan-divider max-w-xs mx-auto mb-8"}),s.jsx("div",{className:"flex justify-center",children:s.jsx(H,{size:"lg",className:"bg-gold-400 hover:bg-gold-300 text-navy-900 px-8 py-4 text-lg rounded-xl shadow-xl button-glow transition-all duration-300 font-semibold",onClick:()=>e("/login?mode=signup"),children:"Get Started"})})]})})]})})})]})};var sm="focusScope.autoFocusOnMount",am="focusScope.autoFocusOnUnmount",Bw={bubbles:!1,cancelable:!0},OF="FocusScope",Oc=h.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=h.useState(null),d=Mr(a),u=Mr(o),m=h.useRef(null),p=We(t,g=>c(g)),f=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let g=function(b){if(f.paused||!l)return;const j=b.target;l.contains(j)?m.current=j:Ys(m.current,{select:!0})},x=function(b){if(f.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||Ys(m.current,{select:!0}))},w=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&Ys(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const v=new MutationObserver(w);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),v.disconnect()}}},[n,l,f.paused]),h.useEffect(()=>{if(l){Vw.add(f);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(sm,Bw);l.addEventListener(sm,d),l.dispatchEvent(w),w.defaultPrevented||(DF(LF(qS(l)),{select:!0}),document.activeElement===g&&Ys(l))}return()=>{l.removeEventListener(sm,d),setTimeout(()=>{const w=new CustomEvent(am,Bw);l.addEventListener(am,u),l.dispatchEvent(w),w.defaultPrevented||Ys(g??document.body,{select:!0}),l.removeEventListener(am,u),Vw.remove(f)},0)}}},[l,d,u,f]);const y=h.useCallback(g=>{if(!r&&!n||f.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(x&&w){const v=g.currentTarget,[b,j]=AF(v);b&&j?!g.shiftKey&&w===j?(g.preventDefault(),r&&Ys(b,{select:!0})):g.shiftKey&&w===b&&(g.preventDefault(),r&&Ys(j,{select:!0})):w===v&&g.preventDefault()}},[r,n,f.paused]);return s.jsx(ve.div,{tabIndex:-1,...i,ref:p,onKeyDown:y})});Oc.displayName=OF;function DF(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ys(n,{select:t}),document.activeElement!==r)return}function AF(e){const t=qS(e),r=zw(t,e),n=zw(t.reverse(),e);return[r,n]}function qS(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function zw(e,t){for(const r of e)if(!IF(r,{upTo:t}))return r}function IF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function MF(e){return e instanceof HTMLInputElement&&"select"in e}function Ys(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&MF(e)&&t&&e.select()}}var Vw=$F();function $F(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Ww(e,t),e.unshift(t)},remove(t){var r;e=Ww(e,t),(r=e[0])==null||r.resume()}}}function Ww(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function LF(e){return e.filter(t=>t.tagName!=="A")}var om=0;function Eh(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Hw()),document.body.insertAdjacentElement("beforeend",e[1]??Hw()),om++,()=>{om===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),om--}},[])}function Hw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Yd="right-scroll-bar-position",Kd="width-before-scroll-bar",FF="with-scroll-bars-hidden",UF="--removed-body-scroll-bar-size";function im(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function BF(e,t){var r=h.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var zF=typeof window<"u"?h.useLayoutEffect:h.useEffect,qw=new WeakMap;function VF(e,t){var r=BF(null,function(n){return e.forEach(function(a){return im(a,n)})});return zF(function(){var n=qw.get(r);if(n){var a=new Set(n),o=new Set(e),i=r.current;a.forEach(function(l){o.has(l)||im(l,null)}),o.forEach(function(l){a.has(l)||im(l,i)})}qw.set(r,e)},[e]),r}function WF(e){return e}function HF(e,t){t===void 0&&(t=WF);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var i=t(o,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var u=i;i=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),r}}}};return a}function qF(e){e===void 0&&(e={});var t=HF(null);return t.options=Nn({async:!0,ssr:!1},e),t}var GS=function(e){var t=e.sideCar,r=Ea(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,Nn({},r))};GS.isSideCarExport=!0;function GF(e,t){return e.useMedium(t),GS}var YS=qF(),lm=function(){},kh=h.forwardRef(function(e,t){var r=h.useRef(null),n=h.useState({onScrollCapture:lm,onWheelCapture:lm,onTouchMoveCapture:lm}),a=n[0],o=n[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,p=e.sideCar,f=e.noRelative,y=e.noIsolation,g=e.inert,x=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,b=e.gapMode,j=Ea(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=p,S=VF([r,t]),N=Nn(Nn({},j),a);return h.createElement(h.Fragment,null,u&&h.createElement(k,{sideCar:YS,removeScrollBar:d,shards:m,noRelative:f,noIsolation:y,inert:g,setCallbacks:o,allowPinchZoom:!!x,lockRef:r,gapMode:b}),i?h.cloneElement(h.Children.only(l),Nn(Nn({},N),{ref:S})):h.createElement(v,Nn({},N,{className:c,ref:S}),l))});kh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kh.classNames={fullWidth:Kd,zeroRight:Yd};var YF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function KF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=YF();return t&&e.setAttribute("nonce",t),e}function QF(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function JF(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var XF=function(){var e=0,t=null;return{add:function(r){e==0&&(t=KF())&&(QF(t,r),JF(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ZF=function(){var e=XF();return function(t,r){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},KS=function(){var e=ZF(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},e6={left:0,top:0,right:0,gap:0},cm=function(e){return parseInt(e||"",10)||0},t6=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[cm(r),cm(n),cm(a)]},r6=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return e6;var t=t6(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},n6=KS(),hi="data-scroll-locked",s6=function(e,t,r,n){var a=e.left,o=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(FF,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(hi,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yd,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Kd,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Yd," .").concat(Yd,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Kd," .").concat(Kd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(hi,`] {
    `).concat(UF,": ").concat(l,`px;
  }
`)},Gw=function(){var e=parseInt(document.body.getAttribute(hi)||"0",10);return isFinite(e)?e:0},a6=function(){h.useEffect(function(){return document.body.setAttribute(hi,(Gw()+1).toString()),function(){var e=Gw()-1;e<=0?document.body.removeAttribute(hi):document.body.setAttribute(hi,e.toString())}},[])},o6=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;a6();var o=h.useMemo(function(){return r6(a)},[a]);return h.createElement(n6,{styles:s6(o,!t,a,r?"":"!important")})},sg=!1;if(typeof window<"u")try{var kd=Object.defineProperty({},"passive",{get:function(){return sg=!0,!0}});window.addEventListener("test",kd,kd),window.removeEventListener("test",kd,kd)}catch{sg=!1}var To=sg?{passive:!1}:!1,i6=function(e){return e.tagName==="TEXTAREA"},QS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!i6(e)&&r[t]==="visible")},l6=function(e){return QS(e,"overflowY")},c6=function(e){return QS(e,"overflowX")},Yw=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=JS(e,n);if(a){var o=XS(e,n),i=o[1],l=o[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},d6=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},u6=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},JS=function(e,t){return e==="v"?l6(t):c6(t)},XS=function(e,t){return e==="v"?d6(t):u6(t)},h6=function(e,t){return e==="h"&&t==="rtl"?-1:1},f6=function(e,t,r,n,a){var o=h6(e,window.getComputedStyle(t).direction),i=o*n,l=r.target,c=t.contains(l),d=!1,u=i>0,m=0,p=0;do{if(!l)break;var f=XS(e,l),y=f[0],g=f[1],x=f[2],w=g-x-o*y;(y||w)&&JS(e,l)&&(m+=w,p+=y);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(m)<1||!u&&Math.abs(p)<1)&&(d=!0),d},Td=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Kw=function(e){return[e.deltaX,e.deltaY]},Qw=function(e){return e&&"current"in e?e.current:e},m6=function(e,t){return e[0]===t[0]&&e[1]===t[1]},p6=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},g6=0,Po=[];function v6(e){var t=h.useRef([]),r=h.useRef([0,0]),n=h.useRef(),a=h.useState(g6++)[0],o=h.useState(KS)[0],i=h.useRef(e);h.useEffect(function(){i.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=Lv([e.lockRef.current],(e.shards||[]).map(Qw),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var w=Td(g),v=r.current,b="deltaX"in g?g.deltaX:v[0]-w[0],j="deltaY"in g?g.deltaY:v[1]-w[1],k,S=g.target,N=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in g&&N==="h"&&S.type==="range")return!1;var E=Yw(N,S);if(!E)return!0;if(E?k=N:(k=N==="v"?"h":"v",E=Yw(N,S)),!E)return!1;if(!n.current&&"changedTouches"in g&&(b||j)&&(n.current=k),!k)return!0;var T=n.current||k;return f6(T,x,g,T==="h"?b:j)},[]),c=h.useCallback(function(g){var x=g;if(!(!Po.length||Po[Po.length-1]!==o)){var w="deltaY"in x?Kw(x):Td(x),v=t.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&m6(k.delta,w)})[0];if(v&&v.should){x.cancelable&&x.preventDefault();return}if(!v){var b=(i.current.shards||[]).map(Qw).filter(Boolean).filter(function(k){return k.contains(x.target)}),j=b.length>0?l(x,b[0]):!i.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),d=h.useCallback(function(g,x,w,v){var b={name:g,delta:x,target:w,should:v,shadowParent:x6(w)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),u=h.useCallback(function(g){r.current=Td(g),n.current=void 0},[]),m=h.useCallback(function(g){d(g.type,Kw(g),g.target,l(g,e.lockRef.current))},[]),p=h.useCallback(function(g){d(g.type,Td(g),g.target,l(g,e.lockRef.current))},[]);h.useEffect(function(){return Po.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,To),document.addEventListener("touchmove",c,To),document.addEventListener("touchstart",u,To),function(){Po=Po.filter(function(g){return g!==o}),document.removeEventListener("wheel",c,To),document.removeEventListener("touchmove",c,To),document.removeEventListener("touchstart",u,To)}},[]);var f=e.removeScrollBar,y=e.inert;return h.createElement(h.Fragment,null,y?h.createElement(o,{styles:p6(a)}):null,f?h.createElement(o6,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function x6(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const y6=GF(YS,v6);var Dc=h.forwardRef(function(e,t){return h.createElement(kh,Nn({},e,{ref:t,sideCar:y6}))});Dc.classNames=kh.classNames;var w6=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ro=new WeakMap,Pd=new WeakMap,Rd={},dm=0,ZS=function(e){return e&&(e.host||ZS(e.parentNode))},b6=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=ZS(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},j6=function(e,t,r,n){var a=b6(t,Array.isArray(e)?e:[e]);Rd[r]||(Rd[r]=new WeakMap);var o=Rd[r],i=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))u(p);else try{var f=p.getAttribute(n),y=f!==null&&f!=="false",g=(Ro.get(p)||0)+1,x=(o.get(p)||0)+1;Ro.set(p,g),o.set(p,x),i.push(p),g===1&&y&&Pd.set(p,!0),x===1&&p.setAttribute(r,"true"),y||p.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return u(t),l.clear(),dm++,function(){i.forEach(function(m){var p=Ro.get(m)-1,f=o.get(m)-1;Ro.set(m,p),o.set(m,f),p||(Pd.has(m)||m.removeAttribute(n),Pd.delete(m)),f||m.removeAttribute(r)}),dm--,dm||(Ro=new WeakMap,Ro=new WeakMap,Pd=new WeakMap,Rd={})}},Th=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=w6(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),j6(n,a,r,"aria-hidden")):function(){return null}};function N6(e){const t=_6(e),r=h.forwardRef((n,a)=>{const{children:o,...i}=n,l=h.Children.toArray(o),c=l.find(C6);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return s.jsx(t,{...i,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function _6(e){const t=h.forwardRef((r,n)=>{const{children:a,...o}=r;if(h.isValidElement(a)){const i=k6(a),l=E6(o,a.props);return a.type!==h.Fragment&&(l.ref=n?Ir(n,i):i),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var S6=Symbol("radix.slottable");function C6(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===S6}function E6(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function k6(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Ph="Dialog",[eC,tC]=Fr(Ph),[T6,es]=eC(Ph),rC=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=h.useRef(null),c=h.useRef(null),[d,u]=Kn({prop:n,defaultProp:a??!1,onChange:o,caller:Ph});return s.jsx(T6,{scope:t,triggerRef:l,contentRef:c,contentId:hr(),titleId:hr(),descriptionId:hr(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(m=>!m),[u]),modal:i,children:r})};rC.displayName=Ph;var nC="DialogTrigger",sC=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=es(nC,r),o=We(t,a.triggerRef);return s.jsx(ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tx(a.open),...n,ref:o,onClick:ae(e.onClick,a.onOpenToggle)})});sC.displayName=nC;var Zv="DialogPortal",[P6,aC]=eC(Zv,{forceMount:void 0}),oC=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,o=es(Zv,t);return s.jsx(P6,{scope:t,forceMount:r,children:h.Children.map(n,i=>s.jsx(Jr,{present:r||o.open,children:s.jsx(zi,{asChild:!0,container:a,children:i})}))})};oC.displayName=Zv;var Fu="DialogOverlay",iC=h.forwardRef((e,t)=>{const r=aC(Fu,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=es(Fu,e.__scopeDialog);return o.modal?s.jsx(Jr,{present:n||o.open,children:s.jsx(O6,{...a,ref:t})}):null});iC.displayName=Fu;var R6=N6("DialogOverlay.RemoveScroll"),O6=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=es(Fu,r);return s.jsx(Dc,{as:R6,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(ve.div,{"data-state":tx(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),uo="DialogContent",lC=h.forwardRef((e,t)=>{const r=aC(uo,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=es(uo,e.__scopeDialog);return s.jsx(Jr,{present:n||o.open,children:o.modal?s.jsx(D6,{...a,ref:t}):s.jsx(A6,{...a,ref:t})})});lC.displayName=uo;var D6=h.forwardRef((e,t)=>{const r=es(uo,e.__scopeDialog),n=h.useRef(null),a=We(t,r.contentRef,n);return h.useEffect(()=>{const o=n.current;if(o)return Th(o)},[]),s.jsx(cC,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ae(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:ae(e.onFocusOutside,o=>o.preventDefault())})}),A6=h.forwardRef((e,t)=>{const r=es(uo,e.__scopeDialog),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(cC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),cC=h.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=es(uo,r),c=h.useRef(null),d=We(t,c);return Eh(),s.jsxs(s.Fragment,{children:[s.jsx(Oc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(xo,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tx(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(M6,{titleId:l.titleId}),s.jsx(L6,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ex="DialogTitle",dC=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=es(ex,r);return s.jsx(ve.h2,{id:a.titleId,...n,ref:t})});dC.displayName=ex;var uC="DialogDescription",hC=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=es(uC,r);return s.jsx(ve.p,{id:a.descriptionId,...n,ref:t})});hC.displayName=uC;var fC="DialogClose",mC=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=es(fC,r);return s.jsx(ve.button,{type:"button",...n,ref:t,onClick:ae(e.onClick,()=>a.onOpenChange(!1))})});mC.displayName=fC;function tx(e){return e?"open":"closed"}var pC="DialogTitleWarning",[I6,gC]=h4(pC,{contentName:uo,titleName:ex,docsSlug:"dialog"}),M6=({titleId:e})=>{const t=gC(pC),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},$6="DialogDescriptionWarning",L6=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${gC($6).contentName}}.`;return h.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Rh=rC,vC=sC,Oh=oC,Xi=iC,Zi=lC,Ac=dC,Ic=hC,Dh=mC;const fr=Rh,rx=vC,F6=Oh,xC=h.forwardRef(({className:e,...t},r)=>s.jsx(Xi,{ref:r,className:re("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));xC.displayName=Xi.displayName;const rr=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(F6,{children:[s.jsx(xC,{}),s.jsxs(Zi,{ref:n,className:re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-2 border-umma-200 bg-white p-6 shadow-xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-2xl",e),...r,children:[t,s.jsxs(Dh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-umma-400 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-umma-100 data-[state=open]:text-umma-600",children:[s.jsx(Ri,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rr.displayName=Zi.displayName;const nr=({className:e,...t})=>s.jsx("div",{className:re("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});nr.displayName="DialogHeader";const sr=h.forwardRef(({className:e,...t},r)=>s.jsx(Ac,{ref:r,className:re("text-lg font-semibold leading-none tracking-tight text-umma-800",e),...t}));sr.displayName=Ac.displayName;const ar=h.forwardRef(({className:e,...t},r)=>s.jsx(Ic,{ref:r,className:re("text-sm text-umma-600",e),...t}));ar.displayName=Ic.displayName;const ue=h.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:re("flex h-11 w-full rounded-2xl border border-umma-200 bg-white px-4 py-3 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-umma-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-umma-400 focus-visible:ring-offset-2 focus-visible:border-umma-400 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm transition-all duration-200 hover:border-umma-500 shadow-sm focus:shadow-md",e),ref:n,...r}));ue.displayName="Input";function nx(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ah="Switch",[U6]=Fr(Ah),[B6,z6]=U6(Ah),yC=h.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[p,f]=h.useState(null),y=We(t,b=>f(b)),g=h.useRef(!1),x=p?u||!!p.closest("form"):!0,[w,v]=Kn({prop:a,defaultProp:o??!1,onChange:d,caller:Ah});return s.jsxs(B6,{scope:r,checked:w,disabled:l,children:[s.jsx(ve.button,{type:"button",role:"switch","aria-checked":w,"aria-required":i,"data-state":NC(w),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:y,onClick:ae(e.onClick,b=>{v(j=>!j),x&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),x&&s.jsx(jC,{control:p,bubbles:!g.current,name:n,value:c,checked:w,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});yC.displayName=Ah;var wC="SwitchThumb",bC=h.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=z6(wC,r);return s.jsx(ve.span,{"data-state":NC(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});bC.displayName=wC;var V6="SwitchBubbleInput",jC=h.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},o)=>{const i=h.useRef(null),l=We(i,o),c=nx(r),d=Ev(t);return h.useEffect(()=>{const u=i.current;if(!u)return;const m=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&f){const y=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(y)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});jC.displayName=V6;function NC(e){return e?"checked":"unchecked"}var _C=yC,W6=bC;const hs=h.forwardRef(({className:e,...t},r)=>s.jsx(_C,{className:re("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(W6,{className:re("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));hs.displayName=_C.displayName;const dn=()=>{var p,f,y;const e=Xr(),t=Yi(),{toast:r}=Qt(),[n,a]=h.useState(!1),[o,i]=h.useState(null),[l,c]=h.useState(!1);h.useEffect(()=>{(async()=>{const{data:{session:w}}=await K.auth.getSession();i((w==null?void 0:w.user)??null)})();const{data:{subscription:x}}=K.auth.onAuthStateChange((w,v)=>{i((v==null?void 0:v.user)??null),w==="SIGNED_OUT"&&e("/login")});return()=>x.unsubscribe()},[e]);const d=async()=>{c(!0);try{const{error:g}=await K.auth.signOut();g?r({title:"Sign Out Error",description:g.message,variant:"destructive"}):(localStorage.removeItem("user"),r({title:"Signed Out",description:"You've been successfully signed out."}),e("/login"))}catch(g){console.error("Logout error:",g),r({title:"Error",description:"An unexpected error occurred during sign out.",variant:"destructive"})}finally{c(!1)}},u=[{label:"Events",path:"/dashboard",icon:Mt},{label:"Templates",path:"/templates",icon:En},{label:"Contacts",path:"/contacts",icon:yv},{label:"Settings",path:"/settings",icon:_u}],m=((p=o==null?void 0:o.user_metadata)==null?void 0:p.full_name)||((f=o==null?void 0:o.user_metadata)==null?void 0:f.name)||((y=o==null?void 0:o.email)==null?void 0:y.split("@")[0])||"Organizer";return s.jsx("header",{className:"bg-navy-800/80 backdrop-blur-xl border-b border-gold-400/15 shadow-lg shadow-black/20",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"relative flex justify-between md:justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center space-x-3 flex-1 md:flex-none justify-center md:justify-start",children:s.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer",children:[s.jsx("div",{className:"crescent-moon mr-1"}),s.jsx("span",{className:"text-lg font-semibold text-gold-300 tracking-wide",children:"UMMA Stewards"})]})}),s.jsx("nav",{className:"hidden md:flex items-center space-x-2 absolute left-1/2 transform -translate-x-1/2",children:u.map(g=>{const x=g.icon,w=t.pathname===g.path;return s.jsxs("button",{onClick:()=>e(g.path),className:`flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-200 ${w?"bg-gold-400/15 text-gold-300 shadow-sm golden-border":"text-white/60 hover:text-gold-300 hover:bg-white/5"}`,children:[s.jsx(x,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium text-sm",children:g.label})]},g.path)})}),s.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm text-gold-200/70 font-medium",children:m}),s.jsxs(H,{variant:"outline",size:"sm",onClick:d,disabled:l,className:"border-white/15 text-white/70 hover:bg-white/5 hover:text-gold-300 hover:border-gold-400/30 bg-transparent",children:[s.jsx(bu,{className:"w-4 h-4 mr-2"}),l?"Signing Out...":"Sign Out"]})]}),s.jsx("button",{className:"absolute right-4 md:relative md:right-auto md:hidden text-gold-300",onClick:()=>a(!n),children:n?s.jsx(Ri,{className:"w-6 h-6"}):s.jsx(jO,{className:"w-6 h-6"})})]}),n&&s.jsx("div",{className:"md:hidden border-t border-gold-400/10 py-4 bg-navy-800/95 backdrop-blur-xl",children:s.jsxs("nav",{className:"space-y-1",children:[u.map(g=>{const x=g.icon,w=t.pathname===g.path;return s.jsxs("button",{onClick:()=>{e(g.path),a(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ${w?"bg-gold-400/15 text-gold-300":"text-white/60 hover:text-gold-300 hover:bg-white/5"}`,children:[s.jsx(x,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:g.label})]},g.path)}),s.jsxs("div",{className:"border-t border-gold-400/10 pt-4 mt-4",children:[s.jsx("p",{className:"text-sm text-gold-200/70 px-4 pb-2 font-medium",children:m}),s.jsxs("button",{onClick:d,disabled:l,className:"w-full flex items-center space-x-3 px-4 py-3 text-white/60 hover:text-red-400 hover:bg-red-500/10 rounded-xl transition-all duration-200 disabled:opacity-50",children:[s.jsx(bu,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:l?"Signing Out...":"Sign Out"})]})]})]})})]})})},um=768;function Mc(){const[e,t]=h.useState(void 0);return h.useEffect(()=>{const r=window.matchMedia(`(max-width: ${um-1}px)`),n=()=>{t(window.innerWidth<um)};return r.addEventListener("change",n),t(window.innerWidth<um),()=>r.removeEventListener("change",n)},[]),!!e}const Ih=()=>{const[e,t]=h.useState(!1),[r,n]=h.useState(!0),[a,o]=h.useState(null);return h.useEffect(()=>{(async()=>{var d;try{const{data:{user:u},error:m}=await K.auth.getUser();if(m||!u){t(!1),o(null),n(!1);return}o(u);const{data:p,error:f}=await K.from("profiles").select("is_admin").eq("id",u.id).single();if(f||!p){const y=((d=u.user_metadata)==null?void 0:d.is_admin)||!1;t(y)}else t(p.is_admin||!1);n(!1)}catch(u){console.error("Error checking admin status:",u),t(!1),n(!1)}})();const{data:{subscription:c}}=K.auth.onAuthStateChange((d,u)=>{var m;if(d==="SIGNED_OUT")t(!1),o(null);else if(u!=null&&u.user){o(u.user);const p=((m=u.user.user_metadata)==null?void 0:m.is_admin)||!1;t(p)}});return()=>c.unsubscribe()},[]),{isAdmin:e,loading:r,user:a,refreshAdminStatus:async()=>{var l;if(a)try{const{data:{user:c},error:d}=await K.auth.getUser();if(d||!c){t(!1);return}o(c);const{data:u,error:m}=await K.from("profiles").select("is_admin").eq("id",c.id).single();if(m||!u){const p=((l=c.user_metadata)==null?void 0:l.is_admin)||!1;t(p)}else t(u.is_admin||!1)}catch(c){console.error("Error refreshing admin status:",c)}}}},sx=()=>{const{toast:e}=Qt(),{isAdmin:t}=Ih(),[r,n]=h.useState(!1),[a,o]=h.useState(!1),[i,l]=h.useState(!1);return console.log("useEventDeletion: isAdmin status:",t),{isDeleting:r,isRestoring:a,isDeletingAll:i,softDeleteEvent:async(f,y)=>{n(!0);try{const{data:{user:g}}=await K.auth.getUser();if(!g)return e({title:"Error",description:"You must be logged in to delete events.",variant:"destructive"}),!1;console.log("Soft delete attempt:",{eventId:f,userId:g.id,isAdmin:t});const{data:x,error:w}=await K.rpc("soft_delete_event",{event_id:f,user_id:g.id});return w?(console.error("Error soft deleting event:",w),e({title:"Error",description:"Failed to delete event. Please try again.",variant:"destructive"}),!1):x?(e({title:"Event Deleted",description:`"${y}" has been moved to recently deleted. You can recover it within 30 days.`}),!0):(e({title:"Access Denied",description:"You don't have permission to delete this event.",variant:"destructive"}),!1)}catch(g){return console.error("Error:",g),e({title:"Error",description:"An unexpected error occurred while deleting the event.",variant:"destructive"}),!1}finally{n(!1)}},restoreEvent:async(f,y)=>{o(!0);try{const{data:{user:g}}=await K.auth.getUser();if(!g)return e({title:"Error",description:"You must be logged in to restore events.",variant:"destructive"}),!1;const{data:x,error:w}=await K.rpc("restore_event",{event_id:f,user_id:g.id});return w?(console.error("Error restoring event:",w),e({title:"Error",description:"Failed to restore event. Please try again.",variant:"destructive"}),!1):x?(e({title:"Event Restored",description:`"${y}" has been successfully restored.`}),!0):(e({title:"Access Denied",description:"You don't have permission to restore this event.",variant:"destructive"}),!1)}catch(g){return console.error("Error:",g),e({title:"Error",description:"An unexpected error occurred while restoring the event.",variant:"destructive"}),!1}finally{o(!1)}},permanentlyDeleteEvent:async(f,y)=>{try{const{data:{user:g}}=await K.auth.getUser();if(!g)return e({title:"Error",description:"You must be logged in to delete events.",variant:"destructive"}),!1;const{data:x,error:w}=await K.from("events").select("created_by, deleted_at").eq("id",f).single();if(w||!x)return e({title:"Error",description:"Event not found.",variant:"destructive"}),!1;if(x.created_by!==g.id&&!t)return e({title:"Access Denied",description:"You don't have permission to delete this event.",variant:"destructive"}),!1;const{error:v}=await K.from("events").delete().eq("id",f);return v?(console.error("Error permanently deleting event:",v),e({title:"Error",description:"Failed to permanently delete event. Please try again.",variant:"destructive"}),!1):(e({title:"Event Permanently Deleted",description:`"${y}" has been permanently removed and cannot be recovered.`}),!0)}catch(g){return console.error("Error:",g),e({title:"Error",description:"An unexpected error occurred while deleting the event.",variant:"destructive"}),!1}},permanentlyDeleteAllEvents:async()=>{l(!0);try{const{data:{user:f}}=await K.auth.getUser();if(!f)return e({title:"Error",description:"You must be logged in to delete items.",variant:"destructive"}),!1;const y=K.from("events").select("id, title").not("deleted_at","is",null);t||y.eq("created_by",f.id);const{data:g,error:x}=await y;if(x)return console.error("Error fetching soft deleted events:",x),e({title:"Error",description:"Failed to fetch deleted events. Please try again.",variant:"destructive"}),!1;const w=K.from("event_templates").select("id, name").not("deleted_at","is",null);t||w.eq("user_id",f.id);const{data:v,error:b}=await w;if(b)return console.error("Error fetching soft deleted templates:",b),e({title:"Error",description:"Failed to fetch deleted templates. Please try again.",variant:"destructive"}),!1;const j=(g==null?void 0:g.length)||0,k=(v==null?void 0:v.length)||0;if(j===0&&k===0)return e({title:"No Items to Delete",description:"There are no deleted items to permanently remove."}),!1;if(j>0){const N=K.from("events").delete().not("deleted_at","is",null);t||N.eq("created_by",f.id);const{error:E}=await N;if(E)return console.error("Error permanently deleting all events:",E),e({title:"Error",description:"Failed to permanently delete events. Please try again.",variant:"destructive"}),!1}if(k>0){const N=K.from("event_templates").delete().not("deleted_at","is",null);t||N.eq("user_id",f.id);const{error:E}=await N;if(E)return console.error("Error permanently deleting all templates:",E),e({title:"Error",description:"Failed to permanently delete templates. Please try again.",variant:"destructive"}),!1}let S="";return j>0&&k>0?S=`${j} event${j===1?"":"s"} and ${k} template${k===1?"":"s"} have been permanently removed and cannot be recovered.`:j>0?S=`${j} event${j===1?"":"s"} ha${j===1?"s":"ve"} been permanently removed and cannot be recovered.`:k>0&&(S=`${k} template${k===1?"":"s"} ha${k===1?"s":"ve"} been permanently removed and cannot be recovered.`),e({title:"All Items Permanently Deleted",description:S}),!0}catch(f){return console.error("Error:",f),e({title:"Error",description:"An unexpected error occurred while deleting items.",variant:"destructive"}),!1}finally{l(!1)}},getSoftDeletedEvents:async()=>{try{const{data:{user:f}}=await K.auth.getUser();if(!f)return[];const y=K.from("events").select(`
          *,
          volunteer_roles(*),
          volunteers(*)
        `).not("deleted_at","is",null).order("deleted_at",{ascending:!1});t||y.eq("created_by",f.id);const{data:g,error:x}=await y;if(x)return console.error("Error loading soft deleted events:",x),[];const w=(g||[]).filter(v=>v.deleted_at);return console.log("Recently Deleted - Loaded events:",(g==null?void 0:g.length)||0,"Filtered events:",w.length),w}catch(f){return console.error("Error:",f),[]}}}},H6=()=>{var G;const e=Xr(),{toast:t}=Qt(),r=Mc(),{softDeleteEvent:n,isDeleting:a}=sx(),{isAdmin:o}=Ih(),[i,l]=h.useState([]),[c,d]=h.useState({}),u=_=>o||_.created_by===(f==null?void 0:f.id),[m,p]=h.useState(!0),[f,y]=h.useState(null),[g,x]=h.useState({}),[w,v]=h.useState("all"),[b,j]=h.useState(""),[k,S]=h.useState({isOpen:!1,event:null}),N=(_,C)=>{const L=_.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),W=C.slice(-4);return`${L}-${W}`},E=(_,C)=>{const L=_.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),W=C.slice(-4);return`${L}-${W}`};h.useEffect(()=>{(async()=>{try{console.log(" Checking user session...");const{data:{user:C},error:L}=await K.auth.getUser();if(L&&(console.error(" Error getting user:",L),L.status===406)){console.error(" 406 error on auth check - clearing session"),await K.auth.signOut(),e("/login");return}if(!C){console.log("No user found, redirecting to login"),e("/login");return}console.log(" User authenticated:",C.id),y(C),await R()}catch(C){console.error(" Error in checkUser:",C),e("/login")}})()},[e]);const T=async _=>{try{const C=new Date,L=new Date(C.getTime()+5*60*60*1e3),W=_.filter(Y=>{if(Y.status!=="published"||Y.is_public===!0)return!1;const J=new Date(Y.start_datetime);return J<=L&&J>C});if(W.length===0)return;console.log(` Auto-making ${W.length} events public (5 hours before start)`);for(const Y of W){const{error:J}=await K.from("events").update({is_public:!0,updated_at:new Date().toISOString()}).eq("id",Y.id);J?console.error(` Failed to make event ${Y.title} public:`,J):(console.log(` Made event "${Y.title}" public (starts in ${Math.round((new Date(Y.start_datetime).getTime()-C.getTime())/(1e3*60*60))} hours)`),Y.is_public=!0)}W.length>0&&t({title:"Events Auto-Made Public",description:`${W.length} event(s) were automatically made public as they start within 5 hours.`})}catch(C){console.error(" Error in autoMakeEventsPublic:",C)}},R=async()=>{try{const{data:{user:_}}=await K.auth.getUser();if(!_){console.log("No user found, redirecting to login"),e("/login");return}console.log(" Loading events for user:",_.id),console.log(" Testing simple events query...");const{data:C,error:L}=await K.from("events").select("id, title").is("deleted_at",null).limit(5);if(L){console.error(" Simple query failed:",L),L.status===406&&(console.error(" 406 Not Acceptable error detected"),console.error("Error details:",{message:L.message,code:L.code,details:L.details,hint:L.hint,status:L.status,statusText:L.statusText})),t({title:"Connection Error",description:`Failed to load events: ${L.message}`,variant:"destructive"});return}console.log(" Simple query successful, found",(C==null?void 0:C.length)||0,"events"),console.log(" Testing complex events query with nested selects...");const{data:W,error:Y}=await K.from("events").select(`
          *,
          volunteer_roles(*),
          volunteers(*)
        `).is("deleted_at",null).order("created_at",{ascending:!1});if(Y){if(console.error(" Complex query failed:",Y),Y.status===406){console.error(" 406 Not Acceptable error on complex query"),console.error("Error details:",{message:Y.message,code:Y.code,details:Y.details,hint:Y.hint,status:Y.status,statusText:Y.statusText}),console.log(" Falling back to simple query...");const{data:Q,error:he}=await K.from("events").select("*").is("deleted_at",null).order("created_at",{ascending:!1});if(he){console.error(" Fallback query also failed:",he),t({title:"Error",description:"Failed to load events. Please refresh the page.",variant:"destructive"});return}console.log(" Fallback query successful"),l(Q),await O(Q);return}t({title:"Error",description:"Failed to load events.",variant:"destructive"});return}const J=(W||[]).filter(Q=>!Q.deleted_at);console.log(" Complex query successful - Loaded events:",(W==null?void 0:W.length)||0,"Filtered events:",J.length),await T(J),l(J),await O(J)}catch(_){console.error(" Unexpected error in loadEvents:",_),t({title:"Unexpected Error",description:"An unexpected error occurred while loading events.",variant:"destructive"})}finally{p(!1)}},O=async _=>{try{const C=Array.from(new Set((_||[]).map(J=>J.created_by).filter(J=>!!J)));if(C.length===0)return;const{data:L,error:W}=await K.from("profiles").select("id, full_name, email").in("id",C);if(W){console.error("Error fetching creator profiles:",W);return}const Y={};(L||[]).forEach(J=>{Y[J.id]=J.full_name||J.email||"Unknown"}),d(Y)}catch(C){console.error("Unexpected error fetching creator names:",C)}},F=_=>{var W,Y;const C=((W=_.volunteer_roles)==null?void 0:W.reduce((J,Q)=>J+(Q.slots_brother||0)+(Q.slots_sister||0)+(Q.slots_flexible||0),0))||0,L=((Y=_.volunteers)==null?void 0:Y.length)||0;return{totalSlots:C,filledSlots:L,openSlots:C-L}},M=_=>{const C=new Date(_.start_datetime),L=new Date;return L.setHours(0,0,0,0),C<L},I=_=>M(_)?"past":_.status,B=()=>{let _=i;switch(w){case"published":_=_.filter(C=>I(C)==="published");break;case"draft":_=_.filter(C=>I(C)==="draft");break;case"past":_=_.filter(C=>M(C));break}return b.trim()&&(_=_.filter(C=>C.title.toLowerCase().includes(b.toLowerCase())||C.location.toLowerCase().includes(b.toLowerCase()))),_},$=_=>{const C=E(_.title,_.id),L=`${window.location.origin}/${C}`;navigator.clipboard.writeText(L),t({title:"Link Copied",description:"Volunteer sign-up link copied to clipboard."})},D=_=>{const L=`/${E(_.title,_.id)}`;window.open(L,"_blank")},P=async _=>{await n(_.id,_.title)&&(l(L=>L.filter(W=>W.id!==_.id)),S({isOpen:!1,event:null}))},A=()=>{v("all"),j("")};return m?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(dn,{}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin w-12 h-12 border-3 border-gold-400 border-t-transparent rounded-full mx-auto mb-6"}),s.jsx("p",{className:"text-white/60 font-medium text-lg",children:"Loading your events..."})]})})})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(dn,{}),s.jsxs("main",{className:"container mx-auto px-4 py-6 md:py-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground tracking-tight",children:"Event Dashboard"}),o&&s.jsxs(ye,{variant:"secondary",className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-0 p-1.5 md:p-2",children:[s.jsx(jp,{className:"w-3 h-3 md:w-4 md:h-4 md:mr-1"}),s.jsx("span",{className:"hidden md:inline",children:"Admin Mode"})]})]}),s.jsx("p",{className:"text-white/50 text-lg leading-relaxed",children:"Organize events and manage volunteer coordination"})]}),s.jsxs("div",{className:"w-full sm:w-auto flex flex-col sm:flex-row gap-2 sm:gap-3",children:[s.jsxs(H,{onClick:()=>e("/events/create"),className:"w-full h-10 px-4 sm:px-6 bg-gold-400 hover:bg-gold-300 text-navy-900 shadow-sm hover:shadow-md transition-all duration-200",children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Create Event"]}),s.jsxs(H,{onClick:()=>e("/recently-deleted"),variant:"ghost",className:"hidden sm:flex h-10 px-4 text-red-400 hover:text-red-300 hover:bg-red-500/10 border border-red-500/30",children:[s.jsx(br,{className:"w-4 h-4 mr-2"}),"Recently Deleted"]})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8 max-w-5xl mx-auto",children:[s.jsx(Pe,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:-translate-y-0.5 hover:border-gold-400/20",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[s.jsx("div",{className:"p-2 bg-gold-400/15 rounded-lg",children:s.jsx(Mt,{className:"w-5 h-5 text-gold-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:i.length}),s.jsx("p",{className:"text-sm text-white/50",children:"Total Events"})]})]})})}),s.jsx(Pe,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:-translate-y-0.5 hover:border-gold-400/20",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[s.jsx("div",{className:"p-2 bg-emerald-500/15 rounded-lg",children:s.jsx(xv,{className:"w-5 h-5 text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:i.filter(_=>I(_)==="published").length}),s.jsx("p",{className:"text-sm text-white/50",children:"Active Events"})]})]})})}),s.jsx(Pe,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:-translate-y-0.5 hover:border-gold-400/20",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[s.jsx("div",{className:"p-2 bg-amber-500/15 rounded-lg",children:s.jsx(En,{className:"w-5 h-5 text-amber-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-amber-400",children:i.filter(_=>I(_)==="draft").length}),s.jsx("p",{className:"text-sm text-white/50",children:"Draft Events"})]})]})})}),s.jsx(Pe,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:-translate-y-0.5 hover:border-gold-400/20",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[s.jsx("div",{className:"p-2 bg-purple-500/15 rounded-lg",children:s.jsx(y_,{className:"w-5 h-5 text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-400",children:i.reduce((_,C)=>{if(I(C)==="published"){const L=F(C);return _+L.openSlots}return _},0)}),s.jsx("p",{className:"text-sm text-white/50",children:"Open Volunteer Opportunities"})]})]})})}),s.jsx(Pe,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:-translate-y-0.5 hover:border-gold-400/20 md:col-span-1",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[s.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:s.jsx(Mt,{className:"w-5 h-5 text-white/50"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-white/70",children:i.filter(_=>M(_)).length}),s.jsx("p",{className:"text-sm text-white/50",children:"Past Events"})]})]})})}),s.jsx(Pe,{className:"md:hidden border-0 bg-gradient-to-br from-red-400 to-red-500 text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:-translate-y-0.5 cursor-pointer ring-2 ring-red-200",onClick:()=>e("/recently-deleted"),children:s.jsx(Ae,{className:"p-4 h-full min-h-[120px] flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-center w-full",children:[s.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm flex items-center justify-center",children:s.jsx(br,{className:"w-5 h-5 text-white"})}),s.jsx("p",{className:"text-base font-semibold text-white",children:"Recently Deleted"})]})})})]}),s.jsxs(Pe,{className:"border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg",children:[s.jsx($t,{className:"border-b border-white/10 bg-transparent",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx(Lt,{className:"text-xl font-semibold text-foreground",children:"Your Events"}),s.jsx(Wr,{className:"text-white/50",children:"Manage your events and track volunteer participation"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/30"}),s.jsx(ue,{placeholder:"Search events...",value:b,onChange:_=>j(_.target.value),className:"pl-10 h-9 w-full sm:w-64 border-white/15 bg-white/5 text-foreground focus:border-gold-400 focus:ring-[#5c5b2f]/20"})]}),s.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:s.jsxs("div",{className:"flex gap-1 p-1 bg-white/10 rounded-lg w-full sm:w-fit",children:[s.jsxs(H,{variant:w==="all"?"default":"ghost",onClick:()=>v("all"),className:`h-7 px-2 sm:px-3 text-xs rounded-md transition-all whitespace-nowrap flex-1 sm:flex-none sm:w-auto font-medium ${w==="all"?"bg-gold-400 text-white shadow-md border border-gold-400/20":"text-white/50 hover:text-foreground hover:bg-white/10 bg-transparent"}`,children:["All (",i.length,")"]}),s.jsxs(H,{variant:w==="published"?"default":"ghost",onClick:()=>v("published"),className:`h-7 px-2 sm:px-3 text-xs rounded-md transition-all whitespace-nowrap flex-1 sm:flex-none sm:w-auto font-medium ${w==="published"?"bg-gold-400 text-white shadow-md border border-gold-400/20":"text-white/50 hover:text-foreground hover:bg-white/10 bg-transparent"}`,children:["Published (",i.filter(_=>I(_)==="published").length,")"]}),s.jsxs(H,{variant:w==="draft"?"default":"ghost",onClick:()=>v("draft"),className:`h-7 px-2 sm:px-3 text-xs rounded-md transition-all whitespace-nowrap flex-1 sm:flex-none sm:w-auto font-medium ${w==="draft"?"bg-gold-400 text-white shadow-md border border-gold-400/20":"text-white/50 hover:text-foreground hover:bg-white/10 bg-transparent"}`,children:["Drafts (",i.filter(_=>I(_)==="draft").length,")"]}),s.jsxs(H,{variant:w==="past"?"default":"ghost",onClick:()=>v("past"),className:`h-7 px-2 sm:px-3 text-xs rounded-md transition-all whitespace-nowrap flex-1 sm:flex-none sm:w-auto font-medium ${w==="past"?"bg-gold-400 text-white shadow-md border border-gold-400/20":"text-white/50 hover:text-foreground hover:bg-white/10 bg-transparent"}`,children:["Past (",i.filter(_=>M(_)).length,")"]})]})}),(w!=="all"||b)&&s.jsx(H,{variant:"ghost",onClick:A,className:"h-7 px-3 text-xs text-white/40 hover:text-white/70",children:"Clear filters"})]})]})}),s.jsx(Ae,{className:"p-0",children:B().length===0?s.jsxs("div",{className:"text-center py-16 px-8",children:[s.jsx("div",{className:"w-20 h-20 bg-white/10 rounded-2xl flex items-center justify-center mx-auto mb-6",children:s.jsx(Mt,{className:"w-10 h-10 text-white/30"})}),s.jsx("h3",{className:"text-xl font-semibold text-white/70 mb-3",children:i.length===0?"Start Organizing Events":"No Events Match Filters"}),s.jsx("p",{className:"text-white/40 mb-6 max-w-lg mx-auto",children:i.length===0?"Create your first event and start coordinating volunteers":"Try adjusting your search or filters to find what you're looking for."}),i.length===0&&s.jsxs(H,{onClick:()=>e("/events/create"),className:"bg-gold-400 hover:bg-gold-300 text-navy-900 px-6 py-3 shadow-sm hover:shadow-md transition-all duration-200",children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Create Your First Event"]})]}):s.jsx(s.Fragment,{children:r?s.jsx("div",{className:"p-4 space-y-3",children:B().map(_=>{const C=F(_);return s.jsxs("div",{className:`rounded-xl p-4 border shadow-sm ${M(_)?"border-white/15 bg-white/10":"bg-white/5 border-white/10"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"font-semibold text-foreground text-sm mb-1 flex items-center gap-2",children:[_.title,o&&_.created_by!==(f==null?void 0:f.id)&&s.jsx(ye,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:`By ${c[_.created_by]||"Other User"}`})]}),s.jsx("p",{className:"text-white/50 text-xs mb-1",children:_.location}),s.jsx("p",{className:"text-white/50 text-xs",children:new Date(_.start_datetime).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]}),s.jsx("div",{className:"flex flex-col gap-1",children:s.jsx(ye,{variant:"secondary",className:`text-[10px] px-1.5 py-0.5 ${I(_)==="published"?"bg-emerald-500/15 text-emerald-300 border-emerald-500/25":I(_)==="draft"?"bg-amber-500/15 text-amber-300 border-amber-500/25":"bg-gray-200 text-gray-800 border-white/15"}`,children:I(_)==="published"?"Live":I(_)==="draft"?"Draft":"Past"})})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs text-white/50",children:"Volunteers"}),s.jsxs("span",{className:"text-sm font-semibold text-foreground",children:[C.filledSlots," / ",C.totalSlots]})]}),s.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:s.jsx("div",{className:"bg-gold-400 h-2 rounded-full transition-all duration-300",style:{width:`${C.totalSlots>0?C.filledSlots/C.totalSlots*100:0}%`}})}),C.openSlots>0&&s.jsxs("div",{className:"text-white/50 text-xs mt-1",children:[C.openSlots," open spots"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(H,{size:"sm",onClick:()=>e(`/${N(_.title,_.id)}/checkin`),className:"flex-1 text-xs bg-gold-400 hover:bg-gold-300 text-navy-900 border-gold-400",children:[s.jsx(Np,{className:"w-3 h-3 mr-1"}),"Check In"]}),s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>e(`/events/${_.id}/edit`),className:"flex-1 text-xs border-white/15 text-white/70 hover:bg-white/5",children:[s.jsx(Su,{className:"w-3 h-3 mr-1 text-amber-400"}),"Edit"]})]}),I(_)==="published"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(H,{size:"sm",variant:"ghost",onClick:()=>$(_),className:"flex-1 text-xs text-white/50 hover:text-foreground hover:bg-white/10",children:[s.jsx(ri,{className:"w-3 h-3 mr-1"}),"Copy Link"]}),s.jsxs(H,{size:"sm",variant:"ghost",onClick:()=>D(_),className:"flex-1 text-xs text-white/50 hover:text-foreground hover:bg-white/10",children:[s.jsx(cy,{className:"w-3 h-3 mr-1"}),"Open Link"]})]}),I(_)==="past"&&s.jsx("div",{className:"flex space-x-2",children:s.jsxs(H,{size:"sm",variant:"ghost",onClick:()=>$(_),className:"flex-1 text-xs text-white/50 hover:text-foreground hover:bg-white/10",children:[s.jsx(ri,{className:"w-3 h-3 mr-1"}),"Copy Link"]})}),s.jsxs("div",{className:`flex items-center ${M(_)?"justify-end":"justify-between"} space-x-2`,children:[!M(_)&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(hs,{checked:_.is_public??!0,onCheckedChange:async L=>{try{const{error:W}=await K.from("events").update({is_public:L}).eq("id",_.id);if(W){console.error("Error updating visibility:",W),t({title:"Error",description:"Failed to update event visibility",variant:"destructive"});return}l(Y=>Y.map(J=>J.id===_.id?{...J,is_public:L}:J)),t({title:"Visibility Updated",description:`Event is now ${L?"public":"private"}`})}catch(W){console.error("Error:",W),t({title:"Error",description:"Failed to update event visibility",variant:"destructive"})}},disabled:!u}),s.jsx("span",{className:"text-xs text-white/50",children:_.is_public?"Public":"Private"})]}),s.jsxs(H,{size:"sm",variant:"ghost",onClick:()=>S({isOpen:!0,event:_}),className:"px-4 text-xs text-red-400 hover:text-red-300 hover:bg-red-500/10",children:[s.jsx(br,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]},_.id)})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 bg-white/3",children:[s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Event"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Date & Time"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Volunteers"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Status"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Actions"})]})}),s.jsx("tbody",{children:B().map((_,C)=>{const L=F(_);return s.jsxs("tr",{className:`border-b border-white/5 hover:bg-white/5 transition-colors duration-150 ${M(_)?"bg-white/10":""}`,children:[s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-foreground text-sm mb-1 flex items-center gap-2",children:[_.title,o&&_.created_by!==(f==null?void 0:f.id)&&s.jsx(ye,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:`By ${c[_.created_by]||"Other User"}`})]}),s.jsx("div",{className:"text-white/50 text-xs",children:_.location})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-foreground font-medium text-sm",children:new Date(_.start_datetime).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),s.jsx("div",{className:"text-white/50 text-xs",children:gc(_.start_datetime)})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"text-sm font-semibold text-foreground",children:[L.filledSlots," / ",L.totalSlots]})}),s.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:s.jsx("div",{className:"bg-gold-400 h-2 rounded-full transition-all duration-300",style:{width:`${L.totalSlots>0?L.filledSlots/L.totalSlots*100:0}%`}})}),L.openSlots>0&&s.jsxs("div",{className:"text-white/50 text-xs",children:[L.openSlots," open spots"]})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsx(ye,{variant:"secondary",className:`text-[10px] px-1.5 py-0.5 ${I(_)==="published"?"bg-emerald-500/15 text-emerald-300 border-emerald-500/25":I(_)==="draft"?"bg-amber-500/15 text-amber-300 border-amber-500/25":"bg-gray-200 text-gray-800 border-white/15"}`,children:I(_)==="published"?"Live":I(_)==="draft"?"Draft":"Past"})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsxs(H,{size:"sm",onClick:()=>e(`/${N(_.title,_.id)}/checkin`),title:"Check In",className:"h-8 px-3 bg-gold-400 hover:bg-gold-300 text-navy-900 border-gold-400",children:[s.jsx(Np,{className:"w-4 h-4 mr-1"}),"Check In"]}),s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>e(`/events/${_.id}/edit`),title:"Edit Event",className:"h-8 px-3 border-white/15 text-white/70 hover:bg-white/5",children:[s.jsx(Su,{className:"w-4 h-4 mr-1 text-amber-400"}),"Edit"]})]}),I(_)==="published"&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>$(_),title:"Copy Signup Link",className:"h-8 px-2 text-white/50 hover:text-foreground hover:bg-white/10",children:s.jsx(ri,{className:"w-4 h-4"})}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>D(_),title:"Open Signup Link",className:"h-8 px-2 text-white/50 hover:text-foreground hover:bg-white/10",children:s.jsx(cy,{className:"w-4 h-4"})})]}),I(_)==="past"&&s.jsx("div",{className:"flex items-center space-x-1",children:s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>$(_),title:"Copy Signup Link",className:"h-8 px-2 text-white/50 hover:text-foreground hover:bg-white/10",children:s.jsx(ri,{className:"w-4 h-4"})})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[!M(_)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(hs,{checked:_.is_public!==!1,onCheckedChange:async W=>{try{const{error:Y}=await K.from("events").update({is_public:W}).eq("id",_.id);if(Y){console.error("Error updating visibility:",Y),t({title:"Error",description:"Failed to update event visibility",variant:"destructive"});return}l(J=>J.map(Q=>Q.id===_.id?{...Q,is_public:W}:Q)),t({title:"Visibility Updated",description:`Event is now ${W?"public":"private"}`})}catch(Y){console.error("Error:",Y),t({title:"Error",description:"Failed to update event visibility",variant:"destructive"})}},disabled:!u(_)}),s.jsx("span",{className:"text-xs text-white/50 whitespace-nowrap",children:_.is_public!==!1?"Public":"Private"})]})]}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>S({isOpen:!0,event:_}),title:"Delete Event",className:"h-8 px-2 text-red-400 hover:text-red-300 hover:bg-red-500/10",children:s.jsx(br,{className:"w-4 h-4"})})]})]})})]},_.id)})})]})})})})]})]}),s.jsx(fr,{open:k.isOpen,onOpenChange:_=>S({isOpen:_,event:k.event}),children:s.jsxs(rr,{className:"max-w-md",children:[s.jsxs(nr,{children:[s.jsx(sr,{className:"text-red-800",children:"Delete Event?"}),s.jsxs(ar,{className:"text-white/50",children:['This will move "',(G=k.event)==null?void 0:G.title,'" to recently deleted. You can recover it within 30 days, or it will be permanently removed.']}),k.event&&s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"text-sm text-white/50",children:"Event status: "}),s.jsx(ye,{variant:"secondary",className:k.event.status==="published"?"bg-emerald-500/15 text-green-800 border-green-200 ml-2":"bg-amber-500/15 text-yellow-800 border-yellow-200 ml-2",children:k.event.status==="published"?"Published":"Draft"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>S({isOpen:!1,event:null}),className:"flex-1 border-white/15 text-white/70 hover:bg-white/5",children:"Cancel"}),s.jsx(H,{variant:"destructive",onClick:()=>k.event&&P(k.event),disabled:a,className:"flex-1",children:a?"Deleting...":"Delete Event"})]})]})})]})},q6="modulepreload",G6=function(e){return"/"+e},Jw={},SC=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=G6(c),c in Jw)return;Jw[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":q6,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((p,f)=>{m.addEventListener("load",p),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};function Xw(e,[t,r]){return Math.min(r,Math.max(t,e))}var Y6=h.createContext(void 0);function $c(e){const t=h.useContext(Y6);return e||t||"ltr"}function K6(e){const t=Q6(e),r=h.forwardRef((n,a)=>{const{children:o,...i}=n,l=h.Children.toArray(o),c=l.find(X6);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return s.jsx(t,{...i,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function Q6(e){const t=h.forwardRef((r,n)=>{const{children:a,...o}=r;if(h.isValidElement(a)){const i=eU(a),l=Z6(o,a.props);return a.type!==h.Fragment&&(l.ref=n?Ir(n,i):i),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var J6=Symbol("radix.slottable");function X6(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===J6}function Z6(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function eU(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var tU=[" ","Enter","ArrowUp","ArrowDown"],rU=[" ","Enter"],ho="Select",[Mh,$h,nU]=lh(ho),[el]=Fr(ho,[nU,Ca]),Lh=Ca(),[sU,Pa]=el(ho),[aU,oU]=el(ho),CC=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:p,required:f,form:y}=e,g=Lh(t),[x,w]=h.useState(null),[v,b]=h.useState(null),[j,k]=h.useState(!1),S=$c(d),[N,E]=Kn({prop:n,defaultProp:a??!1,onChange:o,caller:ho}),[T,R]=Kn({prop:i,defaultProp:l,onChange:c,caller:ho}),O=h.useRef(null),F=x?y||!!x.closest("form"):!0,[M,I]=h.useState(new Set),B=Array.from(M).map($=>$.props.value).join(";");return s.jsx(Pv,{...g,children:s.jsxs(sU,{required:f,scope:t,trigger:x,onTriggerChange:w,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:k,contentId:hr(),value:T,onValueChange:R,open:N,onOpenChange:E,dir:S,triggerPointerDownPosRef:O,disabled:p,children:[s.jsx(Mh.Provider,{scope:t,children:s.jsx(aU,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback($=>{I(D=>new Set(D).add($))},[]),onNativeOptionRemove:h.useCallback($=>{I(D=>{const P=new Set(D);return P.delete($),P})},[]),children:r})}),F?s.jsxs(QC,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:m,value:T,onChange:$=>R($.target.value),disabled:p,form:y,children:[T===void 0?s.jsx("option",{value:""}):null,Array.from(M)]},B):null]})})};CC.displayName=ho;var EC="SelectTrigger",kC=h.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,o=Lh(r),i=Pa(EC,r),l=i.disabled||n,c=We(t,i.onTriggerChange),d=$h(r),u=h.useRef("touch"),[m,p,f]=XC(g=>{const x=d().filter(b=>!b.disabled),w=x.find(b=>b.value===i.value),v=ZC(x,g,w);v!==void 0&&i.onValueChange(v.value)}),y=g=>{l||(i.onOpenChange(!0),f()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(Pc,{asChild:!0,...o,children:s.jsx(ve.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":JC(i.value)?"":void 0,...a,ref:c,onClick:ae(a.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&y(g)}),onPointerDown:ae(a.onPointerDown,g=>{u.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:ae(a.onKeyDown,g=>{const x=m.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(x&&g.key===" ")&&tU.includes(g.key)&&(y(),g.preventDefault())})})})});kC.displayName=EC;var TC="SelectValue",PC=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:o,placeholder:i="",...l}=e,c=Pa(TC,r),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,m=We(t,c.onValueNodeChange);return Vt(()=>{d(u)},[d,u]),s.jsx(ve.span,{...l,ref:m,style:{pointerEvents:"none"},children:JC(c.value)?s.jsx(s.Fragment,{children:i}):o})});PC.displayName=TC;var iU="SelectIcon",RC=h.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(ve.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});RC.displayName=iU;var lU="SelectPortal",OC=e=>s.jsx(zi,{asChild:!0,...e});OC.displayName=lU;var fo="SelectContent",DC=h.forwardRef((e,t)=>{const r=Pa(fo,e.__scopeSelect),[n,a]=h.useState();if(Vt(()=>{a(new DocumentFragment)},[]),!r.open){const o=n;return o?vo.createPortal(s.jsx(AC,{scope:e.__scopeSelect,children:s.jsx(Mh.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),o):null}return s.jsx(IC,{...e,ref:t})});DC.displayName=fo;var Mn=10,[AC,Ra]=el(fo),cU="SelectContentImpl",dU=K6("SelectContent.RemoveScroll"),IC=h.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:g,avoidCollisions:x,...w}=e,v=Pa(fo,r),[b,j]=h.useState(null),[k,S]=h.useState(null),N=We(t,Q=>j(Q)),[E,T]=h.useState(null),[R,O]=h.useState(null),F=$h(r),[M,I]=h.useState(!1),B=h.useRef(!1);h.useEffect(()=>{if(b)return Th(b)},[b]),Eh();const $=h.useCallback(Q=>{const[he,...fe]=F().map(Ne=>Ne.ref.current),[_e]=fe.slice(-1),z=document.activeElement;for(const Ne of Q)if(Ne===z||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===he&&k&&(k.scrollTop=0),Ne===_e&&k&&(k.scrollTop=k.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==z))return},[F,k]),D=h.useCallback(()=>$([E,b]),[$,E,b]);h.useEffect(()=>{M&&D()},[M,D]);const{onOpenChange:P,triggerPointerDownPosRef:A}=v;h.useEffect(()=>{if(b){let Q={x:0,y:0};const he=_e=>{var z,Ne;Q={x:Math.abs(Math.round(_e.pageX)-(((z=A.current)==null?void 0:z.x)??0)),y:Math.abs(Math.round(_e.pageY)-(((Ne=A.current)==null?void 0:Ne.y)??0))}},fe=_e=>{Q.x<=10&&Q.y<=10?_e.preventDefault():b.contains(_e.target)||P(!1),document.removeEventListener("pointermove",he),A.current=null};return A.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",fe,{capture:!0})}}},[b,P,A]),h.useEffect(()=>{const Q=()=>P(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[P]);const[G,_]=XC(Q=>{const he=F().filter(z=>!z.disabled),fe=he.find(z=>z.ref.current===document.activeElement),_e=ZC(he,Q,fe);_e&&setTimeout(()=>_e.ref.current.focus())}),C=h.useCallback((Q,he,fe)=>{const _e=!B.current&&!fe;(v.value!==void 0&&v.value===he||_e)&&(T(Q),_e&&(B.current=!0))},[v.value]),L=h.useCallback(()=>b==null?void 0:b.focus(),[b]),W=h.useCallback((Q,he,fe)=>{const _e=!B.current&&!fe;(v.value!==void 0&&v.value===he||_e)&&O(Q)},[v.value]),Y=n==="popper"?ag:MC,J=Y===ag?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:g,avoidCollisions:x}:{};return s.jsx(AC,{scope:r,content:b,viewport:k,onViewportChange:S,itemRefCallback:C,selectedItem:E,onItemLeave:L,itemTextRefCallback:W,focusSelectedItem:D,selectedItemText:R,position:n,isPositioned:M,searchRef:G,children:s.jsx(Dc,{as:dU,allowPinchZoom:!0,children:s.jsx(Oc,{asChild:!0,trapped:v.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:ae(a,Q=>{var he;(he=v.trigger)==null||he.focus({preventScroll:!0}),Q.preventDefault()}),children:s.jsx(xo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:s.jsx(Y,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Q=>Q.preventDefault(),...w,...J,onPlaced:()=>I(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:ae(w.onKeyDown,Q=>{const he=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!he&&Q.key.length===1&&_(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let _e=F().filter(z=>!z.disabled).map(z=>z.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(_e=_e.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const z=Q.target,Ne=_e.indexOf(z);_e=_e.slice(Ne+1)}setTimeout(()=>$(_e)),Q.preventDefault()}})})})})})})});IC.displayName=cU;var uU="SelectItemAlignedPosition",MC=h.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,o=Pa(fo,r),i=Ra(fo,r),[l,c]=h.useState(null),[d,u]=h.useState(null),m=We(t,N=>u(N)),p=$h(r),f=h.useRef(!1),y=h.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:w,focusSelectedItem:v}=i,b=h.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&g&&x&&w){const N=o.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),T=o.valueNode.getBoundingClientRect(),R=w.getBoundingClientRect();if(o.dir!=="rtl"){const z=R.left-E.left,Ne=T.left-z,rt=N.left-Ne,it=N.width+rt,_r=Math.max(it,E.width),Ut=window.innerWidth-Mn,He=Xw(Ne,[Mn,Math.max(Mn,Ut-_r)]);l.style.minWidth=it+"px",l.style.left=He+"px"}else{const z=E.right-R.right,Ne=window.innerWidth-T.right-z,rt=window.innerWidth-N.right-Ne,it=N.width+rt,_r=Math.max(it,E.width),Ut=window.innerWidth-Mn,He=Xw(Ne,[Mn,Math.max(Mn,Ut-_r)]);l.style.minWidth=it+"px",l.style.right=He+"px"}const O=p(),F=window.innerHeight-Mn*2,M=g.scrollHeight,I=window.getComputedStyle(d),B=parseInt(I.borderTopWidth,10),$=parseInt(I.paddingTop,10),D=parseInt(I.borderBottomWidth,10),P=parseInt(I.paddingBottom,10),A=B+$+M+P+D,G=Math.min(x.offsetHeight*5,A),_=window.getComputedStyle(g),C=parseInt(_.paddingTop,10),L=parseInt(_.paddingBottom,10),W=N.top+N.height/2-Mn,Y=F-W,J=x.offsetHeight/2,Q=x.offsetTop+J,he=B+$+Q,fe=A-he;if(he<=W){const z=O.length>0&&x===O[O.length-1].ref.current;l.style.bottom="0px";const Ne=d.clientHeight-g.offsetTop-g.offsetHeight,rt=Math.max(Y,J+(z?L:0)+Ne+D),it=he+rt;l.style.height=it+"px"}else{const z=O.length>0&&x===O[0].ref.current;l.style.top="0px";const rt=Math.max(W,B+g.offsetTop+(z?C:0)+J)+fe;l.style.height=rt+"px",g.scrollTop=he-W+g.offsetTop}l.style.margin=`${Mn}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=F+"px",n==null||n(),requestAnimationFrame(()=>f.current=!0)}},[p,o.trigger,o.valueNode,l,d,g,x,w,o.dir,n]);Vt(()=>b(),[b]);const[j,k]=h.useState();Vt(()=>{d&&k(window.getComputedStyle(d).zIndex)},[d]);const S=h.useCallback(N=>{N&&y.current===!0&&(b(),v==null||v(),y.current=!1)},[b,v]);return s.jsx(fU,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:s.jsx(ve.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});MC.displayName=uU;var hU="SelectPopperPosition",ag=h.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Mn,...o}=e,i=Lh(r);return s.jsx(ph,{...i,...o,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ag.displayName=hU;var[fU,ax]=el(fo,{}),og="SelectViewport",$C=h.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,o=Ra(og,r),i=ax(og,r),l=We(t,o.onViewportChange),c=h.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(Mh.Slot,{scope:r,children:s.jsx(ve.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ae(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&m){const f=Math.abs(c.current-u.scrollTop);if(f>0){const y=window.innerHeight-Mn*2,g=parseFloat(m.style.minHeight),x=parseFloat(m.style.height),w=Math.max(g,x);if(w<y){const v=w+f,b=Math.min(y,v),j=v-b;m.style.height=b+"px",m.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});$C.displayName=og;var LC="SelectGroup",[mU,pU]=el(LC),gU=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=hr();return s.jsx(mU,{scope:r,id:a,children:s.jsx(ve.div,{role:"group","aria-labelledby":a,...n,ref:t})})});gU.displayName=LC;var FC="SelectLabel",UC=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=pU(FC,r);return s.jsx(ve.div,{id:a.id,...n,ref:t})});UC.displayName=FC;var Uu="SelectItem",[vU,BC]=el(Uu),zC=h.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:o,...i}=e,l=Pa(Uu,r),c=Ra(Uu,r),d=l.value===n,[u,m]=h.useState(o??""),[p,f]=h.useState(!1),y=We(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,n,a)}),g=hr(),x=h.useRef("touch"),w=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(vU,{scope:r,value:n,disabled:a,textId:g,isSelected:d,onItemTextChange:h.useCallback(v=>{m(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:s.jsx(Mh.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(ve.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:y,onFocus:ae(i.onFocus,()=>f(!0)),onBlur:ae(i.onBlur,()=>f(!1)),onClick:ae(i.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:ae(i.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:ae(i.onPointerDown,v=>{x.current=v.pointerType}),onPointerMove:ae(i.onPointerMove,v=>{var b;x.current=v.pointerType,a?(b=c.onItemLeave)==null||b.call(c):x.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ae(i.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ae(i.onKeyDown,v=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&v.key===" "||(rU.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})})})})});zC.displayName=Uu;var Sl="SelectItemText",VC=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...o}=e,i=Pa(Sl,r),l=Ra(Sl,r),c=BC(Sl,r),d=oU(Sl,r),[u,m]=h.useState(null),p=We(t,w=>m(w),c.onItemTextChange,w=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,w,c.value,c.disabled)}),f=u==null?void 0:u.textContent,y=h.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=d;return Vt(()=>(g(y),()=>x(y)),[g,x,y]),s.jsxs(s.Fragment,{children:[s.jsx(ve.span,{id:c.textId,...o,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?vo.createPortal(o.children,i.valueNode):null]})});VC.displayName=Sl;var WC="SelectItemIndicator",HC=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return BC(WC,r).isSelected?s.jsx(ve.span,{"aria-hidden":!0,...n,ref:t}):null});HC.displayName=WC;var ig="SelectScrollUpButton",qC=h.forwardRef((e,t)=>{const r=Ra(ig,e.__scopeSelect),n=ax(ig,e.__scopeSelect),[a,o]=h.useState(!1),i=We(t,n.onScrollButtonChange);return Vt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(YC,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});qC.displayName=ig;var lg="SelectScrollDownButton",GC=h.forwardRef((e,t)=>{const r=Ra(lg,e.__scopeSelect),n=ax(lg,e.__scopeSelect),[a,o]=h.useState(!1),i=We(t,n.onScrollButtonChange);return Vt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(YC,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});GC.displayName=lg;var YC=h.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,o=Ra("SelectScrollButton",r),i=h.useRef(null),l=$h(r),c=h.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),Vt(()=>{var u;const d=l().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(ve.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ae(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:ae(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:ae(a.onPointerLeave,()=>{c()})})}),xU="SelectSeparator",KC=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(ve.div,{"aria-hidden":!0,...n,ref:t})});KC.displayName=xU;var cg="SelectArrow",yU=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Lh(r),o=Pa(cg,r),i=Ra(cg,r);return o.open&&i.position==="popper"?s.jsx(gh,{...a,...n,ref:t}):null});yU.displayName=cg;var wU="SelectBubbleInput",QC=h.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=h.useRef(null),o=We(n,a),i=nx(t);return h.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&u){const m=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(m)}},[i,t]),s.jsx(ve.select,{...r,style:{...HN,...r.style},ref:o,defaultValue:t})});QC.displayName=wU;function JC(e){return e===""||e===void 0}function XC(e){const t=Mr(e),r=h.useRef(""),n=h.useRef(0),a=h.useCallback(i=>{const l=r.current+i;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=h.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,o]}function ZC(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=bU(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function bU(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var jU=CC,eE=kC,NU=PC,_U=RC,SU=OC,tE=DC,CU=$C,rE=UC,nE=zC,EU=VC,kU=HC,sE=qC,aE=GC,oE=KC;const vs=jU,xs=NU,qn=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(eE,{ref:n,className:re("flex h-11 w-full items-center justify-between rounded-xl border-2 border-umma-200 bg-white px-4 py-3 text-sm ring-offset-white placeholder:text-umma-400 focus:outline-none focus:ring-2 focus:ring-umma-400 focus:ring-offset-2 focus:border-umma-400 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 transition-all duration-200 hover:border-umma-500 shadow-sm focus:shadow-md text-umma-800",e),...r,children:[t,s.jsx(_U,{asChild:!0,children:s.jsx(nn,{className:"h-4 w-4 opacity-50 text-umma-600"})})]}));qn.displayName=eE.displayName;const iE=h.forwardRef(({className:e,...t},r)=>s.jsx(sE,{ref:r,className:re("flex cursor-default items-center justify-center py-1 text-umma-600",e),...t,children:s.jsx(ti,{className:"h-4 w-4"})}));iE.displayName=sE.displayName;const lE=h.forwardRef(({className:e,...t},r)=>s.jsx(aE,{ref:r,className:re("flex cursor-default items-center justify-center py-1 text-umma-600",e),...t,children:s.jsx(nn,{className:"h-4 w-4"})}));lE.displayName=aE.displayName;const Gn=h.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(SU,{children:s.jsxs(tE,{ref:a,className:re("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-xl border-2 border-umma-200 bg-white text-umma-800 shadow-xl data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(iE,{}),s.jsx(CU,{className:re("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(lE,{})]})}));Gn.displayName=tE.displayName;const TU=h.forwardRef(({className:e,...t},r)=>s.jsx(rE,{ref:r,className:re("py-1.5 pl-8 pr-2 text-sm font-semibold text-umma-800",e),...t}));TU.displayName=rE.displayName;const wr=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(nE,{ref:n,className:re("relative flex w-full cursor-default select-none items-center rounded-lg py-2 pl-8 pr-2 text-sm outline-none focus:bg-umma-100 focus:text-umma-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 text-umma-700 hover:bg-umma-50 transition-colors",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(kU,{children:s.jsx(kc,{className:"h-4 w-4 text-umma-600"})})}),s.jsx(EU,{children:t})]}));wr.displayName=nE.displayName;const PU=h.forwardRef(({className:e,...t},r)=>s.jsx(oE,{ref:r,className:re("-mx-1 my-1 h-px bg-umma-200",e),...t}));PU.displayName=oE.displayName;var RU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],OU=RU.reduce((e,t)=>{const r=_h(`Primitive.${t}`),n=h.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),DU="Label",cE=h.forwardRef((e,t)=>s.jsx(OU.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));cE.displayName=DU;var dE=cE;const AU=Vi("text-base sm:text-sm font-semibold leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-amber-800 mb-2 block"),te=h.forwardRef(({className:e,...t},r)=>s.jsx(dE,{ref:r,className:re(AU(),e),...t}));te.displayName=dE.displayName;const uE=["+1","+20","+33","+44","+61","+91","+92","+880","+963","+966","+967","+971"];function IU(e){const t=(e||"").replace(/\s|\(|\)|-/g,"");if(!t)return{code:"+1",national:""};if(t.startsWith("+")){const r=[...uE].sort((a,o)=>o.length-a.length);for(const a of r)if(t.startsWith(a))return{code:a,national:t.slice(a.length)};const n=t.match(/^(\+\d{1,4})(\d*)$/);return n?{code:n[1],national:n[2]}:{code:"+1",national:t.replace(/^\+/,"")}}return{code:"+1",national:t}}function Zw(e,t){const r=(e||"").replace(/\s|\(|\)|-/g,"");if(!r)return{code:t,national:""};if(r.startsWith("+"))return IU(e);const n=t.replace("+","");if(r.startsWith(n)){const a=r.slice(n.length);return{code:t,national:a}}return t==="+1"&&/^\d{10}$/.test(r)?{code:"+1",national:r}:t==="+1"&&/^1\d{10}$/.test(r)?{code:"+1",national:r.slice(1)}:{code:t,national:r}}function eb(e,t){const r=(t||"").replace(/[^\d]/g,"");return r?`${e}${r}`:e}const Mi=({id:e,value:t,onChange:r,placeholder:n,className:a,defaultCountryCode:o="+1",disabled:i})=>{const[l,c]=h.useState([]),[d,u]=h.useState(!1),[m,p]=h.useState(""),[f,y]=h.useState(""),g="__add_custom_country_code__",x=h.useMemo(()=>{const S=new Set([...uE,...l,o]);return Array.from(S).sort((N,E)=>parseInt(N.slice(1),10)-parseInt(E.slice(1),10))},[l,o]),{code:w,national:v}=h.useMemo(()=>{const S=Zw(t||o,o);return/^\+\d+$/.test(S.national),S},[t,o]),b=S=>{const N=eb(S,v);r(N)},j=S=>{const N=S.target.value,E=Zw(N,w||o),T=eb(E.code,E.national);r(T)},k=()=>{const S=m.trim();if(!S){y("Please enter a country code");return}const N=S.startsWith("+")?S:`+${S}`;if(!/^\+\d{1,4}$/.test(N)){y("Please enter a valid country code (e.g., +49, +86)");return}if(x.includes(N)){y("This country code is already available");return}c(E=>[...E,N]),p(""),y(""),u(!1),b(N)};return s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs(vs,{value:w||o,onValueChange:S=>{if(S===g){u(!0);return}b(S)},disabled:i,children:[s.jsx(qn,{className:"w-40",children:s.jsx(xs,{})}),s.jsxs(Gn,{children:[x.map(S=>s.jsx(wr,{value:S,children:S},S)),s.jsx(wr,{value:g,children:"+ Add custom"})]})]}),s.jsx(fr,{open:d,onOpenChange:u,children:s.jsxs(rr,{className:"sm:max-w-md",children:[s.jsxs(nr,{children:[s.jsx(sr,{children:"Add Custom Country Code"}),s.jsx(ar,{children:"Enter a country calling code to add it to your list."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"custom-code",children:"Country Code"}),s.jsx(ue,{id:"custom-code",value:m,onChange:S=>{p(S.target.value),y("")},placeholder:"e.g., +49, +86",className:f?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}),f&&s.jsx("p",{className:"text-sm text-red-600",children:f})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(H,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),s.jsx(H,{onClick:k,children:"Add Code"})]})]})]})})]}),s.jsx(ue,{id:e,inputMode:"tel",type:"tel",value:v,onChange:j,placeholder:n||"Phone number",className:a,disabled:i,autoComplete:"tel"})]})};function MU(e){if(!e||!/^\d{2}:\d{2}$/.test(e))return{hour12:"",minute:"",ampm:"AM"};const[t,r]=e.split(":"),n=Math.max(0,Math.min(23,Number(t))),a=r.padStart(2,"0"),o=n>=12?"PM":"AM",i=n%12===0?12:n%12;return{hour12:String(i).padStart(2,"0"),minute:a,ampm:o}}function hm(e,t,r){if(!e||!t)return"";const a=Math.max(1,Math.min(12,Number(e)))%12,o=r==="PM"?a+12:a;return`${String(o).padStart(2,"0")}:${String(Number(t)).padStart(2,"0")}`}function ls({value:e,onChange:t,disabled:r,className:n,id:a}){const{hour12:o,minute:i,ampm:l}=h.useMemo(()=>MU(e),[e]),c=h.useMemo(()=>Array.from({length:12},(f,y)=>String(y+1).padStart(2,"0")),[]),d=h.useMemo(()=>Array.from({length:60},(f,y)=>String(y).padStart(2,"0")),[]),u=f=>t(hm(f,i||"00",l)),m=f=>t(hm(o||"12",f,l)),p=f=>t(hm(o||"12",i||"00",f));return s.jsxs("div",{className:re("flex items-center gap-2 md:gap-1.5",n),id:a,children:[s.jsxs(vs,{value:o,onValueChange:u,disabled:r,children:[s.jsx(qn,{className:"flex-1 md:w-20 h-14 md:h-11 text-base md:text-sm font-medium border md:border border-stone-200 md:border-input rounded-2xl md:rounded-lg",children:s.jsx(xs,{placeholder:"HH"})}),s.jsx(Gn,{children:c.map(f=>s.jsx(wr,{value:f,className:"text-base md:text-sm h-11 md:h-9",children:f},f))})]}),s.jsx("span",{className:"text-stone-400 md:text-umma-600 text-xl md:text-base font-bold",children:":"}),s.jsxs(vs,{value:i,onValueChange:m,disabled:r,children:[s.jsx(qn,{className:"flex-1 md:w-20 h-14 md:h-11 text-base md:text-sm font-medium border md:border border-stone-200 md:border-input rounded-2xl md:rounded-lg",children:s.jsx(xs,{placeholder:"MM"})}),s.jsx(Gn,{children:d.map(f=>s.jsx(wr,{value:f,className:"text-base md:text-sm h-11 md:h-9",children:f},f))})]}),s.jsxs(vs,{value:l,onValueChange:f=>p(f),disabled:r,children:[s.jsx(qn,{className:"w-[72px] md:w-20 h-14 md:h-11 text-base md:text-sm font-semibold border md:border border-stone-200 md:border-input rounded-2xl md:rounded-lg",children:s.jsx(xs,{placeholder:"AM"})}),s.jsxs(Gn,{children:[s.jsx(wr,{value:"AM",className:"text-base md:text-sm h-11 md:h-9 font-medium",children:"AM"}),s.jsx(wr,{value:"PM",className:"text-base md:text-sm h-11 md:h-9 font-medium",children:"PM"})]})]})]})}function $U(e){const t=LU(e),r=h.forwardRef((n,a)=>{const{children:o,...i}=n,l=h.Children.toArray(o),c=l.find(UU);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return s.jsx(t,{...i,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function LU(e){const t=h.forwardRef((r,n)=>{const{children:a,...o}=r;if(h.isValidElement(a)){const i=zU(a),l=BU(o,a.props);return a.type!==h.Fragment&&(l.ref=n?Ir(n,i):i),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var FU=Symbol("radix.slottable");function UU(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===FU}function BU(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function zU(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Fh="Popover",[hE]=Fr(Fh,[Ca]),Lc=Ca(),[VU,Oa]=hE(Fh),fE=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:i=!1}=e,l=Lc(t),c=h.useRef(null),[d,u]=h.useState(!1),[m,p]=Kn({prop:n,defaultProp:a??!1,onChange:o,caller:Fh});return s.jsx(Pv,{...l,children:s.jsx(VU,{scope:t,contentId:hr(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:h.useCallback(()=>p(f=>!f),[p]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>u(!0),[]),onCustomAnchorRemove:h.useCallback(()=>u(!1),[]),modal:i,children:r})})};fE.displayName=Fh;var mE="PopoverAnchor",WU=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Oa(mE,r),o=Lc(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(i(),()=>l()),[i,l]),s.jsx(Pc,{...o,...n,ref:t})});WU.displayName=mE;var pE="PopoverTrigger",gE=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Oa(pE,r),o=Lc(r),i=We(t,a.triggerRef),l=s.jsx(ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":bE(a.open),...n,ref:i,onClick:ae(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Pc,{asChild:!0,...o,children:l})});gE.displayName=pE;var ox="PopoverPortal",[HU,qU]=hE(ox,{forceMount:void 0}),vE=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,o=Oa(ox,t);return s.jsx(HU,{scope:t,forceMount:r,children:s.jsx(Jr,{present:r||o.open,children:s.jsx(zi,{asChild:!0,container:a,children:n})})})};vE.displayName=ox;var $i="PopoverContent",xE=h.forwardRef((e,t)=>{const r=qU($i,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,o=Oa($i,e.__scopePopover);return s.jsx(Jr,{present:n||o.open,children:o.modal?s.jsx(YU,{...a,ref:t}):s.jsx(KU,{...a,ref:t})})});xE.displayName=$i;var GU=$U("PopoverContent.RemoveScroll"),YU=h.forwardRef((e,t)=>{const r=Oa($i,e.__scopePopover),n=h.useRef(null),a=We(t,n),o=h.useRef(!1);return h.useEffect(()=>{const i=n.current;if(i)return Th(i)},[]),s.jsx(Dc,{as:GU,allowPinchZoom:!0,children:s.jsx(yE,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ae(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ae(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),KU=h.forwardRef((e,t)=>{const r=Oa($i,e.__scopePopover),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(yE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),yE=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,p=Oa($i,r),f=Lc(r);return Eh(),s.jsx(Oc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(xo,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:s.jsx(ph,{"data-state":bE(p.open),role:"dialog",id:p.contentId,...f,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),wE="PopoverClose",QU=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Oa(wE,r);return s.jsx(ve.button,{type:"button",...n,ref:t,onClick:ae(e.onClick,()=>a.onOpenChange(!1))})});QU.displayName=wE;var JU="PopoverArrow",XU=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Lc(r);return s.jsx(gh,{...a,...n,ref:t})});XU.displayName=JU;function bE(e){return e?"open":"closed"}var ZU=fE,e8=gE,t8=vE,jE=xE;const NE=ZU,_E=e8,ix=h.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(t8,{children:s.jsx(jE,{ref:a,align:t,sideOffset:r,className:re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ix.displayName=jE.displayName;var Ee=function(){return Ee=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Ee.apply(this,arguments)};function r8(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function SE(e,t,r){for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Fc(e){return e.mode==="multiple"}function Uc(e){return e.mode==="range"}function Uh(e){return e.mode==="single"}var n8={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function s8(e,t){return Ta(e,"LLLL y",t)}function a8(e,t){return Ta(e,"d",t)}function o8(e,t){return Ta(e,"LLLL",t)}function i8(e){return"".concat(e)}function l8(e,t){return Ta(e,"cccccc",t)}function c8(e,t){return Ta(e,"yyyy",t)}var d8=Object.freeze({__proto__:null,formatCaption:s8,formatDay:a8,formatMonthCaption:o8,formatWeekNumber:i8,formatWeekdayName:l8,formatYearCaption:c8}),u8=function(e,t,r){return Ta(e,"do MMMM (EEEE)",r)},h8=function(){return"Month: "},f8=function(){return"Go to next month"},m8=function(){return"Go to previous month"},p8=function(e,t){return Ta(e,"cccc",t)},g8=function(e){return"Week n. ".concat(e)},v8=function(){return"Year: "},x8=Object.freeze({__proto__:null,labelDay:u8,labelMonthDropdown:h8,labelNext:f8,labelPrevious:m8,labelWeekNumber:g8,labelWeekday:p8,labelYearDropdown:v8});function y8(){var e="buttons",t=n8,r=RS,n={},a={},o=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:d8,labels:x8,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:o,styles:i,today:l,mode:"default"}}function w8(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,o=e.fromDate,i=e.toDate;return n?o=Qr(n):t&&(o=new Date(t,0,1)),a?i=Kv(a):r&&(i=new Date(r,11,31)),{fromDate:o?Ii(o):void 0,toDate:i?Ii(i):void 0}}var CE=h.createContext(void 0);function b8(e){var t,r=e.initialProps,n=y8(),a=w8(r),o=a.fromDate,i=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(Uh(r)||Fc(r)||Uc(r))&&(c=r.onSelect);var d=Ee(Ee(Ee({},n),r),{captionLayout:l,classNames:Ee(Ee({},n.classNames),r.classNames),components:Ee({},r.components),formatters:Ee(Ee({},n.formatters),r.formatters),fromDate:o,labels:Ee(Ee({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Ee(Ee({},n.modifiers),r.modifiers),modifiersClassNames:Ee(Ee({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Ee(Ee({},n.styles),r.styles),toDate:i});return s.jsx(CE.Provider,{value:d,children:e.children})}function gt(){var e=h.useContext(CE);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function EE(e){var t=gt(),r=t.locale,n=t.classNames,a=t.styles,o=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:r})})}function j8(e){return s.jsx("svg",Ee({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function kE(e){var t,r,n=e.onChange,a=e.value,o=e.children,i=e.caption,l=e.className,c=e.style,d=gt(),u=(r=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:j8;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:n,children:o}),s.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[i,s.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function N8(e){var t,r=gt(),n=r.fromDate,a=r.toDate,o=r.styles,i=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var m=[];if(UL(n,a))for(var p=Qr(n),f=n.getMonth();f<=a.getMonth();f++)m.push(Jf(p,f));else for(var p=Qr(new Date),f=0;f<=11;f++)m.push(Jf(p,f));var y=function(x){var w=Number(x.target.value),v=Jf(Qr(e.displayMonth),w);e.onChange(v)},g=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:kE;return s.jsx(g,{name:"months","aria-label":u(),className:c.dropdown_month,style:o.dropdown_month,onChange:y,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:m.map(function(x){return s.jsx("option",{value:x.getMonth(),children:l(x,{locale:i})},x.getMonth())})})}function _8(e){var t,r=e.displayMonth,n=gt(),a=n.fromDate,o=n.toDate,i=n.locale,l=n.styles,c=n.classNames,d=n.components,u=n.formatters.formatYearCaption,m=n.labels.labelYearDropdown,p=[];if(!a)return s.jsx(s.Fragment,{});if(!o)return s.jsx(s.Fragment,{});for(var f=a.getFullYear(),y=o.getFullYear(),g=f;g<=y;g++)p.push(Tw(TS(new Date),g));var x=function(v){var b=Tw(Qr(r),Number(v.target.value));e.onChange(b)},w=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:kE;return s.jsx(w,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:r.getFullYear(),caption:u(r,{locale:i}),children:p.map(function(v){return s.jsx("option",{value:v.getFullYear(),children:u(v,{locale:i})},v.getFullYear())})})}function S8(e,t){var r=h.useState(e),n=r[0],a=r[1],o=t===void 0?n:t;return[o,a]}function C8(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(o&&pc(o,a)<0){var d=-1*(c-1);a=Xn(o,d)}return i&&pc(a,i)<0&&(a=i),Qr(a)}function E8(){var e=gt(),t=C8(e),r=S8(t,e.month),n=r[0],a=r[1],o=function(i){var l;if(!e.disableNavigation){var c=Qr(i);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,o]}function k8(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Qr(e),o=Qr(Xn(a,n)),i=pc(o,a),l=[],c=0;c<i;c++){var d=Xn(a,c);l.push(d)}return r&&(l=l.reverse()),l}function T8(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=n?o:1,l=Qr(e);if(!r)return Xn(l,i);var c=pc(r,e);if(!(c<o))return Xn(l,i)}}function P8(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=n?o:1,l=Qr(e);if(!r)return Xn(l,-i);var c=pc(l,r);if(!(c<=0))return Xn(l,-i)}}var TE=h.createContext(void 0);function R8(e){var t=gt(),r=E8(),n=r[0],a=r[1],o=k8(n,t),i=T8(n,t),l=P8(n,t),c=function(m){return o.some(function(p){return Jv(m,p)})},d=function(m,p){c(m)||(p&&MS(m,p)?a(Xn(m,1+t.numberOfMonths*-1)):a(m))},u={currentMonth:n,displayMonths:o,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:i,isDateDisplayed:c};return s.jsx(TE.Provider,{value:u,children:e.children})}function Bc(){var e=h.useContext(TE);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function tb(e){var t,r=gt(),n=r.classNames,a=r.styles,o=r.components,i=Bc().goToMonth,l=function(u){i(Xn(u,e.displayIndex?-e.displayIndex:0))},c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:EE,d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:d}),s.jsx(N8,{onChange:l,displayMonth:e.displayMonth}),s.jsx(_8,{onChange:l,displayMonth:e.displayMonth})]})}function O8(e){return s.jsx("svg",Ee({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function D8(e){return s.jsx("svg",Ee({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Bu=h.forwardRef(function(e,t){var r=gt(),n=r.classNames,a=r.styles,o=[n.button_reset,n.button];e.className&&o.push(e.className);var i=o.join(" "),l=Ee(Ee({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",Ee({},e,{ref:t,type:"button",className:i,style:l}))});function A8(e){var t,r,n=gt(),a=n.dir,o=n.locale,i=n.classNames,l=n.styles,c=n.labels,d=c.labelPrevious,u=c.labelNext,m=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var p=d(e.previousMonth,{locale:o}),f=[i.nav_button,i.nav_button_previous].join(" "),y=u(e.nextMonth,{locale:o}),g=[i.nav_button,i.nav_button_next].join(" "),x=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:D8,w=(r=m==null?void 0:m.IconLeft)!==null&&r!==void 0?r:O8;return s.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(Bu,{name:"previous-month","aria-label":p,className:f,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(x,{className:i.nav_icon,style:l.nav_icon}):s.jsx(w,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(Bu,{name:"next-month","aria-label":y,className:g,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(w,{className:i.nav_icon,style:l.nav_icon}):s.jsx(x,{className:i.nav_icon,style:l.nav_icon})})]})}function rb(e){var t=gt().numberOfMonths,r=Bc(),n=r.previousMonth,a=r.nextMonth,o=r.goToMonth,i=r.displayMonths,l=i.findIndex(function(y){return Jv(e.displayMonth,y)}),c=l===0,d=l===i.length-1,u=t>1&&(c||!d),m=t>1&&(d||!c),p=function(){n&&o(n)},f=function(){a&&o(a)};return s.jsx(A8,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:n,onPreviousClick:p,onNextClick:f})}function I8(e){var t,r=gt(),n=r.classNames,a=r.disableNavigation,o=r.styles,i=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:EE,d;return a?d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?d=s.jsx(tb,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?d=s.jsxs(s.Fragment,{children:[s.jsx(tb,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(rb,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(rb,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:o.caption,children:d})}function M8(e){var t=gt(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function $8(e,t,r){for(var n=r?co(new Date):ws(new Date,{locale:e,weekStartsOn:t}),a=[],o=0;o<7;o++){var i=Pr(n,o);a.push(i)}return a}function L8(){var e=gt(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=$8(a,o,i);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),d.map(function(u,m){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(u,{locale:a}),children:l(u,{locale:a})},m)})]})}function F8(){var e,t=gt(),r=t.classNames,n=t.styles,a=t.components,o=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:L8;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(o,{})})}function U8(e){var t=gt(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var lx=h.createContext(void 0);function B8(e){if(!Fc(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(lx.Provider,{value:t,children:e.children})}return s.jsx(z8,{initialProps:e.initialProps,children:e.children})}function z8(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,o=t.max,i=function(d,u,m){var p,f;(p=t.onDayClick)===null||p===void 0||p.call(t,d,u,m);var y=!!(u.selected&&a&&(n==null?void 0:n.length)===a);if(!y){var g=!!(!u.selected&&o&&(n==null?void 0:n.length)===o);if(!g){var x=n?SE([],n):[];if(u.selected){var w=x.findIndex(function(v){return qr(d,v)});x.splice(w,1)}else x.push(d);(f=t.onSelect)===null||f===void 0||f.call(t,x,d,u,m)}}},l={disabled:[]};n&&l.disabled.push(function(d){var u=o&&n.length>o-1,m=n.some(function(p){return qr(p,d)});return!!(u&&!m)});var c={selected:n,onDayClick:i,modifiers:l};return s.jsx(lx.Provider,{value:c,children:r})}function cx(){var e=h.useContext(lx);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function V8(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?qr(a,e)&&qr(n,e)?void 0:qr(a,e)?{from:a,to:void 0}:qr(n,e)?void 0:tg(n,e)?{from:e,to:a}:{from:n,to:e}:a?tg(e,a)?{from:a,to:e}:{from:e,to:a}:n?MS(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var dx=h.createContext(void 0);function W8(e){if(!Uc(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(dx.Provider,{value:t,children:e.children})}return s.jsx(H8,{initialProps:e.initialProps,children:e.children})}function H8(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},o=a.from,i=a.to,l=t.min,c=t.max,d=function(f,y,g){var x,w;(x=t.onDayClick)===null||x===void 0||x.call(t,f,y,g);var v=V8(f,n);(w=t.onSelect)===null||w===void 0||w.call(t,v,f,y,g)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(u.range_start=[o],i?(u.range_end=[i],qr(o,i)||(u.range_middle=[{after:o,before:i}])):u.range_end=[o]):i&&(u.range_start=[i],u.range_end=[i]),l&&(o&&!i&&u.disabled.push({after:Kf(o,l-1),before:Pr(o,l-1)}),o&&i&&u.disabled.push({after:o,before:Pr(o,l-1)}),!o&&i&&u.disabled.push({after:Kf(i,l-1),before:Pr(i,l-1)})),c){if(o&&!i&&(u.disabled.push({before:Pr(o,-c+1)}),u.disabled.push({after:Pr(o,c-1)})),o&&i){var m=us(i,o)+1,p=c-m;u.disabled.push({before:Kf(o,p)}),u.disabled.push({after:Pr(i,p)})}!o&&i&&(u.disabled.push({before:Pr(i,-c+1)}),u.disabled.push({after:Pr(i,c-1)}))}return s.jsx(dx.Provider,{value:{selected:n,onDayClick:d,modifiers:u},children:r})}function ux(){var e=h.useContext(dx);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Qd(e){return Array.isArray(e)?SE([],e):e!==void 0?[e]:[]}function q8(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=Qd(a)}),t}var Zn;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Zn||(Zn={}));var G8=Zn.Selected,_s=Zn.Disabled,Y8=Zn.Hidden,K8=Zn.Today,fm=Zn.RangeEnd,mm=Zn.RangeMiddle,pm=Zn.RangeStart,Q8=Zn.Outside;function J8(e,t,r){var n,a=(n={},n[G8]=Qd(e.selected),n[_s]=Qd(e.disabled),n[Y8]=Qd(e.hidden),n[K8]=[e.today],n[fm]=[],n[mm]=[],n[pm]=[],n[Q8]=[],n);return e.fromDate&&a[_s].push({before:e.fromDate}),e.toDate&&a[_s].push({after:e.toDate}),Fc(e)?a[_s]=a[_s].concat(t.modifiers[_s]):Uc(e)&&(a[_s]=a[_s].concat(r.modifiers[_s]),a[pm]=r.modifiers[pm],a[mm]=r.modifiers[mm],a[fm]=r.modifiers[fm]),a}var PE=h.createContext(void 0);function X8(e){var t=gt(),r=cx(),n=ux(),a=J8(t,r,n),o=q8(t.modifiers),i=Ee(Ee({},a),o);return s.jsx(PE.Provider,{value:i,children:e.children})}function RE(){var e=h.useContext(PE);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Z8(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function eB(e){return!!(e&&typeof e=="object"&&"from"in e)}function tB(e){return!!(e&&typeof e=="object"&&"after"in e)}function rB(e){return!!(e&&typeof e=="object"&&"before"in e)}function nB(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function sB(e,t){var r,n=t.from,a=t.to;if(n&&a){var o=us(a,n)<0;o&&(r=[a,n],n=r[0],a=r[1]);var i=us(e,n)>=0&&us(a,e)>=0;return i}return a?qr(a,e):n?qr(n,e):!1}function aB(e){return Yv(e)}function oB(e){return Array.isArray(e)&&e.every(Yv)}function iB(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(aB(r))return qr(e,r);if(oB(r))return r.includes(e);if(eB(r))return sB(e,r);if(nB(r))return r.dayOfWeek.includes(e.getDay());if(Z8(r)){var n=us(r.before,e),a=us(r.after,e),o=n>0,i=a<0,l=tg(r.before,r.after);return l?i&&o:o||i}return tB(r)?us(e,r.after)>0:rB(r)?us(r.before,e)>0:typeof r=="function"?r(e):!1})}function hx(e,t,r){var n=Object.keys(t).reduce(function(o,i){var l=t[i];return iB(e,l)&&o.push(i),o},[]),a={};return n.forEach(function(o){return a[o]=!0}),r&&!Jv(e,r)&&(a.outside=!0),a}function lB(e,t){for(var r=Qr(e[0]),n=Kv(e[e.length-1]),a,o,i=r;i<=n;){var l=hx(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Pr(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),a||(a=i),i=Pr(i,1)}return o||a}var cB=365;function OE(e,t){var r=t.moveBy,n=t.direction,a=t.context,o=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,p={day:Pr,week:eg,month:Xn,year:I$,startOfWeek:function(x){return a.ISOWeek?co(x):ws(x,{locale:m,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?PS(x):Qv(x,{locale:m,weekStartsOn:c})}},f=p[r](e,n==="after"?1:-1);n==="before"&&d?f=M$([d,f]):n==="after"&&u&&(f=$$([u,f]));var y=!0;if(o){var g=hx(f,o);y=!g.disabled&&!g.hidden}return y?f:l.count>cB?l.lastFocused:OE(f,{moveBy:r,direction:n,context:a,modifiers:o,retry:Ee(Ee({},l),{count:l.count+1})})}var DE=h.createContext(void 0);function dB(e){var t=Bc(),r=RE(),n=h.useState(),a=n[0],o=n[1],i=h.useState(),l=i[0],c=i[1],d=lB(t.displayMonths,r),u=a??(l&&t.isDateDisplayed(l))?l:d,m=function(){c(a),o(void 0)},p=function(x){o(x)},f=gt(),y=function(x,w){if(a){var v=OE(a,{moveBy:x,direction:w,context:f,modifiers:r});qr(a,v)||(t.goToDate(v,a),p(v))}},g={focusedDay:a,focusTarget:u,blur:m,focus:p,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return s.jsx(DE.Provider,{value:g,children:e.children})}function fx(){var e=h.useContext(DE);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function uB(e,t){var r=RE(),n=hx(e,r,t);return n}var mx=h.createContext(void 0);function hB(e){if(!Uh(e.initialProps)){var t={selected:void 0};return s.jsx(mx.Provider,{value:t,children:e.children})}return s.jsx(fB,{initialProps:e.initialProps,children:e.children})}function fB(e){var t=e.initialProps,r=e.children,n=function(o,i,l){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,o,i,l),i.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,o,i,l);return}(u=t.onSelect)===null||u===void 0||u.call(t,o,o,i,l)},a={selected:t.selected,onDayClick:n};return s.jsx(mx.Provider,{value:a,children:r})}function AE(){var e=h.useContext(mx);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function mB(e,t){var r=gt(),n=AE(),a=cx(),o=ux(),i=fx(),l=i.focusDayAfter,c=i.focusDayBefore,d=i.focusWeekAfter,u=i.focusWeekBefore,m=i.blur,p=i.focus,f=i.focusMonthBefore,y=i.focusMonthAfter,g=i.focusYearBefore,x=i.focusYearAfter,w=i.focusStartOfWeek,v=i.focusEndOfWeek,b=function(D){var P,A,G,_;Uh(r)?(P=n.onDayClick)===null||P===void 0||P.call(n,e,t,D):Fc(r)?(A=a.onDayClick)===null||A===void 0||A.call(a,e,t,D):Uc(r)?(G=o.onDayClick)===null||G===void 0||G.call(o,e,t,D):(_=r.onDayClick)===null||_===void 0||_.call(r,e,t,D)},j=function(D){var P;p(e),(P=r.onDayFocus)===null||P===void 0||P.call(r,e,t,D)},k=function(D){var P;m(),(P=r.onDayBlur)===null||P===void 0||P.call(r,e,t,D)},S=function(D){var P;(P=r.onDayMouseEnter)===null||P===void 0||P.call(r,e,t,D)},N=function(D){var P;(P=r.onDayMouseLeave)===null||P===void 0||P.call(r,e,t,D)},E=function(D){var P;(P=r.onDayPointerEnter)===null||P===void 0||P.call(r,e,t,D)},T=function(D){var P;(P=r.onDayPointerLeave)===null||P===void 0||P.call(r,e,t,D)},R=function(D){var P;(P=r.onDayTouchCancel)===null||P===void 0||P.call(r,e,t,D)},O=function(D){var P;(P=r.onDayTouchEnd)===null||P===void 0||P.call(r,e,t,D)},F=function(D){var P;(P=r.onDayTouchMove)===null||P===void 0||P.call(r,e,t,D)},M=function(D){var P;(P=r.onDayTouchStart)===null||P===void 0||P.call(r,e,t,D)},I=function(D){var P;(P=r.onDayKeyUp)===null||P===void 0||P.call(r,e,t,D)},B=function(D){var P;switch(D.key){case"ArrowLeft":D.preventDefault(),D.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":D.preventDefault(),D.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":D.preventDefault(),D.stopPropagation(),d();break;case"ArrowUp":D.preventDefault(),D.stopPropagation(),u();break;case"PageUp":D.preventDefault(),D.stopPropagation(),D.shiftKey?g():f();break;case"PageDown":D.preventDefault(),D.stopPropagation(),D.shiftKey?x():y();break;case"Home":D.preventDefault(),D.stopPropagation(),w();break;case"End":D.preventDefault(),D.stopPropagation(),v();break}(P=r.onDayKeyDown)===null||P===void 0||P.call(r,e,t,D)},$={onClick:b,onFocus:j,onBlur:k,onKeyDown:B,onKeyUp:I,onMouseEnter:S,onMouseLeave:N,onPointerEnter:E,onPointerLeave:T,onTouchCancel:R,onTouchEnd:O,onTouchMove:F,onTouchStart:M};return $}function pB(){var e=gt(),t=AE(),r=cx(),n=ux(),a=Uh(e)?t.selected:Fc(e)?r.selected:Uc(e)?n.selected:void 0;return a}function gB(e){return Object.values(Zn).includes(e)}function vB(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(gB(n)){var o=e.classNames["day_".concat(n)];o&&r.push(o)}}),r}function xB(e,t){var r=Ee({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=Ee(Ee({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function yB(e,t,r){var n,a,o,i=gt(),l=fx(),c=uB(e,t),d=mB(e,c),u=pB(),m=!!(i.onDayClick||i.mode!=="default");h.useEffect(function(){var S;c.outside||l.focusedDay&&m&&qr(l.focusedDay,e)&&((S=r.current)===null||S===void 0||S.focus())},[l.focusedDay,e,r,m,c.outside]);var p=vB(i,c).join(" "),f=xB(i,c),y=!!(c.outside&&!i.showOutsideDays||c.hidden),g=(o=(a=i.components)===null||a===void 0?void 0:a.DayContent)!==null&&o!==void 0?o:U8,x=s.jsx(g,{date:e,displayMonth:t,activeModifiers:c}),w={style:f,className:p,children:x,role:"gridcell"},v=l.focusTarget&&qr(l.focusTarget,e)&&!c.outside,b=l.focusedDay&&qr(l.focusedDay,e),j=Ee(Ee(Ee({},w),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=b||v?0:-1,n)),d),k={isButton:m,isHidden:y,activeModifiers:c,selectedDays:u,buttonProps:j,divProps:w};return k}function wB(e){var t=h.useRef(null),r=yB(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(Bu,Ee({name:"day",ref:t},r.buttonProps)):s.jsx("div",Ee({},r.divProps))}function bB(e){var t=e.number,r=e.dates,n=gt(),a=n.onWeekNumberClick,o=n.styles,i=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,u=d(Number(t),{locale:l});if(!a)return s.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:u});var m=c(Number(t),{locale:l}),p=function(f){a(t,r,f)};return s.jsx(Bu,{name:"week-number","aria-label":m,className:i.weeknumber,style:o.weeknumber,onClick:p,children:u})}function jB(e){var t,r,n=gt(),a=n.styles,o=n.classNames,i=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:wB,d=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:bB,u;return i&&(u=s.jsx("td",{className:o.cell,style:a.cell,children:s.jsx(d,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:o.row,style:a.row,children:[u,e.dates.map(function(m){return s.jsx("td",{className:o.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:m})},$L(m))})]})}function nb(e,t,r){for(var n=r!=null&&r.ISOWeek?PS(t):Qv(t,r),a=r!=null&&r.ISOWeek?co(e):ws(e,r),o=us(n,a),i=[],l=0;l<=o;l++)i.push(Pr(a,l));var c=i.reduce(function(d,u){var m=r!=null&&r.ISOWeek?OS(u):AS(u,r),p=d.find(function(f){return f.weekNumber===m});return p?(p.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function NB(e,t){var r=nb(Qr(e),Kv(e),t);if(t!=null&&t.useFixedWeeks){var n=FL(e,t);if(n<6){var a=r[r.length-1],o=a.dates[a.dates.length-1],i=eg(o,6-n),l=nb(eg(o,1),i,t);r.push.apply(r,l)}}return r}function _B(e){var t,r,n,a=gt(),o=a.locale,i=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,p=a.firstWeekContainsDate,f=a.ISOWeek,y=NB(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:f,locale:o,weekStartsOn:m,firstWeekContainsDate:p}),g=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:F8,x=(r=u==null?void 0:u.Row)!==null&&r!==void 0?r:jB,w=(n=u==null?void 0:u.Footer)!==null&&n!==void 0?n:M8;return s.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(g,{}),s.jsx("tbody",{className:i.tbody,style:l.tbody,children:y.map(function(v){return s.jsx(x,{displayMonth:e.displayMonth,dates:v.dates,weekNumber:v.weekNumber},v.weekNumber)})}),s.jsx(w,{displayMonth:e.displayMonth})]})}function SB(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var CB=SB()?h.useLayoutEffect:h.useEffect,gm=!1,EB=0;function sb(){return"react-day-picker-".concat(++EB)}function kB(e){var t,r=e??(gm?sb():null),n=h.useState(r),a=n[0],o=n[1];return CB(function(){a===null&&o(sb())},[]),h.useEffect(function(){gm===!1&&(gm=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function TB(e){var t,r,n=gt(),a=n.dir,o=n.classNames,i=n.styles,l=n.components,c=Bc().displayMonths,d=kB(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,m=[o.month],p=i.month,f=e.displayIndex===0,y=e.displayIndex===c.length-1,g=!f&&!y;a==="rtl"&&(t=[f,y],y=t[0],f=t[1]),f&&(m.push(o.caption_start),p=Ee(Ee({},p),i.caption_start)),y&&(m.push(o.caption_end),p=Ee(Ee({},p),i.caption_end)),g&&(m.push(o.caption_between),p=Ee(Ee({},p),i.caption_between));var x=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:I8;return s.jsxs("div",{className:m.join(" "),style:p,children:[s.jsx(x,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(_B,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function PB(e){var t=gt(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function RB(e){var t,r,n=e.initialProps,a=gt(),o=fx(),i=Bc(),l=h.useState(!1),c=l[0],d=l[1];h.useEffect(function(){a.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),d(!0)))},[a.initialFocus,c,o.focus,o.focusTarget,o]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=Ee(Ee({},a.styles.root),a.style),p=Object.keys(n).filter(function(y){return y.startsWith("data-")}).reduce(function(y,g){var x;return Ee(Ee({},y),(x={},x[g]=n[g],x))},{}),f=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:PB;return s.jsx("div",Ee({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},p,{children:s.jsx(f,{children:i.displayMonths.map(function(y,g){return s.jsx(TB,{displayIndex:g,displayMonth:y},g)})})}))}function OB(e){var t=e.children,r=r8(e,["children"]);return s.jsx(b8,{initialProps:r,children:s.jsx(R8,{children:s.jsx(hB,{initialProps:r,children:s.jsx(B8,{initialProps:r,children:s.jsx(W8,{initialProps:r,children:s.jsx(X8,{children:s.jsx(dB,{children:t})})})})})})})}function DB(e){return s.jsx(OB,Ee({},e,{children:s.jsx(RB,{initialProps:e})}))}function IE({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(DB,{showOutsideDays:r,className:re("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:re(uc({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:re(uc({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(p_,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(vv,{className:"h-4 w-4"})},...n})}IE.displayName="Calendar";const un=h.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:re("flex min-h-[80px] w-full rounded-2xl border border-umma-200 bg-white px-4 py-3 text-base ring-offset-background placeholder:text-umma-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-umma-400 focus-visible:ring-offset-2 focus-visible:border-umma-400 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm transition-all duration-200 hover:border-umma-500 shadow-sm focus:shadow-md",e),ref:r,...t}));un.displayName="Textarea";var ME="Toggle",$E=h.forwardRef((e,t)=>{const{pressed:r,defaultPressed:n,onPressedChange:a,...o}=e,[i,l]=Kn({prop:r,onChange:a,defaultProp:n??!1,caller:ME});return s.jsx(ve.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:ae(e.onClick,()=>{e.disabled||l(!i)})})});$E.displayName=ME;var LE=$E;const AB=Vi("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),FE=h.forwardRef(({className:e,variant:t,size:r,...n},a)=>s.jsx(LE,{ref:a,className:re(AB({variant:t,size:r,className:e})),...n}));FE.displayName=LE.displayName;const IB=Rh,MB=Oh,UE=h.forwardRef(({className:e,...t},r)=>s.jsx(Xi,{className:re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));UE.displayName=Xi.displayName;const $B=Vi("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),BE=h.forwardRef(({side:e="right",className:t,children:r,...n},a)=>s.jsxs(MB,{children:[s.jsx(UE,{}),s.jsxs(Zi,{ref:a,className:re($B({side:e}),t),...n,children:[r,s.jsxs(Dh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(Ri,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));BE.displayName=Zi.displayName;const zE=({className:e,...t})=>s.jsx("div",{className:re("flex flex-col space-y-2 text-center sm:text-left",e),...t});zE.displayName="SheetHeader";const VE=h.forwardRef(({className:e,...t},r)=>s.jsx(Ac,{ref:r,className:re("text-lg font-semibold text-foreground",e),...t}));VE.displayName=Ac.displayName;const WE=h.forwardRef(({className:e,...t},r)=>s.jsx(Ic,{ref:r,className:re("text-sm text-muted-foreground",e),...t}));WE.displayName=Ic.displayName;function vm({value:e,onChange:t,min:r=0,max:n,step:a=1,className:o,disabled:i=!1,width:l="auto"}){const c=()=>{i||r!==void 0&&e<=r||t(e-a)},d=()=>{i||n!==void 0&&e>=n||t(e+a)};return s.jsxs("div",{className:re("flex items-center gap-3",o),style:{width:l},children:[s.jsxs(H,{variant:"outline",size:"icon",className:"h-10 w-10 md:h-9 md:w-9 rounded-full shrink-0 border-stone-200 text-stone-600 hover:bg-stone-100 hover:text-stone-900 touch-manipulation",onClick:c,disabled:i||r!==void 0&&e<=r,type:"button",children:[s.jsx(_p,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Decrease"})]}),s.jsx("div",{className:"flex-1 text-center font-semibold text-lg md:text-base min-w-[2ch]",children:e}),s.jsxs(H,{variant:"outline",size:"icon",className:"h-10 w-10 md:h-9 md:w-9 rounded-full shrink-0 border-stone-200 text-stone-600 hover:bg-stone-100 hover:text-stone-900 touch-manipulation",onClick:d,disabled:i||n!==void 0&&e>=n,type:"button",children:[s.jsx(jr,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Increase"})]})]})}const xm=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Date.now().toString(36)+Math.random().toString(36).substring(2),LB=({itinerary:e,onItineraryChange:t,startTime:r,endTime:n,isGenerated:a=!1,disabled:o=!1,onGenerateItinerary:i,isGenerating:l=!1,eventTitle:c,eventDescription:d,contacts:u=[],onAddContact:m,showValidation:p=!1})=>{const[f,y]=h.useState(null),g=M=>{if(!M||!/^\d{2}:\d{2}$/.test(M))return null;const[I,B]=M.split(":").map(Number);return I*60+B},x=M=>{const I=Math.max(0,Math.min(1439,M)),B=Math.floor(I/60),$=I%60,D=P=>P.toString().padStart(2,"0");return`${D(B)}:${D($)}`};h.useEffect(()=>{let M=!1;const I=e.map(B=>{const $=g(B.time);if($===null||B.volunteerRoles.length===0)return B;let D=!1;const P=B.volunteerRoles.map(A=>{if(A.shiftStartTime===B.time)return A;const G=g(A.shiftStartTime)??$,_=g(A.shiftEndTime)??G+60,C=Math.max(1,_-G);return D=!0,{...A,shiftStartTime:x($),shiftEndTime:x($+C)}});return D?(M=!0,{...B,volunteerRoles:P}):B});M&&t(I)},[e]);const w=M=>(g(M.shiftStartTime),g(M.shiftEndTime),null),v=M=>{const I=M.map($=>({id:$.id,s:g($.shiftStartTime),e:g($.shiftEndTime)})).filter($=>$.s!==null&&$.e!==null&&$.e>$.s).sort(($,D)=>$.s-D.s),B=new Set;for(let $=1;$<I.length;$++){const D=I[$-1],P=I[$];P.s<D.e&&(B.add(D.id),B.add(P.id))}return B},b=()=>{const M={id:xm(),time:r,title:"",description:"",volunteerRoles:[]};t([...e,M])},j=(M,I,B)=>{const $=e.map(D=>D.id===M?{...D,[I]:B}:D);t($)},k=M=>{t(e.filter(I=>I.id!==M))},S=(M,I)=>{const B=e.map($=>{if($.id!==M)return $;const D=$.time;if(!/^\d{2}:\d{2}$/.test(I)||!/^\d{2}:\d{2}$/.test(D))return{...$,time:I};const P=$.volunteerRoles.map(A=>{const G=g(A.shiftStartTime)??0,_=g(A.shiftEndTime)??G+60,C=Math.max(1,_-G),L=g(I)??G,W=L+C;return{...A,shiftStartTime:x(L),shiftEndTime:x(W)}});return{...$,time:I,volunteerRoles:P}});t(B)},N=M=>{const I=e.find(Y=>Y.id===M),B=(I==null?void 0:I.time)||"00:00",[$,D]=B.split(":").map(Number),A=$*60+D+60,G=Math.floor(A/60),_=A%60,C=`${G.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`,L={id:xm(),roleLabel:"",slotsBrother:0,slotsSister:0,slotsFlexible:0,shiftStartTime:B,shiftEndTime:C,notes:"",suggestedPOC:[]},W=e.map(Y=>Y.id===M?{...Y,volunteerRoles:[...Y.volunteerRoles,L]}:Y);t(W)},E=M=>{const I=e.find(J=>J.id===M),B=(I==null?void 0:I.time)||"00:00",[$,D]=B.split(":").map(Number),A=$*60+D+60,G=Math.floor(A/60),_=A%60,C=`${G.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`,L=xm(),W={id:L,roleLabel:"",slotsBrother:0,slotsSister:0,slotsFlexible:0,shiftStartTime:B,shiftEndTime:C,notes:"",suggestedPOC:[]},Y=e.map(J=>J.id===M?{...J,volunteerRoles:[...J.volunteerRoles,W]}:J);t(Y),y({itemId:M,roleId:L})},T=(M,I,B,$)=>{const D=e.map(P=>P.id===M?{...P,volunteerRoles:P.volunteerRoles.map(A=>A.id===I?{...A,[B]:$}:A)}:P);t(D)},R=(M,I)=>{const B=e.map($=>$.id===M?{...$,volunteerRoles:$.volunteerRoles.filter(D=>D.id!==I)}:$);t(B)},O=c&&d&&r&&n&&i,F=M=>M.reduce((I,B)=>I+B.slotsBrother+B.slotsSister+B.slotsFlexible,0);return s.jsxs(Pe,{className:"border-stone-200 md:border-umma-200 bg-white shadow-sm md:shadow-none",children:[s.jsxs($t,{className:"pb-3 md:pb-2 px-3 md:px-6",children:[s.jsxs(Lt,{className:"flex items-center space-x-2 text-stone-800 md:text-umma-800 text-lg md:text-base",children:[s.jsx(dr,{className:"w-5 h-5"}),s.jsx("span",{children:"Event Timeline & Roles"})]}),s.jsx("p",{className:"text-sm md:text-xs text-stone-500 md:text-umma-600 mt-1",children:"Build your event schedule and assign volunteer roles."})]}),s.jsx(Ae,{className:"space-y-4 px-3 md:px-6",children:e.length===0?s.jsxs("div",{className:"text-center py-10 md:py-8 bg-stone-50 md:bg-umma-50 rounded-3xl md:rounded-xl border border-stone-200 md:border-umma-200",children:[s.jsx("div",{className:"w-16 h-16 md:w-12 md:h-12 rounded-full bg-stone-100 md:bg-umma-100 mx-auto mb-4 flex items-center justify-center",children:s.jsx(dr,{className:"w-8 h-8 md:w-6 md:h-6 text-stone-400 md:text-umma-400"})}),s.jsx("h3",{className:"text-lg md:text-base font-semibold text-stone-700 md:text-umma-700 mb-2",children:"No activities yet"}),s.jsx("p",{className:"text-stone-500 md:text-umma-600 mb-6 text-sm px-4",children:"Start by adding your first activity with volunteer roles"}),s.jsxs("div",{className:"flex flex-col gap-3 px-6 md:px-0 md:flex-row md:justify-center",children:[s.jsxs(H,{onClick:b,variant:"default",className:"h-14 md:h-11 text-base md:text-sm font-semibold bg-umma-600 hover:bg-umma-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 rounded-3xl md:rounded-lg touch-manipulation",disabled:o,children:[s.jsx(jr,{className:"w-5 h-5 md:w-4 md:h-4 mr-2"}),"Add Activity"]}),i&&s.jsxs(H,{onClick:i,variant:"outline",className:"h-14 md:h-11 text-base md:text-sm font-medium border border-stone-200 md:border-umma-500 text-stone-700 md:text-umma-700 hover:bg-stone-50 md:hover:bg-umma-50 rounded-3xl md:rounded-lg touch-manipulation",disabled:!O||l||o,children:[s.jsx(Cp,{className:"w-5 h-5 md:w-4 md:h-4 mr-2"}),l?"Generating...":"AI Suggestions"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-4",children:e.map((M,I)=>{const B=v(M.volunteerRoles);return s.jsxs("div",{className:"bg-stone-50 md:bg-umma-50 rounded-3xl md:rounded-xl border border-stone-200 md:border-umma-200 overflow-hidden",children:[s.jsxs("div",{className:"p-3 md:p-4 space-y-4 overflow-visible",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 md:hidden",children:[s.jsx("div",{className:"flex-1",children:s.jsx(ue,{value:M.title,onChange:$=>j(M.id,"title",$.target.value),placeholder:"Activity name...",className:"text-lg font-semibold h-12 border-0 bg-transparent focus-visible:ring-0 placeholder:text-stone-400 px-0 md:px-0",disabled:o})}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>k(M.id),className:"h-9 w-9 p-0 text-stone-400 hover:text-red-600 hover:bg-red-50 rounded-full",disabled:o,children:s.jsx(br,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"md:hidden space-y-2",children:[s.jsx(te,{className:"text-sm font-semibold text-stone-600",children:"Time"}),s.jsx(ue,{type:"time",value:M.time,onChange:$=>S(M.id,$.target.value),className:"h-12 border border-stone-200 focus-visible:ring-umma-500 rounded-2xl text-base font-medium",disabled:o})]}),s.jsxs("div",{className:"hidden md:grid grid-cols-1 lg:grid-cols-3 gap-5 sm:gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"Time"}),s.jsx(ls,{value:M.time,onChange:$=>S(M.id,$),className:"text-base sm:text-sm border-umma-200 focus-visible:ring-umma-500",disabled:o})]}),s.jsxs("div",{className:"space-y-2 lg:col-span-2",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"Activity Title"}),s.jsx(ue,{value:M.title,onChange:$=>j(M.id,"title",$.target.value),placeholder:"e.g., Doors Open",className:"text-base sm:text-sm h-12 sm:h-11 border-umma-200 focus-visible:ring-umma-500",disabled:o})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"hidden md:flex justify-between items-center",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"Description"}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>k(M.id),className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",disabled:o,children:s.jsx(br,{className:"w-3 h-3"})})]}),s.jsx(un,{value:M.description,onChange:$=>j(M.id,"description",$.target.value),placeholder:"What happens during this time? (optional)",rows:2,className:"text-base md:text-sm resize-none border-stone-200 md:border-umma-200 focus-visible:ring-umma-500 rounded-2xl md:rounded-lg",disabled:o})]})]}),s.jsxs("div",{className:"border-t border-stone-200 md:border-umma-200 bg-white p-3 md:p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-5 h-5 md:w-4 md:h-4 text-stone-500 md:text-umma-600"}),s.jsx(te,{className:"text-base md:text-sm font-semibold text-stone-700 md:text-umma-700",children:"Roles"}),M.volunteerRoles.length>0&&s.jsxs(ye,{variant:"secondary",className:"text-xs bg-umma-100 text-umma-700 border-0",children:[F(M.volunteerRoles)," volunteers"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>N(M.id),className:"hidden md:flex h-8 px-3 text-xs border-umma-500 text-umma-700 hover:bg-umma-50",disabled:o,children:[s.jsx(vy,{className:"w-3 h-3 mr-1"}),"Add Role"]}),s.jsxs(H,{size:"sm",variant:"default",onClick:()=>E(M.id),className:"md:hidden h-11 px-4 text-sm bg-umma-600 hover:bg-umma-700 text-white font-semibold rounded-3xl touch-manipulation",disabled:o,children:[s.jsx(vy,{className:"w-4 h-4 mr-2"}),"Add Role"]})]})]}),M.volunteerRoles.length===0?s.jsxs("div",{className:"text-center py-6 md:py-4",children:[s.jsx("div",{className:"w-12 h-12 md:w-10 md:h-10 rounded-full bg-stone-100 mx-auto mb-3 flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 md:w-5 md:h-5 text-stone-400"})}),s.jsx("p",{className:"text-sm text-stone-500 md:text-umma-500",children:'No roles yet. Tap "Add Role" to get started.'})]}):s.jsx("div",{className:"space-y-3",children:M.volunteerRoles.map($=>{const D=w($);return B.has($.id),s.jsxs("div",{className:"bg-umma-25 border border-umma-100 rounded-2xl p-3 sm:p-3",children:[s.jsxs("div",{className:"hidden md:block",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-3 overflow-visible",children:[s.jsxs("div",{className:"space-y-2 sm:space-y-1 col-span-2 sm:col-span-2 lg:col-span-1",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"Role Name"}),s.jsx(ue,{value:$.roleLabel,onChange:P=>T(M.id,$.id,"roleLabel",P.target.value),placeholder:"e.g., Greeter",className:"text-base sm:text-sm h-12 sm:h-11 border-umma-200 focus-visible:ring-umma-500",disabled:o})]}),s.jsxs("div",{className:"space-y-2 sm:space-y-1",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"Brother Slots"}),s.jsx(ue,{type:"number",min:"0",step:"1",inputMode:"numeric",value:$.slotsBrother===0?"":$.slotsBrother,onChange:P=>{const A=P.target.value===""?0:parseInt(P.target.value)||0;T(M.id,$.id,"slotsBrother",A)},onBlur:P=>{const A=P.target.value===""?0:parseInt(P.target.value)||0;A!==$.slotsBrother&&T(M.id,$.id,"slotsBrother",A)},className:"text-base sm:text-sm h-12 sm:h-11 border-umma-200 focus-visible:ring-umma-500",disabled:o})]}),s.jsxs("div",{className:"space-y-2 sm:space-y-1",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"Sister Slots"}),s.jsx(ue,{type:"number",min:"0",step:"1",inputMode:"numeric",value:$.slotsSister===0?"":$.slotsSister,onChange:P=>{const A=P.target.value===""?0:parseInt(P.target.value)||0;A!==$.slotsSister&&T(M.id,$.id,"slotsSister",A)},onBlur:P=>{const A=P.target.value===""?0:parseInt(P.target.value)||0;A!==$.slotsSister&&T(M.id,$.id,"slotsSister",A)},className:"text-base sm:text-sm h-12 sm:h-11 border-umma-200 focus-visible:ring-umma-500",disabled:o})]}),s.jsxs("div",{className:"space-y-2 sm:space-y-1",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"Either Gender"}),s.jsx(ue,{type:"number",min:"0",step:"1",inputMode:"numeric",value:$.slotsFlexible===0?"":$.slotsFlexible,onChange:P=>{const A=P.target.value===""?0:parseInt(P.target.value)||0;T(M.id,$.id,"slotsFlexible",A)},onBlur:P=>{const A=P.target.value===""?0:parseInt(P.target.value)||0;A!==$.slotsFlexible&&T(M.id,$.id,"slotsFlexible",A)},className:"text-base sm:text-sm h-12 sm:h-11 border-umma-200 focus-visible:ring-umma-500",disabled:o}),s.jsx("div",{className:"text-sm sm:text-xs text-umma-600 font-medium",children:"Can be filled by either brothers or sisters"})]})]}),s.jsxs("div",{className:"mt-4 sm:mt-3 space-y-3 sm:space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 sm:gap-6",children:[s.jsxs("div",{className:"space-y-2 sm:space-y-1",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"Points of Contact"}),s.jsxs("div",{className:"space-y-3 sm:space-y-2",children:[s.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-1",children:($.suggestedPOC||[]).map((P,A)=>{const G=u.find(_=>_.id===P);return G?s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-1 px-3 py-1.5 sm:px-2 sm:py-1 bg-umma-100 text-umma-700 rounded-md text-sm sm:text-xs",children:[s.jsx("span",{children:G.name}),s.jsx("button",{type:"button",onClick:()=>{const _=($.suggestedPOC||[]).filter((C,L)=>L!==A);T(M.id,$.id,"suggestedPOC",_)},className:"text-umma-500 hover:text-umma-700",disabled:o,children:s.jsx(Ri,{className:"w-3 h-3"})})]},P):null})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(vs,{onValueChange:P=>{if(P&&!($.suggestedPOC||[]).includes(P)){const A=[...$.suggestedPOC||[],P];T(M.id,$.id,"suggestedPOC",A)}},disabled:o,children:[s.jsx(qn,{className:"text-base sm:text-sm border-umma-200 h-12 sm:h-11 px-3 focus-visible:ring-umma-500 flex-1",children:s.jsx(xs,{placeholder:"Add coordinator"})}),s.jsx(Gn,{children:u.filter(P=>{const A=P.role,G=P.source,_=A==="poc"||!A&&(G==="manual"||G==="account_signup"),C=!($.suggestedPOC||[]).includes(P.id);return _&&C}).map(P=>s.jsxs(wr,{value:P.id,children:[P.name," - ",P.phone]},P.id))})]}),m&&s.jsx(H,{size:"sm",variant:"outline",onClick:m,className:"h-11 w-12 p-0 border-umma-200 text-umma-700 hover:bg-umma-50 focus-visible:ring-umma-500 flex-shrink-0",disabled:o,children:s.jsx(jr,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"space-y-2 sm:space-y-1",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"End Time"}),s.jsx(ls,{value:$.shiftEndTime,onChange:P=>T(M.id,$.id,"shiftEndTime",P),className:"text-base sm:text-sm border-umma-200 focus-visible:ring-umma-500",disabled:o}),s.jsx("div",{className:"text-sm sm:text-xs text-umma-600 font-medium",children:"When this role ends"}),p&&D]})]}),s.jsxs("div",{className:"space-y-2 sm:space-y-1",children:[s.jsx(te,{className:"text-sm sm:text-xs text-umma-700 font-semibold",children:"Notes"}),s.jsx(ue,{value:$.notes||"",onChange:P=>T(M.id,$.id,"notes",P.target.value),placeholder:"Special instructions or requirements",className:"text-base sm:text-sm h-12 sm:h-11 border-umma-200 focus-visible:ring-umma-500",disabled:o})]}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsxs(H,{size:"sm",variant:"ghost",onClick:()=>R(M.id,$.id),className:"h-10 sm:h-6 px-3 sm:px-2 text-sm sm:text-xs text-red-500 hover:text-red-700 hover:bg-red-50",disabled:o,children:[s.jsx(Ri,{className:"w-4 h-4 sm:w-3 sm:h-3 mr-1"}),"Remove Role"]})})]})]}),s.jsxs("div",{className:"md:hidden flex items-center justify-between cursor-pointer active:scale-[0.98] -mx-1 -my-1 p-2.5 rounded-2xl transition-all bg-white border border-stone-200 shadow-sm touch-manipulation",onClick:()=>y({itemId:M.id,roleId:$.id}),children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-stone-900 text-base truncate",children:$.roleLabel||s.jsx("span",{className:"text-stone-400 font-normal italic",children:"Untitled Role"})}),s.jsxs("div",{className:"text-sm text-stone-500 flex items-center flex-wrap gap-x-4 gap-y-1 mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1.5 font-medium",children:[s.jsx(Ft,{className:"w-4 h-4 text-umma-500"}),s.jsx("span",{className:"text-stone-700",children:$.slotsBrother+$.slotsSister+$.slotsFlexible}),s.jsx("span",{className:"text-stone-400",children:"needed"})]}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(dr,{className:"w-4 h-4 text-stone-400"}),at($.shiftStartTime)," - ",at($.shiftEndTime)]})]})]}),s.jsx(vv,{className:"w-5 h-5 text-stone-300 ml-2 flex-shrink-0"})]})]},$.id)})})]})]},M.id)})}),s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row",children:[s.jsxs(H,{onClick:b,variant:"outline",className:"flex-1 h-14 md:h-11 text-base md:text-sm font-semibold border border-stone-200 md:border-umma-500 text-stone-700 md:text-umma-700 hover:bg-stone-50 md:hover:bg-umma-100 rounded-3xl md:rounded-lg touch-manipulation",disabled:o,children:[s.jsx(jr,{className:"w-5 h-5 md:w-4 md:h-4 mr-2"}),"Add Another Activity"]}),i&&s.jsxs(H,{onClick:i,variant:"outline",className:"flex-1 h-14 md:h-11 text-base md:text-sm font-medium border border-stone-200 md:border-umma-500 text-stone-700 md:text-umma-700 hover:bg-stone-50 md:hover:bg-umma-50 rounded-3xl md:rounded-lg touch-manipulation",disabled:!O||l||o,children:[s.jsx(Cp,{className:"w-5 h-5 md:w-4 md:h-4 mr-2"}),l?"Generating...":"AI Suggestions"]})]})]})}),s.jsx(IB,{open:!!f,onOpenChange:M=>!M&&y(null),children:s.jsxs(BE,{side:"bottom",className:"h-auto max-h-[85vh] sm:max-w-md overflow-y-auto rounded-t-3xl px-0 pb-0 flex flex-col",children:[s.jsx(zE,{className:"px-5 py-4 border-b border-stone-100 sticky top-0 bg-white z-10",children:s.jsxs("div",{className:"text-left",children:[s.jsx(VE,{className:"text-xl font-bold text-stone-900 text-left",children:"Edit Role"}),s.jsx(WE,{className:"text-sm text-stone-500 mt-0.5 text-left",children:"Configure volunteer requirements"})]})}),s.jsx("div",{className:"px-5 py-5 space-y-6 pb-4 flex-1 overflow-y-auto min-h-0",children:f&&(()=>{const M=e.find(B=>B.id===f.itemId),I=M==null?void 0:M.volunteerRoles.find(B=>B.id===f.roleId);return!M||!I?null:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(te,{className:"text-sm font-semibold text-stone-500 uppercase tracking-wider",children:"Role Name"}),s.jsx(ue,{value:I.roleLabel,onChange:B=>T(M.id,I.id,"roleLabel",B.target.value),placeholder:"e.g., Greeter, Setup Crew...",className:"text-xl font-semibold h-14 border border-stone-200 focus-visible:ring-umma-500 rounded-2xl placeholder:font-normal placeholder:text-stone-400"})]}),s.jsxs("div",{className:"space-y-4 bg-stone-50 rounded-2xl p-4",children:[s.jsx(te,{className:"text-sm font-semibold text-stone-500 uppercase tracking-wider",children:"Volunteers Needed"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"font-semibold text-stone-800 text-base",children:"Brothers"}),s.jsx("div",{className:"text-xs text-stone-500",children:"Male volunteers"})]}),s.jsx(vm,{value:I.slotsBrother,onChange:B=>T(M.id,I.id,"slotsBrother",B),min:0})]}),s.jsx("div",{className:"border-t border-stone-200"}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"font-semibold text-stone-800 text-base",children:"Sisters"}),s.jsx("div",{className:"text-xs text-stone-500",children:"Female volunteers"})]}),s.jsx(vm,{value:I.slotsSister,onChange:B=>T(M.id,I.id,"slotsSister",B),min:0})]}),s.jsx("div",{className:"border-t border-stone-200"}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"font-semibold text-stone-800 text-base",children:"Either Gender"}),s.jsx("div",{className:"text-xs text-stone-500",children:"Flexible assignment"})]}),s.jsx(vm,{value:I.slotsFlexible,onChange:B=>T(M.id,I.id,"slotsFlexible",B),min:0})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-stone-200",children:[s.jsx("span",{className:"text-sm font-semibold text-stone-600",children:"Total volunteers"}),s.jsx("span",{className:"text-lg font-bold text-umma-600",children:I.slotsBrother+I.slotsSister+I.slotsFlexible})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(te,{className:"text-sm font-semibold text-stone-500 uppercase tracking-wider",children:"Shift Time"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-sm text-stone-600 font-medium",children:"Start"}),s.jsx("div",{className:"p-4 bg-stone-100 rounded-xl border border-stone-200 text-stone-700 font-semibold text-base text-center",children:at(I.shiftStartTime)}),s.jsx("p",{className:"text-xs text-stone-400 text-center mb-0",children:"Synced with activity"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-sm text-stone-600 font-medium",children:"End"}),s.jsx(ue,{type:"time",value:I.shiftEndTime,onChange:B=>T(M.id,I.id,"shiftEndTime",B.target.value),className:"h-14 border-2 border-stone-200 rounded-xl text-base font-semibold text-center"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(te,{className:"text-sm font-semibold text-stone-500 uppercase tracking-wider",children:"Notes (Optional)"}),s.jsx(un,{value:I.notes||"",onChange:B=>T(M.id,I.id,"notes",B.target.value),placeholder:"Special instructions, requirements, or details for this role...",rows:3,className:"text-base resize-none border-2 border-stone-200 rounded-xl"})]}),s.jsx("div",{className:"pt-2",children:s.jsxs(H,{variant:"ghost",className:"w-full h-12 text-base text-red-600 hover:text-red-700 hover:bg-red-50 font-medium",onClick:()=>{R(M.id,I.id),y(null)},children:[s.jsx(br,{className:"w-4 h-4 mr-2"}),"Remove Role"]})})]})})()}),s.jsx("div",{className:"mt-auto p-4 pt-3 bg-white border-t border-stone-200 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] shrink-0",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:s.jsx(H,{className:"w-full h-14 text-lg font-bold bg-umma-600 hover:bg-umma-700 text-white shadow-xl rounded-xl touch-manipulation",onClick:()=>y(null),children:"Done"})})]})})]})},FB=({details:e,onDetailsChange:t,isExpanded:r,onToggleExpand:n,disabled:a=!1})=>r?s.jsxs(Pe,{className:"border-umma-200",children:[s.jsxs($t,{children:[s.jsxs(Lt,{className:"flex items-center justify-between text-umma-800",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Df,{className:"w-5 h-5"}),s.jsx("span",{children:"Enhanced Event Details"})]}),s.jsx(H,{onClick:()=>n(!1),variant:"ghost",size:"sm",className:"text-umma-600",disabled:a,children:"Skip for now"})]}),s.jsx("p",{className:"text-sm text-umma-600",children:"These optional details help provide better suggestions for volunteer roles and event planning."})]}),s.jsx(Ae,{className:"space-y-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Df,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Enhanced Details Not Available"}),s.jsx("p",{className:"text-gray-600",children:"Marketing level, age groups, tone, and expected attendance are not available for templates. These fields can be configured when creating individual events."})]})})]}):s.jsx(Pe,{className:"border-umma-200 bg-umma-50/50",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-umma-100 rounded-lg flex items-center justify-center",children:s.jsx(Df,{className:"w-5 h-5 text-umma-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-umma-800",children:"Enhanced Event Details"}),s.jsx("p",{className:"text-sm text-umma-600",children:"Not available for templates"})]})]})})}),UB=({className:e="",size:t=16})=>s.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"currentColor"}),s.jsx("path",{d:"M19 15L19.74 18.26L23 19L19.74 19.74L19 23L18.26 19.74L15 19L18.26 18.26L19 15Z",fill:"currentColor"}),s.jsx("path",{d:"M5 15L5.74 18.26L9 19L5.74 19.74L5 23L4.26 19.74L1 19L4.26 18.26L5 15Z",fill:"currentColor"})]}),BB=({tasks:e,onTasksChange:t,contacts:r,eventDate:n,eventDescription:a,disabled:o=!1})=>{const[i,l]=h.useState(!1),c=[{value:"marketing",label:"Marketing",icon:bO},{value:"supplies",label:"Supplies & Equipment",icon:NO},{value:"sponsors",label:"Sponsorships",icon:pO},{value:"logistics",label:"Logistics",icon:hO},{value:"other",label:"Other",icon:Ft}],d=async()=>{if(!a||!n)return;l(!0),await new Promise(k=>setTimeout(k,1500));const g=a.toLowerCase(),x=new Date(n),w=new Date(x.getTime()-7*24*60*60*1e3),v=new Date(x.getTime()-3*24*60*60*1e3),b=new Date(x.getTime()-1*24*60*60*1e3),j=[];j.push({id:crypto.randomUUID(),title:"Social Media Announcement",description:"Create and post event announcement on social media platforms",category:"marketing",dueDate:w.toISOString().split("T")[0],priority:"medium",status:"todo"}),(g.includes("food")||g.includes("meal")||g.includes("dinner")||g.includes("lunch")||g.includes("iftar")||g.includes("breakfast"))&&(j.push({id:crypto.randomUUID(),title:"Food Quantity Planning",description:"Calculate food quantities based on expected attendance",category:"logistics",dueDate:w.toISOString().split("T")[0],priority:"high",status:"todo"}),j.push({id:crypto.randomUUID(),title:"Catering/Food Procurement",description:"Arrange catering or purchase ingredients for meal preparation",category:"supplies",dueDate:v.toISOString().split("T")[0],priority:"high",status:"todo"})),j.push({id:crypto.randomUUID(),title:"Venue Setup Planning",description:"Plan table arrangements, decorations, and equipment placement",category:"logistics",dueDate:v.toISOString().split("T")[0],priority:"medium",status:"todo"}),j.push({id:crypto.randomUUID(),title:"Equipment Check",description:"Verify all needed equipment is available (microphones, projectors, etc.)",category:"supplies",dueDate:b.toISOString().split("T")[0],priority:"medium",status:"todo"}),(g.includes("prayer")||g.includes("maghrib")||g.includes("islamic")||g.includes("quran"))&&j.push({id:crypto.randomUUID(),title:"Prayer Time Coordination",description:"Confirm prayer times and arrange prayer space setup",category:"logistics",dueDate:b.toISOString().split("T")[0],priority:"high",status:"todo"}),(g.includes("family")||g.includes("children")||g.includes("kids"))&&j.push({id:crypto.randomUUID(),title:"Children's Activity Preparation",description:"Prepare games, activities, and supervision plan for children",category:"supplies",dueDate:v.toISOString().split("T")[0],priority:"medium",status:"todo"}),(g.includes("fundraising")||g.includes("sponsor"))&&j.push({id:crypto.randomUUID(),title:"Sponsor Outreach",description:"Contact potential sponsors and arrange sponsorship agreements",category:"sponsors",dueDate:w.toISOString().split("T")[0],priority:"low",status:"todo"}),t([...e,...j]),l(!1)},u=()=>{const g={id:crypto.randomUUID(),title:"",description:"",category:"other",dueDate:n,priority:"medium",status:"todo"};t([...e,g])},m=(g,x)=>{t(e.map(w=>w.id===g?{...w,...x}:w))},p=g=>{t(e.filter(x=>x.id!==g))},f=g=>{const x=c.find(v=>v.value===g),w=(x==null?void 0:x.icon)||Ft;return s.jsx(w,{className:"w-4 h-4"})},y=g=>{switch(g){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-umma-100 text-umma-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-umma-800",children:"Pre-Event Task Planning"}),s.jsx("p",{className:"text-umma-600 text-sm",children:"Create and assign tasks needed before your event. Add tasks manually or use AI suggestions."})]}),e.length===0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-umma-600",children:[s.jsx(Ft,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Pre-Event Tasks"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(H,{onClick:u,variant:"default",className:"bg-umma-600 hover:bg-umma-700 text-white",disabled:o,children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Add Task Manually"]}),s.jsxs(H,{onClick:d,variant:"outline",className:"border-umma-500 text-umma-700 hover:bg-umma-50",disabled:!a||!n||i||o,children:[s.jsx(UB,{className:"w-4 h-4 mr-2"}),i?"Generating...":"Get AI Suggestions"]})]})]})]}),i&&s.jsxs("div",{className:"text-center py-6",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-umma-600 border-t-transparent rounded-full mx-auto mb-4"}),s.jsx("p",{className:"text-umma-700",children:"Generating recommended tasks based on your event..."})]}),e.length>0&&s.jsx("div",{className:"space-y-4",children:e.map(g=>s.jsx(Pe,{className:"overflow-hidden bg-white border-umma-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-umma-700",children:"Task Title"}),s.jsx(ue,{value:g.title,onChange:x=>m(g.id,{title:x.target.value}),placeholder:"Task title",className:"w-full border-umma-200 focus-visible:ring-umma-500",disabled:o})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-umma-700",children:"Category"}),s.jsxs(vs,{value:g.category,onValueChange:x=>m(g.id,{category:x}),disabled:o,children:[s.jsx(qn,{className:"border-umma-200",children:s.jsx(xs,{})}),s.jsx(Gn,{children:c.map(x=>s.jsx(wr,{value:x.value,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(x.icon,{className:"w-4 h-4"}),s.jsx("span",{children:x.label})]})},x.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-umma-700",children:"Due Date"}),s.jsx(ue,{type:"date",value:g.dueDate,onChange:x=>m(g.id,{dueDate:x.target.value}),className:"border-umma-200 focus-visible:ring-umma-500",disabled:o})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-umma-700",children:"Priority"}),s.jsxs(vs,{value:g.priority,onValueChange:x=>m(g.id,{priority:x}),disabled:o,children:[s.jsx(qn,{className:"border-umma-200",children:s.jsx(xs,{})}),s.jsxs(Gn,{children:[s.jsx(wr,{value:"high",children:"High"}),s.jsx(wr,{value:"medium",children:"Medium"}),s.jsx(wr,{value:"low",children:"Low"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-umma-700",children:"Assignee (Optional)"}),s.jsxs(vs,{value:g.assigneeId||"",onValueChange:x=>m(g.id,{assigneeId:x}),disabled:o,children:[s.jsx(qn,{className:"border-umma-200",children:s.jsx(xs,{placeholder:"Select assignee"})}),s.jsx(Gn,{children:r.map(x=>s.jsx(wr,{value:x.id,children:x.name},x.id))})]})]}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[f(g.category),s.jsx(ye,{className:y(g.priority),children:g.priority})]}),s.jsx(H,{size:"sm",variant:"outline",onClick:()=>p(g.id),className:"border-red-200 hover:border-red-300 hover:bg-red-50 text-red-600",disabled:o,children:s.jsx(br,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-umma-700",children:"Description"}),s.jsx(un,{value:g.description,onChange:x=>m(g.id,{description:x.target.value}),placeholder:"Task description and requirements",rows:2,className:"border-umma-200 focus-visible:ring-umma-500",disabled:o})]})]})})},g.id))}),s.jsxs(H,{variant:"outline",onClick:u,className:"w-full border-umma-200 text-umma-800 hover:bg-umma-50",disabled:o,children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Add Custom Task"]}),e.length>0&&s.jsx(Pe,{className:"bg-umma-50 border-umma-200",children:s.jsxs(Ae,{className:"p-4",children:[s.jsx("h4",{className:"font-medium mb-2 text-umma-800",children:"Task Summary"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-umma-600",children:"Total Tasks:"}),s.jsx("div",{className:"font-semibold text-umma-800",children:e.length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-umma-600",children:"High Priority:"}),s.jsx("div",{className:"font-semibold text-red-600",children:e.filter(g=>g.priority==="high").length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-umma-600",children:"Assigned:"}),s.jsx("div",{className:"font-semibold text-green-600",children:e.filter(g=>g.assigneeId).length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-umma-600",children:"Categories:"}),s.jsx("div",{className:"font-semibold text-umma-800",children:new Set(e.map(g=>g.category)).size})]})]})]})})]})},Bh=()=>{const[e,t]=h.useState([]),[r,n]=h.useState(!1),[a,o]=h.useState(null);h.useEffect(()=>{(async()=>{const{data:{user:x}}=await K.auth.getUser();console.log("useEventTemplates: Got user:",x?{id:x.id,email:x.email}:null),o(x)})()},[]);const i=h.useCallback(async()=>{if(a){n(!0);try{const{data:g,error:x}=await K.from("event_templates").select("*").or(`user_id.eq.${a.id},is_public.eq.true`).is("deleted_at",null).order("created_at",{ascending:!1});if(x)throw x;t(g||[])}catch(g){console.error("Error loading templates:",g),De({title:"Error",description:"Failed to load templates.",variant:"destructive"})}finally{n(!1)}}},[a]),l=h.useCallback(async g=>{try{const{data:x,error:w}=await K.from("event_template_details").select("*").eq("template_id",g).single();if(w&&w.code!=="PGRST116")throw w;const{data:v,error:b}=await K.from("event_template_itineraries").select("*").eq("template_id",g).order("time_slot");if(b)throw b;const{data:j,error:k}=await K.from("event_template_volunteer_roles").select("*").eq("template_id",g);if(k)throw k;const{data:S,error:N}=await K.from("event_template_pre_event_tasks").select("*").eq("template_id",g).order("due_date_offset_days",{ascending:!1});if(N)throw N;const{data:E,error:T}=await K.from("event_templates").select("*").eq("id",g).single();if(T)throw T;return{...E,details:x||void 0,itineraries:v||[],volunteer_roles:j||[],pre_event_tasks:S||[]}}catch(x){return console.error("Error loading template details:",x),De({title:"Error",description:"Failed to load template details.",variant:"destructive"}),null}},[]),c=h.useCallback(async g=>{if(!a)return null;try{const{data:x,error:w}=await K.from("event_templates").insert({name:g.name,description:g.description,user_id:a.id,is_public:g.is_public}).select().single();if(w)throw w;const v=x.id;if(g.details){const{error:b}=await K.from("event_template_details").insert({...g.details,template_id:v});if(b)throw b}if(g.itineraries.length>0){const{error:b}=await K.from("event_template_itineraries").insert(g.itineraries.map(j=>({...j,template_id:v})));if(b)throw b}if(g.volunteer_roles.length>0){const{error:b}=await K.from("event_template_volunteer_roles").insert(g.volunteer_roles.map(j=>({...j,template_id:v})));if(b)throw b}if(g.pre_event_tasks.length>0){const{error:b}=await K.from("event_template_pre_event_tasks").insert(g.pre_event_tasks.map(j=>({...j,template_id:v})));if(b)throw b}return De({title:"Success",description:"Template created successfully."}),await i(),v}catch(x){return console.error("Error creating template:",x),De({title:"Error",description:"Failed to create template.",variant:"destructive"}),null}},[a,i]),d=h.useCallback(async(g,x)=>{if(!a)return!1;try{const{error:w}=await K.from("event_templates").update({name:x.name,description:x.description,is_public:x.is_public}).eq("id",g);if(w)throw console.error("Template update error:",w),w;if(await K.from("event_template_details").delete().eq("template_id",g),await K.from("event_template_itineraries").delete().eq("template_id",g),await K.from("event_template_volunteer_roles").delete().eq("template_id",g),await K.from("event_template_pre_event_tasks").delete().eq("template_id",g),x.details){const{error:v}=await K.from("event_template_details").insert({...x.details,template_id:g});if(v)throw v}if(x.itineraries.length>0){const{error:v}=await K.from("event_template_itineraries").insert(x.itineraries.map(b=>({...b,template_id:g})));if(v)throw v}if(x.volunteer_roles.length>0){const{error:v}=await K.from("event_template_volunteer_roles").insert(x.volunteer_roles.map(b=>({...b,template_id:g})));if(v)throw v}if(x.pre_event_tasks.length>0){const{error:v}=await K.from("event_template_pre_event_tasks").insert(x.pre_event_tasks.map(b=>({...b,template_id:g})));if(v)throw v}return De({title:"Success",description:"Template updated successfully."}),await i(),!0}catch(w){return console.error("Error updating template:",w),De({title:"Error",description:"Failed to update template.",variant:"destructive"}),!1}},[a,i]),u=h.useCallback(async g=>{try{const{error:x}=await K.from("event_templates").delete().eq("id",g);if(x)throw x;De({title:"Success",description:"Template deleted successfully."}),await i()}catch(x){console.error("Error deleting template:",x),De({title:"Error",description:"Failed to delete template.",variant:"destructive"})}},[i]),m=h.useCallback(async()=>{if(!a)return[];try{const{data:g,error:x}=await K.from("event_templates").select("*").eq("user_id",a.id).not("deleted_at","is",null).order("deleted_at",{ascending:!1});if(x)throw x;return g||[]}catch(g){return console.error("Error loading deleted templates:",g),De({title:"Error",description:"Failed to load deleted templates.",variant:"destructive"}),[]}},[a]),p=h.useCallback(async g=>{if(!a)return!1;try{const{error:x}=await K.rpc("soft_delete_event_template",{template_id:g,user_uuid:a.id});if(x)throw console.error("Supabase RPC error:",x),x;return De({title:"Success",description:"Template moved to recently deleted."}),await i(),!0}catch(x){return console.error("Error soft deleting template:",x),De({title:"Error",description:"Failed to move template to recently deleted.",variant:"destructive"}),!1}},[a,i]),f=h.useCallback(async g=>{if(!a)return!1;try{const{error:x}=await K.rpc("restore_event_template",{template_id:g,user_uuid:a.id});if(x)throw x;return De({title:"Success",description:"Template restored successfully."}),await i(),!0}catch(x){return console.error("Error restoring template:",x),De({title:"Error",description:"Failed to restore template.",variant:"destructive"}),!1}},[a,i]),y=h.useCallback(async g=>{try{const{error:x}=await K.from("event_templates").delete().eq("id",g);if(x)throw x;return De({title:"Success",description:"Template permanently deleted."}),!0}catch(x){return console.error("Error permanently deleting template:",x),De({title:"Error",description:"Failed to permanently delete template.",variant:"destructive"}),!1}},[]);return h.useEffect(()=>{a&&i()},[a,i]),{templates:e,isLoading:r,loadTemplates:i,loadTemplateDetails:l,createTemplate:c,updateTemplate:d,deleteTemplate:u,softDeleteTemplate:p,restoreTemplate:f,permanentlyDeleteTemplate:y,loadDeletedTemplates:m,currentUser:a}};function ab({onTemplateSelect:e,disabled:t=!1,compact:r=!1}){var E,T,R;const{templates:n,isLoading:a,loadTemplateDetails:o}=Bh(),[i,l]=h.useState(null),[c,d]=h.useState(!1),[u,m]=h.useState("all"),[p,f]=h.useState(null),[y,g]=h.useState(null),x=async O=>{l(O),d(!1),e(O)},w=async O=>{f(O);const F=await o(O);F&&x(F),f(null)},v=async O=>{const F=await o(O);F&&l(F)},b=O=>{const F=O.toLowerCase(),M="h-5 w-5 text-umma-600";return F.includes("jummah")||F.includes("friday")?s.jsx(Mt,{className:M}):F.includes("workshop")||F.includes("educational")||F.includes("class")?s.jsx(uO,{className:M}):F.includes("social")||F.includes("gathering")||F.includes("community")?s.jsx(Ft,{className:M}):F.includes("fundrais")||F.includes("charity")?s.jsx(v_,{className:M}):F.includes("reviv")||F.includes("spiritual")||F.includes("ruh")?s.jsx(Cp,{className:M}):F.includes("meeting")?s.jsx(x_,{className:M}):s.jsx(fy,{className:M})},j=O=>O.is_public?{icon:s.jsx(xv,{className:"h-3 w-3"}),label:"Public"}:O.user_id==="00000000-0000-0000-0000-000000000000"?{icon:s.jsx(_u,{className:"h-3 w-3"}),label:"System"}:{icon:s.jsx(EO,{className:"h-3 w-3"}),label:"Custom"},k=n.filter(O=>u==="all"?!0:u==="public"?O.is_public:u==="system"?O.user_id==="00000000-0000-0000-0000-000000000000":u==="custom"?!O.is_public&&O.user_id!=="00000000-0000-0000-0000-000000000000":!0),S=O=>{if(!O)return"";const[F,M]=O.split(":"),I=parseInt(F),B=I>=12?"PM":"AM";return`${I>12?I-12:I===0?12:I}:${M} ${B}`},N=[{key:"all",label:"All"},{key:"public",label:"Public"},{key:"custom",label:"Custom"},{key:"system",label:"System"}];return s.jsxs("div",{className:r?"":"space-y-4",children:[s.jsxs("div",{className:re("flex items-center justify-between gap-4",""),children:[!r&&s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Event Templates"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a template to quickly set up your event"})]}),s.jsxs(fr,{open:c,onOpenChange:d,children:[s.jsx(rx,{asChild:!0,children:s.jsxs(H,{variant:"outline",disabled:t||a,className:re("flex items-center gap-2 whitespace-nowrap flex-shrink-0",r?"h-9 border-stone-300 text-stone-700 bg-white shadow-sm":""),children:[s.jsx(En,{className:"h-4 w-4"}),"Browse Templates"]})}),s.jsxs(rr,{className:"max-w-lg w-[92vw] sm:w-full max-h-[85vh] overflow-hidden flex flex-col p-0 rounded-3xl gap-0 border-umma-200",children:[s.jsxs(nr,{className:"border-b border-umma-100 px-4 py-4 flex-shrink-0",children:[s.jsx(sr,{className:"text-xl font-bold text-umma-800",children:"Select Event Template"}),s.jsx(ar,{className:"text-xs text-umma-500 mt-1",children:"Choose a template to get started quickly"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 min-w-0",children:[s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 -mx-1 px-1 scrollbar-hide",children:N.map(O=>s.jsx("button",{onClick:()=>m(O.key),className:re("flex-shrink-0 px-3.5 py-1.5 rounded-full text-sm font-medium transition-all duration-200",u===O.key?"bg-umma-500 text-white shadow-sm":"bg-umma-50 text-umma-700 hover:bg-umma-100"),children:O.label},O.key))}),s.jsxs("div",{className:"grid gap-3",children:[k.map(O=>{var $;const F=j(O),M=y===O.id,B=((($=O.description)==null?void 0:$.length)||0)>80;return s.jsxs(Pe,{className:"group relative cursor-pointer transition-all duration-200 active:scale-[0.98] hover:shadow-md border-0 bg-stone-50/50 shadow-sm rounded-3xl min-w-0",children:[s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsxs(ye,{variant:"secondary",className:"flex items-center gap-1 text-[10px] px-2.5 py-1 bg-white/80 backdrop-blur-sm shadow-sm rounded-full",children:[F.icon,F.label]})}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-2xl bg-white flex items-center justify-center shadow-sm",children:b(O.name)}),s.jsxs("div",{className:"flex-1 min-w-0 pr-14",children:[s.jsx("h4",{className:"font-semibold text-lg text-umma-900 truncate leading-tight mb-1",children:O.name}),O.description&&s.jsxs("div",{className:"",children:[s.jsx("p",{className:re("text-sm text-stone-600 leading-relaxed",!M&&"line-clamp-2"),children:O.description}),B&&s.jsx("button",{onClick:D=>{D.stopPropagation(),g(M?null:O.id)},className:"flex items-center gap-0.5 text-xs font-medium text-umma-600 hover:text-umma-700 mt-1.5 transition-colors",children:M?s.jsxs(s.Fragment,{children:["Show less ",s.jsx(ti,{className:"h-3 w-3"})]}):s.jsxs(s.Fragment,{children:["Show more ",s.jsx(nn,{className:"h-3 w-3"})]})})]})]})]}),s.jsxs("div",{className:"mt-5 flex flex-col gap-2",children:[s.jsx(H,{className:"w-full h-12 font-semibold shadow-sm hover:shadow-md transition-all rounded-2xl text-base",disabled:p===O.id,onClick:()=>w(O.id),children:p===O.id?s.jsxs(s.Fragment,{children:[s.jsx(yO,{className:"h-4 w-4 animate-spin mr-2"}),"Loading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Use Template"]})}),s.jsx("button",{onClick:D=>{D.stopPropagation(),v(O.id)},className:"text-sm font-medium text-stone-500 hover:text-stone-700 text-center py-2 transition-colors",children:"Preview details"})]})]})]},O.id)}),k.length===0&&s.jsxs("div",{className:"text-center py-8 text-umma-500",children:[s.jsx(fy,{className:"h-12 w-12 mx-auto mb-3 opacity-40"}),s.jsx("p",{className:"text-sm",children:"No templates found for this filter"})]})]})]}),s.jsx("div",{className:"flex-shrink-0 border-t border-umma-100 bg-gradient-to-t from-white via-white to-white/95 px-4 py-3",children:s.jsx("button",{onClick:()=>d(!1),className:"w-full py-2.5 text-center text-sm font-medium text-umma-600 hover:text-umma-800 transition-colors rounded-xl hover:bg-umma-50",children:"Continue without template"})})]})]})]}),i&&(r?s.jsxs("div",{className:"w-full mt-2 flex items-center justify-between gap-3 px-4 py-3 bg-stone-100 rounded-2xl border border-stone-200",children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden min-w-0",children:[s.jsx(ye,{variant:"outline",className:"bg-white shrink-0 text-xs font-semibold border-stone-300",children:"Selected"}),s.jsx("span",{className:"font-medium text-sm text-stone-800 truncate",children:i.name})]}),s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"h-8 w-8 p-0 rounded-full hover:bg-stone-200 shrink-0",children:[s.jsx("span",{className:"sr-only",children:"Clear"}),s.jsx(nn,{className:"h-4 w-4 rotate-180 text-stone-500"})]})]}):s.jsxs(Pe,{className:"border-2 border-primary/20 bg-primary/5 mt-4",children:[s.jsx("div",{className:"p-4 pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-5 w-5 text-primary"}),s.jsxs("h4",{className:"text-base font-semibold",children:["Selected: ",i.name]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"h-8 px-3 text-xs",children:"Clear"})]})}),s.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[i.details&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(ps,{className:"h-4 w-4 text-umma-500"}),s.jsx("span",{className:"font-medium text-umma-700",children:"Location:"}),s.jsx("span",{className:"text-umma-600",children:i.details.location})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(dr,{className:"h-4 w-4 text-umma-500"}),s.jsx("span",{className:"font-medium text-umma-700",children:"SMS Times:"}),s.jsxs("span",{className:"text-umma-600",children:[S(i.details.day_before_time)," / ",S(i.details.day_of_time)]})]}),i.details.marketing_level&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ft,{className:"h-4 w-4 text-umma-500"}),s.jsx("span",{className:"font-medium text-umma-700",children:"Marketing:"}),s.jsx(ye,{variant:"outline",className:"capitalize text-xs px-2 py-0.5",children:i.details.marketing_level})]})]}),s.jsxs("div",{className:"space-y-2",children:[i.details.tone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(_u,{className:"h-4 w-4 text-umma-500"}),s.jsx("span",{className:"font-medium text-umma-700",children:"Tone:"}),s.jsx(ye,{variant:"outline",className:"capitalize text-xs px-2 py-0.5",children:i.details.tone})]}),i.details.age_groups&&i.details.age_groups.length>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm flex-wrap",children:[s.jsx(Ft,{className:"h-4 w-4 text-umma-500"}),s.jsx("span",{className:"font-medium text-umma-700",children:"Age Groups:"}),s.jsx("div",{className:"flex gap-1 flex-wrap",children:i.details.age_groups.map((O,F)=>s.jsx(ye,{variant:"secondary",className:"text-xs px-2 py-0.5",children:O.replace("_"," ")},F))})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ft,{className:"h-4 w-4 text-umma-500"}),s.jsx("span",{className:"font-medium text-umma-700",children:"Expected:"}),s.jsx("span",{className:"text-umma-600",children:i.details.expected_attendance})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-3 border-t border-umma-100",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-primary",children:((E=i.itineraries)==null?void 0:E.length)||0}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Itinerary Items"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-primary",children:((T=i.volunteer_roles)==null?void 0:T.length)||0}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Volunteer Roles"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-primary",children:((R=i.pre_event_tasks)==null?void 0:R.length)||0}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Pre-Event Tasks"})]})]})]})]}))]})}var ym="rovingFocusGroup.onEntryFocus",zB={bubbles:!1,cancelable:!0},zc="RovingFocusGroup",[dg,HE,VB]=lh(zc),[WB,tl]=Fr(zc,[VB]),[HB,qB]=WB(zc),qE=h.forwardRef((e,t)=>s.jsx(dg.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(dg.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(GB,{...e,ref:t})})}));qE.displayName=zc;var GB=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,p=h.useRef(null),f=We(t,p),y=$c(o),[g,x]=Kn({prop:i,defaultProp:l??null,onChange:c,caller:zc}),[w,v]=h.useState(!1),b=Mr(d),j=HE(r),k=h.useRef(!1),[S,N]=h.useState(0);return h.useEffect(()=>{const E=p.current;if(E)return E.addEventListener(ym,b),()=>E.removeEventListener(ym,b)},[b]),s.jsx(HB,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:g,onItemFocus:h.useCallback(E=>x(E),[x]),onItemShiftTab:h.useCallback(()=>v(!0),[]),onFocusableItemAdd:h.useCallback(()=>N(E=>E+1),[]),onFocusableItemRemove:h.useCallback(()=>N(E=>E-1),[]),children:s.jsx(ve.div,{tabIndex:w||S===0?-1:0,"data-orientation":n,...m,ref:f,style:{outline:"none",...e.style},onMouseDown:ae(e.onMouseDown,()=>{k.current=!0}),onFocus:ae(e.onFocus,E=>{const T=!k.current;if(E.target===E.currentTarget&&T&&!w){const R=new CustomEvent(ym,zB);if(E.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=j().filter($=>$.focusable),F=O.find($=>$.active),M=O.find($=>$.id===g),B=[F,M,...O].filter(Boolean).map($=>$.ref.current);KE(B,u)}}k.current=!1}),onBlur:ae(e.onBlur,()=>v(!1))})})}),GE="RovingFocusGroupItem",YE=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:o,children:i,...l}=e,c=hr(),d=o||c,u=qB(GE,r),m=u.currentTabStopId===d,p=HE(r),{onFocusableItemAdd:f,onFocusableItemRemove:y,currentTabStopId:g}=u;return h.useEffect(()=>{if(n)return f(),()=>y()},[n,f,y]),s.jsx(dg.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:s.jsx(ve.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:ae(e.onMouseDown,x=>{n?u.onItemFocus(d):x.preventDefault()}),onFocus:ae(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:ae(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const w=QB(x,u.orientation,u.dir);if(w!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=p().filter(j=>j.focusable).map(j=>j.ref.current);if(w==="last")b.reverse();else if(w==="prev"||w==="next"){w==="prev"&&b.reverse();const j=b.indexOf(x.currentTarget);b=u.loop?JB(b,j+1):b.slice(j+1)}setTimeout(()=>KE(b))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:g!=null}):i})})});YE.displayName=GE;var YB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function KB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function QB(e,t,r){const n=KB(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return YB[n]}function KE(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function JB(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var px=qE,gx=YE,vx="Radio",[XB,QE]=Fr(vx),[ZB,e7]=XB(vx),JE=h.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:o,disabled:i,value:l="on",onCheck:c,form:d,...u}=e,[m,p]=h.useState(null),f=We(t,x=>p(x)),y=h.useRef(!1),g=m?d||!!m.closest("form"):!0;return s.jsxs(ZB,{scope:r,checked:a,disabled:i,children:[s.jsx(ve.button,{type:"button",role:"radio","aria-checked":a,"data-state":tk(a),"data-disabled":i?"":void 0,disabled:i,value:l,...u,ref:f,onClick:ae(e.onClick,x=>{a||c==null||c(),g&&(y.current=x.isPropagationStopped(),y.current||x.stopPropagation())})}),g&&s.jsx(ek,{control:m,bubbles:!y.current,name:n,value:l,checked:a,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});JE.displayName=vx;var XE="RadioIndicator",ZE=h.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,o=e7(XE,r);return s.jsx(Jr,{present:n||o.checked,children:s.jsx(ve.span,{"data-state":tk(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});ZE.displayName=XE;var t7="RadioBubbleInput",ek=h.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...a},o)=>{const i=h.useRef(null),l=We(i,o),c=nx(r),d=Ev(t);return h.useEffect(()=>{const u=i.current;if(!u)return;const m=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&f){const y=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(y)}},[c,r,n]),s.jsx(ve.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ek.displayName=t7;function tk(e){return e?"checked":"unchecked"}var r7=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],zh="RadioGroup",[n7]=Fr(zh,[tl,QE]),rk=tl(),nk=QE(),[s7,a7]=n7(zh),sk=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:o,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...p}=e,f=rk(r),y=$c(d),[g,x]=Kn({prop:o,defaultProp:a??null,onChange:m,caller:zh});return s.jsx(s7,{scope:r,name:n,required:i,disabled:l,value:g,onValueChange:x,children:s.jsx(px,{asChild:!0,...f,orientation:c,dir:y,loop:u,children:s.jsx(ve.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:y,...p,ref:t})})})});sk.displayName=zh;var ak="RadioGroupItem",ok=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,o=a7(ak,r),i=o.disabled||n,l=rk(r),c=nk(r),d=h.useRef(null),u=We(t,d),m=o.value===a.value,p=h.useRef(!1);return h.useEffect(()=>{const f=g=>{r7.includes(g.key)&&(p.current=!0)},y=()=>p.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",y)}},[]),s.jsx(gx,{asChild:!0,...l,focusable:!i,active:m,children:s.jsx(JE,{disabled:i,required:o.required,checked:m,...c,...a,name:o.name,ref:u,onCheck:()=>o.onValueChange(a.value),onKeyDown:ae(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:ae(a.onFocus,()=>{var f;p.current&&((f=d.current)==null||f.click())})})})});ok.displayName=ak;var o7="RadioGroupIndicator",ik=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=nk(r);return s.jsx(ZE,{...a,...n,ref:t})});ik.displayName=o7;var lk=sk,ck=ok,i7=ik;const dk=h.forwardRef(({className:e,...t},r)=>s.jsx(lk,{className:re("grid gap-2",e),...t,ref:r}));dk.displayName=lk.displayName;const ug=h.forwardRef(({className:e,...t},r)=>s.jsx(ck,{ref:r,className:re("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(i7,{className:"flex items-center justify-center",children:s.jsx(g_,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ug.displayName=ck.displayName;function l7({eventData:e,itinerary:t,additionalDetails:r,preEventTasks:n,disabled:a=!1,sourceTemplateId:o,sourceTemplateName:i}){var M,I;const l=B=>{if(!B)return"";const[$,D]=B.split(":").map(Number),P=$%12||12,A=$>=12?"PM":"AM";return`${P}:${D.toString().padStart(2,"0")} ${A}`},{createTemplate:c,updateTemplate:d,currentUser:u,templates:m,loadTemplates:p}=Bh(),[f,y]=h.useState(!1),[g,x]=h.useState(!1),[w,v]=h.useState("new"),[b,j]=h.useState(!1),[k,S]=h.useState(""),[N,E]=h.useState({name:"",description:"",is_public:!0});h.useEffect(()=>{o&&i&&(E(B=>({...B,name:i,description:`Updated version of ${i}`})),v("override"),S(o))},[o,i]),h.useEffect(()=>{f&&(p(),o&&i?(E({name:i,description:`Updated version of ${i}`,is_public:!0}),v("override"),S(o)):(E({name:"",description:"",is_public:!0}),v("new"),S("")),j(!1))},[f,o,i,p]);const T=async()=>{if(N.name.trim()){if(w==="override"&&!b){j(!0);return}x(!0);try{const B={name:N.name,description:N.description,is_public:N.is_public,details:{title:e.title||"Event Template",description:e.description||"",location:e.location||"",sms_enabled:e.smsEnabled||!1,day_before_time:e.dayBeforeTime||"19:00",day_of_time:e.dayOfTime||"15:00"},itineraries:t.map(D=>({time_slot:D.time,activity:D.title,description:D.description||"",duration_minutes:30})),volunteer_roles:t.flatMap(D=>(D.volunteerRoles||[]).map(P=>{var A;return{role_label:P.roleLabel,shift_start:P.shiftStartTime,shift_end:P.shiftEndTime,slots_brother:P.slotsBrother,slots_sister:P.slotsSister,slots_flexible:P.slotsFlexible||0,suggested_poc:((A=P.suggestedPOC)==null?void 0:A[0])||"",notes:P.notes||""}})),pre_event_tasks:n.map(D=>({task_description:D.title||D.task_description||D.description||"",assigned_to:Array.isArray(D.assignedTo)?D.assignedTo[0]||"":D.assignedTo||"",due_date_offset_days:D.dueDateOffsetDays||0,status:D.status||"pending"}))};let $=!1;if(w==="override"&&k)$=await d(k,B),$&&console.log("Template updated successfully:",k);else{const D=await c(B);$=!!D,$&&console.log("Template created successfully with ID:",D)}if($)y(!1),E({name:"",description:"",is_public:!1}),v("new"),j(!1),console.log("Template saved successfully");else throw new Error(`Failed to ${w==="override"?"update":"create"} template`)}catch(B){console.error("Error saving template:",B),alert(`Failed to save template: ${B instanceof Error?B.message:"Unknown error"}`)}finally{x(!1)}}},R=()=>e.title||e.location||e.description||t.length>0||n.length>0,O=()=>{const B=N.name.trim(),$=R(),A=w==="override"&&(w==="override"?k&&B&&$:!0)||w==="new"&&(w==="new"?B&&$:!0);return console.log("SaveAsTemplate canSaveTemplate check:",{hasTemplateName:B,hasEventData:$,saveMode:w,selectedTemplateId:k,templateName:N.name,eventTitle:e.title,eventLocation:e.location,eventDescription:e.description,itineraryLength:t.length,preEventTasksLength:n.length,canSave:A,disabled:a,currentUser:u?"available":"not available"}),A},F=B=>{B||(j(!1),v("new")),y(B)};return s.jsxs(fr,{open:f,onOpenChange:F,children:[s.jsx(rx,{asChild:!0,children:s.jsxs(H,{variant:"outline",disabled:a||!R(),className:"flex items-center gap-2",children:[s.jsx(Nu,{className:"h-4 w-4"}),"Save as Template"]})}),s.jsxs(rr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(nr,{children:[s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-5 w-5"}),"Save Event as Template"]}),s.jsx(ar,{children:"Save your current event configuration as a reusable template for future events. You can create a new template or update an existing one."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsx(te,{className:"text-sm font-medium text-gray-700",children:"Save Mode"}),s.jsxs(dk,{value:w,onValueChange:B=>v(B),children:[s.jsxs("div",{className:"flex items-center space-x-2 p-2 hover:bg-white rounded",children:[s.jsx(ug,{value:"override",id:"override"}),s.jsxs(te,{htmlFor:"override",className:"flex items-center gap-2 text-sm cursor-pointer",children:[s.jsx(Af,{className:"h-4 w-4 text-blue-600"}),"Update existing template"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 p-2 hover:bg-white rounded",children:[s.jsx(ug,{value:"new",id:"new"}),s.jsxs(te,{htmlFor:"new",className:"flex items-center gap-2 text-sm cursor-pointer",children:[s.jsx(jr,{className:"h-4 w-4 text-green-600"}),"Create new template"]})]})]}),s.jsx("p",{className:"text-xs text-gray-600 bg-white p-2 rounded border",children:w==="override"?"This will replace the existing template with your current changes.":"This will create a new template, leaving the original unchanged."})]}),w==="override"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-select",children:"Select Template to Update"}),s.jsxs(vs,{value:k,onValueChange:S,children:[s.jsx(qn,{children:s.jsx(xs,{placeholder:"Choose a template..."})}),s.jsx(Gn,{children:m.length===0?s.jsxs("div",{className:"p-4 text-center text-gray-500",children:[s.jsx("p",{children:"No templates available"}),s.jsx("p",{className:"text-xs mt-1",children:"Create a template first to use this option"})]}):m.map(B=>s.jsx(wr,{value:B.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:B.name}),B.description&&s.jsx("span",{className:"text-xs text-gray-500 truncate",children:B.description})]})},B.id))})]}),k?s.jsxs("p",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded border",children:["You're updating: ",s.jsx("span",{className:"font-medium",children:(M=m.find(B=>B.id===k))==null?void 0:M.name})]}):s.jsx("p",{className:"text-xs text-gray-500 bg-blue-50 p-2 rounded border border-blue-200",children:'Please select a template to update, or switch to "Create new template" mode'})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-name",children:"Template Name *"}),s.jsx(ue,{id:"template-name",placeholder:"e.g., Community Gathering",value:N.name,onChange:B=>E($=>({...$,name:B.target.value}))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Give your template a descriptive name."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-public",children:"Visibility"}),s.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[s.jsx(hs,{id:"template-public",checked:N.is_public,onCheckedChange:B=>E($=>({...$,is_public:B}))}),s.jsx(te,{htmlFor:"template-public",className:"text-sm",children:"Make template public"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Public templates can be used by other users."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-description",children:"Description"}),s.jsx(un,{id:"template-description",placeholder:"Describe what this template is for...",value:N.description,onChange:B=>E($=>({...$,description:B.target.value})),rows:2})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{className:"font-medium mb-2",children:"This template will include:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.title&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),'Event title: "',e.title,'"']}),e.location&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Location: ",e.location]}),e.description&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Event description"]}),t.length>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Itinerary: ",t.length," items"]}),t.some(B=>{var $;return(($=B.volunteerRoles)==null?void 0:$.length)>0})&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Volunteer roles: ",t.flatMap(B=>B.volunteerRoles||[]).length," roles"]}),n.length>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Pre-event tasks: ",n.length," tasks"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-gray-500 rounded-full"}),"SMS: ",l(e.dayBeforeTime)," / ",l(e.dayOfTime)]})]}),!e.title&&!e.location&&!e.description&&t.length===0&&n.length===0&&s.jsx("p",{className:"amber-600 mt-2 text-center p-2 bg-amber-50 border border-amber-200 rounded",children:" No event data detected. Please add some information before saving as a template."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(H,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),s.jsxs(H,{onClick:T,disabled:!O()||g,className:"flex items-center gap-2",children:[w==="override"?s.jsx(Af,{className:"h-4 w-4"}):s.jsx(Nu,{className:"h-4 w-4"}),g?"Saving...":w==="override"?"Update Template":"Save Template"]})]}),b&&s.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Af,{className:"h-5 w-5 text-amber-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-amber-800 mb-2",children:"Confirm Template Update"}),s.jsxs("p",{className:"text-sm text-amber-700 mb-3",children:[`You're about to update the existing template "`,(I=m.find(B=>B.id===k))==null?void 0:I.name,'". This will replace the current template with your changes. This action cannot be undone.']}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{size:"sm",variant:"outline",onClick:()=>j(!1),className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Cancel"}),s.jsx(H,{size:"sm",onClick:async()=>{j(!1),await T()},className:"bg-amber-600 hover:bg-amber-700 text-white",children:"Yes, Update Template"})]})]})]})}),!O()&&s.jsx("div",{className:"text-xs text-muted-foreground text-center",children:N.name.trim()?"Add some event data (title, location, description, itinerary, or tasks)":"Enter a template name"}),!1]})]})}var ob=1,c7=.9,d7=.8,u7=.17,wm=.1,bm=.999,h7=.9999,f7=.99,m7=/[\\\/_+.#"@\[\(\{&]/,p7=/[\\\/_+.#"@\[\(\{&]/g,g7=/[\s-]/,uk=/[\s-]/g;function hg(e,t,r,n,a,o,i){if(o===t.length)return a===e.length?ob:f7;var l=`${a},${o}`;if(i[l]!==void 0)return i[l];for(var c=n.charAt(o),d=r.indexOf(c,a),u=0,m,p,f,y;d>=0;)m=hg(e,t,r,n,d+1,o+1,i),m>u&&(d===a?m*=ob:m7.test(e.charAt(d-1))?(m*=d7,f=e.slice(a,d-1).match(p7),f&&a>0&&(m*=Math.pow(bm,f.length))):g7.test(e.charAt(d-1))?(m*=c7,y=e.slice(a,d-1).match(uk),y&&a>0&&(m*=Math.pow(bm,y.length))):(m*=u7,a>0&&(m*=Math.pow(bm,d-a))),e.charAt(d)!==t.charAt(o)&&(m*=h7)),(m<wm&&r.charAt(d-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(d-1)!==n.charAt(o))&&(p=hg(e,t,r,n,d+1,o+2,i),p*wm>m&&(m=p*wm)),m>u&&(u=m),d=r.indexOf(c,d+1);return i[l]=u,u}function ib(e){return e.toLowerCase().replace(uk," ")}function v7(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,hg(e,t,ib(e),ib(t),0,0,{})}var yl='[cmdk-group=""]',jm='[cmdk-group-items=""]',x7='[cmdk-group-heading=""]',hk='[cmdk-item=""]',lb=`${hk}:not([aria-disabled="true"])`,fg="cmdk-item-select",$o="data-value",y7=(e,t,r)=>v7(e,t,r),fk=h.createContext(void 0),Vc=()=>h.useContext(fk),mk=h.createContext(void 0),xx=()=>h.useContext(mk),pk=h.createContext(void 0),gk=h.forwardRef((e,t)=>{let r=Lo(()=>{var C,L;return{search:"",value:(L=(C=e.value)!=null?C:e.defaultValue)!=null?L:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=Lo(()=>new Set),a=Lo(()=>new Map),o=Lo(()=>new Map),i=Lo(()=>new Set),l=vk(e),{label:c,children:d,value:u,onValueChange:m,filter:p,shouldFilter:f,loop:y,disablePointerSelection:g=!1,vimBindings:x=!0,...w}=e,v=hr(),b=hr(),j=hr(),k=h.useRef(null),S=P7();mo(()=>{if(u!==void 0){let C=u.trim();r.current.value=C,N.emit()}},[u]),mo(()=>{S(6,M)},[]);let N=h.useMemo(()=>({subscribe:C=>(i.current.add(C),()=>i.current.delete(C)),snapshot:()=>r.current,setState:(C,L,W)=>{var Y,J,Q,he;if(!Object.is(r.current[C],L)){if(r.current[C]=L,C==="search")F(),R(),S(1,O);else if(C==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let fe=document.getElementById(j);fe?fe.focus():(Y=document.getElementById(v))==null||Y.focus()}if(S(7,()=>{var fe;r.current.selectedItemId=(fe=I())==null?void 0:fe.id,N.emit()}),W||S(5,M),((J=l.current)==null?void 0:J.value)!==void 0){let fe=L??"";(he=(Q=l.current).onValueChange)==null||he.call(Q,fe);return}}N.emit()}},emit:()=>{i.current.forEach(C=>C())}}),[]),E=h.useMemo(()=>({value:(C,L,W)=>{var Y;L!==((Y=o.current.get(C))==null?void 0:Y.value)&&(o.current.set(C,{value:L,keywords:W}),r.current.filtered.items.set(C,T(L,W)),S(2,()=>{R(),N.emit()}))},item:(C,L)=>(n.current.add(C),L&&(a.current.has(L)?a.current.get(L).add(C):a.current.set(L,new Set([C]))),S(3,()=>{F(),R(),r.current.value||O(),N.emit()}),()=>{o.current.delete(C),n.current.delete(C),r.current.filtered.items.delete(C);let W=I();S(4,()=>{F(),(W==null?void 0:W.getAttribute("id"))===C&&O(),N.emit()})}),group:C=>(a.current.has(C)||a.current.set(C,new Set),()=>{o.current.delete(C),a.current.delete(C)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:v,inputId:j,labelId:b,listInnerRef:k}),[]);function T(C,L){var W,Y;let J=(Y=(W=l.current)==null?void 0:W.filter)!=null?Y:y7;return C?J(C,r.current.search,L):0}function R(){if(!r.current.search||l.current.shouldFilter===!1)return;let C=r.current.filtered.items,L=[];r.current.filtered.groups.forEach(Y=>{let J=a.current.get(Y),Q=0;J.forEach(he=>{let fe=C.get(he);Q=Math.max(fe,Q)}),L.push([Y,Q])});let W=k.current;B().sort((Y,J)=>{var Q,he;let fe=Y.getAttribute("id"),_e=J.getAttribute("id");return((Q=C.get(_e))!=null?Q:0)-((he=C.get(fe))!=null?he:0)}).forEach(Y=>{let J=Y.closest(jm);J?J.appendChild(Y.parentElement===J?Y:Y.closest(`${jm} > *`)):W.appendChild(Y.parentElement===W?Y:Y.closest(`${jm} > *`))}),L.sort((Y,J)=>J[1]-Y[1]).forEach(Y=>{var J;let Q=(J=k.current)==null?void 0:J.querySelector(`${yl}[${$o}="${encodeURIComponent(Y[0])}"]`);Q==null||Q.parentElement.appendChild(Q)})}function O(){let C=B().find(W=>W.getAttribute("aria-disabled")!=="true"),L=C==null?void 0:C.getAttribute($o);N.setState("value",L||void 0)}function F(){var C,L,W,Y;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let J=0;for(let Q of n.current){let he=(L=(C=o.current.get(Q))==null?void 0:C.value)!=null?L:"",fe=(Y=(W=o.current.get(Q))==null?void 0:W.keywords)!=null?Y:[],_e=T(he,fe);r.current.filtered.items.set(Q,_e),_e>0&&J++}for(let[Q,he]of a.current)for(let fe of he)if(r.current.filtered.items.get(fe)>0){r.current.filtered.groups.add(Q);break}r.current.filtered.count=J}function M(){var C,L,W;let Y=I();Y&&(((C=Y.parentElement)==null?void 0:C.firstChild)===Y&&((W=(L=Y.closest(yl))==null?void 0:L.querySelector(x7))==null||W.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function I(){var C;return(C=k.current)==null?void 0:C.querySelector(`${hk}[aria-selected="true"]`)}function B(){var C;return Array.from(((C=k.current)==null?void 0:C.querySelectorAll(lb))||[])}function $(C){let L=B()[C];L&&N.setState("value",L.getAttribute($o))}function D(C){var L;let W=I(),Y=B(),J=Y.findIndex(he=>he===W),Q=Y[J+C];(L=l.current)!=null&&L.loop&&(Q=J+C<0?Y[Y.length-1]:J+C===Y.length?Y[0]:Y[J+C]),Q&&N.setState("value",Q.getAttribute($o))}function P(C){let L=I(),W=L==null?void 0:L.closest(yl),Y;for(;W&&!Y;)W=C>0?k7(W,yl):T7(W,yl),Y=W==null?void 0:W.querySelector(lb);Y?N.setState("value",Y.getAttribute($o)):D(C)}let A=()=>$(B().length-1),G=C=>{C.preventDefault(),C.metaKey?A():C.altKey?P(1):D(1)},_=C=>{C.preventDefault(),C.metaKey?$(0):C.altKey?P(-1):D(-1)};return h.createElement(ve.div,{ref:t,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:C=>{var L;(L=w.onKeyDown)==null||L.call(w,C);let W=C.nativeEvent.isComposing||C.keyCode===229;if(!(C.defaultPrevented||W))switch(C.key){case"n":case"j":{x&&C.ctrlKey&&G(C);break}case"ArrowDown":{G(C);break}case"p":case"k":{x&&C.ctrlKey&&_(C);break}case"ArrowUp":{_(C);break}case"Home":{C.preventDefault(),$(0);break}case"End":{C.preventDefault(),A();break}case"Enter":{C.preventDefault();let Y=I();if(Y){let J=new Event(fg);Y.dispatchEvent(J)}}}}},h.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:O7},c),Vh(e,C=>h.createElement(mk.Provider,{value:N},h.createElement(fk.Provider,{value:E},C))))}),w7=h.forwardRef((e,t)=>{var r,n;let a=hr(),o=h.useRef(null),i=h.useContext(pk),l=Vc(),c=vk(e),d=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:i==null?void 0:i.forceMount;mo(()=>{if(!d)return l.item(a,i==null?void 0:i.id)},[d]);let u=xk(a,o,[e.value,e.children,o],e.keywords),m=xx(),p=ja(S=>S.value&&S.value===u.current),f=ja(S=>d||l.filter()===!1?!0:S.search?S.filtered.items.get(a)>0:!0);h.useEffect(()=>{let S=o.current;if(!(!S||e.disabled))return S.addEventListener(fg,y),()=>S.removeEventListener(fg,y)},[f,e.onSelect,e.disabled]);function y(){var S,N;g(),(N=(S=c.current).onSelect)==null||N.call(S,u.current)}function g(){m.setState("value",u.current,!0)}if(!f)return null;let{disabled:x,value:w,onSelect:v,forceMount:b,keywords:j,...k}=e;return h.createElement(ve.div,{ref:Ir(o,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!p,"data-disabled":!!x,"data-selected":!!p,onPointerMove:x||l.getDisablePointerSelection()?void 0:g,onClick:x?void 0:y},e.children)}),b7=h.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...o}=e,i=hr(),l=h.useRef(null),c=h.useRef(null),d=hr(),u=Vc(),m=ja(f=>a||u.filter()===!1?!0:f.search?f.filtered.groups.has(i):!0);mo(()=>u.group(i),[]),xk(i,l,[e.value,e.heading,c]);let p=h.useMemo(()=>({id:i,forceMount:a}),[a]);return h.createElement(ve.div,{ref:Ir(l,t),...o,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},r&&h.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),Vh(e,f=>h.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},h.createElement(pk.Provider,{value:p},f))))}),j7=h.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=h.useRef(null),o=ja(i=>!i.search);return!r&&!o?null:h.createElement(ve.div,{ref:Ir(a,t),...n,"cmdk-separator":"",role:"separator"})}),N7=h.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,o=xx(),i=ja(d=>d.search),l=ja(d=>d.selectedItemId),c=Vc();return h.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),h.createElement(ve.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:i,onChange:d=>{a||o.setState("search",d.target.value),r==null||r(d.target.value)}})}),_7=h.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,o=h.useRef(null),i=h.useRef(null),l=ja(d=>d.selectedItemId),c=Vc();return h.useEffect(()=>{if(i.current&&o.current){let d=i.current,u=o.current,m,p=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let f=d.offsetHeight;u.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return p.observe(d),()=>{cancelAnimationFrame(m),p.unobserve(d)}}},[]),h.createElement(ve.div,{ref:Ir(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},Vh(e,d=>h.createElement("div",{ref:Ir(i,c.listInnerRef),"cmdk-list-sizer":""},d)))}),S7=h.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:o,container:i,...l}=e;return h.createElement(Rh,{open:r,onOpenChange:n},h.createElement(Oh,{container:i},h.createElement(Xi,{"cmdk-overlay":"",className:a}),h.createElement(Zi,{"aria-label":e.label,"cmdk-dialog":"",className:o},h.createElement(gk,{ref:t,...l}))))}),C7=h.forwardRef((e,t)=>ja(r=>r.filtered.count===0)?h.createElement(ve.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),E7=h.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...o}=e;return h.createElement(ve.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Vh(e,i=>h.createElement("div",{"aria-hidden":!0},i)))}),Zr=Object.assign(gk,{List:_7,Item:w7,Input:N7,Group:b7,Separator:j7,Dialog:S7,Empty:C7,Loading:E7});function k7(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function T7(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function vk(e){let t=h.useRef(e);return mo(()=>{t.current=e}),t}var mo=typeof window>"u"?h.useEffect:h.useLayoutEffect;function Lo(e){let t=h.useRef();return t.current===void 0&&(t.current=e()),t}function ja(e){let t=xx(),r=()=>e(t.snapshot());return h.useSyncExternalStore(t.subscribe,r,r)}function xk(e,t,r,n=[]){let a=h.useRef(),o=Vc();return mo(()=>{var i;let l=(()=>{var d;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=n.map(d=>d.trim());o.value(e,l,c),(i=t.current)==null||i.setAttribute($o,l),a.current=l}),a}var P7=()=>{let[e,t]=h.useState(),r=Lo(()=>new Map);return mo(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}};function R7(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Vh({asChild:e,children:t},r){return e&&h.isValidElement(t)?h.cloneElement(R7(t),{ref:t.ref},r(t.props.children)):r(t)}var O7={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const yk=h.forwardRef(({className:e,...t},r)=>s.jsx(Zr,{ref:r,className:re("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));yk.displayName=Zr.displayName;const D7=h.forwardRef(({className:e,...t},r)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(Pi,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(Zr.Input,{ref:r,className:re("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));D7.displayName=Zr.Input.displayName;const wk=h.forwardRef(({className:e,...t},r)=>s.jsx(Zr.List,{ref:r,className:re("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));wk.displayName=Zr.List.displayName;const A7=h.forwardRef((e,t)=>s.jsx(Zr.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));A7.displayName=Zr.Empty.displayName;const bk=h.forwardRef(({className:e,...t},r)=>s.jsx(Zr.Group,{ref:r,className:re("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));bk.displayName=Zr.Group.displayName;const I7=h.forwardRef(({className:e,...t},r)=>s.jsx(Zr.Separator,{ref:r,className:re("-mx-1 h-px bg-border",e),...t}));I7.displayName=Zr.Separator.displayName;const jk=h.forwardRef(({className:e,...t},r)=>s.jsx(Zr.Item,{ref:r,className:re("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));jk.displayName=Zr.Item.displayName;const Nm=[{value:"8200 Outer Dr W, Detroit, MI 48219",label:"WCCC",description:"Wayne County Community College"},{value:"31333 Southfield Rd, Beverly Hills, MI 48025",label:"UMMA Old Building",description:"Beverly Hills campus"},{value:"26899 Northwestern Hwy, Southfield, MI 48033",label:"UMMA New Building",description:"Southfield campus"}];function mg({value:e,onChange:t,placeholder:r="Type to search or enter custom location...",disabled:n=!1,className:a}){const[o,i]=h.useState(!1),[l,c]=h.useState(e),d=h.useRef(null),u=h.useRef(!1);h.useEffect(()=>{c(e)},[e]);const m=b=>{t(b),c(b),i(!1)},p=()=>{l.trim()&&(t(l.trim()),i(!1))},f=b=>{c(b),o||i(!0)},y=()=>{i(!0)},g=()=>{i(!0),setTimeout(()=>{d.current&&d.current.focus()},10)},x=()=>{setTimeout(()=>{u.current||(l.trim()&&!Nm.some(b=>b.value===l)&&p(),i(!1))},200)},w=Nm.filter(b=>{const j=l.trim().toLowerCase();return j.length===0?!0:b.label.toLowerCase().includes(j)||b.value.toLowerCase().includes(j)||b.description.toLowerCase().includes(j)}),v=Nm.some(b=>b.value===e);return s.jsxs("div",{className:re("flex flex-col space-y-2",a),children:[s.jsxs(NE,{open:o,onOpenChange:i,children:[s.jsx(_E,{asChild:!0,children:s.jsx("div",{className:"relative cursor-text",onClick:g,children:s.jsxs("div",{className:"flex items-center space-x-2 min-w-0 w-full border border-stone-200 rounded-2xl bg-white/80 px-5 py-3 focus-within:ring-2 focus-within:ring-[#5c5b2f]/20 focus-within:border-[#5c5b2f] transition-all hover:border-stone-300 hover:shadow-sm shadow-sm",children:[s.jsx(ps,{className:"h-4 w-4 text-gray-500 shrink-0"}),s.jsx("input",{ref:d,type:"text",value:l,onChange:b=>f(b.target.value),onFocus:y,onBlur:x,placeholder:r,disabled:n,className:"flex-1 min-w-0 border-none outline-none bg-transparent text-sm font-semibold text-umma-700 placeholder:text-gray-400 cursor-text"})]})})}),s.jsx(ix,{className:"w-full p-0",align:"start",side:"bottom",sideOffset:4,onOpenAutoFocus:b=>b.preventDefault(),onCloseAutoFocus:b=>b.preventDefault(),onPointerDown:()=>{u.current=!0},onPointerUp:()=>{setTimeout(()=>{u.current=!1},0)},children:s.jsx(yk,{children:s.jsx(wk,{children:w.length>0&&s.jsx(bk,{heading:"Predefined Locations",children:w.map(b=>s.jsxs(jk,{value:b.value,onSelect:()=>m(b.value),onMouseDown:j=>j.preventDefault(),className:"cursor-pointer",children:[s.jsx(kc,{className:re("mr-2 h-4 w-4",e===b.value?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:b.label}),s.jsx("span",{className:"text-sm text-gray-500",children:b.description})]})]},b.value))})})})})]}),e&&s.jsxs("div",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[s.jsx(ps,{className:"h-3 w-3"}),s.jsx("span",{children:v?"Predefined location":"Custom location"})]})]})}const ea=({options:e,value:t,onChange:r,placeholder:n="Select an option",className:a,disabled:o=!1})=>{const[i,l]=h.useState(!1),[c,d]=h.useState(e.find(f=>f.value===t)),u=h.useRef(null);h.useEffect(()=>{d(e.find(f=>f.value===t))},[t,e]),h.useEffect(()=>{const f=y=>{u.current&&!u.current.contains(y.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const m=f=>{d(f),r(f.value),l(!1)},p=()=>{o||l(!i)};return s.jsxs("div",{className:re("relative",a),ref:u,children:[s.jsxs("button",{type:"button",onClick:p,disabled:o,className:re("w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm text-left","focus:outline-none focus:ring-2 focus:ring-[#5c5b2f] focus:border-[#5c5b2f]","hover:border-gray-400 transition-colors duration-200 cursor-pointer","flex items-center justify-between",o&&"opacity-50 cursor-not-allowed bg-gray-50"),children:[s.jsx("span",{className:c?"text-gray-900":"text-gray-500",children:c?c.label:n}),s.jsx(nn,{className:re("w-4 h-4 text-gray-400 transition-transform duration-200",i&&"rotate-180")})]}),i&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:e.map(f=>s.jsxs("button",{type:"button",onClick:()=>m(f),className:re("w-full px-3 py-2 text-sm text-left hover:bg-gray-50 transition-colors duration-150","flex items-center justify-between",f.value===t&&"bg-[#5c5b2f] text-white hover:bg-[#4a4a28]"),children:[s.jsx("span",{className:"truncate",children:f.label}),f.value===t&&s.jsx(kc,{className:"w-4 h-4"})]},f.value))})]})},Nk=h.forwardRef(({className:e,statusText:t,primaryAction:r,secondaryAction:n,children:a,...o},i)=>s.jsx("div",{ref:i,className:re("fixed bottom-0 left-0 right-0 z-50","bg-white/95 md:bg-white/80 backdrop-blur-xl border-t border-stone-200 md:border-umma-100","px-4 py-4 md:py-3","shadow-[0_-4px_20px_rgba(0,0,0,0.1)] md:shadow-[0_-4px_20px_rgba(0,0,0,0.08)]","animate-in slide-in-from-bottom-2 duration-300",e),style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},...o,children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex md:hidden flex-col gap-3",children:[r&&s.jsx(H,{onClick:r.onClick,disabled:r.disabled||r.loading,className:"w-full h-12 font-bold text-lg bg-umma-600 hover:bg-umma-700 shadow-sm hover:shadow-md transition-all active:scale-[0.98] touch-manipulation rounded-3xl",children:r.loading?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),s.jsx("span",{children:"Saving..."})]}):r.label}),s.jsxs("div",{className:"flex items-center justify-between",children:[n&&s.jsx(H,{variant:"ghost",size:"sm",onClick:n.onClick,className:"text-stone-600 h-10 px-3 text-sm touch-manipulation font-medium",children:n.label}),s.jsx("div",{className:"flex items-center gap-2 flex-1 justify-center",children:t&&s.jsx("span",{className:"text-xs text-stone-500 font-medium truncate",children:t})}),a]})]}),s.jsxs("div",{className:"hidden md:flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t&&s.jsx("span",{className:"text-sm text-umma-600 font-medium truncate",children:t}),a]}),s.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[n&&s.jsx(H,{variant:"ghost",size:"sm",onClick:n.onClick,className:"text-stone-600 h-9 px-3 text-sm touch-manipulation",children:n.label}),r&&s.jsx(H,{onClick:r.onClick,disabled:r.disabled||r.loading,className:"min-w-[120px] h-11 px-6 font-semibold text-sm shadow-lg hover:shadow-xl transition-all active:scale-[0.97] touch-manipulation",children:r.loading?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),s.jsx("span",{children:"Saving..."})]}):r.label})]})]})]})}));Nk.displayName="StickyBottomBar";const Ua=h.forwardRef(({className:e,title:t,description:r,icon:n,collapsible:a=!1,defaultExpanded:o=!0,children:i,...l},c)=>{const[d,u]=h.useState(o);return s.jsxs("div",{ref:c,className:re("rounded-3xl bg-stone-50/50 border border-stone-200/50 shadow-sm","p-3 md:p-6 transition-all duration-200",a&&!d&&"py-3 md:py-4 hover:bg-stone-50/80",e),...l,children:[(t||r)&&s.jsxs("div",{className:re("flex items-center gap-3",a&&"cursor-pointer select-none active:opacity-70",d&&"mb-4"),onClick:a?()=>u(!d):void 0,children:[n&&s.jsx("div",{className:"text-umma-500",children:n}),s.jsxs("div",{className:"flex-1 min-w-0",children:[t&&s.jsx("h3",{className:"text-sm md:text-xs font-semibold uppercase tracking-wider text-stone-500",children:t}),r&&s.jsx("p",{className:"text-sm text-stone-500 mt-0.5",children:r})]}),a&&s.jsxs("div",{className:"flex items-center gap-1",children:[!d&&s.jsx("span",{className:"text-xs text-umma-600 font-medium mr-1 hidden md:inline",children:"Expand"}),s.jsx("div",{className:re("w-8 h-8 md:w-7 md:h-7 rounded-full flex items-center justify-center transition-all",d?"bg-stone-200/50 text-stone-500":"bg-umma-100 text-umma-600"),children:d?s.jsx(nn,{className:"w-5 h-5 md:w-4 md:h-4 rotate-180 transition-transform"}):s.jsx(jr,{className:"w-5 h-5 md:w-4 md:h-4"})})]})]}),s.jsx("div",{className:re("transition-all duration-200 overflow-hidden",a&&!d?"max-h-0 opacity-0":"max-h-[2000px] opacity-100"),children:i})]})});Ua.displayName="SectionCard";function M7(e,t=[]){let r=[];function n(o,i){const l=h.createContext(i);l.displayName=o+"Context";const c=r.length;r=[...r,i];const d=m=>{var w;const{scope:p,children:f,...y}=m,g=((w=p==null?void 0:p[e])==null?void 0:w[c])||l,x=h.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:x,children:f})};d.displayName=o+"Provider";function u(m,p){var g;const f=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,y=h.useContext(f);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=r.map(i=>h.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,$7(a,...t)]}function $7(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var L7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_k=L7.reduce((e,t)=>{const r=_h(`Primitive.${t}`),n=h.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),yx="Progress",wx=100,[F7]=M7(yx),[U7,B7]=F7(yx),Sk=h.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:o=z7,...i}=e;(a||a===0)&&!cb(a)&&console.error(V7(`${a}`,"Progress"));const l=cb(a)?a:wx;n!==null&&!db(n,l)&&console.error(W7(`${n}`,"Progress"));const c=db(n,l)?n:null,d=zu(c)?o(c,l):void 0;return s.jsx(U7,{scope:r,value:c,max:l,children:s.jsx(_k.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":zu(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":kk(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});Sk.displayName=yx;var Ck="ProgressIndicator",Ek=h.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=B7(Ck,r);return s.jsx(_k.div,{"data-state":kk(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});Ek.displayName=Ck;function z7(e,t){return`${Math.round(e/t*100)}%`}function kk(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function zu(e){return typeof e=="number"}function cb(e){return zu(e)&&!isNaN(e)&&e>0}function db(e,t){return zu(e)&&!isNaN(e)&&e<=t&&e>=0}function V7(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${wx}\`.`}function W7(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${wx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Tk=Sk,H7=Ek;const Pk=h.forwardRef(({className:e,value:t,...r},n)=>s.jsx(Tk,{ref:n,className:re("relative h-4 w-full overflow-hidden rounded-full bg-umma-100",e),...r,children:s.jsx(H7,{className:"h-full w-full flex-1 bg-umma-500 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Pk.displayName=Tk.displayName;const Rk=h.forwardRef(({className:e,steps:t,currentStep:r,onStepClick:n,showProgressBar:a=!0,showStepLabel:o=!0,...i},l)=>{const c=(r-1)/(t.length-1)*100,d=t.find(u=>u.number===r);return s.jsxs("div",{ref:l,className:re("space-y-2 md:space-y-3",e),...i,children:[a&&s.jsx("div",{className:"relative hidden md:block",children:s.jsx(Pk,{value:c,className:"h-1.5 bg-stone-200"})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2 md:gap-2 flex-1 justify-center md:justify-start",children:t.map((u,m)=>s.jsxs(h.Fragment,{children:[s.jsx("button",{type:"button",onClick:()=>n==null?void 0:n(u.number),disabled:!n,className:re("w-10 h-10 md:w-8 md:h-8 rounded-full flex items-center justify-center","text-sm md:text-sm font-bold md:font-semibold transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-umma-400 focus:ring-offset-2","touch-manipulation",r===u.number?"bg-umma-600 text-white shadow-lg ring-4 ring-umma-100":r>u.number?"bg-umma-500 text-white shadow-md":"bg-stone-200 text-stone-500",n&&"cursor-pointer active:scale-95"),title:u.title,children:r>u.number?s.jsx(kc,{className:"w-5 h-5 md:w-4 md:h-4",strokeWidth:3}):u.number}),m<t.length-1&&s.jsx("div",{className:re("flex-1 max-w-[40px] md:max-w-[48px] lg:max-w-[60px] h-1 md:h-0.5 rounded-full transition-colors duration-200",r>u.number?"bg-umma-500":"bg-stone-200")})]},u.number))}),o&&d&&s.jsxs("div",{className:"text-right hidden md:block ml-4",children:[s.jsxs("span",{className:"text-sm font-medium text-stone-700",children:["Step ",r," of ",t.length]}),s.jsxs("span",{className:"text-sm text-stone-500 ml-1.5",children:[" ",d.title]})]})]}),o&&d&&s.jsxs("div",{className:"md:hidden text-center pt-1",children:[s.jsxs("span",{className:"text-xs font-semibold text-umma-600 uppercase tracking-wide",children:["Step ",r]}),s.jsx("span",{className:"text-xs text-stone-400 mx-1.5",children:""}),s.jsx("span",{className:"text-xs font-medium text-stone-600",children:d.title})]})]})});Rk.displayName="StepProgressBar";const ub=()=>{var nl,Ux,Bx,zx,Vx,Wx;const e=Xr(),{eventId:t}=Mv(),r=Yi(),[n,a]=h.useState(1),[o,i]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState(!0),[m,p]=h.useState(!1),[f,y]=h.useState(!1),[g,x]=h.useState({firstName:"",lastName:"",phone:"",gender:""}),[w,v]=h.useState(!1),[b,j]=h.useState(null),[k,S]=h.useState(null),[N,E]=h.useState(!1),[T,R]=h.useState(!0),[O,F]=h.useState(!0),[M,I]=h.useState(!1),[B,$]=h.useState(!1),[D,P]=h.useState(!1),[A,G]=h.useState(!1),[_,C]=h.useState(!1),[L,W]=h.useState(null),[Y,J]=h.useState(""),[Q,he]=h.useState(!1),[fe,_e]=h.useState(null),[z,Ne]=h.useState({title:"",date:"",startTime:"",endTime:"",location:"",description:"",status:"draft",isPublic:!0,smsEnabled:!1,dayBeforeTime:"19:00",dayOfTime:"15:00"}),rt=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Date.now().toString(36)+Math.random().toString(36).substring(2),it=(V,q)=>!V||!q?!1:V>=q,_r=V=>{const q=new Date(V);return q.setDate(q.getDate()+1),q.toISOString().split("T")[0]},Ut=V=>V?V.length===8?V.substring(0,5):V:"00:00",[He,or]=h.useState([]),[Wt,gn]=h.useState({}),[ir,Rn]=h.useState([]),[Br,ts]=h.useState(!1),Z=V=>{or(V),ts(!1)},ce=()=>{let V=!1;for(const q of He){for(const ie of q.volunteerRoles)if(ie.shiftStartTime&&ie.shiftEndTime){const Ue=parseInt(ie.shiftStartTime.split(":")[0])*60+parseInt(ie.shiftStartTime.split(":")[1]);if(parseInt(ie.shiftEndTime.split(":")[0])*60+parseInt(ie.shiftEndTime.split(":")[1])<=Ue){V=!0;break}}if(V)break}return V?(De({title:"Validation Error",description:"Please fix the time validation errors before proceeding.",variant:"destructive"}),!1):!0},{softDeleteEvent:Re,isDeleting:Fe}=sx();h.useEffect(()=>{const V=q=>{if(A)return q.preventDefault(),q.returnValue="You have unsaved changes. Are you sure you want to leave?","You have unsaved changes. Are you sure you want to leave?"};return window.addEventListener("beforeunload",V),()=>window.removeEventListener("beforeunload",V)},[A]),h.useEffect(()=>{const V=ie=>{ie.key==="Shift"&&P(!0)},q=ie=>{ie.key==="Shift"&&P(!1)};return window.addEventListener("keydown",V),window.addEventListener("keyup",q),()=>{window.removeEventListener("keydown",V),window.removeEventListener("keyup",q)}},[]);const Me=(V,q)=>{const[ie,Ue]=V.split(":").map(Number),At=ie*60+Ue+q,nt=Math.floor(At/60)%24,qe=At%60;return`${nt.toString().padStart(2,"0")}:${qe.toString().padStart(2,"0")}`},Dt=V=>{const q=(V||"").replace(/[^\d+]/g,"");return q.startsWith("+")?q:/^1\d{10}$/.test(q)?`+${q}`:/^\d{10}$/.test(q)?`+1${q}`:q?`+${q}`:""},Je=V=>{const q=V.getFullYear(),ie=(V.getMonth()+1).toString().padStart(2,"0"),Ue=V.getDate().toString().padStart(2,"0");return`${q}-${ie}-${Ue}`},Nt=V=>new Date(`${V}T12:00:00`),be=V=>!d||V<=2?V:V===3?5:V,vt=(()=>{const V=[{number:1,title:"Basic Info",description:"Event details"},{number:2,title:"Event Planning",description:"Timeline & volunteer roles"},{number:3,title:"Enhanced Details",description:"Preferences & details"},{number:4,title:"Pre-Event Tasks",description:"Planning & assignments"},{number:5,title:"Review & Publish",description:"Final settings"}];return d?V.filter(q=>q.number!==3&&q.number!==4).map((q,ie)=>({...q,number:ie+1})):V})(),U=be(n),X=()=>U===1?z.title&&z.date&&z.startTime&&z.endTime&&z.location:!0,se=()=>{if(n<vt.length){if(U===1&&z.startTime&&z.endTime&&z.startTime>=z.endTime)if(it(z.startTime,z.endTime))console.log("Overnight event detected - allowing multi-day event");else{De({title:"Invalid time",description:"End time must be after start time.",variant:"destructive"});return}if(U===2&&(ts(!0),!ce()))return;A?(_e(`step-${n+1}`),he(!0)):a(n+1)}},de=()=>{n>1&&(U===3&&ts(!1),A?(_e(`step-${n-1}`),he(!0)):a(n-1))},$e=V=>{V===1||X()?A?(_e(`step-${V}`),he(!0)):a(V):De({title:"Cannot proceed",description:"Please complete the required fields before navigating to other steps.",variant:"destructive"})},ct=async V=>{try{const{data:q,error:ie}=await K.from("contacts").select("*").order("created_at",{ascending:!1});if(ie){console.error("Error loading contacts:",ie);return}i((q==null?void 0:q.map(Ue=>({...Ue,source:Ue.source})))||[])}catch(q){console.error("Error loading contacts:",q)}},Ye=V=>V.split(" ").map(q=>q.charAt(0).toUpperCase()+q.slice(1).toLowerCase()).join(" "),dt=h.useCallback(V=>{x(q=>({...q,firstName:V}))},[]),Ct=h.useCallback(V=>{x(q=>({...q,lastName:V}))},[]),le=h.useCallback(V=>{x(q=>({...q,phone:V}))},[]),Ce=h.useCallback(V=>{x(q=>({...q,gender:V}))},[]),Ie=async()=>{if((!g.firstName||!g.lastName||!g.phone||!g.gender)&&De({title:"Error",description:"Please fill in first name, last name, phone number, and select a gender.",variant:"destructive"}),!b){De({title:"Error",description:"You must be logged in to add a contact.",variant:"destructive"});return}v(!0);try{const V=Dt(g.phone),{data:q,error:ie}=await K.from("contacts").select("*").eq("phone",V).maybeSingle();if(ie)throw ie;if(q)if(q.role==="volunteer"){const{data:qe,error:Ht}=await K.from("contacts").update({role:"poc"}).eq("id",q.id).select().maybeSingle();if(Ht)throw Ht;if(!qe){De({title:"Update Failed",description:"Found the contact but could not upgrade them. You may not have permission.",variant:"destructive"});return}if(qe){i(ke=>ke.some(Ke=>Ke.id===qe.id)?ke.map(Ke=>Ke.id===qe.id?qe:Ke):[...ke,qe]),De({title:"Contact Upgraded",description:`${qe.name} has been upgraded from Volunteer to Point of Contact.`}),x({firstName:"",lastName:"",phone:"",gender:""}),p(!1);return}}else if(q.role==="poc"||q.role==="admin"){De({title:"Contact Already Exists",description:`${q.name} is already a Point of Contact.`,variant:"default"}),i(qe=>qe.some(ke=>ke.id===q.id)?qe:[...qe,q]),x({firstName:"",lastName:"",phone:"",gender:""}),p(!1);return}else{De({title:"Contact Exists",description:`This number belongs to ${q.name} (${q.role}).`,variant:"destructive"});return}const Ue={name:Ye(`${g.firstName} ${g.lastName}`),phone:V,gender:g.gender,user_id:b.id,source:"manual",role:"poc"},{data:At,error:nt}=await K.from("contacts").insert(Ue).select().maybeSingle();if(nt)throw nt;At&&i(qe=>[...qe,At]),x({firstName:"",lastName:"",phone:"",gender:""}),p(!1),De({title:"Contact Added",description:"New contact has been added successfully."})}catch(V){console.error("Error adding contact:",V);let q="Failed to add contact.";(V==null?void 0:V.code)==="23505"?q="This phone number is already registered to a contact you cannot access.":V instanceof Error&&(q=V.message),De({title:(V==null?void 0:V.code)==="23505"?"Contact Exists":"Error",description:q,variant:"destructive"})}finally{v(!1)}},Oe=async()=>{if(!z.title||!z.description||!z.startTime||!z.endTime)return;c(!0),await new Promise(yt=>setTimeout(yt,1500));const V=z.description.toLowerCase(),q=z.startTime,ie=z.endTime,[Ue,At]=q.split(":").map(Number),[nt,qe]=ie.split(":").map(Number),Ht=nt-Ue+(qe-At)/60,ke=[],Be=Me(q,-60);ke.push({id:crypto.randomUUID(),time:Be,title:"Setup & Preparation",description:"Arrange venue, setup equipment, and prepare materials",volunteerRoles:[]});const Ke=V.includes("food")||V.includes("meal")||V.includes("dinner")||V.includes("lunch")||V.includes("iftar")||V.includes("breakfast");if(ke.push({id:crypto.randomUUID(),time:Me(q,-15),title:"Registration & Welcome",description:"Guest check-in and welcome",volunteerRoles:[]}),ke.push({id:crypto.randomUUID(),time:q,title:z.title+" Begins",description:"Main event activities commence",volunteerRoles:[]}),Ht>2){const yt=Me(q,Math.floor(Ht*30));Ke?ke.push({id:crypto.randomUUID(),time:yt,title:"Meal Service",description:"Serve refreshments or meals to attendees",volunteerRoles:[]}):ke.push({id:crypto.randomUUID(),time:yt,title:"Break & Networking",description:"Short break for attendees to network and refresh",volunteerRoles:[]})}ke.push({id:crypto.randomUUID(),time:Me(ie,-15),title:"Closing Remarks",description:"Final announcements and thank you",volunteerRoles:[]}),ke.push({id:crypto.randomUUID(),time:Me(ie,15),title:"Cleanup & Breakdown",description:"Clean venue and pack up equipment",volunteerRoles:[]}),or(ke),c(!1),De({title:"Itinerary Generated!",description:"Generated a custom itinerary based on your event details."})},ft=V=>{if(V){if(V.details&&Ne(q=>({...q,title:V.details.title||q.title,description:V.details.description||q.description,location:V.details.location||q.location,smsEnabled:V.details.sms_enabled??q.smsEnabled,dayBeforeTime:V.details.day_before_time||q.dayBeforeTime,dayOfTime:V.details.day_of_time||q.dayOfTime})),V.itineraries&&V.itineraries.length>0||V.volunteer_roles&&V.volunteer_roles.length>0){const q=qe=>Ut(qe),ie=(V.itineraries||[]).map(qe=>({id:rt(),time:q(qe.time_slot),title:qe.activity,description:qe.description||"",volunteerRoles:[]})),Ue=new Map;(V.volunteer_roles||[]).forEach(qe=>{const Ht=q(qe.shift_start),ke=Ue.get(Ht)||[];ke.push(qe),Ue.set(Ht,ke)});const nt=ie.map(qe=>{const ke=(Ue.get(qe.time)||[]).map(Be=>(console.log("Template role slot values:",{role_label:Be.role_label,slots_brother:Be.slots_brother,slots_sister:Be.slots_sister,slots_flexible:Be.slots_flexible,types:{brother:typeof Be.slots_brother,sister:typeof Be.slots_sister,flexible:typeof Be.slots_flexible}}),{id:rt(),roleLabel:Be.role_label,slotsBrother:Number(Be.slots_brother)||0,slotsSister:Number(Be.slots_sister)||0,slotsFlexible:Number(Be.slots_flexible??0)||0,shiftStartTime:q(Be.shift_start)||"00:00",shiftEndTime:q(Be.shift_end_time||Be.shift_end)||"01:00",notes:Be.notes,suggestedPOC:Be.suggested_poc?[Be.suggested_poc]:[]}));return{...qe,volunteerRoles:ke}});or(nt)}if(V.pre_event_tasks&&V.pre_event_tasks.length>0){const q=V.pre_event_tasks.map(ie=>({id:rt(),description:ie.task_description,assignedTo:ie.assigned_to||"",dueDate:ie.due_date_offset_days?new Date(Date.now()+ie.due_date_offset_days*24*60*60*1e3):new Date,status:ie.status}));Rn(q)}De({title:"Template Applied!",description:`Template "${V.name}" has been applied to your event.`})}},tt=async V=>{if(!b){De({title:"Error",description:"You must be logged in to create events.",variant:"destructive"});return}if(!z.title||!z.date||!z.startTime||!z.endTime||!z.location){De({title:"Validation Error",description:"Please fill in all required fields (Title, Date, Start Time, End Time, Location).",variant:"destructive"});return}if(z.startTime>=z.endTime){if(!it(z.startTime,z.endTime)){De({title:"Validation Error",description:"End time must be after start time.",variant:"destructive"});return}console.log("Overnight event detected - allowing multi-day event")}E(!0);try{if(console.log(" Current user:",b),!b||!b.id)throw new Error("User not authenticated or missing user ID");const q={title:z.title,description:z.description,location:z.location,start_datetime:nm(z.date,z.startTime),end_datetime:it(z.startTime,z.endTime)?nm(_r(z.date),z.endTime):nm(z.date,z.endTime),status:V,is_public:z.isPublic,sms_enabled:z.smsEnabled,day_before_time:z.dayBeforeTime,day_of_time:z.dayOfTime};if(console.log(" Event payload validation:",{title:q.title,location:q.location,start_datetime:q.start_datetime,end_datetime:q.end_datetime,status:q.status,created_by:b.id}),!q.title||!q.location||!q.start_datetime||!q.end_datetime)throw new Error("Missing required fields in event payload");let ie=t;if(t){const{error:yt}=await K.from("events").update(q).eq("id",t);if(yt)throw yt}else{const yt={...q,created_by:b.id};console.log(" Creating new event with payload:",yt);const{data:ge,error:ze}=await K.from("events").insert(yt).select().single();if(console.log(" Event insert result:",{newEvent:ge,error:ze}),ze)throw console.error(" Event insert error:",ze),ze;if(!ge||!ge.id)throw console.error(" No data returned from event insert"),new Error("Failed to create event");ie=ge.id}if(ie&&He.length>0){const yt=He.reduce((_t,Qe)=>{var Cr;return _t+(((Cr=Qe.volunteerRoles)==null?void 0:Cr.length)||0)},0);console.log("DEBUG: Before save -",He.length,"items with",yt,"roles");const ge=He.filter((_t,Qe,Cr)=>{const xe=`${_t.time}__${_t.title}`;return Qe===Cr.findIndex(On=>`${On.time}__${On.title}`===xe)}).map(_t=>({..._t,volunteerRoles:(_t.volunteerRoles||[]).filter((Qe,Cr,xe)=>{const On=Array.isArray(Qe.suggestedPOC)?Qe.suggestedPOC.slice().sort().join(","):Qe.suggestedPOC||"",Zh=`${Qe.roleLabel}__${Qe.slotsBrother}__${Qe.slotsSister}__${Qe.notes??""}__${On}`;return Cr===xe.findIndex(rs=>{const al=Array.isArray(rs.suggestedPOC)?rs.suggestedPOC.slice().sort().join(","):rs.suggestedPOC||"";return`${rs.roleLabel}__${rs.slotsBrother}__${rs.slotsSister}__${rs.notes??""}__${al}`===Zh})})}));console.log("DEBUG: After save -",ge.length,"items with",ge.reduce((_t,Qe)=>{var Cr;return _t+(((Cr=Qe.volunteerRoles)==null?void 0:Cr.length)||0)},0),"roles"),console.log(" Saving",ge.length,"itinerary items (normalized)");const{data:ze}=await K.from("itineraries").select("id").eq("event_id",ie),Ve=new Set((ze||[]).map(_t=>_t.id)),{data:Sr}=await K.from("volunteer_roles").select("id").eq("event_id",ie),Xt=new Set((Sr||[]).map(_t=>_t.id)),vn=new Set,sl=new Map;for(let _t=0;_t<ge.length;_t++){const Qe=ge[_t];console.log(` Saving itinerary item ${_t+1}:`,Qe.time,Qe.title);let Cr=Qe.id;if(Ve.has(Qe.id)){const{error:xe}=await K.from("itineraries").update({time_slot:Qe.time,activity:Qe.title,description:Qe.description,duration_minutes:60}).eq("id",Qe.id);if(xe)throw console.error(" Error updating itinerary item:",xe),xe}else{const{data:xe,error:On}=await K.from("itineraries").insert({event_id:ie,time_slot:Qe.time,activity:Qe.title,description:Qe.description,duration_minutes:60}).select().single();if(On)throw console.error(" Error inserting itinerary item:",On),On;if(!xe||!xe.id)throw console.error(" No data returned from itinerary insert"),new Error("Failed to create itinerary item");Cr=xe.id,sl.set(Qe.id,xe.id)}if(Qe.volunteerRoles&&Qe.volunteerRoles.length>0){console.log(` Saving ${Qe.volunteerRoles.length} roles for ${Qe.time}`);for(const xe of Qe.volunteerRoles){console.log(" Role before save:",{id:xe.id,roleLabel:xe.roleLabel,shiftStartTime:xe.shiftStartTime,shiftEndTime:xe.shiftEndTime,type:typeof xe.shiftStartTime,isEmpty:xe.shiftStartTime==="",isNull:xe.shiftStartTime===null,isUndefined:xe.shiftStartTime===void 0}),(!xe.shiftStartTime||xe.shiftStartTime==="")&&(console.warn(" Role missing shiftStartTime, setting default:",xe.roleLabel),xe.shiftStartTime="00:00"),(!xe.shiftEndTime||xe.shiftEndTime==="")&&(console.warn(" Role missing shiftEndTime, setting default:",xe.roleLabel),xe.shiftEndTime="01:00");const On=xn=>{const[js,qc]=(xn||"00:00").split(":").map(Number),tf=Number.isFinite(js)?js:0,Gc=Number.isFinite(qc)?qc:0;return tf*60+Gc},Zh=xn=>{const js=Math.max(0,Math.min(1439,xn)),qc=Math.floor(js/60),tf=js%60,Gc=PT=>PT.toString().padStart(2,"0");return`${Gc(qc)}:${Gc(tf)}`},rs=On(xe.shiftStartTime);let al=On(xe.shiftEndTime);al<=rs&&(al=rs+60,xe.shiftEndTime=Zh(al),console.warn(" Adjusted shiftEndTime to be after start for role:",xe.roleLabel,xe.shiftEndTime));const ef=sl.get(Qe.id)||Cr;if(Xt.has(xe.id)){const{error:xn}=await K.from("volunteer_roles").update({role_label:xe.roleLabel,slots_brother:xe.slotsBrother,slots_sister:xe.slotsSister,slots_flexible:xe.slotsFlexible,notes:xe.notes,suggested_poc:xe.suggestedPOC,shift_start:Qe.time,shift_end_time:xe.shiftEndTime,shift_end:xe.shiftEndTime,itinerary_id:ef}).eq("id",xe.id);if(xn)throw console.error(" Error updating role:",xn),xn;vn.add(xe.id)}else{const{data:xn,error:js}=await K.from("volunteer_roles").insert({event_id:ie,role_label:xe.roleLabel,slots_brother:xe.slotsBrother,slots_sister:xe.slotsSister,slots_flexible:xe.slotsFlexible,notes:xe.notes,suggested_poc:xe.suggestedPOC,shift_start:Qe.time,shift_end_time:xe.shiftEndTime,shift_end:xe.shiftEndTime,itinerary_id:ef}).select().single();if(js)throw console.error(" Error inserting role:",js),js;xn!=null&&xn.id&&vn.add(xn.id)}}}}const pr=(Sr||[]).map(_t=>_t.id).filter(_t=>!vn.has(_t));if(pr.length>0){const{data:_t}=await K.from("volunteers").select("role_id").in("role_id",pr),Qe=new Set((_t||[]).map(xe=>xe.role_id)),Cr=pr.filter(xe=>!Qe.has(xe));if(Cr.length>0){const{error:xe}=await K.from("volunteer_roles").delete().in("id",Cr);xe&&console.error(" Error deleting stale roles:",xe)}}console.log(" Successfully saved all data")}S(new Date);const Ue=JSON.stringify({eventData:z,itinerary:He,additionalDetails:Wt,preEventTasks:ir});J(Ue),G(!1);const nt=((yt,ge)=>{const ze=yt.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),Ve=ge.slice(-4);return`${ze}-${Ve}`})(z.title,ie),qe=`${window.location.origin}/${nt}`,{generateShareableLink:Ht,generateQRCodeUrl:ke}=await SC(async()=>{const{generateShareableLink:yt,generateQRCodeUrl:ge}=await Promise.resolve().then(()=>pT);return{generateShareableLink:yt,generateQRCodeUrl:ge}},void 0),Be=Ht(qe,ie,"direct","link","event_signup"),Ke=ke(qe,ie);try{await navigator.clipboard.writeText(Be),De({title:V==="published"?"Event Published!":"Draft Saved!",description:V==="published"?"Your event has been published and the volunteer signup link has been copied to clipboard!":"Your progress has been saved as a draft and the event link has been copied to clipboard!"})}catch(yt){console.error("Failed to copy to clipboard:",yt),De({title:V==="published"?"Event Published!":"Draft Saved!",description:V==="published"?"Your event has been published and is now live.":"Your progress has been saved as a draft."})}e("/dashboard")}catch(q){console.error("Error saving event:",q);let ie="Failed to save event. Please try again.";q&&typeof q=="object"&&"message"in q?ie=`Error: ${q.message}`:q&&typeof q=="string"&&(ie=`Error: ${q}`),De({title:"Error",description:ie,variant:"destructive"})}finally{E(!1)}},ut=h.useCallback(()=>JSON.stringify({eventData:z,itinerary:He,additionalDetails:Wt,preEventTasks:ir}),[z,He,Wt,ir]),ht=h.useCallback(()=>{const q=ut()!==Y;return G(q),q},[ut,Y]),xt=h.useCallback(async()=>{if(!(!b||!ht())){C(!0);try{await tt("draft");const V=ut();J(V),G(!1),console.log("Auto-saved draft successfully")}catch(V){console.error("Auto-save failed:",V)}finally{C(!1)}}},[b,ht,tt,ut]);h.useEffect(()=>{if(b&&A){const V=setInterval(xt,3e4);return W(V),()=>{V&&clearInterval(V)}}},[b,A,xt]),h.useEffect(()=>{Y&&ht()},[z,He,Wt,ir,ht]),h.useEffect(()=>{const V=q=>{if(A)return q.preventDefault(),q.returnValue="You have unsaved changes. Are you sure you want to leave?","You have unsaved changes. Are you sure you want to leave?"};return window.addEventListener("beforeunload",V),()=>window.removeEventListener("beforeunload",V)},[A]);const Jt=async()=>{if(t){try{await Re(t,z.title),De({title:"Event Deleted",description:"Event has been moved to recently deleted."}),e("/dashboard")}catch{De({title:"Error",description:"Failed to delete event.",variant:"destructive"})}y(!1)}},Da=()=>{Ne({title:"Community Iftar 2025",date:"2024-03-15",startTime:"18:00",endTime:"21:00",location:"Islamic Center Main Hall",description:"Join us for a community iftar dinner during Ramadan. We'll break our fast together and enjoy traditional foods.",status:"draft",isPublic:!0,smsEnabled:!0,dayBeforeTime:"19:00",dayOfTime:"15:00"}),or([{id:crypto.randomUUID(),time:"16:00",title:"Setup & Preparation",description:"Tables, chairs, decorations setup",volunteerRoles:[{id:crypto.randomUUID(),roleLabel:"Setup Coordinator",slotsBrother:2,slotsSister:1,slotsFlexible:0,shiftStartTime:"16:00",shiftEndTime:"17:00",notes:"Oversee table and chair arrangement",suggestedPOC:[]}]},{id:crypto.randomUUID(),time:"17:30",title:"Volunteer Briefing",description:"Brief all volunteers on their roles",volunteerRoles:[]},{id:crypto.randomUUID(),time:"18:00",title:"Guest Registration",description:"Welcome and check-in guests",volunteerRoles:[{id:crypto.randomUUID(),roleLabel:"Greeter",slotsBrother:1,slotsSister:2,slotsFlexible:0,shiftStartTime:"18:00",shiftEndTime:"19:00",notes:"Welcome guests at entrance",suggestedPOC:[]}]},{id:crypto.randomUUID(),time:"19:30",title:"Maghrib Prayer",description:"Community prayer time",volunteerRoles:[]},{id:crypto.randomUUID(),time:"19:45",title:"Iftar Dinner Service",description:"Serve meals to community",volunteerRoles:[{id:crypto.randomUUID(),roleLabel:"Food Server",slotsBrother:3,slotsSister:4,slotsFlexible:0,shiftStartTime:"19:45",shiftEndTime:"20:45",notes:"Serve food to guests",suggestedPOC:[]}]},{id:crypto.randomUUID(),time:"20:30",title:"Community Program",description:"Brief talks and announcements",volunteerRoles:[]},{id:crypto.randomUUID(),time:"21:00",title:"Cleanup & Breakdown",description:"Clean venue and pack up",volunteerRoles:[{id:crypto.randomUUID(),roleLabel:"Cleanup Crew",slotsBrother:2,slotsSister:2,slotsFlexible:0,shiftStartTime:"21:00",shiftEndTime:"22:00",notes:"Clean tables and pack up supplies",suggestedPOC:[]}]}]),gn({}),De({title:"Test data loaded!",description:"Form has been filled with sample event data including itinerary and volunteer roles."})},rl=h.useCallback(async V=>{try{console.log(" Starting fresh load for event:",V),I(!0),or([]),Ne({title:"",date:"",startTime:"",endTime:"",location:"",description:"",status:"draft",isPublic:!0,smsEnabled:!1,dayBeforeTime:"19:00",dayOfTime:"15:00"});const{data:q,error:ie}=await K.from("events").select("*").eq("id",V).single();if(ie)throw ie;if(q){console.log(" Loaded event data"),Ne({title:q.title,date:q.start_datetime.split("T")[0],startTime:new Date(q.start_datetime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),endTime:new Date(q.end_datetime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),location:q.location,description:q.description||"",status:q.status,isPublic:q.is_public??!0,smsEnabled:q.sms_enabled,dayBeforeTime:q.day_before_time,dayOfTime:q.day_of_time});const{data:Ue,error:At}=await K.from("itineraries").select("*").eq("event_id",V).order("time_slot",{ascending:!0});if(At)throw At;const{data:nt,error:qe}=await K.from("volunteer_roles").select("*").eq("event_id",V);if(qe)throw qe;console.log(" Raw volunteer roles loaded:",nt==null?void 0:nt.map(ge=>({id:ge.id,role_label:ge.role_label,shift_start:ge.shift_start,itinerary_id:ge.itinerary_id}))),console.log(" Raw data loaded:",{itinerary:(Ue==null?void 0:Ue.length)||0,roles:(nt==null?void 0:nt.length)||0});const Ht=new Map;for(const ge of Ue||[]){const ze=`${ge.time_slot}__${ge.activity}`,Ve=Ht.get(ze)||[];Ve.push(ge),Ht.set(ze,Ve)}const ke=new Map,Be=new Map;for(const ge of nt||[])if(ge.itinerary_id){const ze=ge.itinerary_id,Ve=ke.get(ze)||[];Ve.find(Sr=>Sr.id===ge.id)||Ve.push(ge),ke.set(ze,Ve)}else if(ge.shift_start){const ze=ge.shift_start,Ve=Be.get(ze)||[];Ve.find(Sr=>Sr.id===ge.id)||Ve.push(ge),Be.set(ze,Ve)}console.log(" Role mapping:",{byItineraryId:Array.from(ke.keys()),byTime:Array.from(Be.keys()),totalRoles:(nt==null?void 0:nt.length)||0});let Ke=Array.from(Ht.entries()).map(([ge,ze])=>{let Ve=ze[0];const Sr=ze.find(pr=>ke.has(pr.id));Sr&&(Ve=Sr);const Xt=Ve;let vn=[];vn=ke.get(Xt.id)||[],vn.length===0?(vn=Be.get(Xt.time_slot)||[],console.log(` ${Xt.time_slot}: Using time-based fallback for ${vn.length} roles`)):console.log(` ${Xt.time_slot}: Using itinerary_id link for ${vn.length} roles`);const sl=vn.map(pr=>({id:pr.id,roleLabel:pr.role_label,slotsBrother:Number(pr.slots_brother)||0,slotsSister:Number(pr.slots_sister)||0,slotsFlexible:Number(pr.slots_flexible??0)||0,shiftStartTime:pr.shift_start||"00:00",shiftEndTime:pr.shift_end_time||pr.shift_end||"01:00",notes:pr.notes||"",suggestedPOC:pr.suggested_poc||[]}));return console.log(` ${Xt.time_slot}: ${Xt.activity}  ${sl.length} roles`),{id:Xt.id,time:Xt.time_slot,title:Xt.activity,description:Xt.description||"",volunteerRoles:sl}}),yt=Ke.reduce((ge,ze)=>{var Ve;return ge+(((Ve=ze.volunteerRoles)==null?void 0:Ve.length)||0)},0);if(console.log("DEBUG: Loaded data -",Ke.length,"items with",yt,"roles"),Ke.forEach((ge,ze)=>{var Ve,Sr;console.log(` Item ${ze+1}: ${ge.time} - ${ge.title} (${((Ve=ge.volunteerRoles)==null?void 0:Ve.length)||0} roles)`),(Sr=ge.volunteerRoles)==null||Sr.forEach((Xt,vn)=>{console.log(`   Role ${vn+1}: ${Xt.roleLabel} (${Xt.slotsBrother}/${Xt.slotsSister}) - POCs: ${Array.isArray(Xt.suggestedPOC)?Xt.suggestedPOC.length:"legacy"}`)})}),((Ue==null?void 0:Ue.length)||0)===0&&((nt==null?void 0:nt.length)||0)>0){console.log(" No itineraries found but roles exist. Building fallback itinerary from roles.");const ge={};for(const ze of nt||[]){const Ve=ze.shift_start||"00:00";ge[Ve]||(ge[Ve]=[]),ge[Ve].push(ze)}Ke=Object.keys(ge).sort().map(ze=>({id:rt(),time:ze,title:"Volunteer Shift",description:"",volunteerRoles:ge[ze].map(Ve=>({id:Ve.id,roleLabel:Ve.role_label,slotsBrother:Number(Ve.slots_brother)||0,slotsSister:Number(Ve.slots_sister)||0,slotsFlexible:Number(Ve.slots_flexible??0)||0,shiftStartTime:Ve.shift_start||"00:00",shiftEndTime:Ve.shift_end_time||Ve.shift_end||"",notes:Ve.notes||"",suggestedPOC:Ve.suggested_poc||[]}))})),yt=Ke.reduce((ze,Ve)=>{var Sr;return ze+(((Sr=Ve.volunteerRoles)==null?void 0:Sr.length)||0)},0),console.log(" Fallback itinerary built -",Ke.length,"items with",yt,"roles")}or(Ke)}}catch(q){console.error(" Error loading event data:",q),De({title:"Error",description:"Failed to load event data.",variant:"destructive"})}finally{I(!1)}},[De]);return h.useEffect(()=>{(async()=>{const{data:{user:q}}=await K.auth.getUser();if(!q){e("/login");return}j(q),await ct(q.id)})()},[e]),h.useEffect(()=>{(async()=>{var q,ie,Ue;if((q=r.state)!=null&&q.templateId&&b){console.log("Loading template with ID:",r.state.templateId);try{const{data:At,error:nt}=await K.from("event_templates").select(`
              *,
              event_template_details(*),
              event_template_itineraries(*),
              event_template_pre_event_tasks(*)
            `).eq("id",r.state.templateId).single();if(nt)throw nt;console.log("Template base data:",At),console.log("Template user_id:",At.user_id),console.log("Template is_public:",At.is_public),console.log("Template deleted_at:",At.deleted_at);const{data:qe,error:Ht}=await K.from("event_template_volunteer_roles").select("*").eq("template_id",r.state.templateId);Ht?console.error("Error loading volunteer roles:",Ht):console.log("Volunteer roles loaded separately:",qe);const ke={...At,event_template_volunteer_roles:qe||[]};if(nt)throw nt;if(console.log("Template data loaded:",ke),console.log("Template volunteer roles:",ke.event_template_volunteer_roles),console.log("Template itineraries:",ke.event_template_itineraries),ke){if((ie=ke.event_template_details)!=null&&ie[0]){const Be=ke.event_template_details[0];console.log("Applying template details:",Be),Ne(Ke=>({...Ke,title:Be.title||Ke.title,description:Be.description||Ke.description,location:Be.location||Ke.location,smsEnabled:Be.sms_enabled??Ke.smsEnabled,dayBeforeTime:Be.day_before_time||Ke.dayBeforeTime,dayOfTime:Be.day_of_time||Ke.dayOfTime}))}if(ke.event_template_itineraries||ke.event_template_volunteer_roles){console.log("Applying template itineraries:",ke.event_template_itineraries),console.log("Applying template volunteer roles:",ke.event_template_volunteer_roles);const Be=ke.event_template_volunteer_roles?ke.event_template_volunteer_roles.map(ge=>({id:rt(),roleLabel:ge.role_label,slotsBrother:Number(ge.slots_brother)||0,slotsSister:Number(ge.slots_sister)||0,slotsFlexible:Number(ge.slots_flexible??0)||0,shiftStartTime:ge.shift_start||"00:00",shiftEndTime:ge.shift_end_time||ge.shift_end||"01:00",notes:ge.notes,suggestedPOC:ge.suggested_poc?[ge.suggested_poc]:[]})):[];console.log("Converted volunteer roles:",Be);const Ke={};for(const ge of Be){const ze=Ut(ge.shiftStartTime);Ke[ze]||(Ke[ze]=[]),Ke[ze].push(ge)}const yt=(ke.event_template_itineraries||[]).map(ge=>{const ze=Ut(ge.time_slot);return{id:rt(),time:ze,title:ge.activity,description:ge.description||"",volunteerRoles:Ke[ze]?[...Ke[ze]]:[]}});console.log("Final itinerary with volunteer roles:",yt),or(yt)}if(ke.event_template_pre_event_tasks){console.log("Applying template pre-event tasks:",ke.event_template_pre_event_tasks);const Be=ke.event_template_pre_event_tasks.map(Ke=>({id:rt(),title:Ke.task_description,description:Ke.description||"",dueDateOffsetDays:Ke.due_date_offset_days,assignedTo:Ke.assigned_to?[Ke.assigned_to]:[],status:Ke.status||"pending"}));Rn(Be)}(Ue=r.state)!=null&&Ue.templateId&&e(r.pathname,{state:{...r.state,templateName:ke.name}}),De({title:"Template Applied!",description:`Template "${ke.name}" has been applied to your event.`})}}catch(At){console.error("Error loading template:",At),De({title:"Error",description:"Failed to load template data.",variant:"destructive"})}}})()},[(nl=r.state)==null?void 0:nl.templateId,b]),h.useEffect(()=>{t&&($(!1),I(!1))},[t]),h.useEffect(()=>{t&&b&&!B&&!M&&(console.log("Loading fresh event data for:",t),$(!0),I(!0),rl(t))},[t,b,rl,B,M]),s.jsxs("div",{className:"min-h-screen bg-stone-50 md:bg-background",children:[s.jsx(dn,{}),s.jsxs("main",{className:"container mx-auto px-4 py-4 md:py-6 lg:py-8",children:[s.jsxs("div",{className:"mb-5 md:mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[s.jsx("div",{className:"",children:s.jsxs(H,{variant:"ghost",onClick:()=>e("/dashboard"),className:"text-stone-500 md:text-white/50 hover:text-stone-900 hover:bg-stone-100 h-10 md:h-auto px-2 md:px-4 -ml-2",children:[s.jsx(p_,{className:"w-5 h-5 md:w-4 md:h-4 mr-1 md:mr-2"}),s.jsx("span",{className:"text-sm md:text-base",children:"Back"})]})}),!t&&s.jsx("div",{className:"md:hidden",children:s.jsx(ab,{onTemplateSelect:ft,disabled:t&&!T,compact:!0})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-3xl lg:text-4xl font-bold text-stone-900 md:text-foreground mb-1 md:mb-2 tracking-tight",children:t?"Edit Event":"Create Event"}),s.jsx("p",{className:"text-stone-500 md:text-white/50 text-sm md:text-base lg:text-lg leading-relaxed",children:t?"Update your event details":n===1?"Let's start with the basics":n===2?"Add activities and volunteer roles":"Review and publish your event"}),((Ux=r.state)==null?void 0:Ux.templateId)&&((Bx=r.state)==null?void 0:Bx.templateName)&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-blue-600 bg-blue-50 px-3 py-2 rounded-lg border border-blue-200",children:[s.jsx(En,{className:"w-4 h-4"}),s.jsxs("span",{children:["Working from template: ",s.jsx("strong",{children:r.state.templateName})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>e(r.pathname,{state:{}}),className:"h-6 px-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100",children:"Clear"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[!t&&s.jsx("div",{className:"hidden md:block",children:s.jsx(ab,{onTemplateSelect:ft,disabled:t&&!T,compact:!0})}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[t&&T&&s.jsxs(H,{variant:"outline",onClick:()=>tt("draft"),disabled:!X()||N,className:"border-yellow-300 text-yellow-700 hover:bg-yellow-50",children:[s.jsx(Nu,{className:"w-4 h-4 mr-2"}),N?"Saving...":"Save Draft"]}),D&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(FE,{pressed:d,onPressedChange:u,className:"data-[state=on]:bg-gold-400 data-[state=on]:text-white",children:d?s.jsx(Oo,{className:"w-4 h-4 mr-2"}):s.jsx(Do,{className:"w-4 h-4 mr-2"})}),s.jsx("span",{className:"text-sm text-white/40",children:"Test Features"})]}),!t&&s.jsxs(H,{variant:"ghost",onClick:Da,className:"h-10 px-4 text-white/50 hover:text-gold-300 hover:bg-white/10",children:[s.jsx(_O,{className:"w-4 h-4 mr-2"}),"Load Test Data"]})]})]})})]})]})]}),k&&s.jsxs("div",{className:"mt-4 text-sm text-white/40",children:["Saved  ",k.toLocaleTimeString()]}),s.jsx("div",{className:"mb-4 md:mb-6 lg:mb-8 bg-white rounded-2xl md:rounded-xl border border-stone-200 md:border-white/10 px-3 py-3 md:px-6 md:py-4 overflow-x-auto scrollbar-hide shadow-sm md:shadow-none",children:s.jsx(Rk,{steps:vt,currentStep:n,onStepClick:$e,showProgressBar:!0,showStepLabel:!0})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 lg:gap-8",children:[s.jsx("div",{className:"col-span-1 lg:col-span-2",children:s.jsx(Pe,{className:"border-0 md:border shadow-none md:shadow-sm bg-transparent md:bg-white rounded-none md:rounded-xl",children:s.jsxs(Ae,{className:"p-0 md:p-6",children:[U===1&&s.jsxs("div",{className:"space-y-5 md:space-y-6",children:[s.jsx(Ua,{title:"Event Name",className:"md:bg-transparent md:border-0 md:p-0 md:shadow-none",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"title",className:"text-sm md:text-xs font-semibold text-stone-600 md:block hidden",children:"Event Title *"}),s.jsx(ue,{id:"title",value:z.title,onChange:V=>Ne({...z,title:V.target.value}),placeholder:"e.g., Community Iftar 2024",className:"h-12 md:h-11 rounded-xl border-2 border-stone-200 focus-visible:ring-umma-500 text-lg md:text-sm font-medium placeholder:text-stone-400 placeholder:font-normal",disabled:t&&!T})]})}),s.jsx(Ua,{title:"Date & Time",className:"md:bg-transparent md:border-0 md:p-0 md:shadow-none",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"date",className:"text-sm md:text-xs font-semibold text-stone-600 md:block hidden",children:"Date *"}),s.jsx(ue,{type:"date",id:"date-mobile",value:z.date||"",onChange:V=>Ne({...z,date:V.target.value}),className:"md:hidden h-12 w-full block bg-white text-foreground rounded-xl border-2 border-stone-200 focus-visible:ring-umma-500 text-base font-medium appearance-none",style:{minHeight:"3rem"},disabled:t&&!T}),s.jsx("div",{className:"hidden md:block",children:s.jsxs(NE,{children:[s.jsx(_E,{asChild:!0,children:s.jsxs(H,{variant:"outline",className:"w-full justify-start text-left font-normal h-11 rounded-xl border-2 border-umma-200 hover:border-umma-500 text-sm bg-white",disabled:t&&!T,children:[s.jsx(Mt,{className:"mr-2 h-4 w-4"}),z.date?Nt(z.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Pick a date"]})}),s.jsx(ix,{className:"w-auto p-0",align:"start",children:s.jsx(IE,{mode:"single",selected:z.date?Nt(z.date):void 0,defaultMonth:z.date?Nt(z.date):new Date,onSelect:V=>V&&Ne({...z,date:Je(V)}),initialFocus:!0})})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"startTime",className:"text-sm md:text-xs font-semibold text-stone-600",children:"Start Time *"}),s.jsx(ue,{type:"time",id:"startTime-mobile",value:z.startTime||"",onChange:V=>{const q=V.target.value;let ie=z.endTime;if(ie&&ie<=q){const Ue=Me(q,15);ie=Ue>q?Ue:"23:59"}Ne({...z,startTime:q,endTime:ie})},className:"md:hidden h-12 w-full block bg-white text-foreground rounded-xl border-2 border-stone-200 focus-visible:ring-umma-500 text-base font-medium appearance-none",style:{minHeight:"3rem"},disabled:t&&!T}),s.jsx("div",{className:"hidden md:block",children:s.jsx(ls,{id:"startTime",value:z.startTime,onChange:V=>{let q=z.endTime;if(q&&q<=V){const ie=Me(V,15);q=ie>V?ie:"23:59"}Ne({...z,startTime:V,endTime:q})},className:"h-11 border-2 border-stone-200 focus-visible:ring-umma-500 text-sm",disabled:t&&!T})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"endTime",className:"text-sm md:text-xs font-semibold text-stone-600",children:"End Time *"}),s.jsx(ue,{type:"time",id:"endTime-mobile",value:z.endTime||"",onChange:V=>{Ne({...z,endTime:V.target.value})},className:"md:hidden h-12 w-full block bg-white text-foreground rounded-xl border-2 border-stone-200 focus-visible:ring-umma-500 text-base font-medium appearance-none",style:{minHeight:"3rem"},disabled:t&&!T}),s.jsx("div",{className:"hidden md:block",children:s.jsx(ls,{id:"endTime",value:z.endTime,onChange:V=>{Ne({...z,endTime:V})},className:"h-11 border-2 border-stone-200 focus-visible:ring-umma-500 text-sm",disabled:t&&!T})})]})]}),z.startTime&&z.endTime&&it(z.startTime,z.endTime)&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 bg-blue-50 p-3 rounded-xl",children:[s.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:"Overnight event - ends next day"})]})]})}),s.jsx(Ua,{title:"Location",className:"md:bg-transparent md:border-0 md:p-0 md:shadow-none",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"location",className:"text-sm md:text-xs font-semibold text-stone-600 md:block hidden",children:"Location *"}),s.jsx(mg,{value:z.location,onChange:V=>Ne({...z,location:V}),placeholder:"Select or type a location...",disabled:t&&!T,className:"h-12 md:h-11"})]})}),s.jsx(Ua,{title:"Description",collapsible:!0,defaultExpanded:!!z.description,className:"md:bg-transparent md:border-0 md:p-0 md:shadow-none",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"description",className:"text-sm md:text-xs font-semibold text-stone-600 md:block hidden",children:"Description *"}),s.jsx(un,{id:"description",value:z.description,onChange:V=>Ne({...z,description:V.target.value}),placeholder:"Describe your event...",rows:4,className:"border-2 border-stone-200 focus-visible:ring-umma-500 rounded-xl resize-none text-base md:text-sm min-h-[120px] md:min-h-[100px]",disabled:t&&!T})]})})]}),U===2&&s.jsx("div",{className:"space-y-6",children:s.jsx(LB,{itinerary:He,onItineraryChange:Z,startTime:z.startTime,endTime:z.endTime,isGenerated:He.length>0,disabled:t&&!T,onGenerateItinerary:Oe,isGenerating:l,eventTitle:z.title,eventDescription:z.description,contacts:o,onAddContact:()=>p(!0),showValidation:Br})}),U===3&&!d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"Enhanced Event Details"}),s.jsx("p",{className:"text-white/50 mb-6",children:"Add additional preferences to help provide better suggestions for volunteer roles and event planning."}),s.jsx(FB,{details:Wt,onDetailsChange:gn,isExpanded:!0,onToggleExpand:()=>{},disabled:t&&!T})]}),U===4&&!d&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-foreground",children:"Pre-Event Task Planning"}),s.jsx("p",{className:"text-white/50 mb-6",children:"Create and assign tasks needed before your event."}),s.jsx(BB,{tasks:ir,onTasksChange:Rn,contacts:o,eventDate:z.date,eventDescription:z.description,disabled:t&&!T})]}),U===5&&s.jsxs("div",{className:"space-y-5 md:space-y-6",children:[s.jsx("div",{className:"md:hidden",children:s.jsxs("div",{className:"bg-gradient-to-br from-umma-50 via-white to-stone-50 rounded-3xl border border-stone-200 shadow-lg overflow-hidden",children:[s.jsxs("div",{className:"p-5 pb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-stone-900 leading-tight",children:z.title||"Untitled Event"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-xl border border-stone-200 text-sm font-medium text-stone-700",children:[s.jsx(Mt,{className:"w-4 h-4 text-umma-500"}),z.date?Nt(z.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"No date"]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-xl border border-stone-200 text-sm font-medium text-stone-700",children:[s.jsx(dr,{className:"w-4 h-4 text-umma-500"}),at(z.startTime)||"--:--"," - ",at(z.endTime)||"--:--",z.startTime&&z.endTime&&it(z.startTime,z.endTime)&&s.jsx("span",{className:"text-xs text-blue-600",children:"(+1)"})]})]}),s.jsxs("div",{className:"flex items-start gap-2 mt-3 text-stone-600",children:[s.jsx(ps,{className:"w-4 h-4 text-stone-400 mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"text-sm",children:z.location||"No location set"})]})]}),He.some(V=>V.volunteerRoles.length>0)&&s.jsx("div",{className:"px-5 pb-5",children:s.jsxs("div",{className:"bg-white rounded-2xl border border-stone-200 p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Ft,{className:"w-5 h-5 text-umma-500"}),s.jsx("span",{className:"text-sm font-semibold text-stone-700",children:"Volunteer Roles"})]}),s.jsx("div",{className:"space-y-2",children:He.flatMap(V=>V.volunteerRoles.map(q=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-stone-100 last:border-0",children:[s.jsx("span",{className:"font-medium text-stone-800",children:q.roleLabel||"Untitled"}),s.jsxs("span",{className:"text-sm text-stone-500 bg-stone-100 px-2 py-1 rounded-lg",children:[q.slotsBrother+q.slotsSister+(q.slotsFlexible||0)," needed"]})]},q.id)))}),s.jsxs("div",{className:"flex items-center justify-between pt-3 mt-2 border-t border-stone-200",children:[s.jsx("span",{className:"text-sm font-semibold text-stone-600",children:"Total volunteers"}),s.jsx("span",{className:"text-lg font-bold text-umma-600",children:He.reduce((V,q)=>V+q.volunteerRoles.reduce((ie,Ue)=>ie+Ue.slotsBrother+Ue.slotsSister+(Ue.slotsFlexible||0),0),0)})]})]})}),!He.some(V=>V.volunteerRoles.length>0)&&s.jsx("div",{className:"px-5 pb-5",children:s.jsxs("div",{className:"bg-yellow-50 rounded-2xl border border-yellow-200 p-4 flex items-start gap-3",children:[s.jsx(Cu,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"No volunteer roles defined"}),s.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Go back to add roles for your event"})]})]})})]})}),s.jsxs(Pe,{className:"hidden md:block mb-6 bg-white border-white/10",children:[s.jsx($t,{className:"pb-2",children:s.jsxs(Lt,{className:"flex items-center space-x-2 text-foreground",children:[s.jsx(Mt,{className:"w-5 h-5"}),s.jsx("span",{children:"Event Summary"})]})}),s.jsx(Ae,{children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-foreground",children:z.title}),s.jsxs("div",{className:"text-sm text-white/50 space-y-2 mt-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Mt,{className:"w-4 h-4 text-white/70"}),s.jsx("span",{children:Nt(z.date).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(dr,{className:"w-4 h-4 text-white/70"}),s.jsxs("span",{children:[at(z.startTime)," - ",at(z.endTime),z.startTime&&z.endTime&&it(z.startTime,z.endTime)&&s.jsx("span",{className:"ml-2 text-blue-600 text-xs",children:"(overnight)"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ps,{className:"w-4 h-4 text-white/70"}),s.jsx("span",{children:z.location})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h5",{className:"font-medium text-foreground",children:"Volunteer Roles"}),He.some(V=>V.volunteerRoles.length>0)?s.jsx("div",{className:"space-y-2",children:He.map(V=>V.volunteerRoles.map(q=>s.jsx("div",{className:"text-sm text-white/50 flex items-center gap-2",children:s.jsxs("span",{children:[at(q.shiftStartTime)," - ",at(q.shiftEndTime)," ",q.roleLabel,": ",q.slotsBrother+q.slotsSister+(q.slotsFlexible||0)," slots"]})},q.id)))}):s.jsx("p",{className:"text-sm text-white/40",children:"No volunteer roles defined yet"})]})]})})]}),s.jsx(Ua,{title:"SMS Reminders",collapsible:!0,defaultExpanded:z.smsEnabled,className:"md:bg-white md:border md:border-white/10 md:shadow-none",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(te,{className:"text-base md:text-sm font-medium text-stone-700 md:text-white/70",children:"Enable SMS Reminders"}),s.jsx("p",{className:"text-sm text-stone-500 md:text-white/40 mt-0.5",children:"Automatic reminders for volunteers"})]}),s.jsx(hs,{checked:z.smsEnabled,onCheckedChange:V=>Ne(q=>({...q,smsEnabled:V})),disabled:t&&!T})]}),z.smsEnabled&&s.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4 pt-4 border-t border-stone-200 md:border-white/5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-sm text-stone-600 md:text-white/70 font-medium",children:"Day Before"}),s.jsx(ue,{type:"time",value:z.dayBeforeTime,onChange:V=>Ne(q=>({...q,dayBeforeTime:V.target.value})),className:"h-12 md:h-10 border-stone-200 md:border-white/10 focus-visible:ring-umma-500 md:focus-visible:ring-gold-400 rounded-xl md:rounded-lg",disabled:t&&!T})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{className:"text-sm text-stone-600 md:text-white/70 font-medium",children:"Day Of"}),s.jsx(ue,{type:"time",value:z.dayOfTime,onChange:V=>Ne(q=>({...q,dayOfTime:V.target.value})),className:"h-12 md:h-10 border-stone-200 md:border-white/10 focus-visible:ring-umma-500 md:focus-visible:ring-gold-400 rounded-xl md:rounded-lg",disabled:t&&!T})]})]})]})}),s.jsx(Ua,{title:"Save as Template",collapsible:!0,defaultExpanded:!1,className:"md:bg-white md:border md:border-white/10 md:shadow-none",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-stone-600 md:text-white/50",children:"Save this event setup as a template for future events."}),s.jsx(l7,{eventData:z,itinerary:He,additionalDetails:Wt,preEventTasks:ir,disabled:t&&!T,sourceTemplateId:(zx=r.state)==null?void 0:zx.templateId,sourceTemplateName:(Vx=r.state)!=null&&Vx.templateId?(Wx=r.state)==null?void 0:Wx.templateName:void 0})]})})]})]})})}),s.jsx("div",{className:"hidden lg:block lg:col-span-1",children:s.jsx(Pe,{className:"border-0 shadow-sm",children:s.jsxs(Ae,{className:"p-6",children:[n===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Live Preview"}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>F(!O),className:"h-8 w-8 p-0",children:O?s.jsx(Oo,{className:"w-4 h-4"}):s.jsx(Do,{className:"w-4 h-4"})})]}),O&&s.jsxs("div",{className:"space-y-4",children:[z.title&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-white/70",children:"Event Title"}),s.jsx("p",{className:"text-sm text-foreground bg-background p-3 rounded-lg border",children:z.title})]}),(z.date||z.startTime||z.endTime)&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-white/70",children:"Date & Time"}),s.jsxs("div",{className:"text-sm text-foreground bg-background p-3 rounded-lg border space-y-1",children:[z.date&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mt,{className:"w-4 h-4 text-white/40"}),s.jsx("span",{children:Nt(z.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(z.startTime||z.endTime)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dr,{className:"w-4 h-4 text-white/40"}),s.jsxs("span",{children:[at(z.startTime)||"--:--"," - ",at(z.endTime)||"--:--",z.startTime&&z.endTime&&it(z.startTime,z.endTime)&&s.jsx("span",{className:"ml-2 text-blue-600 text-xs",children:"(overnight)"})]})]})]})]}),z.location&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-white/70",children:"Location"}),s.jsxs("div",{className:"text-sm text-foreground bg-background p-3 rounded-lg border flex items-center gap-2",children:[s.jsx(ps,{className:"w-4 h-4 text-white/40"}),s.jsx("span",{children:z.location})]})]}),z.description&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-white/70",children:"Description"}),s.jsx("div",{className:"text-sm text-foreground bg-background p-3 rounded-lg border",children:z.description})]}),!z.title&&!z.date&&!z.startTime&&!z.endTime&&!z.location&&!z.description&&s.jsxs("div",{className:"text-center py-8 text-white/40",children:[s.jsx(Mt,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"Start filling out your event details to see a live preview here."})]})]})]}),n===2&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Itinerary Preview"}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>F(!O),className:"h-8 w-8 p-0",children:O?s.jsx(Oo,{className:"w-4 h-4"}):s.jsx(Do,{className:"w-4 h-4"})})]}),O&&s.jsx("div",{className:"space-y-4",children:He.length>0?s.jsx("div",{className:"space-y-3",children:He.map((V,q)=>s.jsxs("div",{className:"bg-background p-3 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-white/70",children:at(V.time)}),s.jsxs("span",{className:"text-xs text-white/40 bg-white px-2 py-1 rounded",children:[V.volunteerRoles.length," roles"]})]}),s.jsx("h5",{className:"font-medium text-foreground text-sm mb-1",children:V.title}),V.description&&s.jsx("p",{className:"text-xs text-white/50 mb-2",children:V.description}),V.volunteerRoles.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs font-medium text-white/70",children:"Volunteer Roles:"}),V.volunteerRoles.map((ie,Ue)=>s.jsxs("div",{className:"text-xs text-white/50 bg-white p-2 rounded border",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:ie.roleLabel}),s.jsxs("span",{className:"text-white/40",children:[ie.slotsBrother+ie.slotsSister+(ie.slotsFlexible||0)," slots"]})]}),ie.notes&&s.jsx("p",{className:"text-white/40 mt-1",children:ie.notes})]},Ue))]})]},q))}):s.jsxs("div",{className:"text-center py-8 text-white/40",children:[s.jsx(dr,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"No itinerary items yet. Start planning your event timeline."})]})})]}),n===5&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Publish Summary"}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>F(!O),className:"h-8 w-8 p-0",children:O?s.jsx(Oo,{className:"w-4 h-4"}):s.jsx(Do,{className:"w-4 h-4"})})]}),O&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-background p-3 rounded-lg border",children:[s.jsx("h4",{className:"font-medium text-white/70 text-sm mb-2",children:"Event Overview"}),s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/50",children:"Status:"}),s.jsx("span",{className:`font-medium ${z.status==="published"?"text-green-600":"text-yellow-600"}`,children:z.status==="published"?"Published":"Draft"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/50",children:"Visibility:"}),s.jsx("span",{className:`font-medium ${z.isPublic?"text-green-600":"text-orange-600"}`,children:z.isPublic?"Public":"Private"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/50",children:"SMS Reminders:"}),s.jsx("span",{className:"font-medium",children:z.smsEnabled?"Enabled":"Disabled"})]}),z.smsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/50",children:"Day Before:"}),s.jsx("span",{className:"font-medium",children:at(z.dayBeforeTime)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/50",children:"Day Of:"}),s.jsx("span",{className:"font-medium",children:at(z.dayOfTime)})]})]})]})]}),s.jsx("div",{className:"bg-background p-3 rounded-lg border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white/70 text-sm",children:"Event Visibility"}),s.jsx("p",{className:"text-xs text-white/40",children:z.isPublic?"Event is visible to the public":"Event is private (admin only)"})]}),s.jsx(hs,{checked:z.isPublic,onCheckedChange:V=>Ne(q=>({...q,isPublic:V})),disabled:t&&!T})]})}),s.jsxs("div",{className:"bg-background p-3 rounded-lg border",children:[s.jsx("h4",{className:"font-medium text-white/70 text-sm mb-2",children:"Itinerary Summary"}),s.jsxs("div",{className:"text-xs text-white/50",children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Total Items:"}),s.jsx("span",{className:"font-medium",children:He.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Roles:"}),s.jsx("span",{className:"font-medium",children:He.reduce((V,q)=>V+q.volunteerRoles.length,0)})]})]})]}),s.jsxs("div",{className:"bg-background p-3 rounded-lg border",children:[s.jsx("h4",{className:"font-medium text-white/70 text-sm mb-2",children:"Publish Checklist"}),s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${z.title?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{className:z.title?"text-foreground":"text-white/40",children:"Event title"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${z.date?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{className:z.date?"text-foreground":"text-white/40",children:"Date & time"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${z.location?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{className:z.location?"text-foreground":"text-white/40",children:"Location"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${z.description?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{className:z.description?"text-foreground":"text-white/40",children:"Description"})]})]})]})]})]}),n!==1&&n!==2&&n!==5&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Itinerary Preview"}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>F(!O),className:"h-8 w-8 p-0",children:O?s.jsx(Oo,{className:"w-4 h-4"}):s.jsx(Do,{className:"w-4 h-4"})})]}),O&&s.jsx("div",{className:"space-y-4",children:He.length>0?s.jsx("div",{className:"space-y-3",children:He.map((V,q)=>s.jsxs("div",{className:"bg-background p-3 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-white/70",children:at(V.time)}),s.jsxs("span",{className:"text-xs text-white/40 bg-white px-2 py-1 rounded",children:[V.volunteerRoles.length," roles"]})]}),s.jsx("h5",{className:"font-medium text-foreground text-sm mb-1",children:V.title}),V.description&&s.jsx("p",{className:"text-xs text-white/50 mb-2",children:V.description}),V.volunteerRoles.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs font-medium text-white/70",children:"Volunteer Roles:"}),V.volunteerRoles.map((ie,Ue)=>s.jsxs("div",{className:"text-xs text-white/50 bg-white p-2 rounded border",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:ie.roleLabel}),s.jsxs("span",{className:"text-white/40",children:[at(ie.shiftStartTime)," - ",at(ie.shiftEndTime)," ",ie.slotsBrother+ie.slotsSister+(ie.slotsFlexible||0)," slots"]})]}),ie.notes&&s.jsx("p",{className:"text-white/40 mt-1",children:ie.notes})]},Ue))]})]},q))}):s.jsxs("div",{className:"text-center py-8 text-white/40",children:[s.jsx(dr,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"No itinerary items yet. Start planning your event timeline."})]})})]})]})})})]})]}),s.jsx(Nk,{statusText:_?"Saving...":N?"Publishing...":A?"Unsaved changes":k?`Saved ${k.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`:void 0,primaryAction:{label:n===vt.length?t?"Update Event":"Publish Event":"Continue",onClick:n===vt.length&&X()?()=>tt("published"):se,disabled:n===vt.length&&(!X()||t&&!T)||n!==vt.length&&n===vt.length||N,loading:N},secondaryAction:n>1?{label:"Previous",onClick:de}:void 0,children:s.jsxs("div",{className:"flex items-center gap-2",children:[t&&T&&s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>y(!0),disabled:Fe,className:"h-9 w-9 p-0 text-stone-500 hover:text-red-600 hover:bg-red-500/10",title:"Delete Event",children:s.jsx(br,{className:"w-4 h-4"})}),!t&&X()&&s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>tt("draft"),className:"h-9 px-3 text-stone-600 hover:bg-stone-100",children:[s.jsx(Nu,{className:"w-4 h-4 mr-1.5"}),"Save Draft"]})]})}),s.jsx("div",{className:"h-32 md:h-20"}),s.jsx(fr,{open:m,onOpenChange:p,children:s.jsxs(rr,{className:"max-w-md",children:[s.jsxs(nr,{children:[s.jsx(sr,{children:"Add New Contact"}),s.jsx(ar,{children:"Add someone who will be a point of contact for volunteer roles."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"contactFirstName",children:"First Name"}),s.jsx(ue,{id:"contactFirstName",value:g.firstName,onChange:V=>dt(V.target.value),placeholder:"First name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"contactLastName",children:"Last Name"}),s.jsx(ue,{id:"contactLastName",value:g.lastName,onChange:V=>Ct(V.target.value),placeholder:"Last name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"contactPhone",children:"Phone"}),s.jsx(Mi,{id:"contactPhone",value:g.phone,onChange:V=>le(V),placeholder:"Phone number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"contactGender",children:"Gender *"}),s.jsx(ea,{options:[{value:"",label:"Select gender"},{value:"brother",label:"Brother"},{value:"sister",label:"Sister"}],value:g.gender,onChange:Ce,placeholder:"Select gender"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),s.jsx(H,{onClick:Ie,children:"Add Contact"})]})]})}),s.jsx(fr,{open:f,onOpenChange:y,children:s.jsxs(rr,{children:[s.jsxs(nr,{children:[s.jsx(sr,{children:"Delete Event"}),s.jsx(ar,{children:"Are you sure you want to delete this event? This action cannot be undone."})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),s.jsx(H,{variant:"destructive",onClick:Jt,disabled:Fe,children:Fe?"Deleting...":"Delete Event"})]})]})}),s.jsx(fr,{open:Q,onOpenChange:he,children:s.jsxs(rr,{children:[s.jsxs(nr,{children:[s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(Cu,{className:"w-5 h-5 text-yellow-600"}),"Unsaved Changes"]}),s.jsx(ar,{children:"You have unsaved changes. Would you like to save your work as a draft before leaving?"})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>{if(he(!1),fe){if(fe.startsWith("step-")){const V=parseInt(fe.replace("step-",""));a(V)}else e(fe);_e(null)}},children:"Leave Without Saving"}),s.jsx(H,{onClick:async()=>{try{if(await tt("draft"),De({title:"Draft Saved",description:"Your progress has been saved as a draft."}),he(!1),fe){if(fe.startsWith("step-")){const V=parseInt(fe.replace("step-",""));a(V)}else e(fe);_e(null)}}catch{De({title:"Save Failed",description:"Failed to save draft. Please try again.",variant:"destructive"})}},className:"bg-gold-400 hover:bg-gold-300 text-white",children:"Save as Draft"})]})]})})]})};function q7(e){const t=G7(e),r=h.forwardRef((n,a)=>{const{children:o,...i}=n,l=h.Children.toArray(o),c=l.find(K7);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return s.jsx(t,{...i,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function G7(e){const t=h.forwardRef((r,n)=>{const{children:a,...o}=r;if(h.isValidElement(a)){const i=J7(a),l=Q7(o,a.props);return a.type!==h.Fragment&&(l.ref=n?Ir(n,i):i),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Y7=Symbol("radix.slottable");function K7(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Y7}function Q7(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function J7(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var pg=["Enter"," "],X7=["ArrowDown","PageUp","Home"],Ok=["ArrowUp","PageDown","End"],Z7=[...X7,...Ok],ez={ltr:[...pg,"ArrowRight"],rtl:[...pg,"ArrowLeft"]},tz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wc="Menu",[vc,rz,nz]=lh(Wc),[wo,Dk]=Fr(Wc,[nz,Ca,tl]),Wh=Ca(),Ak=tl(),[sz,bo]=wo(Wc),[az,Hc]=wo(Wc),Ik=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:o,modal:i=!0}=e,l=Wh(t),[c,d]=h.useState(null),u=h.useRef(!1),m=Mr(o),p=$c(a);return h.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),s.jsx(Pv,{...l,children:s.jsx(sz,{scope:t,open:r,onOpenChange:m,content:c,onContentChange:d,children:s.jsx(az,{scope:t,onClose:h.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:p,modal:i,children:n})})})};Ik.displayName=Wc;var oz="MenuAnchor",bx=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=Wh(r);return s.jsx(Pc,{...a,...n,ref:t})});bx.displayName=oz;var jx="MenuPortal",[iz,Mk]=wo(jx,{forceMount:void 0}),$k=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,o=bo(jx,t);return s.jsx(iz,{scope:t,forceMount:r,children:s.jsx(Jr,{present:r||o.open,children:s.jsx(zi,{asChild:!0,container:a,children:n})})})};$k.displayName=jx;var kn="MenuContent",[lz,Nx]=wo(kn),Lk=h.forwardRef((e,t)=>{const r=Mk(kn,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,o=bo(kn,e.__scopeMenu),i=Hc(kn,e.__scopeMenu);return s.jsx(vc.Provider,{scope:e.__scopeMenu,children:s.jsx(Jr,{present:n||o.open,children:s.jsx(vc.Slot,{scope:e.__scopeMenu,children:i.modal?s.jsx(cz,{...a,ref:t}):s.jsx(dz,{...a,ref:t})})})})}),cz=h.forwardRef((e,t)=>{const r=bo(kn,e.__scopeMenu),n=h.useRef(null),a=We(t,n);return h.useEffect(()=>{const o=n.current;if(o)return Th(o)},[]),s.jsx(_x,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ae(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),dz=h.forwardRef((e,t)=>{const r=bo(kn,e.__scopeMenu);return s.jsx(_x,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),uz=q7("MenuContent.ScrollLock"),_x=h.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:p,onDismiss:f,disableOutsideScroll:y,...g}=e,x=bo(kn,r),w=Hc(kn,r),v=Wh(r),b=Ak(r),j=rz(r),[k,S]=h.useState(null),N=h.useRef(null),E=We(t,N,x.onContentChange),T=h.useRef(0),R=h.useRef(""),O=h.useRef(0),F=h.useRef(null),M=h.useRef("right"),I=h.useRef(0),B=y?Dc:h.Fragment,$=y?{as:uz,allowPinchZoom:!0}:void 0,D=A=>{var Q,he;const G=R.current+A,_=j().filter(fe=>!fe.disabled),C=document.activeElement,L=(Q=_.find(fe=>fe.ref.current===C))==null?void 0:Q.textValue,W=_.map(fe=>fe.textValue),Y=Nz(W,G,L),J=(he=_.find(fe=>fe.textValue===Y))==null?void 0:he.ref.current;(function fe(_e){R.current=_e,window.clearTimeout(T.current),_e!==""&&(T.current=window.setTimeout(()=>fe(""),1e3))})(G),J&&setTimeout(()=>J.focus())};h.useEffect(()=>()=>window.clearTimeout(T.current),[]),Eh();const P=h.useCallback(A=>{var _,C;return M.current===((_=F.current)==null?void 0:_.side)&&Sz(A,(C=F.current)==null?void 0:C.area)},[]);return s.jsx(lz,{scope:r,searchRef:R,onItemEnter:h.useCallback(A=>{P(A)&&A.preventDefault()},[P]),onItemLeave:h.useCallback(A=>{var G;P(A)||((G=N.current)==null||G.focus(),S(null))},[P]),onTriggerLeave:h.useCallback(A=>{P(A)&&A.preventDefault()},[P]),pointerGraceTimerRef:O,onPointerGraceIntentChange:h.useCallback(A=>{F.current=A},[]),children:s.jsx(B,{...$,children:s.jsx(Oc,{asChild:!0,trapped:a,onMountAutoFocus:ae(o,A=>{var G;A.preventDefault(),(G=N.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:s.jsx(xo,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:p,onDismiss:f,children:s.jsx(px,{asChild:!0,...b,dir:w.dir,orientation:"vertical",loop:n,currentTabStopId:k,onCurrentTabStopIdChange:S,onEntryFocus:ae(c,A=>{w.isUsingKeyboardRef.current||A.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(ph,{role:"menu","aria-orientation":"vertical","data-state":e2(x.open),"data-radix-menu-content":"",dir:w.dir,...v,...g,ref:E,style:{outline:"none",...g.style},onKeyDown:ae(g.onKeyDown,A=>{const _=A.target.closest("[data-radix-menu-content]")===A.currentTarget,C=A.ctrlKey||A.altKey||A.metaKey,L=A.key.length===1;_&&(A.key==="Tab"&&A.preventDefault(),!C&&L&&D(A.key));const W=N.current;if(A.target!==W||!Z7.includes(A.key))return;A.preventDefault();const J=j().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);Ok.includes(A.key)&&J.reverse(),bz(J)}),onBlur:ae(e.onBlur,A=>{A.currentTarget.contains(A.target)||(window.clearTimeout(T.current),R.current="")}),onPointerMove:ae(e.onPointerMove,xc(A=>{const G=A.target,_=I.current!==A.clientX;if(A.currentTarget.contains(G)&&_){const C=A.clientX>I.current?"right":"left";M.current=C,I.current=A.clientX}}))})})})})})})});Lk.displayName=kn;var hz="MenuGroup",Sx=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(ve.div,{role:"group",...n,ref:t})});Sx.displayName=hz;var fz="MenuLabel",Fk=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(ve.div,{...n,ref:t})});Fk.displayName=fz;var Vu="MenuItem",hb="menu.itemSelect",Hh=h.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,o=h.useRef(null),i=Hc(Vu,e.__scopeMenu),l=Nx(Vu,e.__scopeMenu),c=We(t,o),d=h.useRef(!1),u=()=>{const m=o.current;if(!r&&m){const p=new CustomEvent(hb,{bubbles:!0,cancelable:!0});m.addEventListener(hb,f=>n==null?void 0:n(f),{once:!0}),fv(m,p),p.defaultPrevented?d.current=!1:i.onClose()}};return s.jsx(Uk,{...a,ref:c,disabled:r,onClick:ae(e.onClick,u),onPointerDown:m=>{var p;(p=e.onPointerDown)==null||p.call(e,m),d.current=!0},onPointerUp:ae(e.onPointerUp,m=>{var p;d.current||(p=m.currentTarget)==null||p.click()}),onKeyDown:ae(e.onKeyDown,m=>{const p=l.searchRef.current!=="";r||p&&m.key===" "||pg.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Hh.displayName=Vu;var Uk=h.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...o}=e,i=Nx(Vu,r),l=Ak(r),c=h.useRef(null),d=We(t,c),[u,m]=h.useState(!1),[p,f]=h.useState("");return h.useEffect(()=>{const y=c.current;y&&f((y.textContent??"").trim())},[o.children]),s.jsx(vc.ItemSlot,{scope:r,disabled:n,textValue:a??p,children:s.jsx(gx,{asChild:!0,...l,focusable:!n,children:s.jsx(ve.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:d,onPointerMove:ae(e.onPointerMove,xc(y=>{n?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ae(e.onPointerLeave,xc(y=>i.onItemLeave(y))),onFocus:ae(e.onFocus,()=>m(!0)),onBlur:ae(e.onBlur,()=>m(!1))})})})}),mz="MenuCheckboxItem",Bk=h.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(qk,{scope:e.__scopeMenu,checked:r,children:s.jsx(Hh,{role:"menuitemcheckbox","aria-checked":Wu(r)?"mixed":r,...a,ref:t,"data-state":Ex(r),onSelect:ae(a.onSelect,()=>n==null?void 0:n(Wu(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Bk.displayName=mz;var zk="MenuRadioGroup",[pz,gz]=wo(zk,{value:void 0,onValueChange:()=>{}}),Vk=h.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,o=Mr(n);return s.jsx(pz,{scope:e.__scopeMenu,value:r,onValueChange:o,children:s.jsx(Sx,{...a,ref:t})})});Vk.displayName=zk;var Wk="MenuRadioItem",Hk=h.forwardRef((e,t)=>{const{value:r,...n}=e,a=gz(Wk,e.__scopeMenu),o=r===a.value;return s.jsx(qk,{scope:e.__scopeMenu,checked:o,children:s.jsx(Hh,{role:"menuitemradio","aria-checked":o,...n,ref:t,"data-state":Ex(o),onSelect:ae(n.onSelect,()=>{var i;return(i=a.onValueChange)==null?void 0:i.call(a,r)},{checkForDefaultPrevented:!1})})})});Hk.displayName=Wk;var Cx="MenuItemIndicator",[qk,vz]=wo(Cx,{checked:!1}),Gk=h.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,o=vz(Cx,r);return s.jsx(Jr,{present:n||Wu(o.checked)||o.checked===!0,children:s.jsx(ve.span,{...a,ref:t,"data-state":Ex(o.checked)})})});Gk.displayName=Cx;var xz="MenuSeparator",Yk=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(ve.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});Yk.displayName=xz;var yz="MenuArrow",Kk=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=Wh(r);return s.jsx(gh,{...a,...n,ref:t})});Kk.displayName=yz;var wz="MenuSub",[W9,Qk]=wo(wz),Cl="MenuSubTrigger",Jk=h.forwardRef((e,t)=>{const r=bo(Cl,e.__scopeMenu),n=Hc(Cl,e.__scopeMenu),a=Qk(Cl,e.__scopeMenu),o=Nx(Cl,e.__scopeMenu),i=h.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,d={__scopeMenu:e.__scopeMenu},u=h.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return h.useEffect(()=>u,[u]),h.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),s.jsx(bx,{asChild:!0,...d,children:s.jsx(Uk,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":e2(r.open),...e,ref:Ir(t,a.onTriggerChange),onClick:m=>{var p;(p=e.onClick)==null||p.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ae(e.onPointerMove,xc(m=>{o.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:ae(e.onPointerLeave,xc(m=>{var f,y;u();const p=(f=r.content)==null?void 0:f.getBoundingClientRect();if(p){const g=(y=r.content)==null?void 0:y.dataset.side,x=g==="right",w=x?-5:5,v=p[x?"left":"right"],b=p[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+w,y:m.clientY},{x:v,y:p.top},{x:b,y:p.top},{x:b,y:p.bottom},{x:v,y:p.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ae(e.onKeyDown,m=>{var f;const p=o.searchRef.current!=="";e.disabled||p&&m.key===" "||ez[n.dir].includes(m.key)&&(r.onOpenChange(!0),(f=r.content)==null||f.focus(),m.preventDefault())})})})});Jk.displayName=Cl;var Xk="MenuSubContent",Zk=h.forwardRef((e,t)=>{const r=Mk(kn,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,o=bo(kn,e.__scopeMenu),i=Hc(kn,e.__scopeMenu),l=Qk(Xk,e.__scopeMenu),c=h.useRef(null),d=We(t,c);return s.jsx(vc.Provider,{scope:e.__scopeMenu,children:s.jsx(Jr,{present:n||o.open,children:s.jsx(vc.Slot,{scope:e.__scopeMenu,children:s.jsx(_x,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var m;i.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ae(e.onFocusOutside,u=>{u.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ae(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:ae(e.onKeyDown,u=>{var f;const m=u.currentTarget.contains(u.target),p=tz[i.dir].includes(u.key);m&&p&&(o.onOpenChange(!1),(f=l.trigger)==null||f.focus(),u.preventDefault())})})})})})});Zk.displayName=Xk;function e2(e){return e?"open":"closed"}function Wu(e){return e==="indeterminate"}function Ex(e){return Wu(e)?"indeterminate":e?"checked":"unchecked"}function bz(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function jz(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function Nz(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=jz(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function _z(e,t){const{x:r,y:n}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,u=l.y,m=c.x,p=c.y;u>n!=p>n&&r<(m-d)*(n-u)/(p-u)+d&&(a=!a)}return a}function Sz(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return _z(r,t)}function xc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Cz=Ik,Ez=bx,kz=$k,Tz=Lk,Pz=Sx,Rz=Fk,Oz=Hh,Dz=Bk,Az=Vk,Iz=Hk,Mz=Gk,$z=Yk,Lz=Kk,Fz=Jk,Uz=Zk,qh="DropdownMenu",[Bz]=Fr(qh,[Dk]),Ur=Dk(),[zz,t2]=Bz(qh),r2=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=Ur(t),d=h.useRef(null),[u,m]=Kn({prop:a,defaultProp:o??!1,onChange:i,caller:qh});return s.jsx(zz,{scope:t,triggerId:hr(),triggerRef:d,contentId:hr(),open:u,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(p=>!p),[m]),modal:l,children:s.jsx(Cz,{...c,open:u,onOpenChange:m,dir:n,modal:l,children:r})})};r2.displayName=qh;var n2="DropdownMenuTrigger",s2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,o=t2(n2,r),i=Ur(r);return s.jsx(Ez,{asChild:!0,...i,children:s.jsx(ve.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Ir(t,o.triggerRef),onPointerDown:ae(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:ae(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});s2.displayName=n2;var Vz="DropdownMenuPortal",a2=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Ur(t);return s.jsx(kz,{...n,...r})};a2.displayName=Vz;var o2="DropdownMenuContent",i2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=t2(o2,r),o=Ur(r),i=h.useRef(!1);return s.jsx(Tz,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...n,ref:t,onCloseAutoFocus:ae(e.onCloseAutoFocus,l=>{var c;i.current||(c=a.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:ae(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});i2.displayName=o2;var Wz="DropdownMenuGroup",Hz=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Pz,{...a,...n,ref:t})});Hz.displayName=Wz;var qz="DropdownMenuLabel",l2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Rz,{...a,...n,ref:t})});l2.displayName=qz;var Gz="DropdownMenuItem",c2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Oz,{...a,...n,ref:t})});c2.displayName=Gz;var Yz="DropdownMenuCheckboxItem",d2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Dz,{...a,...n,ref:t})});d2.displayName=Yz;var Kz="DropdownMenuRadioGroup",Qz=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Az,{...a,...n,ref:t})});Qz.displayName=Kz;var Jz="DropdownMenuRadioItem",u2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Iz,{...a,...n,ref:t})});u2.displayName=Jz;var Xz="DropdownMenuItemIndicator",h2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Mz,{...a,...n,ref:t})});h2.displayName=Xz;var Zz="DropdownMenuSeparator",f2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx($z,{...a,...n,ref:t})});f2.displayName=Zz;var eV="DropdownMenuArrow",tV=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Lz,{...a,...n,ref:t})});tV.displayName=eV;var rV="DropdownMenuSubTrigger",m2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Fz,{...a,...n,ref:t})});m2.displayName=rV;var nV="DropdownMenuSubContent",p2=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ur(r);return s.jsx(Uz,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});p2.displayName=nV;var sV=r2,aV=s2,oV=a2,g2=i2,v2=l2,x2=c2,y2=d2,w2=u2,b2=h2,j2=f2,N2=m2,_2=p2;const S2=sV,C2=aV,iV=h.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(N2,{ref:a,className:re("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n,children:[r,s.jsx(vv,{className:"ml-auto"})]}));iV.displayName=N2.displayName;const lV=h.forwardRef(({className:e,...t},r)=>s.jsx(_2,{ref:r,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));lV.displayName=_2.displayName;const kx=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(oV,{children:s.jsx(g2,{ref:n,sideOffset:t,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 text-umma-800 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));kx.displayName=g2.displayName;const Fl=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(x2,{ref:n,className:re("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-umma-50 focus:text-umma-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));Fl.displayName=x2.displayName;const cV=h.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(y2,{ref:a,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(b2,{children:s.jsx(kc,{className:"h-4 w-4"})})}),t]}));cV.displayName=y2.displayName;const dV=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(w2,{ref:n,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(b2,{children:s.jsx(g_,{className:"h-2 w-2 fill-current"})})}),t]}));dV.displayName=w2.displayName;const uV=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(v2,{ref:n,className:re("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));uV.displayName=v2.displayName;const hV=h.forwardRef(({className:e,...t},r)=>s.jsx(j2,{ref:r,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));hV.displayName=j2.displayName;const fV=()=>{const e=Xr(),{toast:t}=Qt(),r=Mc(),[n,a]=h.useState([]),[o,i]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState({firstName:"",lastName:"",phone:"",email:"",gender:"",contactType:""}),[m,p]=h.useState({}),[f,y]=h.useState(null),[g,x]=h.useState(!0),[w,v]=h.useState(""),[b,j]=h.useState("all"),[k,S]=h.useState("all"),[N,E]=h.useState("all"),[T,R]=h.useState("all"),[O,F]=h.useState([]),[M,I]=h.useState([]),[B,$]=h.useState([]),[D,P]=h.useState([]),[A,G]=h.useState(!1),[_,C]=h.useState(!1),[L,W]=h.useState(null),[Y,J]=h.useState([]),[Q,he]=h.useState(!1),[fe,_e]=h.useState(!1),[z,Ne]=h.useState("recent"),rt=U=>{const X=(U||"").replace(/[^\d+]/g,"");return X.startsWith("+")?X:/^1\d{10}$/.test(X)?`+${X}`:/^\d{10}$/.test(X)?`+1${X}`:X?`+${X}`:""};h.useEffect(()=>{(async()=>{const{data:{user:X}}=await K.auth.getUser();if(!X){e("/login");return}y(X),await it(X.id),await _r(X.id)})()},[e]);const it=async U=>{try{x(!0);const{data:X,error:se}=await K.from("contacts").select("*").order("created_at",{ascending:!1});if(se){console.error("Error loading contacts:",se),t({title:"Error",description:"Failed to load contacts.",variant:"destructive"});return}const de=X||[],{data:$e}=await K.from("events").select("id").is("deleted_at",null),ct=new Set(($e||[]).map(le=>le.id)),{data:Ye}=await K.from("volunteer_roles").select("event_id, suggested_poc"),dt=new Map;(Ye||[]).forEach(le=>{if(!ct.has(le.event_id))return;(Array.isArray(le.suggested_poc)?le.suggested_poc:le.suggested_poc?[le.suggested_poc]:[]).forEach(Ie=>{Ie&&dt.set(Ie,(dt.get(Ie)||0)+1)})});const Ct=await Promise.all(de.map(async le=>{let Ce=[];console.log("Loading volunteer signups for contact:",le.id,"with source:",le.source);try{const{data:tt,error:ut}=await K.rpc("get_volunteer_signups_by_phone",{p_phone:le.phone});ut?console.error("Error loading volunteers for contact:",le.id,ut):tt&&tt.length>0?(console.log("Found volunteer signups for contact:",le.id,tt),Ce=(await Promise.all(tt.map(async xt=>{try{const{data:Jt,error:Da}=await K.from("events").select("id, title, start_datetime").eq("id",xt.event_id).is("deleted_at",null).maybeSingle();if(Da)return console.error("Error loading event for signup:",Da),null;const{data:rl,error:nl}=await K.from("volunteer_roles").select("id, role_label").eq("id",xt.role_id).maybeSingle();return nl?(console.error("Error loading role for signup:",nl),null):Jt&&rl?{event:Jt,role:rl,signup_date:xt.signup_date||"",status:xt.status||"confirmed"}:null}catch(Jt){return console.error("Error loading signup details:",Jt),null}}))).filter(xt=>xt!==null)):console.log("No volunteer signups found for contact:",le.id)}catch(tt){console.error("Exception while loading volunteer signups:",tt),console.log("This might mean the volunteer_signups table doesn't exist yet")}const Ie=(()=>{const tt=Ce.filter(ht=>(ht.status||"confirmed")==="confirmed");return new Set(tt.map(ht=>{var xt;return(xt=ht.event)==null?void 0:xt.id}).filter(ht=>!!ht)).size})(),Oe=Ce.filter(ut=>(ut.status||"confirmed")==="confirmed").length,ft=dt.get(le.id)||0;return{...le,source:le.source,volunteerHistory:Ce.length>0?Ce:[],total_events_volunteered:Ie,total_roles_volunteered:Oe,total_poc_assignments:ft}}));a(Ct)}catch(X){console.error("Error:",X),t({title:"Error",description:"Failed to load contacts.",variant:"destructive"})}finally{x(!1)}},_r=async U=>{try{const{data:X,error:se}=await K.from("events").select("id, title").is("deleted_at",null).order("title");se?console.error("Error loading events for filtering:",se):(F(X||[]),P(X||[]));const{data:de,error:$e}=await K.from("volunteer_roles").select("id, role_label, event_id").in("event_id",(X==null?void 0:X.map(ct=>ct.id))||[]).order("role_label");$e?console.error("Error loading roles for filtering:",$e):(I(de||[]),$(Ut(de||[])))}catch(X){console.error("Error loading events and roles for filtering:",X)}},Ut=U=>{const X=new Map;return U.forEach(se=>{X.has(se.role_label)||X.set(se.role_label,se)}),Array.from(X.values())},He=U=>{if(U==="all")$(Ut(M));else{const X=M.filter(se=>se.event_id===U);$(Ut(X))}},or=U=>{if(U==="all")P(O);else{const X=M.find(se=>se.id===U);if(X){const se=M.filter($e=>$e.role_label===X.role_label).map($e=>$e.event_id),de=O.filter($e=>se.includes($e.id));P(de)}}},Wt=()=>{let U=n;return w.trim()&&(U=U.filter(X=>X.name.toLowerCase().includes(w.toLowerCase())||X.phone.includes(w)||X.email&&X.email.toLowerCase().includes(w.toLowerCase()))),b!=="all"&&(b==="poc"?U=U.filter(X=>{const se=X.role,de=X.source;return se==="poc"||!se&&(de==="manual"||de==="account_signup")}):b==="volunteer"&&(U=U.filter(X=>{const se=X.role,de=X.source;return se==="volunteer"||!se&&de==="volunteer_signup"}))),k!=="all"&&(U=U.filter(X=>X.gender===k)),N!=="all"&&(U=U.filter(X=>X.volunteerHistory.some(se=>{var de;return((de=se.event)==null?void 0:de.id)===N}))),T!=="all"&&(U=U.filter(X=>X.volunteerHistory.some(se=>{var de;return((de=se.role)==null?void 0:de.id)===T}))),z==="roles_desc"?[...U].sort((X,se)=>{const de=(se.total_roles_volunteered||0)-(X.total_roles_volunteered||0);return de!==0?de:new Date(se.created_at).getTime()-new Date(X.created_at).getTime()}):z==="roles_asc"?[...U].sort((X,se)=>{const de=(X.total_roles_volunteered||0)-(se.total_roles_volunteered||0);return de!==0?de:new Date(se.created_at).getTime()-new Date(X.created_at).getTime()}):z==="attendance_desc"?[...U].sort((X,se)=>{const de=(se.total_events_volunteered||0)-(X.total_events_volunteered||0);return de!==0?de:new Date(se.created_at).getTime()-new Date(X.created_at).getTime()}):z==="attendance_asc"?[...U].sort((X,se)=>{const de=(X.total_events_volunteered||0)-(se.total_events_volunteered||0);return de!==0?de:new Date(se.created_at).getTime()-new Date(X.created_at).getTime()}):[...U].sort((X,se)=>new Date(se.created_at).getTime()-new Date(X.created_at).getTime())},gn=()=>{v(""),j("all"),S("all"),E("all"),R("all"),$(Ut(M)),P(O)},ir=U=>{var se;const X=(se=U.target.files)==null?void 0:se[0];if(X){if(X.type!=="text/csv"&&!X.name.endsWith(".csv")){t({title:"Invalid File",description:"Please select a valid CSV file.",variant:"destructive"});return}if(X.size>5*1024*1024){t({title:"File Too Large",description:"Please select a CSV file smaller than 5MB.",variant:"destructive"});return}W(X),Rn(X)}},Rn=U=>{const X=new FileReader;X.onload=se=>{var de;try{const ct=((de=se.target)==null?void 0:de.result).split(/\r?\n/).filter(le=>le.trim());if(ct.length<2){t({title:"Invalid CSV",description:"CSV file must have headers and at least one data row.",variant:"destructive"});return}const Ye=ct[0].split(",").map(le=>le.trim().replace(/"/g,""));if(!Ye.includes("Name")||!Ye.includes("Phone")){t({title:"Missing Required Headers",description:"CSV must have 'Name' and 'Phone' columns.",variant:"destructive"});return}const dt=Ye.includes("Contact Type"),Ct=ct.slice(1).map(le=>{const Ce=le.split(",").map(Oe=>Oe.trim().replace(/"/g,"")),Ie={};return Ye.forEach((Oe,ft)=>{Ie[Oe]=Ce[ft]||""}),Ie}).filter(le=>le.Name&&le.Phone);if(Ct.length===0){t({title:"No Valid Data",description:"No rows found with both Name and Phone fields.",variant:"destructive"});return}J(Ct.slice(0,5))}catch($e){console.error("Error parsing CSV:",$e),t({title:"Parse Error",description:"Error reading the CSV file. Please check the format.",variant:"destructive"})}},X.onerror=()=>{t({title:"File Read Error",description:"Error reading the file. Please try again.",variant:"destructive"})},X.readAsText(U)},Br=async()=>{if(L){he(!0);try{const U=new FileReader;U.onload=async X=>{var se,de;try{const ct=((se=X.target)==null?void 0:se.result).split(/\r?\n/).filter(Oe=>Oe.trim());if(ct.length<2){t({title:"Invalid CSV",description:"CSV file must have headers and at least one data row.",variant:"destructive"});return}const Ye=ct[0].split(",").map(Oe=>Oe.trim().replace(/"/g,""));if(!Ye.includes("Name")||!Ye.includes("Phone")){t({title:"Missing Required Headers",description:"CSV must have 'Name' and 'Phone' columns.",variant:"destructive"});return}const dt=Ye.includes("Contact Type"),Ct=ct.slice(1).map(Oe=>{const ft=Oe.split(",").map(ut=>ut.trim().replace(/"/g,"")),tt={};return Ye.forEach((ut,ht)=>{tt[ut]=ft[ht]||""}),tt}).filter(Oe=>Oe.Name&&Oe.Phone);if(Ct.length===0){t({title:"No Valid Data",description:"No rows found with both Name and Phone fields.",variant:"destructive"});return}let le=0,Ce=0;const Ie=[];for(const Oe of Ct)try{const ft=Oe.Phone.trim();if(!ft||ft.length<10){Ie.push(`Row "${Oe.Name}": Invalid phone number`),Ce++;continue}let tt=null;if(Oe.Gender){const Jt=Oe.Gender.trim().toLowerCase();if(Jt==="sister"||Jt==="sister")tt="sister";else if(Jt==="brother"||Jt==="brother")tt="brother";else{Ie.push(`Row "${Oe.Name}": Invalid gender "${Oe.Gender}" (use "brother" or "sister")`),Ce++;continue}}let ut="manual";if(dt&&Oe["Contact Type"]){const Jt=Oe["Contact Type"].trim().toLowerCase();if(Jt==="volunteer"||Jt==="volunteer")ut="volunteer_signup";else if(Jt==="poc"||Jt==="point of contact")ut="manual";else{Ie.push(`Row "${Oe.Name}": Invalid contact type "${Oe["Contact Type"]}" (use "poc" or "volunteer")`),Ce++;continue}}const ht=Jt=>Jt.split(" ").map(Da=>Da.charAt(0).toUpperCase()+Da.slice(1).toLowerCase()).join(" "),{error:xt}=await K.from("contacts").insert({user_id:f==null?void 0:f.id,name:ht(Oe.Name.trim()),phone:ft,email:((de=Oe.Email)==null?void 0:de.trim())||null,gender:tt,source:ut,role:ut==="volunteer_signup"?"volunteer":"poc"});xt?(console.error("Error importing row:",xt,Oe),Ie.push(`Row "${Oe.Name}": ${xt.message}`),Ce++):le++}catch(ft){console.error("Error processing row:",ft,Oe),Ie.push(`Row "${Oe.Name}": Unexpected error`),Ce++}await it(f.id),le>0?t({title:"Import Complete",description:`Successfully imported ${le} contacts${Ce>0?`, ${Ce} failed`:""}.`,variant:Ce>0?"destructive":"default"}):t({title:"Import Failed",description:"No contacts were imported. Please check your CSV format.",variant:"destructive"}),Ie.length>0&&console.error("Import errors:",Ie),C(!1),W(null),J([])}catch($e){console.error("Import processing error:",$e),t({title:"Import Failed",description:"There was an error processing the CSV file.",variant:"destructive"})}},U.onerror=()=>{t({title:"File Read Error",description:"Error reading the file. Please try again.",variant:"destructive"})},U.readAsText(L)}catch(U){console.error("Import error:",U),t({title:"Import Failed",description:"There was an error importing the CSV file.",variant:"destructive"})}finally{he(!1)}}},ts=async()=>{_e(!0);try{const U=Wt().map(Ye=>{var dt,Ct;return{Name:Ye.name,Phone:Ye.phone,Email:Ye.email||"",Gender:Ye.gender||"",Source:Ye.source==="volunteer_signup"?"Volunteer":"POC",Event:Ye.volunteerHistory.length>0&&((dt=Ye.volunteerHistory[0].event)==null?void 0:dt.title)||"",Role:Ye.volunteerHistory.length>0&&((Ct=Ye.volunteerHistory[0].role)==null?void 0:Ct.role_label)||"","Added Date":new Date(Ye.created_at).toLocaleDateString(),"Last Updated":new Date(Ye.updated_at).toLocaleDateString()}}),X=Object.keys(U[0]),se=[X.join(","),...U.map(Ye=>X.map(dt=>{const Ct=Ye[dt];return typeof Ct=="string"&&(Ct.includes(",")||Ct.includes('"'))?`"${Ct.replace(/"/g,'""')}"`:Ct}).join(","))].join(`
`),de=new Blob([se],{type:"text/csv;charset=utf-8;"}),$e=document.createElement("a"),ct=URL.createObjectURL(de);$e.setAttribute("href",ct),$e.setAttribute("download",`contacts_export_${new Date().toISOString().split("T")[0]}.csv`),$e.style.visibility="hidden",document.body.appendChild($e),$e.click(),document.body.removeChild($e),t({title:"Export Successful",description:`Exported ${U.length} contacts to CSV.`})}catch(U){console.error("Export error:",U),t({title:"Export Failed",description:"There was an error exporting the contacts.",variant:"destructive"})}finally{_e(!1)}},Z=(U,X)=>{switch(U){case"firstName":return X.trim()?X.trim().length<2?"First name must be at least 2 characters":"":"First name is required";case"lastName":return X.trim()?X.trim().length<2?"Last name must be at least 2 characters":"":"Last name is required";case"phone":return X.trim()?X.trim().length<10?"Phone number must be at least 10 digits":"":"Phone number is required";case"email":return d.contactType==="poc"&&!X.trim()?"Email is required for POC contacts":X.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(X)?"Please enter a valid email address":"";case"gender":return X?"":"Please select a gender";case"contactType":return X?"":"Please select a role";default:return""}},ce=()=>{const U={};return Object.keys(d).forEach(X=>{const se=Z(X,d[X]);se&&(U[X]=se)}),p(U),Object.keys(U).length===0},Re=(U,X)=>{u(se=>({...se,[U]:X})),m[U]&&p(se=>({...se,[U]:""}))},Fe=U=>U?U.charAt(0).toUpperCase()+U.slice(1).toLowerCase():"",Me=async U=>{if(U.preventDefault(),console.log("Form submission - current formData:",d),console.log("Form submission - contactType:",d.contactType),!!ce())try{const X=`${Fe(d.firstName.trim())} ${Fe(d.lastName.trim())}`.trim();if(l){const se=rt(d.phone),de={name:X,phone:se,email:d.email||null,gender:d.gender||null,role:d.contactType==="volunteer"?"volunteer":"poc",updated_at:new Date().toISOString()};console.log("Updating contact with data:",de),console.log("Contact ID:",l.id),console.log("Form contactType:",d.contactType),console.log("Calculated role:",d.contactType==="volunteer"?"volunteer":"poc"),console.log("Original contact data:",l);const{data:$e,error:ct}=await K.from("contacts").update(de).eq("id",l.id).select("*");if(ct)throw console.error("Update error:",ct),console.error("Error details:",{message:ct.message,details:ct.details,hint:ct.hint,code:ct.code}),ct;if(!$e||$e.length===0){console.error("No rows updated. Possible RLS restriction or mismatched ID.",{id:l.id,updateData:de}),t({title:"Update blocked",description:"No changes were saved. You may not have permission to update this contact.",variant:"destructive"});return}console.log("Contact updated successfully",$e[0]);const{data:Ye,error:dt}=await K.from("contacts").select("*").eq("id",l.id).single();dt?console.error("Error fetching updated contact:",dt):console.log("Updated contact data:",Ye),t({title:"Contact Updated",description:`${X} has been updated successfully.`})}else{const se=rt(d.phone),{data:de,error:$e}=await K.from("contacts").select("id, name, source").eq("phone",se).single();if($e&&$e.code!=="PGRST116")throw $e;if(de){de.source==="volunteer_signup"?t({title:"Contact Already Exists",description:`A contact with phone number ${d.phone} already exists from a volunteer signup.`,variant:"destructive"}):t({title:"Contact Already Exists",description:`A contact with phone number ${d.phone} already exists.`,variant:"destructive"});return}const ct=dt=>dt.split(" ").map(Ct=>Ct.charAt(0).toUpperCase()+Ct.slice(1).toLowerCase()).join(" "),{error:Ye}=await K.from("contacts").insert({user_id:f.id,name:ct(X),phone:se,email:d.email||null,gender:d.gender||null,source:d.contactType==="volunteer"?"volunteer_signup":"manual",role:d.contactType==="volunteer"?"volunteer":"poc"});if(Ye)throw Ye;t({title:"Contact Added",description:`${X} has been added to your contacts.`})}await it(f.id),be(!1)}catch(X){console.error("Error saving contact:",X),t({title:"Error",description:"Failed to save contact.",variant:"destructive"})}},Dt=U=>{console.log("Editing contact:",U),console.log("Contact role:",U.role),console.log("Contact source:",U.source),c(U);const[X="",se=""]=(U.name||"").split(" ",2);let de;U.role?(de=U.role==="volunteer"?"volunteer":"poc",console.log("Using role field, contactType set to:",de)):(U.source==="volunteer_signup"?de="volunteer":(U.source==="account_signup"||U.source,de="poc"),console.log("Using source field fallback, contactType set to:",de));const $e={firstName:X,lastName:se,phone:U.phone,email:U.email||"",gender:U.gender||"brother",contactType:de};console.log("Setting form data:",$e),u($e),i(!0)},Je=async U=>{try{const X=n.find(de=>de.id===U),{error:se}=await K.from("contacts").delete().eq("id",U);if(se)throw se;await it(f.id),t({title:"Contact Deleted",description:`${X==null?void 0:X.name} has been removed from your contacts.`})}catch(X){console.error("Error deleting contact:",X),t({title:"Error",description:"Failed to delete contact.",variant:"destructive"})}},Nt=()=>{c(null),u({firstName:"",lastName:"",phone:"",email:"",gender:"",contactType:""}),p({}),i(!0)},be=U=>{U||(c(null),u({firstName:"",lastName:"",phone:"",email:"",gender:"",contactType:""}),p({})),i(U)},lt=U=>U.split(" ").map(X=>X[0]).join("").toUpperCase().slice(0,2),vt=Wt();return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(dn,{}),s.jsxs("main",{className:"container mx-auto px-4 py-6 md:py-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground mb-2 tracking-tight",children:"Contacts"}),s.jsx("p",{className:"text-white/50 text-lg leading-relaxed",children:"Manage your event contacts and coordinators"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(H,{variant:"ghost",className:"h-10 px-4 text-white/50 hover:text-gold-300 hover:bg-white/10",onClick:()=>C(!0),children:[s.jsx(CO,{className:"w-4 h-4 mr-2"}),"Import CSV"]}),s.jsxs(H,{variant:"ghost",className:"h-10 px-4 text-white/50 hover:text-gold-300 hover:bg-white/10",onClick:ts,disabled:fe,children:[s.jsx(uy,{className:"w-4 h-4 mr-2"}),fe?"Exporting...":"Export"]}),s.jsxs(H,{onClick:Nt,className:"h-10 px-6 bg-gold-400 hover:bg-gold-300 text-navy-900 shadow-lg hover:shadow-md transition-all duration-200",children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Add Contact"]})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Contacts"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/30"}),s.jsx(ue,{placeholder:"Search contacts...",value:w,onChange:U=>v(U.target.value),className:"pl-10 border-white/15 focus:border-gold-400 focus:ring-gold-400/20"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-40",children:s.jsx(ea,{options:[{value:"recent",label:"Sort: Recent"},{value:"roles_desc",label:"Most Active (Roles)"},{value:"attendance_desc",label:"Most Active (Attendance)"},{value:"roles_asc",label:"Least Active (Roles)"},{value:"attendance_asc",label:"Least Active (Attendance)"}],value:z,onChange:U=>Ne(U),placeholder:"Sort"})}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>G(!A),className:"text-white/50 hover:text-gold-300 hover:bg-white/10",children:[s.jsx(vO,{className:"w-4 h-4 mr-2"}),A?"Hide":"More"," Filters"]})]})]}),A&&s.jsxs("div",{className:"mt-4 p-4 bg-background rounded-lg border border-white/10",children:[s.jsx("h3",{className:"text-sm font-medium text-white/70 mb-3",children:"Advanced Filters"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{className:"text-sm font-medium text-white/70",children:"Source:"}),s.jsx("div",{className:"flex bg-white/10 rounded-lg p-1",children:[{value:"all",label:"All Sources"},{value:"poc",label:"POC"},{value:"volunteer",label:"Volunteer"}].map(U=>s.jsx(H,{variant:b===U.value?"default":"ghost",size:"sm",onClick:()=>j(U.value),className:`text-xs px-3 py-1 h-8 ${b===U.value?"bg-gold-400 text-navy-900":"text-white/50 hover:text-gold-300"}`,children:U.label},U.value))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{className:"text-sm font-medium text-white/70",children:"Gender:"}),s.jsx("div",{className:"flex bg-white/10 rounded-lg p-1",children:[{value:"all",label:"All"},{value:"brother",label:"Brother"},{value:"sister",label:"Sister"}].map(U=>s.jsx(H,{variant:k===U.value?"default":"ghost",size:"sm",onClick:()=>S(U.value),className:`text-xs px-3 py-1 h-8 ${k===U.value?"bg-gold-400 text-navy-900":"text-white/50 hover:text-gold-300"}`,children:U.label},U.value))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{className:"text-sm font-medium text-white/70",children:"Event:"}),s.jsx("div",{className:"w-48",children:s.jsx(ea,{options:[{value:"all",label:"All Events"},...D.map(U=>({value:U.id,label:U.title}))],value:N,onChange:U=>{E(U),He(U)},placeholder:"Select an event"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{className:"text-sm font-medium text-white/70",children:"Role:"}),s.jsx("div",{className:"w-48",children:s.jsx(ea,{options:[{value:"all",label:"All Roles"},...B.map(U=>({value:U.id,label:U.role_label}))],value:T,onChange:U=>{R(U),or(U)},placeholder:N!=="all"?"Roles for selected event":"Select a role"})})]})]})]}),(w||b!=="all"||k!=="all"||N!=="all"||T!=="all")&&s.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:s.jsx(H,{variant:"ghost",size:"sm",onClick:gn,className:"text-white/40 hover:text-white/70",children:"Clear filters"})})]}),s.jsx(Pe,{className:"border-0 shadow-lg",children:s.jsx(Ae,{className:"p-0",children:g?s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"animate-spin w-12 h-12 border-3 border-gold-400 border-t-transparent rounded-full mx-auto mb-6"}),s.jsx("p",{className:"text-white/70 font-medium text-lg",children:"Loading contacts..."})]}):vt.length===0?s.jsxs("div",{className:"text-center py-16 px-8",children:[s.jsx("div",{className:"w-20 h-20 bg-white/10 rounded-2xl flex items-center justify-center mx-auto mb-6",children:s.jsx(Ft,{className:"w-10 h-10 text-white/30"})}),s.jsx("h3",{className:"text-xl font-semibold text-white/70 mb-3",children:n.length===0?"Start Building Your Network":"No Contacts Match Filters"}),s.jsx("p",{className:"text-white/40 mb-6 max-w-lg mx-auto",children:n.length===0?"Add your first contact to start building your event coordination network":"Try adjusting your search or filters to find what you're looking for."}),n.length===0&&s.jsxs(H,{onClick:Nt,className:"bg-gold-400 hover:bg-gold-300 text-navy-900 px-6 py-3 shadow-lg hover:shadow-md transition-all duration-200",children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Add Your First Contact"]})]}):s.jsx(s.Fragment,{children:r?s.jsx("div",{className:"p-4 space-y-3",children:vt.map(U=>s.jsx("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10 shadow-lg hover:shadow-md transition-all duration-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gold-400 rounded-full flex items-center justify-center text-navy-900 font-semibold",children:lt(U.name)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-foreground",children:U.name}),s.jsx("div",{className:"text-sm text-white/50",children:U.phone}),U.email&&s.jsx("div",{className:"text-sm text-white/50",children:U.email}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[U.role==="poc"&&s.jsx(ye,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700 border-purple-200",children:"POC"}),U.role==="volunteer"&&s.jsx(ye,{variant:"outline",className:"text-xs bg-background text-white/70 border-white/10",children:"Volunteer"}),U.role==="admin"&&s.jsx(ye,{variant:"outline",className:"text-xs bg-red-500/10 text-red-300 border-red-200",children:"Admin"}),!U.role&&s.jsxs(s.Fragment,{children:[U.source==="manual"&&s.jsx(ye,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700 border-purple-200",children:"POC"}),(U.volunteerHistory.length>0||U.source==="volunteer_signup")&&s.jsx(ye,{variant:"outline",className:"text-xs bg-background text-white/70 border-white/10",children:"Volunteer"})]}),U.gender&&s.jsx(ye,{variant:"outline",className:`text-xs ${U.gender==="brother"?"bg-blue-500/15 text-blue-300 border-blue-200":"bg-pink-50 text-pink-700 border-pink-200"}`,children:U.gender==="brother"?"Brother":"Sister"})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[s.jsxs(ye,{variant:"outline",className:`text-xs font-medium ${U.total_events_volunteered&&U.total_events_volunteered>0?"bg-green-50 text-green-700 border-green-200":"bg-background text-white/40 border-white/10"}`,children:[U.total_events_volunteered||0," events"]}),s.jsxs(ye,{variant:"outline",className:`text-xs font-medium ${U.total_roles_volunteered&&U.total_roles_volunteered>0?"bg-blue-500/15 text-blue-300 border-blue-200":"bg-background text-white/40 border-white/10"}`,children:[U.total_roles_volunteered||0," roles"]}),(U.role==="poc"||(U.total_poc_assignments||0)>0)&&s.jsx(s.Fragment,{children:s.jsxs(ye,{variant:"outline",className:`text-xs font-medium ${U.total_poc_assignments&&U.total_poc_assignments>0?"bg-purple-50 text-purple-700 border-purple-200":"bg-background text-white/40 border-white/10"}`,children:[U.total_poc_assignments||0," POC"]})})]}),U.volunteerHistory.length>0&&s.jsxs("div",{className:"mt-2 text-xs text-white/40",children:[s.jsx("div",{className:"font-medium mb-1",children:"Volunteer History:"}),U.volunteerHistory.slice(0,3).map((X,se)=>{var de,$e;return s.jsxs("div",{className:"ml-2",children:[(de=X.event)==null?void 0:de.title," - ",($e=X.role)==null?void 0:$e.role_label,X.status!=="confirmed"&&s.jsxs("span",{className:"text-white/30 ml-1",children:["(",X.status,")"]})]},se)}),U.volunteerHistory.length>3&&s.jsxs("div",{className:"ml-2 text-white/30",children:["+",U.volunteerHistory.length-3," more signups"]})]})]})]})},U.id))}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 bg-white/5",children:[s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Name"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Phone"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Email"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Gender"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Role"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Activity"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Added"}),s.jsx("th",{className:"text-left py-4 px-6 font-semibold text-foreground text-sm",children:"Actions"})]})}),s.jsx("tbody",{children:vt.map(U=>s.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors duration-150",children:[s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gold-400 rounded-full flex items-center justify-center text-navy-900 font-semibold text-sm",children:lt(U.name)}),s.jsx("div",{children:s.jsx("div",{className:"font-medium text-foreground",children:U.name})})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(yv,{className:"w-4 h-4 text-white/30"}),s.jsx("span",{className:"text-white/70",children:U.phone})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[U.email&&s.jsx(ju,{className:"w-4 h-4 text-white/30"}),s.jsx("span",{className:"text-white/70",children:U.email||"-"})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsx("div",{className:"flex items-center space-x-2",children:U.gender&&s.jsx(ye,{variant:"outline",className:`text-xs ${U.gender==="brother"?"bg-blue-500/15 text-blue-300 border-blue-200":"bg-pink-50 text-pink-700 border-pink-200"}`,children:U.gender==="brother"?"Brother":"Sister"})})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-2 gap-2",children:[U.role==="poc"&&s.jsx(ye,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700 border-purple-200",children:"POC"}),U.role==="volunteer"&&s.jsx(ye,{variant:"outline",className:"text-xs bg-background text-white/70 border-white/10",children:"Volunteer"}),U.role==="admin"&&s.jsx(ye,{variant:"outline",className:"text-xs bg-red-500/10 text-red-300 border-red-200",children:"Admin"}),!U.role&&s.jsxs(s.Fragment,{children:[U.source==="manual"&&s.jsx(ye,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700 border-purple-200",children:"POC"}),(U.volunteerHistory.length>0||U.source==="volunteer_signup")&&s.jsx(ye,{variant:"outline",className:"text-xs bg-background text-white/70 border-white/10",children:"Volunteer"})]})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs(ye,{variant:"outline",className:`text-xs font-medium ${U.total_events_volunteered&&U.total_events_volunteered>0?"bg-green-50 text-green-700 border-green-200":"bg-background text-white/40 border-white/10"}`,children:[U.total_events_volunteered||0," events"]}),s.jsxs(ye,{variant:"outline",className:`text-xs font-medium ${U.total_roles_volunteered&&U.total_roles_volunteered>0?"bg-blue-500/15 text-blue-300 border-blue-200":"bg-background text-white/40 border-white/10"}`,children:[U.total_roles_volunteered||0," roles"]}),(U.role==="poc"||(U.total_poc_assignments||0)>0)&&s.jsx(s.Fragment,{children:s.jsxs(ye,{variant:"outline",className:`text-xs font-medium ${U.total_poc_assignments&&U.total_poc_assignments>0?"bg-purple-50 text-purple-700 border-purple-200":"bg-background text-white/40 border-white/10"}`,children:[U.total_poc_assignments||0," POC"]})})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsx("div",{className:"text-sm text-white/40",children:new Date(U.created_at).toLocaleDateString()})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(H,{size:"sm",variant:"outline",onClick:()=>Dt(U),title:"Edit Contact",className:"h-8 w-8 p-0 border-white/15 text-white/70 hover:bg-white/5",children:s.jsx(Su,{className:"w-4 h-4"})}),s.jsxs(S2,{children:[s.jsx(C2,{asChild:!0,children:s.jsx(H,{size:"sm",variant:"outline",title:"More Actions",className:"h-8 w-8 p-0 border-white/15 text-white/70 hover:bg-white/5",children:s.jsx(gO,{className:"w-4 h-4"})})}),s.jsx(kx,{align:"end",className:"w-48",children:s.jsxs(Fl,{onClick:()=>Je(U.id),className:"text-red-400",children:[s.jsx(br,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]})})]},U.id))})]})})})})})]}),s.jsx(fr,{open:o,onOpenChange:be,children:s.jsxs(rr,{className:"max-w-md",children:[s.jsxs(nr,{children:[s.jsx(sr,{className:"text-lg",children:l?"Edit Contact":"Add New Contact"}),s.jsx(ar,{children:l?"Update the contact information below.":"Add a new contact."})]}),s.jsxs("form",{onSubmit:Me,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(te,{htmlFor:"firstName",children:"First Name *"}),s.jsx(ue,{id:"firstName",value:d.firstName,onChange:U=>Re("firstName",U.target.value),placeholder:"First name",className:m.firstName?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}),m.firstName&&s.jsxs("p",{className:"text-sm text-red-400 mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-red-400 text-xs",children:"!"})}),m.firstName]})]}),s.jsxs("div",{children:[s.jsx(te,{htmlFor:"lastName",children:"Last Name *"}),s.jsx(ue,{id:"lastName",value:d.lastName,onChange:U=>Re("lastName",U.target.value),placeholder:"Last name",className:m.lastName?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}),m.lastName&&s.jsxs("p",{className:"text-sm text-red-400 mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-red-400 text-xs",children:"!"})}),m.lastName]})]})]}),s.jsxs("div",{children:[s.jsx(te,{htmlFor:"phone",children:"Phone *"}),s.jsx(Mi,{id:"phone",value:d.phone,onChange:U=>Re("phone",U),placeholder:"Phone number",className:m.phone?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}),m.phone&&s.jsxs("p",{className:"text-sm text-red-400 mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-red-400 text-xs",children:"!"})}),m.phone]})]}),s.jsxs("div",{children:[s.jsx(te,{htmlFor:"gender",children:"Gender *"}),s.jsx(ea,{options:[{value:"brother",label:"Brother"},{value:"sister",label:"Sister"}],value:d.gender,onChange:U=>Re("gender",U),placeholder:"Select gender",className:m.gender?"border-red-500":""}),m.gender&&s.jsxs("p",{className:"text-sm text-red-400 mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-red-400 text-xs",children:"!"})}),m.gender]})]}),s.jsxs("div",{children:[s.jsx(te,{htmlFor:"contactType",children:"Role *"}),s.jsx(ea,{options:[{value:"poc",label:"Point of Contact (POC)"},{value:"volunteer",label:"Volunteer"}],value:d.contactType,onChange:U=>Re("contactType",U),placeholder:"Select role",className:m.contactType?"border-red-500":""}),m.contactType&&s.jsxs("p",{className:"text-sm text-red-400 mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-red-400 text-xs",children:"!"})}),m.contactType]})]}),s.jsxs("div",{children:[s.jsxs(te,{htmlFor:"email",children:["Email ",d.contactType==="poc"?"*":"(Optional)"]}),s.jsx(ue,{id:"email",type:"email",value:d.email,onChange:U=>Re("email",U.target.value),placeholder:"Email address",className:m.email?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}),m.email&&s.jsxs("p",{className:"text-sm text-red-400 mt-1 flex items-center gap-1",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-red-400 text-xs",children:"!"})}),m.email]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 pt-4",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>be(!1),className:"w-full sm:w-auto border-white/15 text-white/70 hover:bg-white/5",children:"Cancel"}),s.jsx(H,{type:"submit",className:"w-full sm:w-auto bg-gold-400 hover:bg-gold-300 text-navy-900",children:l?"Update Contact":"Add Contact"})]})]})]})}),s.jsx(fr,{open:_,onOpenChange:C,children:s.jsxs(rr,{className:"max-w-2xl",children:[s.jsxs(nr,{children:[s.jsx(sr,{className:"text-lg",children:"Import Contacts from CSV"}),s.jsx(ar,{children:"Upload a CSV file to import contacts. The file should have columns for Name, Phone, Email (optional), Gender (optional), and Contact Type (optional, defaults to POC)."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"csv-file",children:"Select CSV File"}),s.jsx(ue,{id:"csv-file",type:"file",accept:".csv",onChange:ir,className:"border-white/15 focus:border-gold-400 focus:ring-gold-400/20"}),s.jsx("p",{className:"text-sm text-white/40",children:"Supported format: CSV with headers (Name, Phone, Email, Gender, Contact Type)"})]}),Y.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{children:"Preview (First 5 rows)"}),s.jsx("div",{className:"max-h-40 overflow-y-auto border border-white/10 rounded-md p-3 bg-background",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-white/10",children:Object.keys(Y[0]||{}).map(U=>s.jsx("th",{className:"text-left py-1 px-2 font-medium text-white/70",children:U},U))})}),s.jsx("tbody",{children:Y.map((U,X)=>s.jsx("tr",{className:"border-b border-white/5",children:Object.values(U).map((se,de)=>s.jsx("td",{className:"py-1 px-2 text-white/50",children:String(se||"-")},de))},X))})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{children:"Sample CSV Format"}),s.jsxs("div",{className:"bg-background p-3 rounded-md font-mono text-sm",children:[s.jsx("div",{children:"Name,Phone,Email,Gender,Contact Type"}),s.jsx("div",{children:"John Doe,+1234567890,john@example.com,brother,poc"}),s.jsx("div",{children:"Jane Smith,+1234567891,jane@example.com,sister,volunteer"})]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{const U=`Name,Phone,Email,Gender,Contact Type
John Doe,+1234567890,john@example.com,brother,poc
Jane Smith,+1234567891,jane@example.com,sister,volunteer
Ahmed Hassan,+1234567892,ahmed@example.com,brother,poc
Fatima Ali,+1234567893,fatima@example.com,sister,volunteer
Mohammed Khan,+1234567894,mohammed@example.com,brother,poc
Aisha Rahman,+1234567895,aisha@example.com,sister,volunteer`,X=new Blob([U],{type:"text/csv"}),se=URL.createObjectURL(X),de=document.createElement("a");de.href=se,de.download="sample_contacts.csv",de.click(),URL.revokeObjectURL(se)},className:"text-xs",children:[s.jsx(uy,{className:"w-3 h-3 mr-1"}),"Download Sample CSV"]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>{C(!1),W(null),J([])},disabled:Q,children:"Cancel"}),s.jsx(H,{onClick:Br,disabled:!L||Q,className:"bg-gold-400 hover:bg-gold-300 text-navy-900",children:Q?"Importing...":"Import Contacts"})]})]})})]})},E2=()=>{const{toast:e}=Qt(),[t,r]=h.useState(!1);return{deleteVolunteer:async(a,o,i,l,c)=>{if(t)return console.log("[DELETION] Already deleting, ignoring request"),!1;r(!0);try{if(console.log(`[DELETION] Starting deletion process for volunteer ${a} (${o})`),!i&&(!l||!c))return console.log("[DELETION] No admin password or phone verification provided"),e({title:"Authorization Required",description:"Please provide either admin password or phone verification to delete volunteers.",variant:"destructive"}),!1;console.log(`[DELETION] Calling Edge Function with ${i?"admin password":"phone verification"}`);const d={volunteerId:a,volunteerName:o,...i&&{adminPassword:i},...l&&{phoneVerification:l},...c&&{volunteerPhone:c}};console.log("[DELETION] Request body:",d);const{data:u,error:m}=await K.functions.invoke("delete-volunteer",{body:d});return console.log("[DELETION] Edge Function response received:",{data:u,error:m}),m?(console.error("[DELETION] Network/Connection error:",m),e({title:"Connection Error",description:m.message||"Failed to connect to server.",variant:"destructive"}),!1):(u==null?void 0:u.success)===!0?(console.log("[DELETION]  SUCCESS: Volunteer deleted successfully"),e({title:"Volunteer Removed",description:u.message||`${o} has been successfully removed from the event.`}),!0):u!=null&&u.error?(console.error("[DELETION]  Server error:",u.error),e({title:"Deletion Failed",description:u.error,variant:"destructive"}),!1):(console.error("[DELETION]  Unexpected response:",u),e({title:"Unexpected Error",description:"Received unexpected response from server.",variant:"destructive"}),!1)}catch(d){return console.error("[DELETION]  Unexpected exception:",d),e({title:"Deletion Failed",description:"An unexpected error occurred while deleting the volunteer.",variant:"destructive"}),!1}finally{console.log("[DELETION] Setting isDeleting to false"),r(!1)}},isDeleting:t}};var mV=Symbol("radix.slottable");function pV(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=mV,t}var k2="AlertDialog",[gV]=Fr(k2,[tC]),Bs=tC(),T2=e=>{const{__scopeAlertDialog:t,...r}=e,n=Bs(t);return s.jsx(Rh,{...n,...r,modal:!0})};T2.displayName=k2;var vV="AlertDialogTrigger",xV=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(vC,{...a,...n,ref:t})});xV.displayName=vV;var yV="AlertDialogPortal",P2=e=>{const{__scopeAlertDialog:t,...r}=e,n=Bs(t);return s.jsx(Oh,{...n,...r})};P2.displayName=yV;var wV="AlertDialogOverlay",R2=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(Xi,{...a,...n,ref:t})});R2.displayName=wV;var fi="AlertDialogContent",[bV,jV]=gV(fi),NV=pV("AlertDialogContent"),O2=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,o=Bs(r),i=h.useRef(null),l=We(t,i),c=h.useRef(null);return s.jsx(I6,{contentName:fi,titleName:D2,docsSlug:"alert-dialog",children:s.jsx(bV,{scope:r,cancelRef:c,children:s.jsxs(Zi,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:ae(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(NV,{children:n}),s.jsx(SV,{contentRef:i})]})})})});O2.displayName=fi;var D2="AlertDialogTitle",A2=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(Ac,{...a,...n,ref:t})});A2.displayName=D2;var I2="AlertDialogDescription",M2=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(Ic,{...a,...n,ref:t})});M2.displayName=I2;var _V="AlertDialogAction",$2=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Bs(r);return s.jsx(Dh,{...a,...n,ref:t})});$2.displayName=_V;var L2="AlertDialogCancel",F2=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=jV(L2,r),o=Bs(r),i=We(t,a);return s.jsx(Dh,{...o,...n,ref:i})});F2.displayName=L2;var SV=({contentRef:e})=>{const t=`\`${fi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${fi}\` by passing a \`${I2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},CV=T2,EV=P2,U2=R2,B2=O2,z2=$2,V2=F2,W2=A2,H2=M2;const q2=CV,kV=EV,G2=h.forwardRef(({className:e,...t},r)=>s.jsx(U2,{className:re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));G2.displayName=U2.displayName;const Tx=h.forwardRef(({className:e,...t},r)=>s.jsxs(kV,{children:[s.jsx(G2,{}),s.jsx(B2,{ref:r,className:re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-2 border-umma-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg rounded-xl",e),...t})]}));Tx.displayName=B2.displayName;const Px=({className:e,...t})=>s.jsx("div",{className:re("flex flex-col space-y-2 text-center sm:text-left",e),...t});Px.displayName="AlertDialogHeader";const Rx=({className:e,...t})=>s.jsx("div",{className:re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Rx.displayName="AlertDialogFooter";const Ox=h.forwardRef(({className:e,...t},r)=>s.jsx(W2,{ref:r,className:re("text-lg font-semibold text-umma-800",e),...t}));Ox.displayName=W2.displayName;const Dx=h.forwardRef(({className:e,...t},r)=>s.jsx(H2,{ref:r,className:re("text-sm text-umma-600",e),...t}));Dx.displayName=H2.displayName;const Ax=h.forwardRef(({className:e,...t},r)=>s.jsx(z2,{ref:r,className:re(uc(),e),...t}));Ax.displayName=z2.displayName;const Ix=h.forwardRef(({className:e,...t},r)=>s.jsx(V2,{ref:r,className:re(uc({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ix.displayName=V2.displayName;const TV=({isOpen:e,onClose:t,onConfirm:r,volunteer:n,isDeleting:a})=>{const[o,i]=h.useState(""),[l,c]=h.useState(!1),[d,u]=h.useState(!1),m=async()=>{if(!(!o.trim()||d||a)){console.log("[DIALOG] Confirming deletion with password"),u(!0);try{await r(o),console.log("[DIALOG] Deletion completed successfully")}catch(y){console.error("[DIALOG] Error during deletion:",y),u(!1)}}},p=()=>{if(d||a){console.log(`[DIALOG] Cannot close while processing (processing: ${d}, deleting: ${a})`);return}console.log("[DIALOG] Closing dialog and resetting state"),i(""),c(!1),u(!1),t()};if(!e&&d&&u(!1),!n)return null;const f=!d&&!a;return s.jsx(q2,{open:e,onOpenChange:p,children:s.jsxs(Tx,{className:"max-w-md",children:[s.jsxs(Px,{children:[s.jsx(Ox,{className:"text-red-800",children:"Remove Volunteer?"}),s.jsxs(Dx,{children:["Are you sure you want to remove ",n.name," from this volunteer role?"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-red-500/10 p-3 rounded-lg border border-white/10",children:s.jsx("div",{className:"text-red-400 text-sm",children:"This action cannot be undone. The volunteer will need to sign up again if they want to participate."})}),l?s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ju,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Contact Event Organizers"}),s.jsx("div",{className:"text-blue-700 text-sm mb-3",children:"Please reach out to the event organizers or administrators to remove this volunteer from the list."}),s.jsxs("div",{className:"text-blue-600 text-sm",children:["Include the volunteer's name (",s.jsx("strong",{children:n.name}),") and phone number in your request."]})]})]}),s.jsx("div",{className:"mt-3 text-center",children:s.jsx(H,{variant:"link",onClick:()=>c(!1),className:"text-sm text-blue-600 hover:text-blue-800 p-0",disabled:!f,children:" Back to password entry"})})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(te,{htmlFor:"delete-password",className:"text-sm font-medium",children:"Enter admin password to proceed:"}),s.jsx(ue,{id:"delete-password",type:"password",value:o,onChange:y=>i(y.target.value),placeholder:"Admin password",className:"mt-1",disabled:!f,onKeyDown:y=>{y.key==="Enter"&&o.trim()&&f&&m()}})]}),s.jsx("div",{className:"text-center",children:s.jsx(H,{variant:"link",onClick:()=>c(!0),className:"text-sm text-blue-600 hover:text-blue-800 p-0",disabled:!f,children:"Don't have the password? Contact an admin"})})]})]}),s.jsxs(Rx,{children:[s.jsx(Ix,{disabled:!f,onClick:p,children:"Cancel"}),!l&&s.jsx(Ax,{onClick:m,disabled:!f||!o.trim(),className:"bg-red-500/100 hover:bg-red-600",children:d||a?"Removing...":"Yes, Remove"})]})]})})},PV=()=>{const{toast:e}=Qt(),[t,r]=h.useState(!1);return{shareEvent:async(d,u,m)=>{r(!0);try{const{data:{user:p}}=await K.auth.getUser();if(!p)return e({title:"Error",description:"You must be logged in to share events.",variant:"destructive"}),!1;const{data:f,error:y}=await K.functions.invoke("share-event",{body:{eventId:d,userEmail:u,permissionLevel:m,action:"share",currentUserId:p.id}});return y?(e({title:"Error sharing event",description:y.message||"Failed to share event. Please try again.",variant:"destructive"}),!1):f&&f.error?(e({title:"Error sharing event",description:f.error,variant:"destructive"}),!1):(e({title:"Event shared successfully",description:`Event shared with ${u} (${m} access).`}),!0)}catch(p){return console.error("Error sharing event:",p),e({title:"Error",description:"An unexpected error occurred while sharing the event.",variant:"destructive"}),!1}finally{r(!1)}},getEventShares:async d=>{try{console.log("Fetching shares for event:",d);const{data:u,error:m}=await K.rpc("get_event_shares_with_emails",{p_event_id:d});if(console.log("RPC shares result:",{rpcData:u,rpcError:m}),m)return console.error("RPC error fetching event shares:",m),[];if(!u)return[];const p=u.map(f=>({id:f.id,event_id:f.event_id,shared_by:f.shared_by,shared_with:f.shared_with,permission_level:f.permission_level,created_at:f.created_at,updated_at:f.updated_at,shared_with_profile:f.shared_with_email?{id:f.shared_with,email:f.shared_with_email,full_name:f.shared_with_full_name}:void 0,shared_by_profile:f.shared_by_email?{id:f.shared_by,email:f.shared_by_email,full_name:f.shared_by_full_name}:void 0}));return console.log("Mapped shares with emails:",p),p}catch(u){return console.error("Error in getEventShares:",u),[]}},getSharedEvents:async()=>{try{const{data:{user:d}}=await K.auth.getUser();if(!d)return[];const{data:u,error:m}=await K.from("event_shares").select(`
          *,
          event:events(*)
        `).eq("shared_with",d.id);return m?(console.error("Error fetching shared events:",m),[]):(u||[]).map(p=>({event:p.event,permission_level:p.permission_level,shared_by:p.shared_by,shared_at:p.created_at}))}catch(d){return console.error("Error:",d),[]}},removeShare:async d=>{r(!0);try{const{error:u}=await K.from("event_shares").delete().eq("id",d);return u?(e({title:"Error removing share",description:"Failed to remove sharing access.",variant:"destructive"}),!1):(e({title:"Share removed",description:"Sharing access has been removed."}),!0)}catch(u){return console.error("Error removing share:",u),e({title:"Error",description:"An unexpected error occurred while removing the share.",variant:"destructive"}),!1}finally{r(!1)}},checkEventAccess:async(d,u="view")=>{try{const{data:{user:m}}=await K.auth.getUser();return m?{hasAccess:!0,permissionLevel:"edit"}:{hasAccess:!1,permissionLevel:null}}catch(m){return console.error("Error checking event access:",m),{hasAccess:!1,permissionLevel:null}}},getPreviouslySharedUsers:async()=>{try{const{data:{user:d}}=await K.auth.getUser();if(!d)return console.log("No user found in getPreviouslySharedUsers"),[];console.log("Current user ID:",d.id);const{data:u,error:m}=await K.rpc("get_previously_shared_users");return m?(console.error("Error fetching previously shared users:",m),[]):(console.log("Raw RPC result for previously shared users:",u),u||[])}catch(d){return console.error("Error in getPreviouslySharedUsers:",d),[]}},isLoading:t}};function RV(e,t=[]){let r=[];function n(o,i){const l=h.createContext(i);l.displayName=o+"Context";const c=r.length;r=[...r,i];const d=m=>{var w;const{scope:p,children:f,...y}=m,g=((w=p==null?void 0:p[e])==null?void 0:w[c])||l,x=h.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:x,children:f})};d.displayName=o+"Provider";function u(m,p){var g;const f=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,y=h.useContext(f);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=r.map(i=>h.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,OV(a,...t)]}function OV(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var DV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mx=DV.reduce((e,t)=>{const r=_h(`Primitive.${t}`),n=h.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Y2={exports:{}},K2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=h;function AV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var IV=typeof Object.is=="function"?Object.is:AV,MV=Li.useState,$V=Li.useEffect,LV=Li.useLayoutEffect,FV=Li.useDebugValue;function UV(e,t){var r=t(),n=MV({inst:{value:r,getSnapshot:t}}),a=n[0].inst,o=n[1];return LV(function(){a.value=r,a.getSnapshot=t,_m(a)&&o({inst:a})},[e,r,t]),$V(function(){return _m(a)&&o({inst:a}),e(function(){_m(a)&&o({inst:a})})},[e]),FV(r),r}function _m(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!IV(e,r)}catch{return!0}}function BV(e,t){return t()}var zV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BV:UV;K2.useSyncExternalStore=Li.useSyncExternalStore!==void 0?Li.useSyncExternalStore:zV;Y2.exports=K2;var VV=Y2.exports;function WV(){return VV.useSyncExternalStore(HV,()=>!0,()=>!1)}function HV(){return()=>{}}var $x="Avatar",[qV]=RV($x),[GV,Q2]=qV($x),J2=h.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,o]=h.useState("idle");return s.jsx(GV,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:s.jsx(Mx.span,{...n,ref:t})})});J2.displayName=$x;var X2="AvatarImage",Z2=h.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...o}=e,i=Q2(X2,r),l=YV(n,o),c=Mr(d=>{a(d),i.onImageLoadingStatusChange(d)});return Vt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Mx.img,{...o,ref:t,src:n}):null});Z2.displayName=X2;var eT="AvatarFallback",tT=h.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,o=Q2(eT,r),[i,l]=h.useState(n===void 0);return h.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),i&&o.imageLoadingStatus!=="loaded"?s.jsx(Mx.span,{...a,ref:t}):null});tT.displayName=eT;function fb(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function YV(e,{referrerPolicy:t,crossOrigin:r}){const n=WV(),a=h.useRef(null),o=n?(a.current||(a.current=new window.Image),a.current):null,[i,l]=h.useState(()=>fb(o,e));return Vt(()=>{l(fb(o,e))},[o,e]),Vt(()=>{const c=m=>()=>{l(m)};if(!o)return;const d=c("loaded"),u=c("error");return o.addEventListener("load",d),o.addEventListener("error",u),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",d),o.removeEventListener("error",u)}},[o,r,t]),i}var rT=J2,nT=Z2,sT=tT;const aT=h.forwardRef(({className:e,...t},r)=>s.jsx(rT,{ref:r,className:re("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));aT.displayName=rT.displayName;const KV=h.forwardRef(({className:e,...t},r)=>s.jsx(nT,{ref:r,className:re("aspect-square h-full w-full",e),...t}));KV.displayName=nT.displayName;const oT=h.forwardRef(({className:e,...t},r)=>s.jsx(sT,{ref:r,className:re("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));oT.displayName=sT.displayName;const Lx=()=>{const{toast:e}=Qt(),[t,r]=h.useState(!1);return{isLoading:t,getNoShowVolunteers:async u=>{try{const{data:m,error:p}=await K.from("volunteers").select(`
          id,
          name,
          phone,
          signup_date,
          checked_in_at,
          volunteer_roles!inner(role_label)
        `).eq("event_id",u).eq("status","confirmed").is("checked_in_at",null);if(p)throw p;return(m||[]).map(f=>{var y,g;return{volunteer_id:f.id,volunteer_name:f.name,volunteer_phone:f.phone,role_label:Array.isArray(f.volunteer_roles)?(y=f.volunteer_roles[0])==null?void 0:y.role_label:(g=f.volunteer_roles)==null?void 0:g.role_label,signup_date:f.signup_date||new Date().toISOString()}})}catch(m){throw console.error("Error getting no-show volunteers:",m),m}},cleanupNoShowVolunteers:async u=>{r(!0);try{const{data:m,error:p}=await K.rpc("cleanup_no_show_volunteers",{p_event_id:u});if(p)throw p;return m||[]}catch(m){throw console.error("Error cleaning up no-show volunteers:",m),m}finally{r(!1)}},completeEventAndCleanup:async u=>{r(!0);try{const{data:m,error:p}=await K.rpc("complete_event_and_cleanup",{p_event_id:u});if(p)throw p;return m&&m[0]||null}catch(m){throw console.error("Error completing event and cleanup:",m),m}finally{r(!1)}},checkInVolunteer:async(u,m)=>{r(!0);try{const{error:p}=await K.rpc("update_volunteer_checkin_status",{p_volunteer_id:u,p_action:"checkin",p_notes:m||null});if(p)throw p;return e({title:"Success",description:"Volunteer checked in successfully!"}),!0}catch(p){return console.error("Error checking in volunteer:",p),e({title:"Error",description:"Failed to check in volunteer. Please try again.",variant:"destructive"}),!1}finally{r(!1)}},checkOutVolunteer:async(u,m)=>{r(!0);try{const{error:p}=await K.rpc("update_volunteer_checkin_status",{p_volunteer_id:u,p_action:"checkout",p_notes:m||null});if(p)throw p;return e({title:"Success",description:"Volunteer checked out successfully!"}),!0}catch(p){return console.error("Error checking out volunteer:",p),e({title:"Error",description:"Failed to check out volunteer. Please try again.",variant:"destructive"}),!1}finally{r(!1)}},updateVolunteerCheckInStatus:(u,m,p)=>u.map(f=>f.id===m?{...f,...p}:f),getCheckInStats:u=>{const m=u.length,p=u.filter(g=>g.checked_in_at).length,f=u.filter(g=>g.checked_out_at).length,y=m-p;return{total:m,checkedIn:p,checkedOut:f,notCheckedIn:y,checkInRate:m>0?Math.round(p/m*100):0}}}},QV=({volunteer:e,isOpen:t,onClose:r,onUpdateNotes:n,notes:a,setNotes:o})=>{const i=h.useRef(null),l=Mc();h.useEffect(()=>{t&&i.current&&a.length>0&&setTimeout(()=>{if(i.current){if(a.endsWith(" "))i.current.setSelectionRange(a.length,a.length);else{const u=a+" ";o(u),i.current.setSelectionRange(u.length,u.length)}i.current.focus()}},100)},[t]);const c=()=>{if(i.current&&a.length>0)if(a.endsWith(" "))i.current.setSelectionRange(a.length,a.length);else{const u=a+" ";o(u),setTimeout(()=>{i.current&&i.current.setSelectionRange(u.length,u.length)},0)}},d=()=>{i.current&&setTimeout(()=>{const u=i.current;if(u){const m=u.closest(".overflow-y-auto");if(m){const p=u.offsetTop,f=u.offsetHeight,y=m.clientHeight;m.scrollTop;const g=p-y/2+f/2;m.scrollTo({top:Math.max(0,g),behavior:"smooth"})}else u.scrollIntoView({behavior:"smooth",block:"center"})}},350)};return s.jsx(fr,{open:t,onOpenChange:r,children:s.jsxs(rr,{className:`
        ${l?"w-[95vw] max-w-[95vw] max-h-[60vh] top-[8vh] translate-x-[-50%] translate-y-0 p-4 rounded-xl":"sm:max-w-md max-h-[85vh]"} 
        flex flex-col overflow-hidden bg-[#faf7f2] border-[#e9e5dd] shadow-xl
      `,children:[s.jsxs(nr,{className:`flex-shrink-0 ${l?"pb-2":""}`,children:[s.jsxs(sr,{className:l?"text-base":"",children:["Add Notes for ",e.name]}),!l&&s.jsx(ar,{children:"Add or edit notes about this volunteer's check-in status."})]}),s.jsx("div",{className:`flex-1 overflow-y-auto ${l?"pb-3":"pb-4"}`,children:s.jsxs("div",{className:"px-1",children:[s.jsx(te,{htmlFor:"notes",className:l?"text-sm mb-2 block":"mb-2 block",children:"Notes"}),s.jsx(un,{ref:i,id:"notes",value:a,onChange:u=>o(u.target.value),onFocus:u=>{c(),d()},placeholder:"e.g., 'Running late', 'Left early', 'Special instructions'...",rows:l?4:5,className:"resize-none text-[15px] rounded-2xl border border-[#e6e2d8] px-4 py-3 bg-white/95 shadow-[inset_0_1px_0_rgba(0,0,0,0.02),0_8px_24px_rgba(0,0,0,0.04)] focus:border-gold-400 focus:ring-2 focus:ring-gold-400/20 focus:ring-offset-0"})]})}),!l&&s.jsxs("div",{className:"flex justify-end space-x-2 flex-shrink-0 pt-4 border-t border-[#e9e5dd]",children:[s.jsx(H,{variant:"outline",onClick:r,children:"Cancel"}),s.jsx(H,{onClick:n,className:"bg-gold-400 hover:bg-gold-300",children:"Save Notes"})]}),l&&s.jsx("div",{className:"flex-shrink-0 pt-3 pb-1",children:s.jsx(H,{onClick:n,className:"w-full bg-gold-400 hover:bg-gold-300 text-white rounded-full px-6 py-3.5 shadow-xl font-medium text-[15px]",children:"Save Notes"})})]})})},JV=({eventId:e,volunteers:t,volunteerRoles:r,onVolunteerUpdate:n})=>{const{toast:a}=Qt(),{checkInVolunteer:o,checkOutVolunteer:i}=Lx(),[l,c]=h.useState(""),[d,u]=h.useState(null),[m,p]=h.useState(!1),[f,y]=h.useState(!1),[g,x]=h.useState(!1),[w,v]=h.useState(""),[b,j]=h.useState("all"),k=h.useRef(t),S=h.useRef(n);h.useEffect(()=>{k.current=t,S.current=n},[t,n]),h.useEffect(()=>{if(!e)return;console.log("Setting up real-time subscription for event:",e);const _=K.channel(`volunteer-updates-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"volunteers",filter:`event_id=eq.${e}`},C=>{console.log("Real-time update received:",C);const L=C.new,W=k.current,Y=S.current,J=W.find(Q=>Q.id===L.id);J?(J.checked_in_at!==L.checked_in_at||J.checked_out_at!==L.checked_out_at||J.check_in_notes!==L.check_in_notes)&&(console.log("Updating volunteer from real-time subscription:",L),Y(L)):console.log("Volunteer not found in current list, update ignored")}).subscribe(C=>{console.log("Real-time subscription status:",C),C==="SUBSCRIBED"?console.log(" Successfully subscribed to volunteer updates for event:",e):C==="CHANNEL_ERROR"?console.error(" Error subscribing to volunteer updates"):C==="TIMED_OUT"?console.warn(" Real-time subscription timed out, retrying..."):C==="CLOSED"&&console.log("Real-time subscription closed")});return()=>{console.log("Cleaning up real-time subscription for event:",e),K.removeChannel(_)}},[e]);const N=_=>r.find(C=>C.id===_.role_id),E=_=>{const C=[];C.push(_.name||""),C.push(_.phone||"");const L=(_.phone||"").replace(/\D/g,"");L&&C.push(L);const W=N(_);W!=null&&W.role_label&&C.push(W.role_label);const Y=Q=>{if(Q&&(Q.name&&C.push(Q.name),Q.email&&C.push(Q.email),Q.phone)){C.push(Q.phone);const he=String(Q.phone).replace(/\D/g,"");he&&C.push(he)}};W!=null&&W.poc_contacts&&Array.isArray(W.poc_contacts)&&W.poc_contacts.forEach(Y),W!=null&&W.poc_contact&&Y(W.poc_contact);const J=W==null?void 0:W.suggested_poc;return J&&(Array.isArray(J)?J.forEach(Q=>C.push(String(Q))):C.push(String(J))),C.filter(Boolean).join(" ").toLowerCase().replace(/\s+/g," ").trim()},T=t.filter(_=>{if(!l||!l.trim())return!0;const C=l.trim(),L=C.toLowerCase(),W=C.replace(/\D/g,""),Y=E(_);return!!(Y.includes(L)||W&&Y.includes(W))}).filter(_=>b==="all"?!0:b==="in"?!!_.checked_in_at&&!_.checked_out_at:!_.checked_in_at||!!_.checked_out_at),R=_=>{u(_),v(_.check_in_notes||""),p(!0)},O=async()=>{if(d)try{const{error:_}=await K.rpc("update_volunteer_checkin_status",{p_volunteer_id:d.id,p_action:"notes",p_notes:w||null});if(_)throw _;const C={...d,check_in_notes:w||null};n(C),a({title:"Notes Updated",description:"Volunteer notes have been updated successfully."}),p(!1)}catch(_){console.error("Error updating notes:",_),a({title:"Error",description:"Failed to update notes. Please try again.",variant:"destructive"})}},F=async _=>{y(!0);try{if(!await o(_))return;const L=t.find(W=>W.id===_);L&&n({...L,checked_in_at:new Date().toISOString(),checked_out_at:null}),a({title:"Success",description:"Volunteer checked in successfully!"})}catch(C){console.error("Error checking in volunteer:",C),a({title:"Error",description:"Failed to check in volunteer. Please try again.",variant:"destructive"})}finally{y(!1)}},M=async _=>{x(!0);try{if(!await i(_))return;const L=t.find(W=>W.id===_);L&&n({...L,checked_out_at:new Date().toISOString()}),a({title:"Success",description:"Volunteer checked out successfully!"})}catch(C){console.error("Error checking out volunteer:",C),a({title:"Error",description:"Failed to check out volunteer. Please try again.",variant:"destructive"})}finally{x(!1)}},I=async _=>{y(!0);try{const C="Running late",{error:L}=await K.rpc("update_volunteer_checkin_status",{p_volunteer_id:_.id,p_action:"running_late",p_notes:C});if(L)throw L;const Y={...t.find(J=>J.id===_.id)||_,check_in_notes:C,checked_in_at:null};n(Y),a({title:"Status Updated",description:`${_.name} has been marked as running late.`})}catch(C){console.error("Error updating running late status:",C),a({title:"Error",description:"Failed to update status. Please try again.",variant:"destructive"})}finally{y(!1)}},B=_=>{var L;if(_.checked_in_at&&!_.checked_out_at)return{status:"checked-in",label:"Checked In",variant:"default"};const C=((L=_.check_in_notes)==null?void 0:L.trim().toLowerCase())||"";return!_.checked_in_at&&C.includes("running late")?{status:"running-late",label:"Running Late",variant:"warning"}:{status:"not-checked-in",label:"Not Checked In",variant:"destructive"}},$=t.length,D=t.filter(_=>_.checked_in_at&&!_.checked_out_at).length,P=t.filter(_=>_.checked_out_at&&!_.checked_in_at).length,A=$-D-P,G=_=>_.trim().split(/\s+/).slice(0,2).map(L=>{var W;return((W=L[0])==null?void 0:W.toUpperCase())||""}).join("");return s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"frosted-panel p-4 sm:p-5",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Pi,{className:"absolute left-3 sm:left-3 top-1/2 transform -translate-y-1/2 text-white/40 w-4 h-4 sm:w-5 sm:h-5 z-10"}),s.jsxs("div",{"aria-hidden":"true",style:{position:"absolute",left:"-10000px",top:"auto",width:1,height:1,overflow:"hidden",opacity:0,pointerEvents:"none"},children:[s.jsx("input",{tabIndex:-1,type:"text",autoComplete:"username",name:"trap_username"}),s.jsx("input",{tabIndex:-1,type:"password",autoComplete:"current-password",name:"trap_password"})]}),s.jsx(ue,{placeholder:"Search...",value:l,onChange:_=>c(_.target.value),className:"pl-10 sm:pl-12 h-9 sm:h-10 rounded-xl bg-white/70 backdrop-blur-md border-umma-500 text-sm w-full",autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",spellCheck:!1,inputMode:"search",enterKeyHint:"search",name:"roster_search","data-lpignore":"true","data-1p-ignore":!0})]}),s.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/60 backdrop-blur-md p-1 ring-1 ring-white/60 w-full sm:w-auto justify-center sm:justify-start shrink-0",children:[s.jsxs(H,{variant:b==="all"?"default":"ghost",size:"sm",onClick:()=>j("all"),className:`rounded-full text-xs sm:text-sm px-3 sm:px-4 flex items-center gap-1.5 sm:gap-2 ${b==="all"?"bg-umma-600 text-white hover:bg-umma-700 shadow-sm":"text-stone-700 hover:bg-stone-100/80"}`,children:[s.jsx(Ft,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),s.jsx("span",{className:"font-semibold",children:$}),s.jsx("span",{children:"Total"})]}),s.jsxs(H,{variant:b==="not-in"?"default":"ghost",size:"sm",onClick:()=>j("not-in"),className:`rounded-full text-xs sm:text-sm px-3 sm:px-4 flex items-center gap-1.5 sm:gap-2 ${b==="not-in"?"bg-umma-600 text-white hover:bg-umma-700 shadow-sm":"text-stone-700 hover:bg-stone-100/80"}`,children:[s.jsx(Cu,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),s.jsx("span",{className:"font-semibold",children:A}),s.jsx("span",{children:"Not In"})]}),s.jsxs(H,{variant:b==="in"?"default":"ghost",size:"sm",onClick:()=>j("in"),className:`rounded-full text-xs sm:text-sm px-3 sm:px-4 flex items-center gap-1.5 sm:gap-2 ${b==="in"?"bg-umma-600 text-white hover:bg-umma-700 shadow-sm":"text-stone-700 hover:bg-stone-100/80"}`,children:[s.jsx(Ti,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),s.jsx("span",{className:"font-semibold",children:D}),s.jsx("span",{children:"Checked In"})]})]})]}),s.jsx("div",{className:"mt-3 sm:mt-4 space-y-2 sm:space-y-3",children:T.map(_=>{const C=N(_),L=B(_),W=!!_.checked_in_at&&!_.checked_out_at,Y=L.status==="running-late";return s.jsxs("div",{className:`relative flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 p-3 sm:p-4 rounded-xl backdrop-blur-md border transition-all duration-150 ${W?"bg-umma-600 border-umma-600 text-white hover:border-umma-700":Y?"bg-amber-50/60 border-amber-300/60 hover:bg-amber-100/70":"bg-white/70 border-umma-500 hover:bg-white/80"}`,children:[s.jsxs("div",{className:"flex items-center gap-2.5 min-w-0",children:[s.jsx(aT,{className:"h-8 w-8",children:s.jsx(oT,{className:"text-xs font-medium bg-white text-umma-700",children:G(_.name)})}),s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:`font-medium text-sm sm:text-base truncate flex items-center gap-1.5 sm:gap-2 flex-wrap ${W?"text-white":"text-stone-900"}`,children:[_.name,s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(_.phone),a({title:"Phone number copied!",description:`${_.name}'s phone number copied to clipboard`})},className:`${W?"text-white/90 hover:text-white":"text-umma-700 hover:text-umma-800"} text-xs sm:text-sm font-medium cursor-pointer no-underline`,title:`Click to copy ${_.name}'s phone number`,children:_.phone})]}),s.jsx("div",{className:`text-xs truncate ${W?"text-white/80":"text-stone-500"}`,children:(C==null?void 0:C.role_label)||"Unknown Role"})]})]}),s.jsxs("div",{className:"sm:ml-auto flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[L.status!=="not-checked-in"&&s.jsxs("span",{className:`${L.status==="checked-in"?"rounded-full px-3 py-1 text-xs font-medium shadow-sm transition-all duration-200 bg-white text-umma-700 border border-umma-300":L.status==="running-late"?"warning-pill":"danger-pill"} flex items-center gap-1.5`,children:[L.status==="running-late"&&s.jsx(dr,{className:"w-3 h-3"}),L.label]}),W&&_.checked_in_at&&s.jsx("span",{className:`text-xs sm:text-sm ${W?"text-white/80":"text-stone-500"}`,children:VS(_.checked_in_at)})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 flex-wrap w-full sm:w-auto",children:[W?s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>M(_.id),disabled:f||g,className:"flex-1 sm:flex-none rounded-full text-xs sm:text-sm justify-center",children:[s.jsx(bu,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Check Out"}),s.jsx("span",{className:"sm:hidden",children:"Out"})]}):s.jsxs(s.Fragment,{children:[s.jsxs(H,{size:"sm",className:"flex-1 sm:flex-none rounded-full shadow-[0_1px_0_rgba(0,0,0,0.04)] text-xs sm:text-sm justify-center",onClick:()=>F(_.id),disabled:f||g,children:[s.jsx(Np,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Check In"}),s.jsx("span",{className:"sm:hidden",children:"In"})]}),L.status!=="running-late"&&s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>I(_),disabled:f||g,className:"flex-1 sm:flex-none rounded-full text-amber-700 border-amber-300 hover:bg-amber-50 text-xs sm:text-sm justify-center",children:[s.jsx(dr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Running Late"}),s.jsx("span",{className:"sm:hidden",children:"Late"})]})]}),s.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>R(_),className:`w-full sm:w-auto rounded-full text-xs sm:text-sm justify-center ${_.check_in_notes?"bg-umma-100 border-umma-300 text-umma-800 hover:bg-umma-200 hover:border-umma-400 shadow-sm font-medium":"bg-white border-umma-200 text-umma-700 hover:bg-umma-50 hover:border-umma-300"}`,children:[s.jsx(En,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 sm:mr-1 ${_.check_in_notes?"text-umma-800":"text-umma-700"}`}),s.jsx("span",{className:"hidden sm:inline",children:"Notes"}),s.jsx("span",{className:"sm:hidden",children:"Notes"})]}),_.check_in_notes&&s.jsx("span",{className:"absolute -top-1.5 -right-1.5 h-4 w-4 bg-umma-600 rounded-full border-2 border-white shadow-md flex items-center justify-center",children:s.jsx("span",{className:"text-[8px] text-white font-bold",children:"!"})})]})]})]})]},_.id)})}),T.length===0&&s.jsx("div",{className:"text-center py-8 text-white/40",children:l&&l.trim()?"No volunteers found matching your search.":"No volunteers found."})]}),d&&s.jsx(QV,{volunteer:d,isOpen:m,onClose:()=>{p(!1),u(null)},onUpdateNotes:O,notes:w,setNotes:v})]})},iT=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:re("w-full caption-bottom text-sm border-collapse",e),...t})}));iT.displayName="Table";const lT=h.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:re("[&_tr]:border-b border-umma-200 bg-umma-50",e),...t}));lT.displayName="TableHeader";const cT=h.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:re("[&_tr:last-child]:border-0 bg-white",e),...t}));cT.displayName="TableBody";const XV=h.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:re("border-t border-umma-200 bg-umma-50 font-medium [&>tr]:last:border-b-0 text-umma-800",e),...t}));XV.displayName="TableFooter";const gg=h.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:re("border-b border-umma-100 transition-colors hover:bg-umma-50 data-[state=selected]:bg-umma-100",e),...t}));gg.displayName="TableRow";const Fo=h.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:re("h-12 px-4 text-left align-middle font-semibold text-umma-800 [&:has([role=checkbox])]:pr-0",e),...t}));Fo.displayName="TableHead";const Uo=h.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:re("p-4 align-middle text-umma-700 [&:has([role=checkbox])]:pr-0",e),...t}));Uo.displayName="TableCell";const ZV=h.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:re("mt-4 text-sm text-umma-600",e),...t}));ZV.displayName="TableCaption";const e9=({eventId:e,eventTitle:t,onCleanupComplete:r})=>{const{toast:n}=Qt(),{getNoShowVolunteers:a,completeEventAndCleanup:o,isLoading:i}=Lx(),[l,c]=h.useState([]),[d,u]=h.useState(!1),[m,p]=h.useState(!1),[f,y]=h.useState(null);h.useEffect(()=>{g()},[e]);const g=async()=>{try{const v=await a(e);c(v)}catch(v){console.error("Error loading no-show volunteers:",v),n({title:"Error",description:"Failed to load no-show volunteers.",variant:"destructive"})}},x=async()=>{p(!0);try{const v=await o(e);v&&(y({eventTitle:v.event_title,noShowCount:v.no_show_count,removedContacts:v.removed_contacts||[]}),await g(),n({title:"Cleanup Complete",description:`Successfully processed ${v.no_show_count} no-show volunteers.`}),r&&r())}catch(v){console.error("Error during cleanup:",v),n({title:"Error",description:"Failed to complete cleanup. Please try again.",variant:"destructive"})}finally{p(!1)}},w=()=>{u(!1),y(null)};return l.length===0?s.jsx(Pe,{children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ti,{className:"w-12 h-12 text-emerald-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"All Volunteers Checked In"}),s.jsx("p",{className:"text-white/50",children:"Great! All volunteers who signed up for this event have checked in."})]})})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Pe,{children:[s.jsxs($t,{children:[s.jsxs(Lt,{className:"flex items-center space-x-2",children:[s.jsx(Ft,{className:"w-5 h-5"}),s.jsxs("span",{children:["No-Show Volunteers (",l.length,")"]})]}),s.jsx(Wr,{children:"These volunteers signed up but did not check in to the event"})]}),s.jsxs(Ae,{children:[s.jsx("div",{className:"md:hidden space-y-3",children:l.map(v=>s.jsxs("div",{className:"rounded-xl bg-red-500/10/50 backdrop-blur-sm ring-1 ring-red-100 p-4 space-y-2",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h5",{className:"font-semibold text-stone-900 text-sm mb-1",children:v.volunteer_name}),s.jsx(ye,{variant:"destructive",className:"text-xs mt-1",children:"No Show"})]})}),s.jsxs("div",{className:"space-y-1.5 text-xs text-stone-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-stone-400 shrink-0",children:"Phone:"}),s.jsx("a",{href:`tel:${v.volunteer_phone}`,className:"text-umma-700 hover:text-umma-800 hover:underline",children:v.volunteer_phone})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-stone-400 shrink-0",children:"Role:"}),s.jsx("span",{className:"text-stone-700",children:v.role_label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-stone-400 shrink-0",children:"Signed up:"}),s.jsx("span",{children:new Date(v.signup_date).toLocaleDateString()})]})]})]},v.volunteer_id))}),s.jsx("div",{className:"hidden md:block border rounded-lg",children:s.jsxs(iT,{children:[s.jsx(lT,{children:s.jsxs(gg,{children:[s.jsx(Fo,{children:"Name"}),s.jsx(Fo,{children:"Phone"}),s.jsx(Fo,{children:"Role"}),s.jsx(Fo,{children:"Signup Date"}),s.jsx(Fo,{children:"Status"})]})}),s.jsx(cT,{children:l.map(v=>s.jsxs(gg,{children:[s.jsx(Uo,{className:"font-medium",children:v.volunteer_name}),s.jsx(Uo,{children:v.volunteer_phone}),s.jsx(Uo,{children:v.role_label}),s.jsx(Uo,{children:new Date(v.signup_date).toLocaleDateString()}),s.jsx(Uo,{children:s.jsx(ye,{variant:"destructive",children:"No Show"})})]},v.volunteer_id))})]})}),s.jsx("div",{className:"mt-6 flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:s.jsxs(fr,{open:d,onOpenChange:u,children:[s.jsx(rx,{asChild:!0,children:s.jsxs(H,{variant:"destructive",disabled:i||m,className:"flex items-center justify-center space-x-2 w-full sm:w-auto",children:[s.jsx(br,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs sm:text-sm",children:"Clean Up No-Shows"})]})}),s.jsxs(rr,{className:"sm:max-w-md",children:[s.jsxs(nr,{children:[s.jsx(sr,{children:"Confirm Cleanup"}),s.jsxs(ar,{children:["Are you sure you want to remove ",l.length," no-show volunteer",l.length!==1?"s":"","from the contacts database? This action cannot be undone."]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-red-500/10 border border-white/10 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"This will remove:"}),s.jsxs("ul",{className:"text-sm text-red-400 space-y-1",children:[l.slice(0,5).map(v=>s.jsxs("li",{children:[" ",v.volunteer_name," (",v.volunteer_phone,")"]},v.volunteer_id)),l.length>5&&s.jsxs("li",{className:"text-red-400",children:["... and ",l.length-5," more"]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(H,{variant:"outline",onClick:w,disabled:m,children:"Cancel"}),s.jsx(H,{variant:"destructive",onClick:x,disabled:m,children:m?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Cleaning Up..."]}):s.jsxs(s.Fragment,{children:[s.jsx(br,{className:"w-4 h-4 mr-2"}),"Confirm Cleanup"]})})]})]})]})]})})]})]}),f&&s.jsxs(Pe,{className:"border-green-200 bg-green-50",children:[s.jsx($t,{children:s.jsxs(Lt,{className:"text-green-900 flex items-center space-x-2",children:[s.jsx(Ti,{className:"w-5 h-5"}),s.jsx("span",{children:"Cleanup Complete"})]})}),s.jsx(Ae,{children:s.jsxs("div",{className:"space-y-2 text-green-800",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Event:"})," ",f.eventTitle]}),s.jsxs("p",{children:[s.jsx("strong",{children:"No-Show Volunteers Processed:"})," ",f.noShowCount]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Contacts Removed:"})," ",f.removedContacts.length]}),f.removedContacts.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Removed Contacts:"}),s.jsx("ul",{className:"text-sm space-y-1",children:f.removedContacts.map(v=>s.jsxs("li",{children:[" ",v.name," (",v.phone,")"]},v.id))})]})]})})]})]})},t9=e=>`event-${e.slice(-8)}`,Od=e=>{if(!e)return[];if(Array.isArray(e))return e.map(t=>String(t)).filter(Boolean);if(typeof e=="string"){const t=e.trim();if(!t)return[];if(t.startsWith("[")&&t.endsWith("]"))try{const n=JSON.parse(t);if(Array.isArray(n))return n.map(a=>String(a)).filter(Boolean)}catch{}return t.replace(/[{}\[\]"]+/g,"").split(",").map(n=>n.trim()).filter(Boolean)}return[]},r9=()=>{const{slug:e}=Mv(),t=Xr();Qt();const{deleteVolunteer:r,isDeleting:n}=E2(),{checkEventAccess:a}=PV(),{isAdmin:o}=Ih();Lx();const[i,l]=h.useState(null),[c,d]=h.useState(!0),[u,m]=h.useState(!1),[p,f]=h.useState({isOpen:!1,volunteer:null});h.useEffect(()=>{(async()=>{const{data:{user:b}}=await K.auth.getUser();if(!b){t("/login");return}await y()})()},[e,t]);const y=async()=>{if(e)try{console.log("Loading event with slug:",e);let v=null;const{data:b,error:j}=await K.from("events").select("*").is("deleted_at",null).order("start_datetime",{ascending:!1});if(j){console.error("Error loading events:",j);const{data:O}=await K.rpc("get_shared_events");if(!O){l(null);return}v=O.map(F=>F.event)}else v=b;let k=v==null?void 0:v.find(O=>HS(O.title,O.id)===e||t9(O.id)===e);if(!k&&e)if(e.startsWith("event-")){const O=e.replace("event-","");O.length===8&&(k=v==null?void 0:v.find(F=>F.id.endsWith(O)))}else{const O=e.split("-"),F=O[O.length-1]||"";F.length===4&&(k=v==null?void 0:v.find(M=>M.id.endsWith(F)))}if(!k){console.log("Event not found for slug:",e),l(null);return}const S=k.id,{data:N,error:E}=await K.from("events").select(`
          *,
          volunteer_roles(*),
          volunteers(*)
        `).eq("id",S).maybeSingle();if(E||!N){E?console.error("Error loading event details:",E):console.log("No event found via direct select; trying RPC");const{data:O,error:F}=await K.rpc("get_shared_event_detail",{p_event_id:S});if(F){console.error("RPC error loading shared event:",F),l(null);return}if(!O||O.length===0){console.log("RPC returned no data for shared event"),l(null);return}const M=O[0],I={...M.event,volunteer_roles:M.volunteer_roles||[],volunteers:M.volunteers||[]};if(I.volunteer_roles&&I.volunteer_roles.length>0){const D=[];if(I.volunteer_roles.forEach(P=>{Od(P.suggested_poc).forEach(G=>{G&&!D.includes(G)&&D.push(G)})}),D.length>0){console.log("Fetching POC contacts for shared event IDs:",D);const{data:P,error:A}=await K.from("contacts").select("id, name, phone, email").in("id",D);!A&&P?(console.log("Fetched POC contacts for shared event:",P),I.volunteer_roles=I.volunteer_roles.map(G=>{const C=Od(G.suggested_poc).map(L=>P.find(W=>W.id===L)).filter(Boolean);return{...G,poc_contacts:C,poc_contact:C[0]}})):console.error("Error fetching POC contacts for shared event:",A)}}console.log("Loaded shared event via RPC:",I),l(I);const{hasAccess:B,permissionLevel:$}=await a(S,"edit");m(B&&$==="edit");return}if(console.log("Found event:",N),console.log(" Volunteers data:",N.volunteers),console.log(" Volunteer roles data:",N.volunteer_roles),N.volunteer_roles&&N.volunteer_roles.length>0){const O=[];if(N.volunteer_roles.forEach(F=>{Od(F.suggested_poc).forEach(I=>{I&&!O.includes(I)&&O.push(I)})}),O.length>0){console.log("Fetching POC contacts for IDs:",O);const{data:F,error:M}=await K.from("contacts").select("id, name, phone, email").in("id",O);!M&&F?(console.log("Fetched POC contacts:",F),N.volunteer_roles=N.volunteer_roles.map(I=>{const $=Od(I.suggested_poc).map(D=>F.find(P=>P.id===D)).filter(Boolean);return{...I,poc_contacts:$,poc_contact:$[0]}})):console.error("Error fetching POC contacts:",M)}}l(N);const{hasAccess:T,permissionLevel:R}=await a(S,"edit");console.log(" Permission check:",{hasAccess:T,permissionLevel:R,eventId:S}),m(T&&R==="edit")}catch(v){console.error("Error:",v),l(null)}finally{d(!1)}},g=async v=>{if(!p.volunteer)return;await r(p.volunteer.id,p.volunteer.name,v)&&(l(j=>{var k;return j?{...j,volunteers:((k=j.volunteers)==null?void 0:k.filter(S=>S.id!==p.volunteer.id))||[]}:null}),f({isOpen:!1,volunteer:null}))},x=()=>{n||f({isOpen:!1,volunteer:null})},w=v=>{l(b=>{var j;return b?{...b,volunteers:((j=b.volunteers)==null?void 0:j.map(k=>k.id===v.id?v:k))||[]}:null})};return h.useEffect(()=>{if(!(i!=null&&i.id))return;let v,b=!0;const j=async()=>{if(document.visibilityState==="visible")try{const{data:k,error:S}=await K.from("events").select("id, volunteers(*)").eq("id",i.id).maybeSingle();if(!S&&k&&b&&Array.isArray(k.volunteers)){const N=k.volunteers;l(E=>E&&{...E,volunteers:N})}}catch{}};return j(),v=setInterval(j,4e3),()=>{b=!1,v&&clearInterval(v)}},[i==null?void 0:i.id]),c?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(dn,{}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-umma-700 border-t-transparent rounded-full mx-auto mb-4"}),s.jsx("p",{children:"Loading event details..."})]})})})]}):i?s.jsxs("div",{className:"min-h-screen",children:[s.jsx(dn,{}),s.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-5 md:py-6 max-w-7xl",children:[s.jsx("div",{className:"mb-3 sm:mb-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard"),className:"h-8 px-2 sm:px-3 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:[s.jsx(nc,{className:"w-4 h-4 mr-1"}),"Dashboard"]}),s.jsx("span",{className:"text-gray-400",children:"/"}),s.jsx("span",{className:"text-gray-900 font-medium",children:"Check In"})]})}),s.jsx("div",{className:"frosted-panel p-4 sm:p-5 mb-4 sm:mb-5",children:s.jsxs("div",{className:"min-w-0",children:[s.jsx("h1",{className:"text-xl sm:text-2xl md:text-2xl font-semibold tracking-tight text-stone-800 break-words",children:i.title}),s.jsx("p",{className:"mt-1.5 sm:mt-2 text-sm text-gray-600",children:"Manage volunteer attendance and track who has arrived, marked themselves as running late, or needs special attention"})]})}),i.volunteers&&i.volunteer_roles&&s.jsx("div",{className:"mb-4 sm:mb-5",children:s.jsx(JV,{eventId:i.id,volunteers:i.volunteers,volunteerRoles:i.volunteer_roles,onVolunteerUpdate:w})}),o&&i.volunteers&&i.volunteers.length>0&&s.jsx("div",{className:"mb-4 sm:mb-5",children:s.jsx(e9,{eventId:i.id,eventTitle:i.title,onCleanupComplete:()=>{y()}})}),s.jsx(TV,{isOpen:p.isOpen,onClose:x,onConfirm:g,volunteer:p.volunteer,isDeleting:n})]})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(dn,{}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx(Pe,{className:"w-full max-w-md mx-auto",children:s.jsxs(Ae,{className:"p-8 text-center",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Event Not Found"}),s.jsx("div",{className:"text-gray-600 mb-4",children:"The event you're looking for doesn't exist or has been removed."}),s.jsxs(H,{onClick:()=>t("/dashboard"),children:[s.jsx(nc,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})})})]})},n9=e=>/^[a-zA-Z0-9_-]+$/.test(e)&&e.length>=3&&e.length<=100,mb=e=>e.replace(/[<>]/g,"").replace(/['";\\]/g,"").trim(),s9=e=>{const t=e.replace(/[^\d+]/g,"");let r;return t.startsWith("+")?r=t:/^1\d{10}$/.test(t)?r=`+${t}`:/^\d{10}$/.test(t)?r=`+1${t}`:r=`+${t}`,/^\+[1-9]\d{7,14}$/.test(r)},a9=e=>/^[a-zA-Z\s\-'.,]+$/.test(e)&&e.length>=2&&e.length<=100;class o9{constructor(t=6e4,r=100){Yc(this,"requests",new Map);Yc(this,"windowMs");Yc(this,"maxRequests");this.windowMs=t,this.maxRequests=r}isAllowed(t){const r=Date.now(),n=this.requests.get(t);return!n||r>n.resetTime?(this.requests.set(t,{count:1,resetTime:r+this.windowMs}),!0):n.count>=this.maxRequests?!1:(n.count++,!0)}getRemainingRequests(t){const r=this.requests.get(t);return!r||Date.now()>r.resetTime?this.maxRequests:Math.max(0,this.maxRequests-r.count)}}const i9=new o9,l9=(e,t)=>{const r=e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),n=t.slice(-4);return`${r}-${n}`},c9=e=>`event-${e.slice(-8)}`,pb=e=>{const t=e.replace(/[^\d+]/g,"");return t.startsWith("+")?t:/^1\d{10}$/.test(t)?`+${t}`:/^\d{10}$/.test(t)?`+1${t}`:`+${t}`},gb=(e,t,r,n)=>{const a=d=>{const[u,m]=d.split(":").map(Number);return u*60+m},o=a(e),i=a(t),l=a(r),c=a(n);return o<c&&l<i},d9=()=>{const{eventSlug:e}=Mv(),{toast:t}=Qt(),[r,n]=h.useState(null),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState(!1),[u,m]=h.useState(!0),p=h.useRef(!1),f=h.useRef(null);h.useEffect(()=>{y()},[e]);const y=async()=>{if(e)try{if(console.log("Loading event with slug:",e),!n9(e)){console.error("Invalid event slug format:",e),n(null);return}const{data:S,error:N}=await K.from("events").select(`
          *,
          volunteer_roles(*)
        `).eq("status","published").eq("is_public",!0).is("deleted_at",null);if(N){console.error("Error loading events:",N),n(null);return}let E=S==null?void 0:S.find(T=>l9(T.title,T.id)===e||c9(T.id)===e);if(!E&&e)if(e.startsWith("event-")){const T=e.replace("event-","");T.length===8&&(E=S==null?void 0:S.find(R=>R.id.endsWith(T)))}else{const T=e.split("-"),R=T[T.length-1]||"";R.length===4&&(E=S==null?void 0:S.find(O=>O.id.endsWith(R)))}if(!E){console.log("Event not found for slug (including suffix fallback):",e),n(null);return}if(console.log("Found event:",E),E&&E.volunteer_roles){const T=[];E.volunteer_roles.forEach(O=>{O.suggested_poc&&(Array.isArray(O.suggested_poc)?T.push(...O.suggested_poc):T.push(O.suggested_poc))});const R=[...new Set(T)].filter(O=>O);if(R.length>0){console.log("Fetching POC contacts for IDs:",R);const{data:O,error:F}=await K.from("contacts").select("id, name, phone, email").in("id",R);!F&&O?(console.log("Fetched POC contacts:",O),E.volunteer_roles=E.volunteer_roles.map(M=>{let I=[];if(M.suggested_poc)if(Array.isArray(M.suggested_poc))I=M.suggested_poc.map(B=>O.find($=>$.id===B)).filter(B=>B);else{const B=O.find($=>$.id===M.suggested_poc);B&&(I=[B])}return{...M,poc_contacts:I,poc_contact:I[0]}})):console.error("Error fetching POC contacts:",F)}}try{const{data:T,error:R}=await K.from("volunteers").select("id, role_id, name, phone, gender, notes, signup_date, status").eq("event_id",E.id).eq("status","confirmed");R?(console.error("Error fetching volunteers:",R),E.volunteers=[]):E.volunteers=T||[]}catch(T){console.error("Unexpected error fetching volunteers:",T),E.volunteers=[]}n(E)}catch(S){console.error("Error:",S),n(null)}finally{m(!1)}},g=S=>{var N;return((N=r==null?void 0:r.volunteers)==null?void 0:N.filter(E=>E.role_id===S))||[]},x=(S,N)=>{const E=g(S.id);if(N){const R=E.filter(P=>P.gender===N),O=N==="brother"?S.slots_brother:S.slots_sister,F=S.slots_flexible||0,M=N==="brother"?"sister":"brother",I=E.filter(P=>P.gender===M),B=M==="brother"?S.slots_brother:S.slots_sister,$=Math.max(0,I.length-B),D=Math.max(0,F-$);return O+D-R.length}return(S.slots_brother||0)+(S.slots_sister||0)+(S.slots_flexible||0)-E.length},w=async S=>{if(!(r!=null&&r.id))return[];const N=pb(S);return(r.volunteers||[]).filter(R=>R.phone===N).map(R=>{const O=(r.volunteer_roles||[]).find(F=>F.id===R.role_id);return O?{role:O,volunteer:R}:void 0}).filter(Boolean)},v=S=>{if(x(S)<=0){t({title:"Role Full",description:"This role is currently full. Please check other available roles.",variant:"destructive"});return}l(S),o(!0)},b=S=>{n(N=>{var T;if(!N)return null;const E=((T=N.volunteers)==null?void 0:T.filter(R=>R.id!==S))||[];return console.log(`[SIGNUP] Updated local state - removed volunteer ${S} from UI`),{...N,volunteers:E}})},j=async(S,N,E)=>{try{const T=`Hi ${N}! You're confirmed for ${E} on ${new Date((r==null?void 0:r.start_datetime)||"").toLocaleDateString()}. Thanks for volunteering! `;console.log(`Sending SMS to ${S}: ${T}`);const{data:R,error:O}=await K.functions.invoke("send-sms",{body:{to:S,message:T}});if(O){console.error("Error sending SMS:",O),t({title:"SMS Failed",description:"Failed to send confirmation SMS, but signup was successful.",variant:"destructive"});return}console.log("SMS sent successfully:",R),t({title:"SMS Sent! ",description:`Confirmation SMS sent to ${S}`})}catch(T){console.error("SMS error:",T),t({title:"SMS Failed",description:"Failed to send confirmation SMS, but signup was successful.",variant:"destructive"})}};return{event:r,loading:u,eventSlug:e,isModalOpen:a,setIsModalOpen:o,selectedRole:i,isSubmitting:c,getVolunteersForRole:g,getRemainingSlots:x,getExistingSignups:w,openSignupModal:v,handleSignupSubmit:async S=>{const N=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",T=(O=>O.trim().split(/\s+/).map(F=>F.split("-").map(N).join("-")).map(F=>F.split("'").map(N).join("'")).join(" "))(S.name||"");if(p.current||c)return console.log("Submission already in progress, ignoring duplicate request"),!1;const R=Date.now().toString();f.current=R,p.current=!0,d(!0),console.log(`Starting signup submission ${R}`);try{if(!S.name||!S.phone)return t({title:"Missing Information",description:"Please provide your name and phone number.",variant:"destructive"}),!1;if(!i||!(r!=null&&r.id))return!1;if(f.current!==R)return console.log("Submission cancelled - newer submission started"),!1;if(!a9(S.name))return t({title:"Invalid Name",description:"Please enter a valid name (letters, spaces, hyphens, apostrophes, and periods only).",variant:"destructive"}),!1;if(!s9(S.phone))return t({title:"Invalid Phone Number",description:"Please enter a valid phone number in international format.",variant:"destructive"}),!1;const O=mb(S.name),F=mb(S.notes||""),M=pb(S.phone);if(!r||r.status!=="published"||r.is_public===!1)return t({title:"Signup Closed",description:"This event is not open for public signups.",variant:"destructive"}),!1;const I=`signup_${M}`;if(!i9.isAllowed(I))return t({title:"Too Many Requests",description:"Please wait before submitting another signup request.",variant:"destructive"}),!1;if(x(i,S.gender)<=0)return t({title:"Gender Slot Full",description:`The ${S.gender} slots for this role are full. Please try a different role or gender selection.`,variant:"destructive"}),!1;const $=(r.volunteers||[]).filter(G=>G.phone===M);if($.length>0){if($.some(W=>W.role_id===i.id))return t({title:"Already Registered",description:"This phone number is already registered for this role.",variant:"destructive"}),!1;const _=i.shift_start,C=i.shift_end||i.shift_end_time;if($.some(W=>{const Y=(r.volunteer_roles||[]).find(Q=>Q.id===W.role_id);if(!Y)return!1;const J=Y.shift_end||Y.shift_end_time;return gb(_,C,Y.shift_start,J)}))return t({title:"Time Conflict",description:"You're already signed up for a role that overlaps with this time slot. Please choose a different role or remove your existing signup first.",variant:"destructive"}),!1}const D=(r.volunteers||[]).filter(G=>G.phone===M);if(D&&D.length>0){if(D.find(C=>C.role_id===i.id))return t({title:"Already Registered",description:"This phone number is already registered for this role.",variant:"destructive"}),!1;if(D.some(C=>{const L=(r.volunteer_roles||[]).find(W=>W.id===C.role_id);return L?gb(i.shift_start,i.shift_end||i.shift_end_time,L.shift_start,L.shift_end||L.shift_end_time):!1}))return t({title:"Time Conflict",description:"You're already signed up for a role that overlaps with this time slot. Please choose a different role or remove your existing signup first.",variant:"destructive"}),!1}if(f.current!==R)return console.log("Submission cancelled before database insert"),!1;console.log(`Inserting volunteer data for submission ${R} via RPC register_volunteer_public`);const{data:P,error:A}=await K.rpc("register_volunteer_public",{p_event_id:r.id,p_role_id:i.id,p_name:T,p_phone:M,p_gender:S.gender,p_notes:F});if(A){console.error("Error signing up:",A);const G=(A.message||"").toLowerCase(),_=G.includes("permission denied")||G.includes("violates row-level security")||A.code==="42501";return t({title:_?"Signup Closed":"Signup Failed",description:_?"This event is not open for public signups.":"There was an error signing up. Please try again.",variant:"destructive"}),!1}return console.log(`Successfully inserted volunteer for submission ${R}:`,P),n(G=>G?{...G,volunteers:[...G.volunteers||[],P]}:null),o(!1),t({title:"Successfully Signed Up!",description:`You're now registered for ${i.role_label}.`}),await j(M,T,i.role_label),!0}catch(O){return console.error("Error in signup submission:",O),t({title:"Signup Failed",description:"There was an error signing up. Please try again.",variant:"destructive"}),!1}finally{f.current===R&&(p.current=!1,d(!1),f.current=null,console.log(`Completed signup submission ${R}`))}},updateLocalVolunteers:b}},u9=({isOpen:e,onClose:t,onConfirm:r,role:n,event:a,volunteerData:o})=>{const i=new Date(a.start_datetime);return s.jsx(q2,{open:e,onOpenChange:t,children:s.jsxs(Tx,{className:"max-w-md",children:[s.jsxs(Px,{children:[s.jsx(Ox,{className:"text-umma-800",children:"Confirm Your Volunteer Registration"}),s.jsx(Dx,{children:"Please confirm your volunteer registration details:"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-umma-50 p-4 rounded-lg space-y-2 text-sm",children:[s.jsx("div",{className:"font-semibold text-umma-800",children:n.role_label}),s.jsxs("div",{className:"flex items-center gap-2 text-umma-700",children:[s.jsx(Mt,{className:"w-4 h-4"}),s.jsx("span",{children:i.toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center gap-2 text-umma-700",children:[s.jsx(dr,{className:"w-4 h-4"}),s.jsxs("span",{children:[at(n.shift_start)," - ",at(n.shift_end)]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-umma-700",children:[s.jsx(ps,{className:"w-4 h-4"}),s.jsx("span",{children:a.location})]})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Name:"})," ",o.name]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Phone:"})," ",o.phone]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Gender:"})," ",o.gender]}),o.notes&&s.jsxs("div",{children:[s.jsx("strong",{children:"Notes:"})," ",o.notes]})]}),s.jsx("div",{className:"text-umma-600 text-sm",children:"You will receive a confirmation SMS with event details."})]}),s.jsxs(Rx,{children:[s.jsx(Ix,{children:"Cancel"}),s.jsx(Ax,{onClick:r,className:"bg-umma-500 hover:bg-umma-600",children:"Confirm Registration"})]})]})})},h9=(e,t)=>{const r=Os(e.start_datetime),[n,a]=t.shift_start.split(":").map(Number),[o,i]=t.shift_end.split(":").map(Number),l=new Date(r);l.setHours(n,a,0,0);const c=new Date(r);c.setHours(o,i,0,0),c<=l&&c.setDate(c.getDate()+1);const d=v=>{const b=new Date(v.getTime()-v.getTimezoneOffset()*6e4),j=dT(v);return new Date(b.getTime()+j*6e4).toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,"")},u=encodeURIComponent(`${e.title} - ${t.role_label}`),m=encodeURIComponent(`Role: ${t.role_label}
Shift: ${t.shift_start} - ${t.shift_end} (Michigan Time)
Location: ${e.location}
`+(e.description?`Description: ${e.description}`:"")),p=encodeURIComponent(e.location),f=d(l),y=d(c),g=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${u}&dates=${f}/${y}&details=${m}&location=${p}&ctz=${Sn}`,x=`https://outlook.live.com/calendar/0/deeplink/compose?subject=${u}&startdt=${f}&enddt=${y}&body=${m}&location=${p}`,w=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//EasyEvent//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VTIMEZONE
TZID:${Sn}
BEGIN:DAYLIGHT
TZOFFSETFROM:-0500
TZOFFSETTO:-0400
TZNAME:EDT
DTSTART:20070311T020000
RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
END:DAYLIGHT
BEGIN:STANDARD
TZOFFSETFROM:-0400
TZOFFSETTO:-0500
TZNAME:EST
DTSTART:20071104T020000
RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
END:STANDARD
END:VTIMEZONE
BEGIN:VEVENT
UID:${e.id}-${t.id}@easyevent.com
DTSTART;TZID=${Sn}:${f}
DTEND;TZID=${Sn}:${y}
SUMMARY:${decodeURIComponent(u)}
DESCRIPTION:${decodeURIComponent(m)}
LOCATION:${decodeURIComponent(p)}
DTSTAMP:${new Date().toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,"")}
END:VEVENT
END:VCALENDAR`;return{google:g,outlook:x,ics:w}},dT=e=>{const t=new Date(e.toLocaleString("en-US",{timeZone:Sn}));return(new Date(e.toLocaleString("en-US",{timeZone:"UTC"})).getTime()-t.getTime())/(1e3*60)},f9=e=>{const t=Os(e.start_datetime),r=new Date(t),n=new Date(t);if(e.end_datetime){const f=Os(e.end_datetime);n.setTime(f.getTime())}else n.setHours(r.getHours()+2);const a=f=>{const y=new Date(f.getTime()-f.getTimezoneOffset()*6e4),g=dT(f);return new Date(y.getTime()+g*6e4).toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,"")},o=encodeURIComponent(e.title),i=encodeURIComponent(`Event: ${e.title}
Location: ${e.location}
`+(e.description?`Description: ${e.description}`:"")+`

Volunteer opportunities available. Visit the signup page to select a specific role.`),l=encodeURIComponent(e.location),c=a(r),d=a(n),u=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${o}&dates=${c}/${d}&details=${i}&location=${l}&ctz=${Sn}`,m=`https://outlook.live.com/calendar/0/deeplink/compose?subject=${o}&startdt=${c}&enddt=${d}&body=${i}&location=${l}`,p=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//EasyEvent//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VTIMEZONE
TZID:${Sn}
BEGIN:DAYLIGHT
TZOFFSETFROM:-0500
TZOFFSETTO:-0400
TZNAME:EDT
DTSTART:20070311T020000
RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
END:DAYLIGHT
BEGIN:STANDARD
TZOFFSETFROM:-0400
TZOFFSETTO:-0500
TZNAME:EST
DTSTART:20071104T020000
RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
END:STANDARD
END:VTIMEZONE
BEGIN:VEVENT
UID:${e.id}@easyevent.com
DTSTART;TZID=${Sn}:${c}
DTEND;TZID=${Sn}:${d}
SUMMARY:${decodeURIComponent(o)}
DESCRIPTION:${decodeURIComponent(i)}
LOCATION:${decodeURIComponent(l)}
DTSTAMP:${new Date().toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,"")}
END:VEVENT
END:VCALENDAR`;return{google:u,outlook:m,ics:p}},m9=(e,t)=>{const r=new Blob([e],{type:"text/calendar;charset=utf-8"}),n=document.createElement("a");n.href=window.URL.createObjectURL(r),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},vg=({event:e,role:t,className:r,showText:n=!1})=>{const[a,o]=h.useState(!1),i=l=>{let c,d;switch(t?(c=h9(e,t),d=`${e.title}-${t.role_label}.ics`):(c=f9(e),d=`${e.title}.ics`),l){case"google":window.open(c.google,"_blank");break;case"outlook":window.open(c.outlook,"_blank");break;case"ics":m9(c.ics,d);break}o(!1)};return s.jsxs(S2,{open:a,onOpenChange:o,children:[s.jsx(C2,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",className:`border-umma-500 text-umma-700 hover:bg-umma-50 ${r}`,children:[s.jsx(Mt,{className:"w-4 h-4"}),n&&s.jsx("span",{className:"mx-2",children:"Add to Calendar"}),s.jsx(nn,{className:"w-4 h-4 ml-2"})]})}),s.jsxs(kx,{className:"bg-white border-umma-200 shadow-lg",children:[s.jsx(Fl,{onClick:()=>i("google"),className:"hover:bg-umma-50 cursor-pointer",children:"Google Calendar"}),s.jsx(Fl,{onClick:()=>i("outlook"),className:"hover:bg-umma-50 cursor-pointer",children:"Outlook Calendar"}),s.jsx(Fl,{onClick:()=>i("ics"),className:"hover:bg-umma-50 cursor-pointer",children:"Apple Calendar"})]})]})},p9=({isOpen:e,onClose:t,selectedRole:r,event:n,onSubmit:a,getRemainingSlots:o,getExistingSignups:i,isSubmitting:l})=>{const c=Mc(),{toast:d}=Qt(),[u,m]=h.useState(!1),[p,f]=h.useState(!1),[y,g]=h.useState(""),[x,w]=h.useState(""),[v,b]=h.useState({name:"",phone:"",gender:void 0,notes:""}),[j,k]=h.useState([]),[S,N]=h.useState(!1),E=async M=>{const I=(M||"").replace(/\D/g,"");if(!I||I.length<7){k([]);return}N(!0);try{const B=await i(M);k(B)}catch(B){console.error("Error checking existing signups:",B),k([])}finally{N(!1)}},T=M=>{if(M.preventDefault(),!y.trim()||!x.trim()){d({title:"Missing Information",description:"Please enter your first and last name.",variant:"destructive"});return}if(!v.phone.trim()){d({title:"Missing Information",description:"Please enter your phone number.",variant:"destructive"});return}if(!v.gender){d({title:"Missing Information",description:"Please select your gender (Brother or Sister).",variant:"destructive"});return}const I=`${y} ${x}`.trim();b(B=>({...B,name:I})),m(!0)},R=()=>{m(!1);const M=`${y} ${x}`.trim();a({...v,name:M}).then(I=>{I&&f(!0)})},O=()=>{b({name:"",phone:"",gender:void 0,notes:""}),g(""),w(""),m(!1),f(!1),t()},F=()=>{f(!1),O()};return h.useEffect(()=>{e&&(b({name:"",phone:"",gender:void 0,notes:""}),g(""),w(""))},[e]),p&&r&&n?s.jsx(fr,{open:p,onOpenChange:F,children:s.jsxs(rr,{className:`
          border-2 border-green-300 bg-white/95 backdrop-blur-lg shadow-2xl
          ${c?"w-[92vw] max-w-[92vw] max-h-[88vh] mx-auto p-5 rounded-3xl":"max-w-lg w-full max-h-[90vh] rounded-2xl p-6"}
        `,children:[s.jsxs(nr,{className:"text-center",children:[s.jsxs(sr,{className:"text-green-800 text-xl flex items-center justify-center gap-2",children:[s.jsx(dy,{className:"w-6 h-6"}),"Registration Successful!"]}),s.jsxs(ar,{className:"text-green-700 mt-4",children:["You've been successfully registered for ",r.role_label,". A confirmation SMS has been sent to your phone."]})]}),s.jsxs("div",{className:"flex flex-col items-center gap-4 mt-6",children:[s.jsx(vg,{event:n,role:r,className:"w-full justify-center",showText:!0}),s.jsx(H,{onClick:F,className:"bg-umma-500 hover:bg-umma-600 text-white w-full",children:"Close"})]})]})}):s.jsxs(s.Fragment,{children:[s.jsx(fr,{open:e,onOpenChange:O,children:s.jsxs(rr,{className:`
          border-2 border-umma-500 bg-white/95 backdrop-blur-lg shadow-2xl
          ${c?"w-[92vw] max-w-[92vw] max-h-[88vh] mx-auto p-5 rounded-3xl":"max-w-lg w-full max-h-[90vh] rounded-2xl p-6"}
          overflow-hidden flex flex-col
        `,children:[s.jsxs(nr,{className:"text-left pb-2 flex-shrink-0",children:[s.jsxs(sr,{className:"text-umma-800 text-lg sm:text-xl",children:["Sign Up for ",r==null?void 0:r.role_label]}),s.jsx(ar,{className:"text-umma-700 text-sm",children:"Fill in your information to register for this volunteer role."})]}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2",children:s.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"first-name",className:"text-umma-800 text-sm font-medium",children:"First Name *"}),s.jsx(ue,{id:"first-name",type:"text",placeholder:"First name",value:y,onChange:M=>g(M.target.value),required:!0,className:"border-umma-200 focus:border-umma-400 text-base rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"last-name",className:"text-umma-800 text-sm font-medium",children:"Last Name *"}),s.jsx(ue,{id:"last-name",type:"text",placeholder:"Last name",value:x,onChange:M=>w(M.target.value),required:!0,className:"border-umma-200 focus:border-umma-400 text-base rounded-xl"})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"phone",className:"text-umma-800 text-sm font-medium",children:"Phone Number *"}),s.jsx(Mi,{id:"phone",value:v.phone,onChange:M=>{b(I=>({...I,phone:M})),setTimeout(()=>E(M),500)},placeholder:"Phone number",className:"border-umma-200 focus:border-umma-400 text-base rounded-xl"}),s.jsx("div",{className:"text-xs text-umma-600",children:"Used for event reminders and communication"}),S&&s.jsx("div",{className:"text-xs text-umma-600 bg-umma-50 p-2 rounded-lg",children:"Checking for existing signups..."}),j.length>0&&!S&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsx("div",{className:"text-sm font-medium text-blue-800 mb-2",children:"You're already signed up for:"}),s.jsx("div",{className:"space-y-2",children:j.map((M,I)=>s.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-2 border border-blue-100",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-blue-900",children:M.role.role_label}),s.jsxs("div",{className:"text-xs text-blue-700",children:[at(M.role.shift_start)," - ",at(M.role.shift_end)]})]}),s.jsx("div",{className:"text-xs text-blue-600 capitalize",children:M.volunteer.gender})]},I))}),s.jsx("div",{className:"text-xs text-blue-700 mt-2",children:"You can sign up for additional roles as long as the times don't overlap."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"gender",className:"text-umma-800 text-sm font-medium",children:"Gender *"}),s.jsxs(vs,{value:v.gender||void 0,onValueChange:M=>b(I=>({...I,gender:M})),children:[s.jsx(qn,{className:"border-umma-200 text-base rounded-xl",children:s.jsx(xs,{placeholder:"Select gender"})}),s.jsxs(Gn,{children:[(((r==null?void 0:r.slots_brother)||0)>0||((r==null?void 0:r.slots_flexible)||0)>0)&&s.jsx(wr,{value:"brother",children:"Brother"}),(((r==null?void 0:r.slots_sister)||0)>0||((r==null?void 0:r.slots_flexible)||0)>0)&&s.jsx(wr,{value:"sister",children:"Sister"})]})]}),r&&s.jsx("div",{className:"text-xs text-umma-600 bg-umma-50 p-3 rounded-xl border border-umma-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-4 gap-1",children:[s.jsxs("span",{children:["Brothers: ",o(r,"brother"),"/",r.slots_brother+(r.slots_flexible||0)]}),s.jsxs("span",{children:["Sisters: ",o(r,"sister"),"/",r.slots_sister+(r.slots_flexible||0)]}),(r.slots_flexible||0)>0&&s.jsxs("span",{children:["Flexible: ",r.slots_flexible," (either gender)"]})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"notes",className:"text-umma-800 text-sm font-medium",children:"Additional Notes (Optional)"}),s.jsx(un,{id:"notes",placeholder:"Any special requirements, questions, or information...",value:v.notes,onChange:M=>b(I=>({...I,notes:M.target.value})),rows:3,className:"border-umma-200 focus:border-umma-400 text-base resize-none rounded-xl"})]}),r&&s.jsxs("div",{className:"bg-umma-50 p-4 rounded-xl border border-umma-200",children:[s.jsx("h4",{className:"font-medium mb-2 text-umma-800 text-sm",children:"Role Details:"}),s.jsxs("div",{className:"text-xs text-umma-700 space-y-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-4",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Time:"})," ",at(r.shift_start)," - ",at(r.shift_end)]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Date:"})," ",new Date((n==null?void 0:n.start_datetime)||"").toLocaleDateString()]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Location:"})," ",n==null?void 0:n.location]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-umma-200 flex-shrink-0",children:[s.jsx(H,{type:"button",variant:"outline",onClick:O,disabled:l,className:"border-umma-500 text-umma-700 hover:bg-umma-50 order-2 sm:order-1 rounded-xl",children:"Cancel"}),s.jsxs(H,{type:"submit",disabled:l,className:"bg-umma-500 hover:bg-umma-600 text-white order-1 sm:order-2 rounded-xl shadow-lg",children:[s.jsx(dy,{className:"w-4 h-4 mr-2"}),"Sign Me Up!"]})]})]})}),c&&s.jsx("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2 animate-bounce",children:s.jsx(nn,{className:"w-5 h-5 text-umma-400"})})]})}),r&&n&&s.jsx(u9,{isOpen:u,onClose:()=>m(!1),onConfirm:R,role:r,event:n,volunteerData:{...v,name:`${y} ${x}`.trim()}})]})},g9=()=>s.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-umma-600 border-t-transparent rounded-full mx-auto mb-4"}),s.jsx("p",{className:"text-umma-700",children:"Loading event details..."})]})}),v9=({eventId:e})=>s.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:s.jsx(Pe,{className:"w-full max-w-md",children:s.jsxs(Ae,{className:"p-6 text-center",children:[s.jsx("h2",{className:"text-lg font-semibold mb-2 text-umma-800",children:"Event Not Found"}),s.jsx("div",{className:"text-umma-600 text-sm mb-2",children:"The event you're looking for doesn't exist, isn't published yet, or has been removed."}),s.jsxs("div",{className:"text-xs text-umma-500 mb-4 break-all",children:["Event ID: ",e]}),s.jsx("div",{className:"text-xs text-umma-400",children:"Only published events are available for volunteer signup."})]})})}),x9=({event:e})=>(h.useEffect(()=>{if(!e)return;const t=f=>new Date(f).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),r=f=>new Date(f).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),n=f=>gc(f);document.title=`Volunteer for ${e.title}`;const a=f=>{document.querySelectorAll(f).forEach(g=>g.remove())};a('meta[property^="og:"]'),a('meta[name^="twitter:"]'),a('meta[name="description"]');const o=(f,y)=>{const g=document.createElement("meta");f.startsWith("og:")||f.startsWith("twitter:")?g.setAttribute("property",f):g.setAttribute("name",f),g.setAttribute("content",y),document.head.appendChild(g)},i=r(e.start_datetime),l=n(e.start_datetime),c=t(e.start_datetime),d=e.description?e.description.length>100?`${e.description.substring(0,100)}...`:e.description:`Join us as a volunteer and help make ${e.title} a success!`,u=`Volunteer Signup: ${e.title}
 ${i} at ${l}
 ${e.location||"Location TBA"}

Sign up now to volunteer!`;o("description",u),o("og:title",`Volunteer Signup: ${e.title}`),o("og:description",` ${c}
 ${e.location||"Location TBA"}

${d}

 Sign up now to volunteer and be part of something amazing!`),o("og:type","website"),o("og:url",window.location.href),o("og:site_name","UMMA Event Volunteers"),o("og:locale","en_US"),o("og:image","https://via.placeholder.com/1200x630/9B9A6D/FFFFFF?text=Volunteer+Signup"),o("og:image:width","1200"),o("og:image:height","630"),o("og:image:alt",`Volunteer signup for ${e.title}`),o("twitter:card","summary_large_image"),o("twitter:title",`Volunteer for ${e.title}`),o("twitter:description",` ${i} at ${l}
 ${e.location||"Location TBA"}

${d}

Sign up to volunteer today!`),o("twitter:site","@umma"),o("twitter:creator","@umma"),o("twitter:image","https://via.placeholder.com/1200x630/9B9A6D/FFFFFF?text=Volunteer+Signup"),o("article:section","Volunteer Opportunities"),o("article:tag","volunteer,community,event,signup,umma"),o("event:start_time",e.start_datetime),o("event:location:latitude",""),o("event:location:longitude","");const m=document.querySelector('link[rel="canonical"]');m&&m.remove();const p=document.createElement("link");return p.setAttribute("rel","canonical"),p.setAttribute("href",window.location.href),document.head.appendChild(p),()=>{document.title="UMMA Event Management"}},[e]),null),uT=()=>"visitor_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),Gh=()=>{const e=localStorage.getItem("analytics_visitor_id");if(e)return e;const t=uT();return localStorage.setItem("analytics_visitor_id",t),t},Yh=e=>{const t=e.toLowerCase();return t.includes("tablet")||t.includes("ipad")?"tablet":t.includes("mobile")||t.includes("android")||t.includes("iphone")?"mobile":"desktop"},Kh=e=>{const t=e.toLowerCase();return t.includes("chrome")?"Chrome":t.includes("firefox")?"Firefox":t.includes("safari")?"Safari":t.includes("edge")?"Edge":t.includes("opera")?"Opera":"Unknown"},Qh=e=>{const t=e.toLowerCase();return t.includes("windows")?"Windows":t.includes("mac")?"macOS":t.includes("linux")?"Linux":t.includes("android")?"Android":t.includes("ios")||t.includes("iphone")||t.includes("ipad")?"iOS":"Unknown"},Jh=async e=>{try{const{data:t,error:r}=await K.rpc("track_analytics",{p_event_id:e.eventId,p_tracking_type:e.trackingType,p_visitor_id:e.visitorId,p_user_agent:e.userAgent,p_ip_address:e.ipAddress,p_referrer:e.referrer,p_utm_source:e.utmSource,p_utm_medium:e.utmMedium,p_utm_campaign:e.utmCampaign,p_device_type:e.deviceType,p_browser:e.browser,p_os:e.os,p_country:e.country,p_city:e.city});return r?(console.error("Error tracking analytics:",r),!1):!0}catch(t){return console.error("Error tracking analytics:",t),!1}},hT=async e=>{const t=Gh(),r=navigator.userAgent;return Jh({eventId:e,trackingType:"page_view",visitorId:t,userAgent:r,deviceType:Yh(r),browser:Kh(r),os:Qh(r),referrer:document.referrer||void 0})},y9=async e=>{const t=Gh(),r=navigator.userAgent;return Jh({eventId:e,trackingType:"qr_scan",visitorId:t,userAgent:r,deviceType:Yh(r),browser:Kh(r),os:Qh(r)})},fT=async e=>{const t=Gh(),r=navigator.userAgent;return Jh({eventId:e,trackingType:"human_click",visitorId:t,userAgent:r,deviceType:Yh(r),browser:Kh(r),os:Qh(r)})},mT=e=>{try{const t=new URL(e);return{source:t.searchParams.get("utm_source")||void 0,medium:t.searchParams.get("utm_medium")||void 0,campaign:t.searchParams.get("utm_campaign")||void 0}}catch{return{}}},w9=(e,t)=>{const r=new URL(e);return r.searchParams.set("utm_source","qr_code"),r.searchParams.set("utm_medium","qr"),r.searchParams.set("utm_campaign","event_signup"),r.toString()},b9=(e,t,r="direct",n="link",a)=>{const o=new URL(e);return o.searchParams.set("utm_source",r),o.searchParams.set("utm_medium",n),a&&o.searchParams.set("utm_campaign",a),o.toString()},pT=Object.freeze(Object.defineProperty({__proto__:null,detectBrowser:Kh,detectDeviceType:Yh,detectOS:Qh,generateQRCodeUrl:w9,generateShareableLink:b9,generateVisitorId:uT,getVisitorId:Gh,parseUTMParams:mT,trackAnalytics:Jh,trackHumanClick:fT,trackPageView:hT,trackQRScan:y9},Symbol.toStringTag,{value:"Module"})),j9=()=>{var Rn,Br,ts;Mc();const{toast:e}=Qt(),{event:t,loading:r,eventSlug:n,isModalOpen:a,setIsModalOpen:o,selectedRole:i,isSubmitting:l,getVolunteersForRole:c,getRemainingSlots:d,getExistingSignups:u,openSignupModal:m,handleSignupSubmit:p,updateLocalVolunteers:f}=d9(),[y,g]=h.useState(""),[x,w]=h.useState("time"),[v,b]=h.useState("all"),[j,k]=h.useState("list"),[S,N]=h.useState(new Set),[E,T]=h.useState(!1);h.useEffect(()=>{const Z=localStorage.getItem("volunteer-signup-view-mode");(Z==="list"||Z==="cards")&&k(Z)},[]),h.useEffect(()=>{t!=null&&t.id&&(hT(t.id),mT(window.location.href).source==="qr_code"&&SC(async()=>{const{trackQRScan:ce}=await Promise.resolve().then(()=>pT);return{trackQRScan:ce}},void 0).then(({trackQRScan:ce})=>{ce(t.id)}))},[t==null?void 0:t.id]);const R=Z=>{k(Z),localStorage.setItem("volunteer-signup-view-mode",Z)},O=Z=>{t!=null&&t.id&&fT(t.id),m(Z)},[F,M]=h.useState({isOpen:!1,volunteerId:null,volunteerName:"",roleName:""}),[I,B]=h.useState({isOpen:!1,volunteerId:null,volunteerName:"",roleName:"",volunteerPhone:""}),[$,D]=h.useState(""),[P,A]=h.useState(!1),[G,_]=h.useState(!1),[C,L]=h.useState(""),{deleteVolunteer:W}=E2(),[Y,J]=h.useState(null),Q=Z=>{const ce=(Z||"").replace(/[^\d+]/g,"");return ce.startsWith("+")?ce:/^1\d{10}$/.test(ce)?`+${ce}`:/^\d{10}$/.test(ce)?`+1${ce}`:ce?`+${ce}`:""},he=Z=>{console.log(`[SIGNUP] Updating local state to remove volunteer ${Z}`),f(Z)},fe=(Z,ce,Re)=>{var Me;const Fe=(Me=t==null?void 0:t.volunteer_roles)==null?void 0:Me.flatMap(Dt=>c(Dt.id)).find(Dt=>Dt.id===Z);Fe&&B({isOpen:!0,volunteerId:Z,volunteerName:ce,roleName:Re,volunteerPhone:Fe.phone})},_e=async()=>{const Z=Q($),ce=Q(I.volunteerPhone||"");Z&&Z===ce?(console.log("Phone verification successful, storing values:",{phoneVerification:Z,volunteerPhone:ce}),I.volunteerId&&M({isOpen:!0,volunteerId:I.volunteerId,volunteerName:I.volunteerName,roleName:I.roleName,phoneVerification:Z,volunteerPhone:ce}),B({isOpen:!1,volunteerId:null,volunteerName:"",roleName:"",volunteerPhone:""}),D("")):e({title:"Incorrect Phone Number",description:"Please enter the correct phone number to confirm deletion.",variant:"destructive"})},z=()=>{C==="admin123"?(B({isOpen:!1,volunteerId:null,volunteerName:"",roleName:"",volunteerPhone:""}),D(""),J(C),L(""),_(!1),I.volunteerId&&M({isOpen:!0,volunteerId:I.volunteerId,volunteerName:I.volunteerName,roleName:I.roleName,phoneVerification:$,volunteerPhone:I.volunteerPhone})):e({title:"Incorrect Admin Password",description:"Please enter the correct admin password.",variant:"destructive"})},Ne=async()=>{if(F.volunteerId){A(!0);try{let Z=!1;if(Y?(console.log("Admin deletion path:",{volunteerId:F.volunteerId,volunteerName:F.volunteerName,adminPassword:Y}),Z=await W(F.volunteerId,F.volunteerName,Y)):(console.log("Phone verification deletion path:",{volunteerId:F.volunteerId,volunteerName:F.volunteerName,phoneVerification:F.phoneVerification,volunteerPhone:F.volunteerPhone}),Z=await W(F.volunteerId,F.volunteerName,void 0,F.phoneVerification,F.volunteerPhone)),!Z)throw new Error("Deletion failed");he(F.volunteerId),e({title:"Volunteer Removed",description:`${F.volunteerName} has been removed from ${F.roleName}.`})}catch(Z){console.error("Error deleting volunteer:",Z),e({title:"Error",description:"Failed to remove volunteer. Please try again.",variant:"destructive"})}finally{A(!1),J(null),M({isOpen:!1,volunteerId:null,volunteerName:"",roleName:"",phoneVerification:void 0,volunteerPhone:void 0})}}},rt=h.useMemo(()=>{let Z=[...(t==null?void 0:t.volunteer_roles)||[]];if(y.trim()&&(Z=Z.filter(ce=>{var Re;return ce.role_label.toLowerCase().includes(y.toLowerCase())||((Re=ce.notes)==null?void 0:Re.toLowerCase().includes(y.toLowerCase()))})),v!=="all"&&t){const ce=new Date(t.start_datetime),Re=new Date(t.end_datetime),Fe=ce.getHours()*60+ce.getMinutes(),Me=Re.getHours()*60+Re.getMinutes();Z=Z.filter(Dt=>{const[Je,Nt]=(Dt.shift_start||"00:00").split(":").map(Number),[be,lt]=(Dt.shift_end||"23:59").split(":").map(Number),vt=Je*60+Nt,U=be*60+lt;switch(v){case"before":return U<Fe;case"during":return vt<Me&&U>Fe;case"after":return vt>Me;default:return!0}})}return Z.sort((ce,Re)=>{const Fe=d(ce),Me=d(Re);switch(x){case"spots":if(Fe!==Me)return Me-Fe;break;case"time":return(ce.shift_start||"").localeCompare(Re.shift_start||"");case"newest":return new Date(Re.created_at||"").getTime()-new Date(ce.created_at||"").getTime()}return ce.id.localeCompare(Re.id)}),Z},[t,y,x,v,d]),it=(Z,ce)=>{const Re=Z.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),Fe=ce.slice(-4);return`${Re}-${Fe}`},_r=()=>{const Z=it(t.title,t.id),ce=`${window.location.origin}/${Z}`;navigator.clipboard.writeText(ce).then(()=>{e({title:"Link Copied! ",description:`Copied link for: ${t.title}`})})},Ut=async()=>{const Z=it(t.title,t.id),ce=`${window.location.origin}/${Z}`;if(navigator.share)try{await navigator.share({title:"Volunteer Signup",text:"Sign up to volunteer for this event!",url:ce})}catch(Re){console.log("Error sharing:",Re)}else _r()},He=Z=>{const ce=new Set(S);ce.has(Z)?ce.delete(Z):ce.add(Z),N(ce)},or=()=>{g(""),w("time"),b("all")};if(r)return s.jsx(g9,{});if(!t)return s.jsx(v9,{eventId:n});const Wt=((Rn=t.volunteer_roles)==null?void 0:Rn.length)||0,gn=((Br=t.volunteer_roles)==null?void 0:Br.reduce((Z,ce)=>{const Re=c(ce.id);return Z+Re.length},0))||0,ir=((ts=t.volunteer_roles)==null?void 0:ts.reduce((Z,ce)=>Z+(ce.slots_brother||0)+(ce.slots_sister||0)+(ce.slots_flexible||0),0))||0;return s.jsxs(s.Fragment,{children:[s.jsx(x9,{event:t}),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"bg-white/5 border-b border-white/10 sticky top-0 z-40",children:s.jsx("div",{className:"container mx-auto px-4 py-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("div",{})})})}),s.jsx("div",{className:"bg-white/5 border-b border-white/10",children:s.jsxs("div",{className:"container mx-auto px-4 py-4",children:[s.jsxs("div",{className:"md:hidden space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gold-400 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:s.jsx(Mt,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h1",{className:"text-lg font-bold text-foreground leading-tight",children:t.title}),t.is_public===!1&&s.jsx(ye,{variant:"outline",className:"text-xs bg-amber-50 text-amber-700 border-amber-200",children:"Private"})]}),s.jsxs("div",{className:"space-y-1 text-white/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mt,{className:"w-3 h-3 flex-shrink-0"}),s.jsxs("span",{className:"text-sm font-medium",children:[ng(t.start_datetime)," at ",gc(t.start_datetime)]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ps,{className:"w-3 h-3 flex-shrink-0 mt-0.5"}),s.jsx("span",{className:"text-sm font-medium leading-tight",children:t.location})]})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>T(!E),className:"text-white/30 hover:text-white/50 p-2 h-8 w-8 flex-shrink-0",children:E?s.jsx(ti,{className:"w-4 h-4"}):s.jsx(nn,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"bg-background rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gold-400",children:Wt}),s.jsx("div",{className:"text-sm text-white/50 font-medium",children:"Roles"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gold-400",children:gn}),s.jsx("div",{className:"text-sm text-white/50 font-medium",children:"Volunteers"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gold-400",children:ir-gn}),s.jsx("div",{className:"text-sm text-white/50 font-medium",children:"Open Spots"})]})]})}),E&&s.jsxs("div",{className:"space-y-4 bg-background rounded-lg p-4 animate-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:_r,className:"flex-1 border-white/15 focus:border-gold-400 focus:ring-gold-400/20 text-white/50 hover:text-gold-300 hover:bg-white/5 h-10",children:[s.jsx(ri,{className:"w-4 h-4 mr-2"}),"Copy Link"]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:Ut,className:"flex-1 border-white/15 focus:border-gold-400 focus:ring-gold-400/20 text-white/50 hover:text-gold-300 hover:bg-white/5 h-10",children:[s.jsx(gy,{className:"w-4 h-4 mr-2"}),"Share"]}),s.jsx(vg,{event:t,role:null,className:"text-white/50 hover:text-gold-300 hover:bg-white/10 h-10 px-3"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/30"}),s.jsx(ue,{placeholder:"Search roles...",value:y,onChange:Z=>g(Z.target.value),className:"pl-10 border-white/15 focus:border-gold-400 focus:ring-gold-400/20 h-11 text-left placeholder:text-gold-400/70",autoComplete:"off"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(te,{className:"text-sm font-medium text-white/70 whitespace-nowrap",children:"Sort:"}),s.jsx("div",{className:"flex-1",children:s.jsx(ea,{options:[{value:"time",label:"Time"},{value:"spots",label:"Spots Left"},{value:"newest",label:"Newest"}],value:x,onChange:Z=>w(Z),placeholder:"Sort by"})})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-white/10 rounded-lg p-1",title:"View preference is saved in your browser",children:[s.jsx(H,{variant:j==="list"?"default":"ghost",size:"sm",onClick:()=>R("list"),className:`h-8 px-3 ${j==="list"?"bg-gold-400 text-white shadow-sm":"text-white/50 hover:text-gold-300 hover:bg-white/5"}`,children:s.jsx(my,{className:"w-4 h-4"})}),s.jsx(H,{variant:j==="cards"?"default":"ghost",size:"sm",onClick:()=>R("cards"),className:`h-8 px-3 ${j==="cards"?"bg-gold-400 text-white shadow-sm":"text-white/50 hover:text-gold-300 hover:bg-white/5"}`,children:s.jsx(hy,{className:"w-4 h-4"})})]})]})]})]}),s.jsxs("div",{className:"hidden md:flex items-start justify-between",children:[s.jsx("div",{className:"max-w-2xl",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gold-400 rounded-2xl flex items-center justify-center shadow-lg flex-shrink-0",children:s.jsx(Mt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground tracking-tight",children:t.title}),t.is_public===!1&&s.jsx(ye,{variant:"outline",className:"text-sm bg-amber-50 text-amber-700 border-amber-200",children:"Private"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-2 mb-3 text-white/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mt,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm md:text-base font-medium",children:[ng(t.start_datetime)," at ",gc(t.start_datetime)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ps,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm md:text-base font-medium",children:t.location})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 max-w-sm",children:[s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xl font-bold text-gold-400",children:Wt}),s.jsx("div",{className:"text-xs text-white/50",children:"Roles"})]}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xl font-bold text-gold-400",children:gn}),s.jsx("div",{className:"text-xs text-white/50",children:"Volunteers"})]}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xl font-bold text-gold-400",children:ir-gn}),s.jsx("div",{className:"text-xs text-white/50",children:"Open Spots"})]})]})]})]})}),s.jsxs("div",{className:"flex flex-col items-start gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:_r,className:"border-white/15 focus:border-gold-400 focus:ring-gold-400/20 text-white/50 hover:text-gold-300 hover:bg-white/5",children:[s.jsx(ri,{className:"w-4 h-4 mr-2"}),"Copy Link"]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:Ut,className:"border-white/15 focus:border-gold-400 focus:ring-gold-400/20 text-white/50 hover:text-gold-300 hover:bg-white/5",children:[s.jsx(gy,{className:"w-4 h-4 mr-2"}),"Share"]}),s.jsx(vg,{event:t,role:null,className:"text-white/50 hover:text-gold-300 hover:bg-white/10"})]}),s.jsxs("div",{className:"relative w-80",children:[s.jsx(Pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/30"}),s.jsx(ue,{placeholder:"Search roles...",value:y,onChange:Z=>g(Z.target.value),className:"pl-10 border-white/15 focus:border-gold-400 focus:ring-gold-400/20 h-10 text-left placeholder:text-gold-400/70",autoComplete:"off"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{className:"text-sm font-medium text-white/70 whitespace-nowrap",children:"Sort:"}),s.jsx("div",{className:"w-44",children:s.jsx(ea,{options:[{value:"time",label:"Time"},{value:"spots",label:"Spots Left"},{value:"newest",label:"Newest"}],value:x,onChange:Z=>w(Z),placeholder:"Sort by"})})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-white/10 rounded-lg p-1",title:"View preference is saved in your browser",children:[s.jsxs(H,{variant:j==="list"?"default":"ghost",size:"sm",onClick:()=>R("list"),className:`h-8 px-3 ${j==="list"?"bg-gold-400 text-white shadow-sm":"text-white/50 hover:text-gold-300 hover:bg-white/5"}`,children:[s.jsx(my,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"hidden xs:inline text-xs",children:"List"})]}),s.jsxs(H,{variant:j==="cards"?"default":"ghost",size:"sm",onClick:()=>R("cards"),className:`h-8 px-3 ${j==="cards"?"bg-gold-400 text-white shadow-sm":"text-white/50 hover:text-gold-300 hover:bg-white/5"}`,children:[s.jsx(hy,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"hidden xs:inline text-xs",children:"Cards"})]})]})]})]})]})]})}),s.jsxs("main",{className:"container mx-auto px-4 py-6 md:py-8",children:[j==="list"?s.jsxs("div",{className:"bg-white/5 rounded-xl shadow-sm border border-white/10 overflow-hidden",children:[s.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-4 px-6 py-3 bg-background border-b border-white/10 text-xs font-medium text-white/40 uppercase tracking-wider",children:[s.jsx("div",{className:"col-span-2",children:"Time"}),s.jsx("div",{className:"col-span-3",children:"Role"}),s.jsx("div",{className:"col-span-2",children:"Point of Contact"}),s.jsx("div",{className:"col-span-2",children:"Spots"}),s.jsx("div",{className:"col-span-2",children:"Status"}),s.jsx("div",{className:"col-span-1",children:"Action"})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:rt.map((Z,ce)=>{const Re=c(Z.id),Fe=(Z.slots_brother||0)+(Z.slots_sister||0)+(Z.slots_flexible||0),Me=d(Z),Dt=S.has(Z.id),Je=Re.filter(be=>be.gender==="brother").length,Nt=Re.filter(be=>be.gender==="sister").length;return s.jsxs("div",{className:`group hover:bg-white/5 transition-colors ${ce%2===0?"bg-white/5":"bg-background/30"}`,children:[s.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-4 px-6 py-4 items-center",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-foreground",children:[s.jsx(dr,{className:"w-4 h-4 text-white/30"}),s.jsx("span",{children:at(Z.shift_start)})]}),s.jsx("div",{className:"text-xs text-white/40 mt-1",children:at(Z.shift_end)})]}),s.jsx("div",{className:"col-span-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-foreground text-sm mb-1",children:Z.role_label}),Z.notes&&s.jsx("p",{className:"text-xs text-white/40 line-clamp-1",children:Z.notes})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>He(Z.id),className:"text-white/30 hover:text-white/50 p-1 h-6 w-6 rounded-full border",style:{borderColor:"rgb(89, 89, 46)"},children:Dt?s.jsx(ti,{className:"w-4 h-4"}):s.jsx(nn,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"col-span-2",children:Z.poc_contacts&&Z.poc_contacts.length>0?s.jsx("div",{className:"flex flex-wrap gap-1",children:Z.poc_contacts.map((be,lt)=>s.jsxs(ye,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700 border-purple-200 cursor-pointer hover:bg-purple-100 transition-colors px-2 py-1",onClick:()=>{be.phone&&(navigator.clipboard.writeText(be.phone),e({title:"Phone number copied!",description:`${be.name}'s phone number copied to clipboard`}))},title:be.phone?`Click to copy ${be.name}'s phone number`:`${be.name} - No phone number`,children:[s.jsx(Ft,{className:"w-3 h-3 mr-1"}),be.name]},be.id))}):s.jsx("span",{className:"text-xs text-white/30",children:"No POC assigned"})}),s.jsxs("div",{className:"col-span-2",children:[s.jsxs("div",{className:"text-sm font-medium text-foreground",children:[Fe-Me," / ",Fe]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1 overflow-hidden",children:s.jsx("div",{className:"bg-gradient-to-r from-gold-400 to-gold-300 h-1.5 rounded-full transition-all duration-500 ease-out",style:{width:`${Fe>0?(Fe-Me)/Fe*100:0}%`}})})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(ye,{variant:Me>0?"default":"secondary",className:`text-xs font-semibold px-2.5 py-1 ${Me>0?"bg-emerald-500/15 text-emerald-300 border-emerald-500/20 shadow-sm":"bg-white/10 text-foreground border-white/10"}`,children:Me>0?`${Me} spots left`:"Full"}),s.jsx("div",{className:"flex gap-1 mt-2",children:(()=>{const be=Math.max(0,(Z.slots_brother||0)-Je),lt=Math.max(0,(Z.slots_sister||0)-Nt),vt=(Z.slots_brother||0)+(Z.slots_sister||0),U=Je+Nt,X=Math.max(0,U-vt),se=Math.max(0,(Z.slots_flexible||0)-X);return s.jsxs(s.Fragment,{children:[be>0&&s.jsxs(ye,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200 px-1.5 py-0.5 h-5",children:[s.jsxs("span",{className:"hidden xl:inline",children:[be," Brother",be!==1?"s":""]}),s.jsxs("span",{className:"xl:hidden",children:[be,"B"]})]}),lt>0&&s.jsxs(ye,{variant:"outline",className:"text-xs bg-pink-50 text-pink-700 border-pink-200 px-1.5 py-0.5 h-5",children:[s.jsxs("span",{className:"hidden xl:inline",children:[lt," Sister",lt!==1?"s":""]}),s.jsxs("span",{className:"xl:hidden",children:[lt,"S"]})]}),se>0&&s.jsxs(ye,{variant:"outline",className:"text-xs bg-teal-50 text-teal-700 border-teal-200 px-1.5 py-0.5 h-5",children:[s.jsxs("span",{className:"hidden xl:inline",children:[se," Flexible"]}),s.jsxs("span",{className:"xl:hidden",children:[se,"F"]})]})]})})()})]}),s.jsx("div",{className:"col-span-1",children:s.jsx(H,{onClick:()=>O(Z),disabled:Me<=0,size:"sm",className:`w-full ${Me>0?"bg-gold-400 hover:bg-gold-300 text-white":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:Me>0?"Sign Up":"Full"})})]}),s.jsxs("div",{className:"md:hidden p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-foreground text-base mb-2",children:Z.role_label}),Z.poc_contacts&&Z.poc_contacts.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:Z.poc_contacts.map((be,lt)=>s.jsxs(ye,{variant:"outline",className:"text-[10px] bg-purple-50 text-purple-700 border-purple-200 cursor-pointer hover:bg-purple-100 transition-colors px-1.5 py-0.5",onClick:()=>{be.phone&&(navigator.clipboard.writeText(be.phone),e({title:"Phone number copied!",description:`${be.name}'s phone number copied to clipboard`}))},title:be.phone?`Click to copy ${be.name}'s phone number`:`${be.name} - No phone number`,children:[s.jsx(Ft,{className:"w-2.5 h-2.5 mr-0.5"}),s.jsxs("span",{children:["Point of Contact: ",be.name]})]},be.id))}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/50",children:[s.jsx(dr,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-medium",children:[at(Z.shift_start)," - ",at(Z.shift_end)]})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>He(Z.id),className:"text-white/30 hover:text-white/50 p-2 h-8 w-8 rounded-full border",style:{borderColor:"rgb(89, 89, 46)"},children:Dt?s.jsx(ti,{className:"w-4 h-4"}):s.jsx(nn,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ye,{variant:Me>0?"default":"secondary",className:`text-sm font-semibold px-3 py-1 ${Me>0?"bg-emerald-500/15 text-emerald-300 border-emerald-500/20":"bg-white/10 text-foreground border-white/10"}`,children:Me>0?`${Me} spots left`:"Full"}),s.jsxs("span",{className:"text-sm text-white/40",children:[Fe-Me," / ",Fe," filled"]})]}),s.jsx(H,{onClick:()=>O(Z),disabled:Me<=0,size:"sm",className:`h-10 px-4 ${Me>0?"bg-gold-400 hover:bg-gold-300 text-white":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:Me>0?"Sign Up":"Full"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:(()=>{const be=Math.max(0,(Z.slots_brother||0)-Je),lt=Math.max(0,(Z.slots_sister||0)-Nt),vt=(Z.slots_brother||0)+(Z.slots_sister||0),U=Je+Nt,X=Math.max(0,U-vt),se=Math.max(0,(Z.slots_flexible||0)-X);return s.jsxs(s.Fragment,{children:[be>0&&s.jsxs(ye,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200 px-1.5 py-0.5",children:[be," Brother",be!==1?"s":""]}),lt>0&&s.jsxs(ye,{variant:"outline",className:"text-xs bg-pink-50 text-pink-700 border-pink-200 px-1.5 py-0.5",children:[lt," Sister",lt!==1?"s":""]}),se>0&&s.jsxs(ye,{variant:"outline",className:"text-xs bg-teal-50 text-teal-700 border-teal-200 px-1.5 py-0.5",children:[se," Flexible"]})]})})()})]}),Dt&&s.jsx("div",{className:"px-6 py-4 bg-background border-t border-white/5 animate-in slide-in-from-top-2 duration-200",children:s.jsxs("div",{className:"space-y-4",children:[Z.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-foreground text-sm mb-2",children:"Description"}),s.jsx("p",{className:"text-white/50 text-sm",children:Z.notes})]}),Re.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-foreground text-sm mb-2",children:"Current Volunteers"}),s.jsx("div",{className:"space-y-2",children:Re.map((be,lt)=>s.jsxs("div",{className:"flex items-center justify-between bg-white/5 border border-white/10 rounded-lg p-3 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>{navigator.clipboard.writeText(be.phone),e({title:"Phone number copied!",description:`${be.name}'s phone number copied to clipboard`})},title:`Click to copy ${be.name}'s phone number`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gold-400 rounded-full flex items-center justify-center text-white text-sm font-medium",children:be.name.charAt(0)}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-foreground text-sm",children:[be.name,s.jsxs("span",{className:"text-xs text-white/40 ml-2",children:[" ",be.phone]})]}),s.jsx("div",{className:"text-xs text-white/50 capitalize",children:be.gender})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:vt=>{vt.stopPropagation(),fe(be.id,be.name,Z.role_label)},className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-8 px-2",title:"Remove volunteer from this role",children:s.jsx(_p,{className:"w-4 h-4"})})]},be.id))})]})]})})]},Z.id)})})]}):s.jsx("div",{className:"grid gap-4 md:gap-6 md:grid-cols-2 lg:grid-cols-3",children:rt.map(Z=>{const ce=c(Z.id),Re=(Z.slots_brother||0)+(Z.slots_sister||0)+(Z.slots_flexible||0),Fe=d(Z),Me=S.has(Z.id),Dt=Re>0?(Re-Fe)/Re*100:0;return s.jsxs(Pe,{className:"border-0 shadow-sm hover:shadow-md transition-all duration-200 hover:-translate-y-1",children:[s.jsx($t,{className:"pb-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Lt,{className:"text-lg font-semibold text-foreground mb-1",children:Z.role_label}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/50",children:[s.jsx(dr,{className:"w-4 h-4"}),s.jsxs("span",{children:[at(Z.shift_start)," - ",at(Z.shift_end)]})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>He(Z.id),className:"text-white/30 hover:text-white/50 rounded-full border h-8 w-8 p-0 flex items-center justify-center",style:{borderColor:"rgb(89, 89, 46)"},children:Me?s.jsx(ti,{className:"w-4 h-4"}):s.jsx(nn,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-white/50",children:[Re-Fe," / ",Re," filled"]}),s.jsx(ye,{variant:Fe>0?"default":"secondary",className:`text-xs ${Fe>0?"bg-emerald-500/15 text-emerald-300 border-emerald-500/20":"bg-white/10 text-foreground border-white/10"}`,children:Fe>0?`${Fe} spots left`:"Full"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gold-400 h-2 rounded-full transition-all duration-300",style:{width:`${Dt}%`}})}),s.jsx("div",{className:"flex flex-wrap gap-2 text-xs text-white/50",children:(()=>{const Je=ce.filter(de=>de.gender==="brother").length,Nt=ce.filter(de=>de.gender==="sister").length,be=Math.max(0,(Z.slots_brother||0)-Je),lt=Math.max(0,(Z.slots_sister||0)-Nt),vt=(Z.slots_brother||0)+(Z.slots_sister||0),U=Je+Nt,X=Math.max(0,U-vt),se=Math.max(0,(Z.slots_flexible||0)-X);return s.jsxs(s.Fragment,{children:[be>0&&s.jsxs(ye,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[be," Brother",be!==1?"s":""]}),lt>0&&s.jsxs(ye,{variant:"outline",className:"bg-pink-50 text-pink-700 border-pink-200",children:[lt," Sister",lt!==1?"s":""]}),se>0&&s.jsxs(ye,{variant:"outline",className:"bg-teal-50 text-teal-700 border-teal-200",children:[se," Brother or Sister"]})]})})()})]}),Z.notes&&s.jsxs("div",{className:"mt-3",children:[s.jsx("h4",{className:"font-medium text-foreground text-sm mb-2",children:"Description"}),s.jsx("p",{className:"text-white/50 text-sm",children:Z.notes})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Z.poc_contacts&&Z.poc_contacts.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5",children:Z.poc_contacts.map((Je,Nt)=>s.jsxs(ye,{variant:"outline",className:"text-[10px] bg-purple-50 text-purple-700 border-purple-200 cursor-pointer hover:bg-purple-100 transition-colors px-1.5 py-0.5",onClick:()=>{Je.phone&&(navigator.clipboard.writeText(Je.phone),e({title:"Phone number copied!",description:`${Je.name}'s phone number copied to clipboard`}))},title:Je.phone?`Click to copy ${Je.name}'s phone number`:`${Je.name} - No phone number`,children:[s.jsx(Ft,{className:"w-2.5 h-2.5 mr-0.5"}),s.jsxs("span",{children:["Point of Contact: ",Je.name]})]},Je.id))})})]})}),Me&&s.jsx(Ae,{className:"pt-0 border-t border-white/5",children:s.jsxs("div",{className:"space-y-4",children:[ce.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-foreground text-sm mb-2",children:"Current Volunteers"}),s.jsx("div",{className:"space-y-2",children:ce.map((Je,Nt)=>s.jsxs("div",{className:"flex items-center justify-between bg-white/10 rounded-lg p-3 cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>{navigator.clipboard.writeText(Je.phone),e({title:"Phone number copied!",description:`${Je.name}'s phone number copied to clipboard`})},title:`Click to copy ${Je.name}'s phone number`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gold-400 rounded-full flex items-center justify-center text-white text-sm font-medium",children:Je.name.charAt(0)}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-foreground text-sm",children:[Je.name,s.jsxs("span",{className:"text-xs text-white/40 ml-2",children:[" ",Je.phone]})]}),s.jsx("div",{className:"text-xs text-white/50 capitalize",children:Je.gender})]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:be=>{be.stopPropagation(),fe(Je.id,Je.name,Z.role_label)},className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-8 px-2",title:"Remove volunteer from this role",children:s.jsx(_p,{className:"w-4 h-4"})})]},Je.id))})]}),s.jsx("div",{className:"pt-2",children:s.jsx(H,{onClick:()=>O(Z),disabled:Fe<=0,className:`w-full ${Fe>0?"bg-gold-400 hover:bg-gold-300 text-white":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:Fe>0?s.jsxs(s.Fragment,{children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Sign Up"]}):s.jsxs(s.Fragment,{children:[s.jsx(sc,{className:"w-4 h-4 mr-2"}),"Role Full"]})})})]})}),!Me&&s.jsxs(Ae,{className:"pt-0",children:[ce.length>0&&s.jsx("div",{className:"mb-3 p-3 bg-background rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-white/50",children:[ce.length," volunteer",ce.length!==1?"s":""," signed up"]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>He(Z.id),className:"text-white/40 hover:text-white/70 text-xs",children:"View Details"})]})}),s.jsx(H,{onClick:()=>O(Z),disabled:Fe<=0,className:`w-full ${Fe>0?"bg-gold-400 hover:bg-gold-300 text-white":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:Fe>0?s.jsxs(s.Fragment,{children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Sign Up"]}):s.jsxs(s.Fragment,{children:[s.jsx(sc,{className:"w-4 h-4 mr-2"}),"Role Full"]})})]})]},Z.id)})}),rt.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-20 h-20 bg-white/10 rounded-2xl flex items-center justify-center mx-auto mb-6",children:s.jsx(Ft,{className:"w-10 h-10 text-white/30"})}),s.jsx("h3",{className:"text-xl font-semibold text-white/70 mb-3",children:y?"No roles match your filters":"No volunteer roles available"}),s.jsx("p",{className:"text-white/40 mb-6 max-w-lg mx-auto",children:y?"Try adjusting your search or filters to find volunteer opportunities.":"This event doesn't have any volunteer roles set up yet. Contact the event point of contact for more information."}),y&&s.jsx(H,{onClick:or,variant:"outline",children:"Clear Filters"})]})]}),s.jsx(p9,{isOpen:a,onClose:()=>o(!1),selectedRole:i,event:t,onSubmit:p,getRemainingSlots:d,getExistingSignups:u,isSubmitting:l}),F.isOpen&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white/5 p-6 rounded-lg shadow-xl max-w-md w-full",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Confirm Deletion"}),s.jsxs("p",{className:"text-white/50 mb-4",children:["Are you sure you want to remove ",F.volunteerName," from the ",F.roleName," role?"]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(H,{variant:"outline",onClick:()=>M({isOpen:!1,volunteerId:null,volunteerName:"",roleName:"",phoneVerification:void 0,volunteerPhone:void 0}),children:"Cancel"}),s.jsx(H,{variant:"destructive",onClick:Ne,children:"Delete"})]})]})}),I.isOpen&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white/5 p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Verify Phone Number"}),s.jsxs("div",{className:"bg-background border border-white/10 rounded-lg p-3 mb-4",children:[s.jsxs("p",{className:"text-sm text-white/50 mb-2",children:[s.jsx("strong",{children:"Removing:"})," ",I.volunteerName]}),s.jsxs("p",{className:"text-sm text-white/50",children:[s.jsx("strong",{children:"Role:"})," ",I.roleName]})]}),s.jsx("p",{className:"text-white/50 mb-4",children:"Please enter the phone number used during signup to confirm deletion."}),s.jsxs("form",{onSubmit:Z=>{Z.preventDefault(),_e()},className:"space-y-4",children:[s.jsx(Mi,{id:"verify-phone",value:$,onChange:Z=>D(Z),placeholder:"Phone number",className:"border-white/15 focus:border-gold-400 focus:ring-gold-400/20"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>{B({isOpen:!1,volunteerId:null,volunteerName:"",roleName:"",volunteerPhone:""}),D(""),L(""),_(!1)},className:"flex-1",children:"Cancel"}),s.jsx(H,{type:"submit",className:"flex-1 bg-gold-400 hover:bg-gold-300 text-white",children:"Verify Phone"})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[s.jsxs(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(!G),className:"text-white/40 hover:text-white/70 text-sm",children:[G?"Hide":"Forgot phone number? Contact POC",s.jsx(nn,{className:`w-4 h-4 ml-1 transition-transform ${G?"rotate-180":""}`})]}),G&&s.jsxs("div",{className:"mt-3 p-3 bg-red-25 border border-red-100 rounded-lg",children:[s.jsx("p",{className:"text-xs text-red-700 mb-3",children:"Admin access: Use this option only if you cannot verify phone number."}),s.jsxs("form",{onSubmit:Z=>{Z.preventDefault(),z()},className:"space-y-3",children:[s.jsx(ue,{type:"password",placeholder:"Admin Password",value:C,onChange:Z=>L(Z.target.value),className:"border-red-200 focus:border-red-400 focus:ring-red-400/20",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),s.jsx(H,{type:"submit",className:"w-full bg-red-500 hover:bg-red-600 text-white text-sm",children:"Admin Override"})]})]})]})]})})]})]})};function N9(){const{templates:e,isLoading:t,createTemplate:r,updateTemplate:n,softDeleteTemplate:a,currentUser:o}=Bh(),i=Xr(),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[m,p]=h.useState(null),[f,y]=h.useState({name:"",description:"",is_public:!0,details:{title:"",description:"",location:"",sms_enabled:!0,day_before_time:"19:00",day_of_time:"15:00"},itineraries:[],volunteer_roles:[],pre_event_tasks:[]}),g=async()=>{f.name.trim()&&(m?await n(m.id,f)&&(u(!1),p(null),x()):await r(f)&&(c(!1),x()))},x=()=>{y({name:"",description:"",is_public:!0,details:{title:"",description:"",location:"",sms_enabled:!0,day_before_time:"19:00",day_of_time:"15:00"},itineraries:[],volunteer_roles:[],pre_event_tasks:[]})},w=()=>{u(!1),p(null),x()},v=()=>{c(!1),x()},b=async()=>{if(!f.name.trim())return;await r(f)&&(c(!1),x())},j=N=>{i("/events/create",{state:{templateId:N.id,templateName:N.name}})},k=async N=>{var E,T,R,O,F,M,I,B,$,D,P,A,G,_,C;try{const{data:L,error:W}=await K.from("event_templates").select(`
          *,
          event_template_details(*),
          event_template_itineraries(*),
          event_template_volunteer_roles(*),
          event_template_pre_event_tasks(*)
        `).eq("id",N.id).single();if(W)throw W;if(L){const Y={name:L.name,description:L.description||"",is_public:L.is_public,details:{title:((T=(E=L.event_template_details)==null?void 0:E[0])==null?void 0:T.title)||"",description:((O=(R=L.event_template_details)==null?void 0:R[0])==null?void 0:O.description)||"",location:((M=(F=L.event_template_details)==null?void 0:F[0])==null?void 0:M.location)||"",sms_enabled:((B=(I=L.event_template_details)==null?void 0:I[0])==null?void 0:B.sms_enabled)??!0,day_before_time:((D=($=L.event_template_details)==null?void 0:$[0])==null?void 0:D.day_before_time)||"19:00",day_of_time:((A=(P=L.event_template_details)==null?void 0:P[0])==null?void 0:A.day_of_time)||"15:00"},itineraries:((G=L.event_template_itineraries)==null?void 0:G.map(J=>({time_slot:J.time_slot,activity:J.activity,description:J.description||"",duration_minutes:J.duration_minutes||30})))||[],volunteer_roles:((_=L.event_template_volunteer_roles)==null?void 0:_.map(J=>({role_label:J.role_label,shift_start:J.shift_start,shift_end:J.shift_end,slots_brother:J.slots_brother,slots_sister:J.slots_sister,slots_flexible:J.slots_flexible||0,suggested_poc:J.suggested_poc||"",notes:J.notes||""})))||[],pre_event_tasks:((C=L.event_template_pre_event_tasks)==null?void 0:C.map(J=>({task_description:J.task_description,assigned_to:J.assigned_to||"",due_date_offset_days:J.due_date_offset_days,status:J.status||"pending"})))||[]};y(Y),p(N),u(!0)}}catch(L){console.error("Error loading template for editing:",L),De({title:"Error",description:"Failed to load template for editing.",variant:"destructive"})}},S=N=>{const E=N.toLowerCase();return E.includes("workshop")||E.includes("educational")?s.jsx(En,{className:"h-5 w-5"}):E.includes("social")||E.includes("gathering")?s.jsx(Ft,{className:"h-5 w-5"}):E.includes("meeting")?s.jsx(Mt,{className:"h-5 w-5"}):s.jsx(_u,{className:"h-5 w-5"})};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(dn,{}),s.jsxs("main",{className:"container mx-auto px-4 py-6 md:py-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"Event Templates"}),s.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Create, manage, and use reusable event templates"})]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs(H,{onClick:()=>c(!0),className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),"Create Template"]})})]})}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(N=>s.jsxs(Pe,{className:"hover:shadow-lg transition-shadow",children:[s.jsx($t,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[S(N.name),s.jsxs("div",{children:[s.jsx(Lt,{className:"text-lg",children:N.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:N.description})]})]}),s.jsxs("div",{className:"flex gap-2",children:[N.is_public&&s.jsx(ye,{variant:"secondary",children:"Public"}),s.jsx(ye,{variant:"outline",children:N.user_id==="00000000-0000-0000-0000-000000000000"?"System":"Custom"})]})]})}),s.jsx(Ae,{className:"space-y-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>j(N),className:"flex items-center gap-2 flex-1",children:[s.jsx(Ti,{className:"h-4 w-4"}),"Use Template"]}),N.user_id!=="00000000-0000-0000-0000-000000000000"&&N.user_id===(o==null?void 0:o.id)&&s.jsxs(s.Fragment,{children:[s.jsx(H,{variant:"outline",size:"sm",onClick:()=>k(N),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"Edit template",children:s.jsx(Su,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>a(N.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Move template to recently deleted",children:s.jsx(br,{className:"h-4 w-4"})})]})]})})]},N.id))}),!t&&e.length===0&&s.jsx(Pe,{className:"text-center py-12",children:s.jsxs(Ae,{children:[s.jsx(En,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first event template to get started"}),s.jsxs(H,{onClick:()=>c(!0),children:[s.jsx(jr,{className:"h-4 w-4 mr-2"}),"Create Template"]})]})}),s.jsx(fr,{open:l,onOpenChange:N=>{N||v()},children:s.jsxs(rr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsxs(nr,{children:[s.jsx(sr,{children:"Create New Template"}),s.jsx(ar,{children:"Create a reusable template for your events"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-name",children:"Template Name *"}),s.jsx(ue,{id:"template-name",value:f.name,onChange:N=>y(E=>({...E,name:N.target.value})),placeholder:"e.g., Community Gathering"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-description",children:"Description"}),s.jsx(ue,{id:"template-description",value:f.description,onChange:N=>y(E=>({...E,description:N.target.value})),placeholder:"Describe this template"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(hs,{id:"template-public",checked:f.is_public,onCheckedChange:N=>y(E=>({...E,is_public:N}))}),s.jsx(te,{htmlFor:"template-public",children:"Make template public"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Template Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-title",children:"Default Title"}),s.jsx(ue,{id:"template-title",value:f.details.title,onChange:N=>y(E=>({...E,details:{...E.details,title:N.target.value}})),placeholder:"Default event title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-location",children:"Default Location"}),s.jsx(mg,{value:f.details.location,onChange:N=>y(E=>({...E,details:{...E.details,location:N}})),placeholder:"Select or type a location..."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-description-details",children:"Default Description"}),s.jsx(un,{id:"template-description-details",value:f.details.description,onChange:N=>y(E=>({...E,details:{...E.details,description:N.target.value}})),placeholder:"Default event description",rows:3})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Settings"}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(hs,{id:"template-sms",checked:f.details.sms_enabled,onCheckedChange:N=>y(E=>({...E,details:{...E.details,sms_enabled:N}}))}),s.jsx(te,{htmlFor:"template-sms",children:"Enable SMS notifications"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-day-before",children:"Day Before SMS"}),s.jsx(ue,{id:"template-day-before",type:"time",value:f.details.day_before_time,onChange:N=>y(E=>({...E,details:{...E.details,day_before_time:N.target.value}}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"template-day-of",children:"Day Of SMS"}),s.jsx(ue,{id:"template-day-of",type:"time",value:f.details.day_of_time,onChange:N=>y(E=>({...E,details:{...E.details,day_of_time:N.target.value}}))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Itinerary"}),s.jsxs("div",{className:"space-y-3",children:[f.itineraries.map((N,E)=>s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-2",children:[s.jsx(ls,{value:N.time_slot,onChange:T=>{const R=[...f.itineraries];R[E]={...N,time_slot:T},y(O=>({...O,itineraries:R}))},className:""}),s.jsx(ue,{value:N.activity,onChange:T=>{const R=[...f.itineraries];R[E]={...N,activity:T.target.value},y(O=>({...O,itineraries:R}))},placeholder:"Activity"}),s.jsx(ue,{value:N.description||"",onChange:T=>{const R=[...f.itineraries];R[E]={...N,description:T.target.value},y(O=>({...O,itineraries:R}))},placeholder:"Description (optional)"})]}),s.jsx(H,{type:"button",variant:"outline",size:"sm",onClick:()=>{const T=f.itineraries.filter((R,O)=>O!==E);y(R=>({...R,itineraries:T}))},children:"Remove"})]},E)),s.jsx(H,{type:"button",variant:"outline",onClick:()=>{const N=[...f.itineraries,{time_slot:"",activity:"",description:"",duration_minutes:30}];y(E=>({...E,itineraries:N}))},children:"Add Itinerary Item"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Volunteer Roles"}),s.jsxs("div",{className:"space-y-3",children:[f.volunteer_roles.map((N,E)=>s.jsxs("div",{className:"border rounded-lg p-3 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[s.jsx(ue,{value:N.role_label,onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,role_label:T.target.value},y(O=>({...O,volunteer_roles:R}))},placeholder:"Role Label"}),s.jsx(ue,{value:N.notes||"",onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,notes:T.target.value},y(O=>({...O,volunteer_roles:R}))},placeholder:"Notes (optional)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[s.jsx(ls,{value:N.shift_start,onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,shift_start:T},y(O=>({...O,volunteer_roles:R}))}}),s.jsx(ls,{value:N.shift_end,onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,shift_end:T},y(O=>({...O,volunteer_roles:R}))}}),s.jsx(ue,{type:"number",inputMode:"numeric",step:"1",value:N.slots_brother===0?"":N.slots_brother,onChange:T=>{const R=T.target.value===""?0:parseInt(T.target.value)||0,O=[...f.volunteer_roles];O[E]={...N,slots_brother:R},y(F=>({...F,volunteer_roles:O}))},onBlur:T=>{const R=T.target.value===""?0:parseInt(T.target.value)||0;if(R!==N.slots_brother){const O=[...f.volunteer_roles];O[E]={...N,slots_brother:R},y(F=>({...F,volunteer_roles:O}))}},placeholder:"Brother Slots",min:"0"}),s.jsx(ue,{type:"number",inputMode:"numeric",step:"1",value:N.slots_sister===0?"":N.slots_sister,onChange:T=>{const R=T.target.value===""?0:parseInt(T.target.value)||0,O=[...f.volunteer_roles];O[E]={...N,slots_sister:R},y(F=>({...F,volunteer_roles:O}))},onBlur:T=>{const R=T.target.value===""?0:parseInt(T.target.value)||0;if(R!==N.slots_sister){const O=[...f.volunteer_roles];O[E]={...N,slots_sister:R},y(F=>({...F,volunteer_roles:O}))}},placeholder:"Sister Slots",min:"0"}),s.jsx(ue,{type:"number",inputMode:"numeric",step:"1",value:N.slots_flexible===0?"":N.slots_flexible,onChange:T=>{const R=T.target.value===""?0:parseInt(T.target.value)||0,O=[...f.volunteer_roles];O[E]={...N,slots_flexible:R},y(F=>({...F,volunteer_roles:O}))},onBlur:T=>{const R=T.target.value===""?0:parseInt(T.target.value)||0;if(R!==N.slots_flexible){const O=[...f.volunteer_roles];O[E]={...N,slots_flexible:R},y(F=>({...F,volunteer_roles:O}))}},placeholder:"Flexible Slots",min:"0"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(H,{type:"button",variant:"outline",size:"sm",onClick:()=>{const T=f.volunteer_roles.filter((R,O)=>O!==E);y(R=>({...R,volunteer_roles:T}))},children:"Remove Role"})})]},E)),s.jsx(H,{type:"button",variant:"outline",onClick:()=>{const N=[...f.volunteer_roles,{role_label:"",shift_start:"",shift_end:"",slots_brother:1,slots_sister:1,slots_flexible:0,notes:""}];y(E=>({...E,volunteer_roles:N}))},children:"Add Volunteer Role"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(H,{variant:"outline",onClick:v,children:"Cancel"}),s.jsx(H,{onClick:b,disabled:!f.name.trim(),children:"Create Template"})]})]})}),s.jsx(fr,{open:d,onOpenChange:N=>{N||w()},children:s.jsxs(rr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsxs(nr,{children:[s.jsxs(sr,{children:["Edit Template: ",m==null?void 0:m.name]}),s.jsx(ar,{children:"Update your template configuration"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"edit-template-name",children:"Template Name *"}),s.jsx(ue,{id:"edit-template-name",value:f.name,onChange:N=>y(E=>({...E,name:N.target.value})),placeholder:"e.g., Community Gathering"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"edit-template-description",children:"Description"}),s.jsx(ue,{id:"edit-template-description",value:f.description,onChange:N=>y(E=>({...E,description:N.target.value})),placeholder:"Describe this template"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(hs,{id:"edit-template-public",checked:f.is_public,onCheckedChange:N=>y(E=>({...E,is_public:N}))}),s.jsx(te,{htmlFor:"edit-template-public",children:"Make template public"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Template Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"edit-template-title",children:"Default Title"}),s.jsx(ue,{id:"edit-template-title",value:f.details.title,onChange:N=>y(E=>({...E,details:{...E.details,title:N.target.value}})),placeholder:"Default event title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"edit-template-location",children:"Default Location"}),s.jsx(mg,{value:f.details.location,onChange:N=>y(E=>({...E,details:{...E.details,location:N}})),placeholder:"Select or type a location..."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"edit-template-description-details",children:"Default Description"}),s.jsx(un,{id:"edit-template-description-details",value:f.details.description,onChange:N=>y(E=>({...E,details:{...E.details,description:N.target.value}})),placeholder:"Default event description",rows:3})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Settings"}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(hs,{id:"edit-template-sms",checked:f.details.sms_enabled,onCheckedChange:N=>y(E=>({...E,details:{...E.details,sms_enabled:N}}))}),s.jsx(te,{htmlFor:"edit-template-sms",children:"Enable SMS notifications"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"edit-template-day-before",children:"Day Before SMS"}),s.jsx(ue,{id:"edit-template-day-before",type:"time",value:f.details.day_before_time,onChange:N=>y(E=>({...E,details:{...E.details,day_before_time:N.target.value}}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"edit-template-day-of",children:"Day Of SMS"}),s.jsx(ue,{id:"edit-template-day-of",type:"time",value:f.details.day_of_time,onChange:N=>y(E=>({...E,details:{...E.details,day_of_time:N.target.value}}))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Itinerary"}),s.jsxs("div",{className:"space-y-3",children:[f.itineraries.map((N,E)=>s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-2",children:[s.jsx(ls,{value:N.time_slot,onChange:T=>{const R=[...f.itineraries];R[E]={...N,time_slot:T},y(O=>({...O,itineraries:R}))}}),s.jsx(ue,{value:N.activity,onChange:T=>{const R=[...f.itineraries];R[E]={...N,activity:T.target.value},y(O=>({...O,itineraries:R}))},placeholder:"Activity"}),s.jsx(ue,{value:N.description||"",onChange:T=>{const R=[...f.itineraries];R[E]={...N,description:T.target.value},y(O=>({...O,itineraries:R}))},placeholder:"Description (optional)"})]}),s.jsx(H,{type:"button",variant:"outline",size:"sm",onClick:()=>{const T=f.itineraries.filter((R,O)=>O!==E);y(R=>({...R,itineraries:T}))},children:"Remove"})]},E)),s.jsx(H,{type:"button",variant:"outline",onClick:()=>{const N=[...f.itineraries,{time_slot:"",activity:"",description:"",duration_minutes:30}];y(E=>({...E,itineraries:N}))},children:"Add Itinerary Item"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Volunteer Roles"}),s.jsxs("div",{className:"space-y-3",children:[f.volunteer_roles.map((N,E)=>s.jsxs("div",{className:"border rounded-lg p-3 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[s.jsx(ue,{value:N.role_label,onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,role_label:T.target.value},y(O=>({...O,volunteer_roles:R}))},placeholder:"Role Label"}),s.jsx(ue,{value:N.notes||"",onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,notes:T.target.value},y(O=>({...O,volunteer_roles:R}))},placeholder:"Notes (optional)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[s.jsx(ls,{value:N.shift_start,onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,shift_start:T},y(O=>({...O,volunteer_roles:R}))}}),s.jsx(ls,{value:N.shift_end,onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,shift_end:T},y(O=>({...O,volunteer_roles:R}))}}),s.jsx(ue,{type:"number",value:N.slots_brother,onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,slots_brother:parseInt(T.target.value)||0},y(O=>({...O,volunteer_roles:R}))},placeholder:"Brother Slots",min:"0"}),s.jsx(ue,{type:"number",value:N.slots_sister,onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,slots_sister:parseInt(T.target.value)||0},y(O=>({...O,volunteer_roles:R}))},placeholder:"Sister Slots",min:"0"}),s.jsx(ue,{type:"number",value:N.slots_flexible,onChange:T=>{const R=[...f.volunteer_roles];R[E]={...N,slots_flexible:parseInt(T.target.value)||0},y(O=>({...O,volunteer_roles:R}))},placeholder:"Flexible Slots",min:"0"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(H,{type:"button",variant:"outline",size:"sm",onClick:()=>{const T=f.volunteer_roles.filter((R,O)=>O!==E);y(R=>({...R,volunteer_roles:T}))},children:"Remove Role"})})]},E)),s.jsx(H,{type:"button",variant:"outline",onClick:()=>{const N=[...f.volunteer_roles,{role_label:"",shift_start:"",shift_end:"",slots_brother:1,slots_sister:1,slots_flexible:0,notes:""}];y(E=>({...E,volunteer_roles:N}))},children:"Add Volunteer Role"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(H,{variant:"outline",onClick:w,children:"Cancel"}),s.jsx(H,{onClick:g,disabled:!f.name.trim(),children:"Update Template"})]})]})})]})]})}const _9=()=>{var $;const e=Xr();Qt();const{isRestoring:t,isDeleting:r,isDeletingAll:n,restoreEvent:a,permanentlyDeleteEvent:o,permanentlyDeleteAllEvents:i,getSoftDeletedEvents:l}=sx(),{loadDeletedTemplates:c,restoreTemplate:d,permanentlyDeleteTemplate:u}=Bh(),[m,p]=h.useState([]),[f,y]=h.useState([]),[g,x]=h.useState(!0),[w,v]=h.useState({isOpen:!1,event:null}),[b,j]=h.useState(!1),[k,S]=h.useState("all");h.useEffect(()=>{N()},[]);const N=async()=>{x(!0);try{const[D,P]=await Promise.all([l(),c()]);p(D),y(P)}catch(D){console.error("Error loading deleted items:",D)}finally{x(!1)}},E=async D=>{await a(D.id,D.title)&&p(A=>A.filter(G=>G.id!==D.id))},T=async D=>{await o(D.id,D.title)&&(p(A=>A.filter(G=>G.id!==D.id)),v({isOpen:!1,event:null}))},R=async D=>{await d(D.id)&&y(A=>A.filter(G=>G.id!==D.id))},O=async D=>{await u(D.id)&&y(A=>A.filter(G=>G.id!==D.id))},F=async()=>{await i()&&(p([]),y([]),j(!1))},M=D=>{var G,_;const P=((G=D.volunteer_roles)==null?void 0:G.reduce((C,L)=>C+(L.slots_brother||0)+(L.slots_sister||0)+(L.slots_flexible||0),0))||0,A=((_=D.volunteers)==null?void 0:_.length)||0;return{totalSlots:P,filledSlots:A,openSlots:P-A}},I=D=>{const P=new Date(D),A=new Date,G=Math.ceil((P.getTime()+30*24*60*60*1e3-A.getTime())/(1e3*60*60*24));return Math.max(0,G)},B=()=>{switch(k){case"draft":return m.filter(D=>D.status==="draft");case"published":return m.filter(D=>D.status==="published");default:return m}};return g?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(dn,{}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin w-12 h-12 border-3 border-[#5c5b2f] border-t-transparent rounded-full mx-auto mb-6"}),s.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"Loading deleted events..."})]})})})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(dn,{}),s.jsxs("main",{className:"container mx-auto px-4 py-6 md:py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/dashboard"),className:"h-8 px-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[s.jsx(nc,{className:"w-4 h-4 mr-1"}),"Dashboard"]}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-gray-900 font-medium",children:"Recently Deleted"})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2 tracking-tight",children:"Recently Deleted"}),s.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Recover or permanently remove deleted events and templates"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[(m.length>0||f.length>0)&&s.jsxs(H,{onClick:()=>j(!0),disabled:n,variant:"destructive",className:"h-10 px-6 bg-red-600 hover:bg-red-700 text-white",children:[s.jsx(SO,{className:"w-4 h-4 mr-2"}),n?"Deleting All...":"Delete All Permanently"]}),s.jsxs(H,{onClick:()=>e("/dashboard"),variant:"outline",className:"h-10 px-6 text-gray-700 border-gray-300 hover:bg-gray-50 hover:border-gray-400",children:[s.jsx(nc,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})]})]}),m.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Summary"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(Pe,{className:"border-0 shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-[#5c5b2f]/10 rounded-lg",children:s.jsx(fO,{className:"w-5 h-5 text-[#5c5b2f]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Deleted"})]})]})})}),s.jsx(Pe,{className:"border-0 shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(xv,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(D=>D.status==="published").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Was Published"})]})]})})}),s.jsx(Pe,{className:"border-0 shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(En,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m.filter(D=>D.status==="draft").length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Was Draft"})]})]})})}),s.jsx(Pe,{className:"border-0 shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(y_,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:m.filter(D=>M(D).filledSlots>0).length}),s.jsx("p",{className:"text-sm text-gray-600",children:"With Volunteers"})]})]})})}),f.length>0&&s.jsx(Pe,{className:"border-0 shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(En,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.length}),s.jsx("p",{className:"text-sm text-gray-600",children:"Deleted Templates"})]})]})})})]})]}),m.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filter Events"}),k!=="all"&&s.jsxs(ye,{variant:"secondary",className:"bg-[#5c5b2f]/10 text-[#5c5b2f] border-[#5c5b2f]/20",children:["Showing: ",k==="published"?"Published":"Draft"," events"]})]}),s.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-lg w-fit",children:[s.jsxs(H,{variant:k==="all"?"default":"ghost",onClick:()=>S("all"),className:`h-8 px-4 text-sm rounded-md transition-all ${k==="all"?"bg-white text-[#5c5b2f] shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:["All (",m.length,")"]}),s.jsxs(H,{variant:k==="published"?"default":"ghost",onClick:()=>S("published"),className:`h-8 px-4 text-sm rounded-md transition-all ${k==="published"?"bg-white text-[#5c5b2f] shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:["Published (",m.filter(D=>D.status==="published").length,")"]}),s.jsxs(H,{variant:k==="draft"?"default":"ghost",onClick:()=>S("draft"),className:`h-8 px-4 text-sm rounded-md transition-all ${k==="draft"?"bg-white text-[#5c5b2f] shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:["Drafts (",m.filter(D=>D.status==="draft").length,")"]})]})]}),B().length===0?s.jsx(Pe,{className:"border-0 shadow-sm text-center py-16",children:s.jsxs(Ae,{children:[s.jsx(br,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:m.length===0?"No Deleted Events":"No Events Match Filter"}),s.jsx("p",{className:"text-gray-500 mb-6",children:m.length===0?"You haven't deleted any events yet.":`No ${k==="all"?"":k} events match your current filter.`}),m.length>0&&k!=="all"&&s.jsx(H,{variant:"outline",onClick:()=>S("all"),className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Show All Events"})]})}):s.jsx("div",{className:"space-y-4",children:B().map(D=>{const P=M(D),A=I(D.deleted_at);return s.jsx(Pe,{className:"border-0 shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-6",children:[s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:D.title}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mt,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{children:new Date(D.start_datetime).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dr,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{children:gc(D.start_datetime)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-4 h-4 text-gray-400"}),s.jsxs("span",{children:[P.filledSlots,"/",P.totalSlots," volunteers"]})]})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2 ml-4",children:[s.jsx(ye,{variant:"secondary",className:"bg-red-100 text-red-700 border-red-200 text-xs",children:"Deleted"}),s.jsxs(ye,{variant:"outline",className:"text-xs border-gray-300 text-gray-600",children:[A," days left"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("div",{className:"text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Location:"})," ",D.location]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-600 font-medium",children:"Status:"}),s.jsx(ye,{variant:"secondary",className:`text-xs ${D.status==="published"?"bg-green-100 text-green-700 border-green-200":"bg-yellow-100 text-yellow-700 border-yellow-200"}`,children:D.status==="published"?"Published":"Draft"})]})]}),D.description&&s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Description:"})," ",D.description]}),P.totalSlots>0&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Volunteer Status"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total Slots:"}),s.jsx("div",{className:"font-semibold text-gray-900",children:P.totalSlots})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Filled:"}),s.jsx("div",{className:"font-semibold text-green-600",children:P.filledSlots})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Open:"}),s.jsx("div",{className:"font-semibold text-red-600",children:P.openSlots})]})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-3 lg:w-48",children:[s.jsxs(H,{onClick:()=>E(D),disabled:t,className:"w-full bg-[#5c5b2f] hover:bg-[#4a4a28] text-white h-10",children:[s.jsx(py,{className:"w-4 h-4 mr-2"}),t?"Restoring...":"Restore Event"]}),s.jsxs(H,{onClick:()=>v({isOpen:!0,event:D}),disabled:r,variant:"outline",className:"w-full h-10 border-red-300 text-red-700 hover:bg-red-50 hover:border-red-400",children:[s.jsx(br,{className:"w-4 h-4 mr-2"}),r?"Deleting...":"Delete Permanently"]}),s.jsx("div",{className:"text-xs text-gray-500 text-center",children:"This action cannot be undone"})]})]})})},D.id)})}),f.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Deleted Templates"}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:f.map(D=>s.jsxs(Pe,{className:"border-0 shadow-sm hover:shadow-md transition-shadow duration-200",children:[s.jsx($t,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(En,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx(Lt,{className:"text-lg",children:D.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:D.description})]})]}),s.jsxs("div",{className:"flex gap-2",children:[D.is_public&&s.jsx(ye,{variant:"secondary",children:"Public"}),s.jsx(ye,{variant:"outline",children:D.user_id==="00000000-0000-0000-0000-000000000000"?"System":"Custom"})]})]})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>R(D),className:"flex items-center gap-2 flex-1 text-green-600 hover:text-green-700 hover:bg-green-50",children:[s.jsx(py,{className:"h-4 w-4"}),"Restore"]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>O(D),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(br,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Deleted ",D.deleted_at?new Date(D.deleted_at).toLocaleDateString():"recently"]})]})]},D.id))})]})]}),s.jsx(fr,{open:w.isOpen,onOpenChange:D=>v({isOpen:D,event:w.event}),children:s.jsxs(rr,{className:"max-w-md",children:[s.jsxs(nr,{children:[s.jsx(sr,{className:"text-red-800",children:"Permanently Delete Event?"}),s.jsxs(ar,{className:"text-gray-600",children:['This action will permanently remove "',($=w.event)==null?void 0:$.title,'" and all associated data. This cannot be undone.']}),w.event&&s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Event was: "}),s.jsx(ye,{variant:"secondary",className:w.event.status==="published"?"bg-green-100 text-green-800 border-green-200 ml-2":"bg-yellow-100 text-yellow-800 border-yellow-200 ml-2",children:w.event.status==="published"?"Published":"Draft"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>v({isOpen:!1,event:null}),className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),s.jsx(H,{variant:"destructive",onClick:()=>w.event&&T(w.event),disabled:r,className:"flex-1",children:r?"Deleting...":"Delete Permanently"})]})]})}),s.jsx(fr,{open:b,onOpenChange:j,children:s.jsxs(rr,{className:"max-w-md",children:[s.jsxs(nr,{children:[s.jsx(sr,{className:"text-red-800",children:"Delete All Items Permanently?"}),s.jsxs(ar,{className:"text-gray-600",children:["This action will permanently remove ",s.jsxs("span",{className:"font-semibold",children:[m.length," event",m.length===1?"":"s"]}),f.length>0&&s.jsxs(s.Fragment,{children:[" and ",s.jsxs("span",{className:"font-semibold",children:[f.length," template",f.length===1?"":"s"]})]})," and all associated data. This cannot be undone."]}),s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Cu,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-red-700",children:[s.jsx("p",{className:"font-medium mb-1",children:"Warning:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"All deleted events will be permanently removed"}),s.jsx("li",{children:"All deleted templates will be permanently removed"}),s.jsx("li",{children:"All volunteer roles and signups will be lost"}),s.jsx("li",{children:"This action cannot be undone"})]})]})]})})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>j(!1),className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),s.jsx(H,{variant:"destructive",onClick:F,disabled:n,className:"flex-1 bg-red-600 hover:bg-red-700",children:n?"Deleting All...":"Delete All Permanently"})]})]})})]})};var Xh="Tabs",[S9]=Fr(Xh,[tl]),gT=tl(),[C9,Fx]=S9(Xh),vT=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=$c(l),[m,p]=Kn({prop:n,onChange:a,defaultProp:o??"",caller:Xh});return s.jsx(C9,{scope:r,baseId:hr(),value:m,onValueChange:p,orientation:i,dir:u,activationMode:c,children:s.jsx(ve.div,{dir:u,"data-orientation":i,...d,ref:t})})});vT.displayName=Xh;var xT="TabsList",yT=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,o=Fx(xT,r),i=gT(r);return s.jsx(px,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:s.jsx(ve.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});yT.displayName=xT;var wT="TabsTrigger",bT=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...o}=e,i=Fx(wT,r),l=gT(r),c=_T(i.baseId,n),d=ST(i.baseId,n),u=n===i.value;return s.jsx(gx,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(ve.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:ae(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?i.onValueChange(n):m.preventDefault()}),onKeyDown:ae(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&i.onValueChange(n)}),onFocus:ae(e.onFocus,()=>{const m=i.activationMode!=="manual";!u&&!a&&m&&i.onValueChange(n)})})})});bT.displayName=wT;var jT="TabsContent",NT=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:o,...i}=e,l=Fx(jT,r),c=_T(l.baseId,n),d=ST(l.baseId,n),u=n===l.value,m=h.useRef(u);return h.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(Jr,{present:a||u,children:({present:p})=>s.jsx(ve.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:p&&o})})});NT.displayName=jT;function _T(e,t){return`${e}-trigger-${t}`}function ST(e,t){return`${e}-content-${t}`}var E9=vT,CT=yT,ET=bT,kT=NT;const k9=E9,TT=h.forwardRef(({className:e,...t},r)=>s.jsx(CT,{ref:r,className:re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));TT.displayName=CT.displayName;const Bo=h.forwardRef(({className:e,...t},r)=>s.jsx(ET,{ref:r,className:re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Bo.displayName=ET.displayName;const zo=h.forwardRef(({className:e,...t},r)=>s.jsx(kT,{ref:r,className:re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));zo.displayName=kT.displayName;const T9=()=>{var k,S,N,E;const e=Xr(),{toast:t}=Qt(),{isAdmin:r,user:n,loading:a,refreshAdminStatus:o}=Ih(),[i,l]=h.useState(""),[c,d]=h.useState(!1),u=h.useRef(null),[m,p]=h.useState({full_name:"",phone:"",organization:""}),[f,y]=h.useState({openaiKey:"",twilioSid:"",twilioToken:"",twilioPhone:"",confirmationTemplate:"Thanks [Name]! You're signed up as [Role] on [Date] at [Time]. POC: [POCName] ([Phone]).",dayBeforeTemplate:"Hi [Name], reminder: you're assigned as [Role] tomorrow at [Time]. POC: [POCName] ([Phone]).",dayOfTemplate:"Hi [Name], your [Role] shift starts in 3 hours at [Time]. POC: [POCName] ([Phone]).",timezone:"America/New_York"}),g=r||c;h.useEffect(()=>{(async()=>{var I,B,$,D;console.log("Settings: Checking user...");const{data:{user:O},error:F}=await K.auth.getUser();if(F){console.error("Settings: User error:",F),e("/login");return}if(console.log("Settings: User data:",O),!O){console.log("Settings: No user, redirecting to login"),e("/login");return}console.log("Settings: User found:",O),console.log("Settings: User metadata:",O.user_metadata);const M=localStorage.getItem("settings");M&&y(JSON.parse(M)),O&&(p({full_name:((I=O.user_metadata)==null?void 0:I.full_name)||((B=O.user_metadata)==null?void 0:B.name)||"",phone:(($=O.user_metadata)==null?void 0:$.phone)||"",organization:((D=O.user_metadata)==null?void 0:D.organization)||""}),await x(O.id))})();const{data:{subscription:R}}=K.auth.onAuthStateChange((O,F)=>{var M;console.log("Settings: Auth state change:",O,(M=F==null?void 0:F.user)==null?void 0:M.id),O==="SIGNED_OUT"&&e("/login")});return()=>R.unsubscribe()},[e]),h.useEffect(()=>{const T=R=>{if(R.key==="Shift"&&!R.repeat){const O=Date.now(),F=u.current;F&&O-F<=500&&d(!0),u.current=O}};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[]);const x=async T=>{var R,O,F;try{const{data:M,error:I}=await K.from("profiles").select("id").eq("id",T).single();if(I&&I.code==="PGRST116"){console.log("Creating profile for user:",T);const{error:B}=await K.from("profiles").insert({id:T,full_name:((R=n==null?void 0:n.user_metadata)==null?void 0:R.full_name)||((O=n==null?void 0:n.user_metadata)==null?void 0:O.name)||"",phone:((F=n==null?void 0:n.user_metadata)==null?void 0:F.phone)||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});B?console.error("Error creating profile:",B):console.log("Profile created successfully")}else M&&console.log("Profile already exists for user:",T)}catch(M){console.error("Error ensuring user profile:",M)}},w=()=>{localStorage.setItem("settings",JSON.stringify(f)),t({title:"Settings Saved",description:"Your configuration has been updated successfully."})},v=async()=>{if(!i.trim()){t({title:"Admin Code Required",description:"Please enter the admin code to activate admin mode.",variant:"destructive"});return}try{console.log("Attempting to activate admin mode with code:",i.trim());const{data:T,error:R}=await K.rpc("activate_admin_mode",{admin_code:i.trim()});if(console.log("RPC response:",{data:T,error:R}),R){console.error("Admin activation error:",R),t({title:"Admin Activation Failed",description:R.message,variant:"destructive"});return}T?(l(""),console.log("Admin mode activated successfully!"),console.log("Refreshing admin status..."),await o(),t({title:"Admin Mode Activated!",description:"You now have admin privileges. You can delete any event and access advanced features."})):t({title:"Invalid Admin Code",description:"The admin code you entered is incorrect.",variant:"destructive"})}catch(T){console.error("Admin activation error:",T),t({title:"Admin Activation Failed",description:"An unexpected error occurred while activating admin mode.",variant:"destructive"})}},b=async()=>{try{console.log("Attempting to deactivate admin mode...");const{data:T,error:R}=await K.rpc("deactivate_admin_mode");if(console.log("RPC response:",{data:T,error:R}),R){console.error("Admin deactivation error:",R),t({title:"Admin Deactivation Failed",description:R.message,variant:"destructive"});return}if(T){console.log("Admin mode deactivated successfully!"),console.log("Refreshing admin status...");const{error:O}=await K.auth.refreshSession();O&&console.error("Error refreshing session:",O),await o(),t({title:"Admin Mode Deactivated",description:"You have returned to normal user status."})}else t({title:"Deactivation Failed",description:"Unable to deactivate admin mode. Please try again.",variant:"destructive"})}catch(T){console.error("Admin deactivation error:",T),t({title:"Admin Deactivation Failed",description:"An unexpected error occurred while deactivating admin mode.",variant:"destructive"})}},j=async()=>{if(n)try{const{error:T}=await K.auth.updateUser({data:{full_name:m.full_name,name:m.full_name,phone:m.phone,organization:m.organization}});t(T?{title:"Profile Update Failed",description:T.message,variant:"destructive"}:{title:"Profile Updated",description:"Your profile information has been saved."})}catch(T){console.error("Profile update error:",T),t({title:"Profile Update Failed",description:"An unexpected error occurred while updating your profile.",variant:"destructive"})}};return a?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(dn,{}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin w-12 h-12 border-3 border-gold-400 border-t-transparent rounded-full mx-auto mb-6"}),s.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"Loading settings..."})]})})})]}):n?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(dn,{}),s.jsxs("main",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure your integrations and preferences"})]}),s.jsxs(k9,{defaultValue:"profile",className:"space-y-6",children:[s.jsxs(TT,{className:`grid w-full ${g?"grid-cols-5":"grid-cols-4"}`,children:[s.jsx(Bo,{value:"profile",children:"Profile"}),s.jsx(Bo,{value:"integrations",children:"Integrations"}),s.jsx(Bo,{value:"templates",children:"Templates"}),s.jsx(Bo,{value:"preferences",children:"Preferences"}),g&&s.jsx(Bo,{value:"admin",children:"Admin"})]}),s.jsx(zo,{value:"profile",children:s.jsxs(Pe,{children:[s.jsxs($t,{children:[s.jsxs(Lt,{className:"flex items-center space-x-2",children:[s.jsx(Ep,{className:"w-5 h-5"}),s.jsx("span",{children:"Profile Information"})]}),s.jsx(Wr,{children:"Update your personal information and contact details"})]}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"fullName",children:"Full Name"}),s.jsx(ue,{id:"fullName",value:m.full_name,onChange:T=>p(R=>({...R,full_name:T.target.value})),placeholder:"Your full name"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Current: ",((k=n==null?void 0:n.user_metadata)==null?void 0:k.full_name)||((S=n==null?void 0:n.user_metadata)==null?void 0:S.name)||"Not set"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"email",children:"Email Address"}),s.jsx(ue,{id:"email",type:"email",value:(n==null?void 0:n.email)||"",disabled:!0,className:"bg-gray-100",placeholder:"your@email.com"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Email cannot be changed"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"phone",children:"Phone Number"}),s.jsx(Mi,{id:"phone",value:m.phone,onChange:T=>p(R=>({...R,phone:T})),placeholder:"Phone number"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Current: ",((N=n==null?void 0:n.user_metadata)==null?void 0:N.phone)||"Not set"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"organization",children:"Organization (Optional)"}),s.jsx(ue,{id:"organization",value:m.organization,onChange:T=>p(R=>({...R,organization:T.target.value})),placeholder:"Community Center, Mosque, etc."}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Current: ",((E=n==null?void 0:n.user_metadata)==null?void 0:E.organization)||"Not set"]})]})]}),s.jsx(H,{onClick:j,className:"mt-4",children:"Update Profile"})]})]})}),s.jsx(zo,{value:"integrations",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Pe,{children:[s.jsxs($t,{children:[s.jsxs(Lt,{className:"flex items-center space-x-2",children:[s.jsx(kO,{className:"w-5 h-5"}),s.jsx("span",{children:"OpenAI Integration"})]}),s.jsx(Wr,{children:"Configure OpenAI API for AI-powered role suggestions"})]}),s.jsx(Ae,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"openaiKey",children:"OpenAI API Key"}),s.jsx(ue,{id:"openaiKey",type:"password",value:f.openaiKey,onChange:T=>y(R=>({...R,openaiKey:T.target.value})),placeholder:"sk-..."}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Get your API key from ",s.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"OpenAI Platform"})]})]})})]}),s.jsxs(Pe,{children:[s.jsxs($t,{children:[s.jsxs(Lt,{className:"flex items-center space-x-2",children:[s.jsx(x_,{className:"w-5 h-5"}),s.jsx("span",{children:"SMS Integration (Twilio)"})]}),s.jsx(Wr,{children:"Configure SMS service for automated reminders"})]}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"twilioSid",children:"Account SID"}),s.jsx(ue,{id:"twilioSid",type:"password",value:f.twilioSid,onChange:T=>y(R=>({...R,twilioSid:T.target.value})),placeholder:"AC..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"twilioToken",children:"Auth Token"}),s.jsx(ue,{id:"twilioToken",type:"password",value:f.twilioToken,onChange:T=>y(R=>({...R,twilioToken:T.target.value})),placeholder:"Your auth token"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(te,{htmlFor:"twilioPhone",children:"Twilio Phone Number"}),s.jsx(Mi,{id:"twilioPhone",value:f.twilioPhone,onChange:T=>y(R=>({...R,twilioPhone:T})),placeholder:"Twilio number"})]})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Get your Twilio credentials from ",s.jsx("a",{href:"https://console.twilio.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Twilio Console"})]})]})]})]})}),s.jsx(zo,{value:"templates",children:s.jsxs(Pe,{children:[s.jsxs($t,{children:[s.jsx(Lt,{children:"SMS Message Templates"}),s.jsx(Wr,{children:"Customize your automated SMS messages. Use placeholders: [Name], [Role], [Date], [Time], [POCName], [Phone]"})]}),s.jsxs(Ae,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"confirmationTemplate",children:"Confirmation Message"}),s.jsx(un,{id:"confirmationTemplate",value:f.confirmationTemplate,onChange:T=>y(R=>({...R,confirmationTemplate:T.target.value})),rows:3,placeholder:"Message sent when someone signs up"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"dayBeforeTemplate",children:"Day Before Reminder"}),s.jsx(un,{id:"dayBeforeTemplate",value:f.dayBeforeTemplate,onChange:T=>y(R=>({...R,dayBeforeTemplate:T.target.value})),rows:3,placeholder:"Message sent the day before the event"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"dayOfTemplate",children:"Day Of Reminder"}),s.jsx(un,{id:"dayOfTemplate",value:f.dayOfTemplate,onChange:T=>y(R=>({...R,dayOfTemplate:T.target.value})),rows:3,placeholder:"Message sent on the day of the event"})]}),s.jsxs("div",{className:"bg-blue-500/15 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Available Placeholders:"}),s.jsxs("div",{className:"text-sm text-gray-600 grid grid-cols-2 gap-2",children:[s.jsxs("span",{children:[s.jsx("code",{children:"[Name]"})," - Volunteer's name"]}),s.jsxs("span",{children:[s.jsx("code",{children:"[Role]"})," - Their assigned role"]}),s.jsxs("span",{children:[s.jsx("code",{children:"[Date]"})," - Event date"]}),s.jsxs("span",{children:[s.jsx("code",{children:"[Time]"})," - Shift time"]}),s.jsxs("span",{children:[s.jsx("code",{children:"[POCName]"})," - Point of contact name"]}),s.jsxs("span",{children:[s.jsx("code",{children:"[Phone]"})," - POC phone number"]})]})]})]})]})}),s.jsx(zo,{value:"preferences",children:s.jsxs(Pe,{children:[s.jsxs($t,{children:[s.jsx(Lt,{children:"General Preferences"}),s.jsx(Wr,{children:"Configure system-wide preferences"})]}),s.jsx(Ae,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"timezone",children:"Default Timezone"}),s.jsxs("select",{id:"timezone",value:f.timezone,onChange:T=>y(R=>({...R,timezone:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[s.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),s.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),s.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),s.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]})]})})]})}),g&&s.jsx(zo,{value:"admin",children:s.jsxs(Pe,{children:[s.jsxs($t,{children:[s.jsxs(Lt,{className:"flex items-center space-x-2",children:[s.jsx(jp,{className:"w-5 h-5 text-yellow-600"}),s.jsx("span",{children:"Admin Mode"})]}),s.jsx(Wr,{children:"Activate admin privileges to access advanced features and delete any event"})]}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("p",{children:s.jsx("strong",{children:"Debug Info:"})}),s.jsxs("p",{children:["isAdmin: ",r?"true":"false"]}),s.jsxs("p",{children:["User ID: ",(n==null?void 0:n.id)||"none"]}),s.jsxs("p",{children:["User Metadata: ",JSON.stringify((n==null?void 0:n.user_metadata)||{},null,2)]})]}),s.jsx(H,{onClick:async()=>{console.log("Manual admin status check..."),await o(),console.log("Admin status refreshed")},className:"mt-2",variant:"outline",size:"sm",children:"Refresh Admin Status"})]}),r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-emerald-500/15 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sp,{className:"w-5 h-5 text-emerald-400"}),s.jsx("span",{className:"font-medium text-emerald-300",children:"Admin Mode Active"})]}),s.jsx("p",{className:"text-emerald-300 mt-2",children:"You currently have admin privileges. You can:"}),s.jsxs("ul",{className:"text-emerald-300 mt-2 list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Delete any event, regardless of ownership"}),s.jsx("li",{children:"Access advanced system features"}),s.jsx("li",{children:"Manage all user events and data"})]})]}),s.jsxs(H,{onClick:b,variant:"outline",className:"w-full sm:w-auto border-red-300 text-red-700 hover:bg-red-500/10 hover:border-red-400",children:[s.jsx(bu,{className:"w-4 h-4 mr-2"}),"Deactivate Admin Mode"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-500/15 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sp,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-blue-800",children:"Admin Privileges"})]}),s.jsx("p",{className:"text-blue-700 mt-2",children:"Admin mode grants you elevated privileges including the ability to delete any event in the system."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"adminCode",children:"Admin Code"}),s.jsx(ue,{id:"adminCode",type:"password",value:i,onChange:T=>l(T.target.value),placeholder:"Enter admin code",className:"font-mono"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Enter the admin code to activate admin mode"})]}),s.jsxs(H,{onClick:v,className:"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700",disabled:!i.trim(),children:[s.jsx(jp,{className:"w-4 h-4 mr-2"}),"Activate Admin Mode"]})]})]})]})})]}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsxs(H,{onClick:w,className:"bg-gradient-to-r from-blue-600 to-green-600 hover:from-blue-700 hover:to-green-700",children:[s.jsx(xO,{className:"w-4 h-4 mr-2"}),"Save All Settings"]})})]})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(dn,{}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"Please log in to access settings."})})})]})},Sm={},P9=()=>{const[e,t]=h.useState(""),[r,n]=h.useState(""),[a,o]=h.useState(!1),[i,l]=h.useState(!1),[c,d]=h.useState(""),[u,m]=h.useState(""),[p,f]=h.useState(""),[y,g]=h.useState(""),[x,w]=h.useState(""),[v,b]=h.useState(!1),[j,k]=h.useState(!1),[S,N]=h.useState({}),[E,T]=h.useState({}),R=Xr(),[O]=b1(),{toast:F}=Qt(),M=(Sm==null?void 0:Sm.VITE_SITE_URL)||window.location.origin,I=_=>{const C=(_||"").replace(/[^\d+]/g,"");return C.startsWith("+")?C:/^1\d{10}$/.test(C)?`+${C}`:/^\d{10}$/.test(C)?`+1${C}`:C?`+${C}`:""},B=(_,C)=>{switch(_){case"firstName":return C.trim()?C.trim().length<2?"First name must be at least 2 characters":"":"First name is required";case"lastName":return C.trim()?C.trim().length<2?"Last name must be at least 2 characters":"":"Last name is required";case"phone":return C.trim()?/^\+?[\d\s\-()]+$/.test(C)?"":"Please enter a valid phone number":"Phone number is required";case"gender":return C?"":"Please select brother or sister";case"email":return C.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C)?"":"Please enter a valid email address":"Email is required";case"password":return C?C.length<6?"Password must be at least 6 characters":"":"Password is required";case"pocCode":return C.trim()?"":"POC verification code is required";default:return""}},$=_=>{if(T(C=>({...C,[_]:!0})),S[_]){const L=B(_,_==="firstName"?c:_==="lastName"?u:_==="phone"?p:_==="gender"?y:_==="email"?e:_==="password"?r:_==="pocCode"?x:"");N(W=>({...W,[_]:L}))}},D=(_,C)=>{switch(_){case"firstName":d(C);break;case"lastName":m(C);break;case"phone":f(C);break;case"email":t(C);break;case"password":n(C);break;case"pocCode":w(C);break;case"gender":g(C);break}S[_]&&N(L=>({...L,[_]:""}))},P=()=>{const _={};return a?(_.firstName=B("firstName",c),_.lastName=B("lastName",u),_.phone=B("phone",p),_.gender=B("gender",y),_.email=B("email",e),_.password=B("password",r),_.pocCode=B("pocCode",x)):i?_.email=B("email",e):(_.email=B("email",e),_.password=B("password",r)),N(_),T((a?["firstName","lastName","phone","gender","email","password","pocCode"]:i?["email"]:["email","password"]).reduce((L,W)=>({...L,[W]:!0}),{})),!Object.values(_).some(L=>L)};h.useEffect(()=>{O.get("mode")==="signup"&&o(!0);const C=O.get("notice");C==="link_expired"?F({title:"Sign-in link expired",description:"That link was already used or has expired. Please sign in again."}):C==="invalid_callback"&&F({title:"Sign-in incomplete",description:"We couldn't complete sign-in. Please try again.",variant:"destructive"}),(async()=>{const{data:{user:Y}}=await K.auth.getUser();Y&&R("/dashboard")})();const{data:{subscription:W}}=K.auth.onAuthStateChange((Y,J)=>{console.log("Auth state change:",Y,J),Y==="SIGNED_IN"&&J&&R("/dashboard")});return()=>W.unsubscribe()},[R,F,O]);const A=async _=>{if(_.preventDefault(),!P()){const C=Object.values(S).filter(Q=>Q).length,L=Object.keys(S).filter(Q=>S[Q]),W={firstName:"First Name",lastName:"Last Name",phone:"Phone Number",gender:"Gender",email:"Email",password:"Password",pocCode:"POC Verification Code"},Y=L.map(Q=>W[Q]||Q);F({title:"Form Needs Attention",description:`Please fill in ${C} field${C>1?"s":""}: ${Y.join(", ")}`,variant:"destructive"});const J=document.getElementById(L[0]);J&&(J.scrollIntoView({behavior:"smooth",block:"center"}),J.focus());return}b(!0);try{if(i){const{error:C}=await K.auth.resetPasswordForEmail(e,{redirectTo:`${M}/reset-password?redirect=/dashboard`});C?(console.error("Password reset error:",C),F({title:"Password Reset Error",description:C.message,variant:"destructive"})):(F({title:"Check your email",description:"We've sent you a password reset link. Please check your email and follow the instructions to reset your password."}),l(!1))}else if(a){if(x!=="admin123"){N(Y=>({...Y,pocCode:"Invalid POC verification code"})),T(Y=>({...Y,pocCode:!0})),F({title:"Invalid POC Code",description:"Please enter the correct POC verification code to create an account.",variant:"destructive"}),b(!1);return}const C=I(p),{data:L}=await K.from("contacts").select("id").eq("phone",C).maybeSingle(),{error:W}=await K.auth.signUp({email:e,password:r,options:{data:{full_name:`${c} ${u}`,phone:C,gender:y},emailRedirectTo:`${M}/auth/callback`}});W?(console.error("Signup error:",W),F({title:"Sign Up Error",description:W.message,variant:"destructive"})):(F({title:"Check your email",description:"We've sent you a confirmation link. Please check your email and click the link to verify your account."}),o(!1))}else{const{error:C}=await K.auth.signInWithPassword({email:e,password:r});C?(console.error("Signin error:",C),F({title:"Sign In Error",description:C.message,variant:"destructive"})):F({title:"Welcome Back",description:"You've successfully signed in."})}}catch(C){console.error("Auth error:",C),F({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{b(!1)}},G=(_,C,L,W,Y,J,Q=!0,he,fe)=>{const _e=E[_]&&S[_];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(te,{htmlFor:_,className:"text-sm font-medium text-white/80",children:[C," ",Q&&s.jsx("span",{className:"text-red-500",children:"*"})]}),_==="password"&&fe?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[he&&s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/40",children:he}),s.jsx(ue,{id:_,type:L,placeholder:W,value:Y,onChange:z=>J(z.target.value),onBlur:()=>$(_),autoComplete:a?"new-password":"current-password",name:"password",required:!1,className:`h-11 transition-all duration-200 placeholder:text-white/30 ${he?"pl-10":""} ${_e?"border-red-500/50 focus:border-red-400 focus:ring-red-400/20 bg-red-500/10 text-foreground":"border-white/15 focus:border-gold-400 focus:ring-gold-400/20 bg-white/5 text-foreground"}`})]}),s.jsx("div",{className:"shrink-0",children:fe})]}):s.jsxs("div",{className:"relative",children:[he&&s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/40",children:he}),s.jsx(ue,{id:_,type:L,placeholder:W,value:Y,onChange:z=>J(z.target.value),onBlur:()=>$(_),autoComplete:_==="pocCode"?"off":_==="email"?"email":void 0,autoCorrect:_==="pocCode"?"off":void 0,autoCapitalize:_==="pocCode"?"none":void 0,spellCheck:_==="pocCode"?!1:void 0,inputMode:_==="pocCode"?"text":void 0,name:_==="pocCode"?"poc_code":_,"data-lpignore":_==="pocCode"?"true":void 0,"data-1p-ignore":_==="pocCode"?"true":void 0,"data-form-type":_==="pocCode"?"other":void 0,"aria-autocomplete":_==="pocCode"?"none":void 0,required:!1,className:`h-11 transition-all duration-200 placeholder:text-white/30 ${he?"pl-10":""} ${_e?"border-red-500/50 focus:border-red-400 focus:ring-red-400/20 bg-red-500/10 text-foreground":"border-white/15 focus:border-gold-400 focus:ring-gold-400/20 bg-white/5 text-foreground"}`}),fe&&s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:fe})]}),_e&&s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[s.jsx(sc,{className:"w-4 h-4"}),S[_]]})]})};return s.jsxs("div",{className:"min-h-screen bg-background flex flex-col relative",children:[s.jsx("div",{className:"border-b border-gold-400/10 bg-navy-800/60 backdrop-blur-xl",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex items-center justify-between h-16",children:s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{onClick:()=>R("/"),className:"flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer",children:[s.jsx("div",{className:"crescent-moon mr-1"}),s.jsx("span",{className:"text-lg font-semibold text-gold-300 tracking-wide",children:"UMMA Stewards"})]})})})})}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:s.jsxs(Pe,{className:"w-full max-w-md border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl shadow-black/30 golden-glow",children:[s.jsxs($t,{className:"space-y-2 text-center pb-6",children:[i&&s.jsx("button",{onClick:()=>l(!1),className:"absolute left-4 top-4 p-2 text-white/40 hover:text-gold-300 hover:bg-white/5 rounded-lg transition-colors",children:s.jsx(nc,{className:"w-5 h-5"})}),s.jsx(Lt,{className:"text-2xl font-semibold text-foreground",children:i?"Reset Password":a?"Create POC Account":"Welcome back"}),s.jsx(Wr,{className:"text-white/60 text-base",children:i?"Enter your email to receive a password reset link":a?"Sign up as a Point of Contact to organize events":"Sign in to access your dashboard"})]}),s.jsxs(Ae,{className:"space-y-6",children:[s.jsx("form",{onSubmit:A,className:"space-y-5",noValidate:!0,children:i?s.jsx("div",{className:"space-y-4",children:G("email","Email","email","hello@example.com",e,_=>D("email",_),!0,s.jsx(ju,{className:"w-4 h-4"}))}):s.jsxs(s.Fragment,{children:[a&&s.jsxs("div",{className:"space-y-4",children:[G("firstName","First Name","text","Your first name",c,_=>D("firstName",_),!0,s.jsx(Ep,{className:"w-4 h-4"})),G("lastName","Last Name","text","Your last name",u,_=>D("lastName",_),!0,s.jsx(Ep,{className:"w-4 h-4"})),G("phone","Phone Number","tel","+1 (555) 123-4567",p,_=>D("phone",_),!0,s.jsx(yv,{className:"w-4 h-4"})),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(te,{htmlFor:"gender",className:"text-sm font-medium text-white/80",children:["Gender ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("button",{type:"button",onClick:()=>D("gender","brother"),className:`p-3 text-center rounded-lg border-2 transition-all duration-200 ${y==="brother"?"border-gold-400 bg-gold-400 text-navy-900":"border-white/15 text-white/70 hover:border-gold-400/50 hover:bg-gold-400/10"}`,children:"Brother"}),s.jsx("button",{type:"button",onClick:()=>D("gender","sister"),className:`p-3 text-center rounded-lg border-2 transition-all duration-200 ${y==="sister"?"border-gold-400 bg-gold-400 text-navy-900":"border-white/15 text-white/70 hover:border-gold-400/50 hover:bg-gold-400/10"}`,children:"Sister"})]}),E.gender&&S.gender&&s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[s.jsx(sc,{className:"w-4 h-4"}),S.gender]})]}),G("pocCode","POC Verification Code","text","Enter POC verification code",x,_=>D("pocCode",_),!0,s.jsx(Sp,{className:"w-4 h-4"})),s.jsxs("div",{className:"text-sm text-white/50 bg-white/5 p-3 rounded-lg border border-white/10",children:[s.jsx("strong",{children:"Note:"})," This code is provided by your organization to verify you are a Point of Contact (POC)."]})]}),G("email","Email","email","hello@example.com",e,_=>D("email",_),!0,s.jsx(ju,{className:"w-4 h-4"})),!i&&s.jsxs("div",{className:"space-y-4",children:[G("password","Password",j?"text":"password","",r,_=>D("password",_),!0,s.jsx(wO,{className:"w-4 h-4"}),s.jsx("button",{type:"button",onClick:()=>k(!j),className:"text-white/40 hover:text-gray-600 transition-colors",children:j?s.jsx(Oo,{className:"w-4 h-4"}):s.jsx(Do,{className:"w-4 h-4"})})),a&&s.jsx("div",{className:"text-sm text-white/50",children:"Password must be at least 6 characters long"})]}),!i&&!a&&s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("button",{type:"button",onClick:()=>l(!0),className:"text-sm text-gold-400 hover:text-gold-300 hover:underline font-medium",children:"Forgot password?"})}),s.jsx(H,{type:"submit",className:"w-full h-11 bg-gold-400 hover:bg-gold-300 text-navy-900 font-medium rounded-lg shadow-lg button-glow transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:v,children:v?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Processing..."})]}):s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{children:i?"Send Reset Link":a?"Create Account":"Sign In"}),s.jsx(m_,{className:"w-4 h-4"})]})})]})}),s.jsx("div",{className:"text-center space-y-4",children:i?s.jsxs("div",{className:"text-sm text-white/50",children:["Remember your password?"," ",s.jsx("button",{type:"button",onClick:()=>l(!1),className:"text-gold-400 hover:text-gold-300 hover:underline font-medium",children:"Sign in here"})]}):a?s.jsxs("div",{className:"text-sm text-white/50",children:["Already have an account?"," ",s.jsx("button",{type:"button",onClick:()=>o(!1),className:"text-gold-400 hover:text-gold-300 hover:underline font-medium",children:"Sign in here"})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-white/50",children:["New to volunteering at the UMMA?"," ",s.jsx("button",{type:"button",onClick:()=>o(!0),className:"text-gold-400 hover:text-gold-300 hover:underline font-medium",children:"Create an account"})]}),s.jsx("div",{className:"text-sm text-white/50",children:s.jsx("button",{type:"button",onClick:()=>l(!0),className:"text-gold-400 hover:text-gold-300 hover:underline font-medium",children:"Forgot your password?"})})]})})]})]})})]})},R9=()=>{const e=Xr(),{toast:t}=Qt(),[r,n]=h.useState("Finalizing sign-in"),a=async()=>{try{const{data:o,error:i}=await K.auth.getUser();if(i||!(o!=null&&o.user))return;const l=o.user,c=l.user_metadata||{},d=c.phone,u=c.full_name||"",m=c.gender||null,p=l.email||null;if(!d)return;const{error:f}=await K.from("contacts").upsert([{name:u,phone:d,email:p,gender:m,source:"account_signup",user_id:l.id,role:"poc",updated_at:new Date().toISOString()}],{onConflict:"phone"});f&&console.error("ensurePocContact upsert error:",f)}catch(o){console.error("ensurePocContact unexpected error:",o)}};return h.useEffect(()=>{(async()=>{try{const i=(window.location.hash||"").includes("access_token="),c=new URL(window.location.href).searchParams.get("redirect")||"/dashboard";if(i){n("Verifying your session");const d=window.location.hash.startsWith("#")?window.location.hash.substring(1):window.location.hash,u=new URLSearchParams(d),m=u.get("access_token"),p=u.get("refresh_token");if(m&&p){const{error:f}=await K.auth.setSession({access_token:m,refresh_token:p});if(f)throw f;window.history.replaceState(null,document.title,window.location.pathname+window.location.search),await a(),t({title:"Welcome",description:"You're signed in."}),e(c,{replace:!0});return}t({title:"Link no longer valid",description:"That sign-in link may have been used already or expired. Please sign in again."}),e("/login?notice=link_expired",{replace:!0});return}else{n("Exchanging verification code");const{data:d,error:u}=await K.auth.exchangeCodeForSession(window.location.href);if(u)throw u;if(d!=null&&d.session){await a(),t({title:"Welcome",description:"You're signed in."}),e(c,{replace:!0});return}t({title:"Link no longer valid",description:"That sign-in link was already used or has expired. Please sign in again."}),e("/login?notice=link_expired",{replace:!0});return}n("We couldn't complete sign-in. Redirecting to login"),setTimeout(()=>e("/login",{replace:!0}),1200)}catch(i){console.error("Auth callback error:",i);const l=String((i==null?void 0:i.message)||"").toLowerCase();if(l.includes("auth code")&&l.includes("code verifier")){t({title:"Link no longer valid",description:"That sign-in link was already used or has expired. Please sign in again."}),e("/login?notice=link_expired",{replace:!0});return}t({title:"Sign-in failed",description:"We couldn't complete sign-in. Please try again.",variant:"destructive"}),e("/login?notice=invalid_callback",{replace:!0})}})()},[e,t]),s.jsx("div",{className:"min-h-screen flex items-center justify-center px-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-6 h-6 mx-auto mb-3 border-2 border-gray-300 border-t-[#5c5b2f] rounded-full animate-spin"}),s.jsx("div",{className:"text-gray-700 mb-2",children:r}),s.jsxs("div",{className:"text-sm text-gray-500",children:["If this takes more than a few seconds,",s.jsx("button",{className:"ml-1 text-[#5c5b2f] underline",onClick:()=>e("/login",{replace:!0}),children:"continue to login"}),"."]})]})})},O9=()=>{const[e,t]=h.useState(""),[r,n]=h.useState(""),[a,o]=h.useState(!1),[i,l]=h.useState(!1),[c,d]=h.useState(""),u=Xr(),[m]=b1(),{toast:p}=Qt(),f=(()=>{try{return new URL(window.location.href).searchParams.get("redirect")||"/dashboard"}catch{return"/dashboard"}})();h.useEffect(()=>{const g=m.get("access_token"),x=m.get("refresh_token");if(!g||!x){d("Invalid password reset link. Please request a new one.");return}(async()=>{const{error:v}=await K.auth.setSession({access_token:g,refresh_token:x});v&&(console.error("Session error:",v),d("Invalid or expired password reset link. Please request a new one."))})()},[m]);const y=async g=>{if(g.preventDefault(),e!==r){d("Passwords do not match");return}if(e.length<6){d("Password must be at least 6 characters long");return}o(!0),d("");try{const{error:x}=await K.auth.updateUser({password:e});x?(console.error("Password update error:",x),d(x.message)):(l(!0),p({title:"Password Updated",description:"Your password has been successfully updated. You can now sign in with your new password."}),setTimeout(()=>{u(f,{replace:!0})},1500))}catch(x){console.error("Password reset error:",x),d("An unexpected error occurred. Please try again.")}finally{o(!1)}};return c&&!m.get("access_token")?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-slate-50 to-stone-100 flex items-center justify-center p-4",children:s.jsxs(Pe,{className:"w-full max-w-md border-umma-200 bg-white/90 backdrop-blur-sm shadow-xl",children:[s.jsxs($t,{className:"space-y-1 text-center",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(sc,{className:"w-6 h-6 text-red-600"})}),s.jsx(Lt,{className:"text-2xl text-umma-800",children:"Invalid Link"}),s.jsx(Wr,{className:"text-umma-600",children:c})]}),s.jsx(Ae,{className:"text-center",children:s.jsx(H,{onClick:()=>u("/login"),className:"bg-gradient-to-r from-umma-500 to-umma-600 hover:from-umma-600 hover:to-umma-700 text-white",children:"Return to Login"})})]})}):i?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-slate-50 to-stone-100 flex items-center justify-center p-4",children:s.jsx(Pe,{className:"w-full max-w-md border-umma-200 bg-white/90 backdrop-blur-sm shadow-xl",children:s.jsxs($t,{className:"space-y-1 text-center",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Ti,{className:"w-6 h-6 text-green-600"})}),s.jsx(Lt,{className:"text-2xl text-umma-800",children:"Password Updated!"}),s.jsx(Wr,{className:"text-umma-600",children:"Your password has been successfully updated. Redirecting you to login..."})]})})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-slate-50 to-stone-100 flex items-center justify-center p-4",children:[s.jsxs("div",{className:"absolute top-8 left-8 flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-umma-400 to-umma-600 rounded-xl flex items-center justify-center shadow-lg",children:s.jsx(v_,{className:"w-6 h-6 text-white"})}),s.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-umma-600 to-umma-800 bg-clip-text text-transparent",children:"EasyEvent"})]}),s.jsxs(Pe,{className:"w-full max-w-md border-umma-200 bg-white/90 backdrop-blur-sm shadow-xl",children:[s.jsxs($t,{className:"space-y-1 text-center",children:[s.jsx(Lt,{className:"text-2xl text-umma-800",children:"Set New Password"}),s.jsx(Wr,{className:"text-umma-600",children:"Enter your new password below"})]}),s.jsxs(Ae,{children:[s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"password",className:"text-umma-800",children:"New Password"}),s.jsx(ue,{id:"password",type:"password",placeholder:"Enter your new password",value:e,onChange:g=>t(g.target.value),required:!0,className:"border-umma-200 focus:border-umma-400",minLength:6})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(te,{htmlFor:"confirmPassword",className:"text-umma-800",children:"Confirm New Password"}),s.jsx(ue,{id:"confirmPassword",type:"password",placeholder:"Confirm your new password",value:r,onChange:g=>n(g.target.value),required:!0,className:"border-umma-200 focus:border-umma-400",minLength:6})]}),c&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-600",children:c})}),s.jsx(H,{type:"submit",className:"w-full bg-gradient-to-r from-umma-500 to-umma-600 hover:from-umma-600 hover:to-umma-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",disabled:a,children:a?"Updating Password...":"Update Password"})]}),s.jsx("div",{className:"mt-6 text-center text-sm",children:s.jsx("button",{type:"button",onClick:()=>u("/login"),className:"text-umma-600 hover:text-umma-700 hover:underline font-medium",children:"Back to Login"})})]})]})]})},D9=()=>{const e=Yi();return h.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},A9=new t5,I9=()=>s.jsx(n5,{client:A9,children:s.jsxs(kI,{children:[s.jsx("div",{className:"stars-bg","aria-hidden":"true"}),s.jsx(dD,{}),s.jsx(zD,{}),s.jsx(eM,{children:s.jsxs(Q5,{children:[s.jsx(Er,{path:"/",element:s.jsx(RF,{})}),s.jsx(Er,{path:"/login",element:s.jsx(P9,{})}),s.jsx(Er,{path:"/auth/callback",element:s.jsx(R9,{})}),s.jsx(Er,{path:"/reset-password",element:s.jsx(O9,{})}),s.jsx(Er,{path:"/dashboard",element:s.jsx(H6,{})}),s.jsx(Er,{path:"/events/create",element:s.jsx(ub,{})}),s.jsx(Er,{path:"/events/:eventId/edit",element:s.jsx(ub,{})}),s.jsx(Er,{path:"/:slug/checkin",element:s.jsx(r9,{})}),s.jsx(Er,{path:"/:eventSlug",element:s.jsx(j9,{})}),s.jsx(Er,{path:"/templates",element:s.jsx(N9,{})}),s.jsx(Er,{path:"/recently-deleted",element:s.jsx(_9,{})}),s.jsx(Er,{path:"/contacts",element:s.jsx(fV,{})}),s.jsx(Er,{path:"/settings",element:s.jsx(T9,{})}),s.jsx(Er,{path:"*",element:s.jsx(D9,{})})]})})]})});BN(document.getElementById("root")).render(s.jsx(I9,{}));
